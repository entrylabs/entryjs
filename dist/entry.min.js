Entry={block:{},TEXT_ALIGN_CENTER:0,TEXT_ALIGN_LEFT:1,TEXT_ALIGN_RIGHT:2,TEXT_ALIGNS:["center","left","right"],clipboard:null,loadProject:function(c){c||(c=Entry.getStartProject(Entry.mediaFilePath));"workspace"==this.type&&Entry.stateManager.startIgnore();Entry.projectId=c._id;Entry.variableContainer.setVariables(c.variables);Entry.variableContainer.setMessages(c.messages);Entry.scene.addScenes(c.scenes);Entry.stage.initObjectContainers();Entry.variableContainer.setFunctions(c.functions);Entry.container.setObjects(c.objects);
Entry.FPS=c.speed?c.speed:60;createjs.Ticker.setFPS(Entry.FPS);Entry.engine.projectTimer||Entry.variableContainer.generateTimer();0===Object.keys(Entry.container.inputValue).length&&Entry.variableContainer.generateAnswer();Entry.start();Entry.Loader.isLoaded()&&Entry.Loader.handleLoad();"workspace"==this.type&&Entry.stateManager.endIgnore();c.interface&&Entry.options.loadInterface&&Entry.loadInterfaceState(c.interface);window.parent&&window.parent.childIframeLoaded&&window.parent.childIframeLoaded();
return c},clearProject:function(){Entry.stop();Entry.projectId=null;Entry.variableContainer.clear();Entry.container.clear();Entry.scene.clear()},exportProject:function(c){c||(c={});Entry.engine.isState("stop")||Entry.engine.toggleStop();Entry.Func&&Entry.Func.workspace&&Entry.Func.workspace.visible&&Entry.Func.cancelEdit();c.objects=Entry.container.toJSON();c.scenes=Entry.scene.toJSON();c.variables=Entry.variableContainer.getVariableJSON();c.messages=Entry.variableContainer.getMessageJSON();c.functions=
Entry.variableContainer.getFunctionJSON();c.scenes=Entry.scene.toJSON();c.speed=Entry.FPS;c.interface=Entry.captureInterfaceState();return c},setBlockByText:function(c,b){c=[];b=jQuery.parseXML(b).getElementsByTagName("category");for(var d=0;d<b.length;d++){for(var e=b[d],f={category:e.getAttribute("id"),blocks:[]},e=e.childNodes,g=0;g<e.length;g++){var h=e[g];!h.tagName||"BLOCK"!=h.tagName.toUpperCase()&&"BTN"!=h.tagName.toUpperCase()||f.blocks.push(h.getAttribute("type"))}c.push(f)}Entry.playground.setBlockMenu(c)},
setBlock:function(c,b){Entry.playground.setMenuBlock(c,b)},enableArduino:function(){},initSound:function(c){c.path=c.fileurl?c.fileurl:Entry.defaultPath+"/uploads/"+c.filename.substring(0,2)+"/"+c.filename.substring(2,4)+"/"+c.filename+c.ext;Entry.soundQueue.loadFile({id:c.id,src:c.path,type:createjs.LoadQueue.SOUND})},beforeUnload:function(c){Entry.hw.closeConnection();Entry.variableContainer.updateCloudVariables();if("workspace"==Entry.type&&(localStorage&&Entry.interfaceState&&localStorage.setItem("workspace-interface",
JSON.stringify(Entry.captureInterfaceState())),!Entry.stateManager.isSaved()))return Lang.Workspace.project_changed},captureInterfaceState:function(){var c=JSON.parse(JSON.stringify(Entry.interfaceState)),b=Entry.playground;"workspace"==Entry.type&&b&&b.object&&(c.object=b.object.id);return c},loadInterfaceState:function(c){"workspace"==Entry.type&&(c?Entry.container.selectObject(c.object,!0):localStorage&&localStorage.getItem("workspace-interface")?(c=localStorage.getItem("workspace-interface"),
c=JSON.parse(c)):c={menuWidth:280,canvasWidth:480},this.resizeElement(c))},resizeElement:function(c){var b=Entry.getMainWS();if(b){c||(c=this.interfaceState);if("workspace"==Entry.type){var d=this.interfaceState;!c.canvasWidth&&d.canvasWidth&&(c.canvasWidth=d.canvasWidth);!c.menuWidth&&this.interfaceState.menuWidth&&(c.menuWidth=d.menuWidth);Entry.engine.speedPanelOn&&Entry.engine.toggleSpeedPanel();(d=c.canvasWidth)?325>d?d=325:720<d&&(d=720):d=400;c.canvasWidth=d;var e=9*d/16;Entry.engine.view_.style.width=
d+"px";Entry.engine.view_.style.height=e+"px";Entry.engine.view_.style.top="40px";Entry.stage.canvas.canvas.style.width=d+"px";400<=d?Entry.engine.view_.removeClass("collapsed"):Entry.engine.view_.addClass("collapsed");Entry.playground.view_.style.left=d+.5+"px";Entry.propertyPanel.resize(d);var f=Entry.engine.view_.getElementsByClassName("entryAddButtonWorkspace_w")[0];f&&(Entry.objectAddable?(f.style.top=e+25+"px",f.style.width=.7*d+"px"):f.style.display="none");if(f=Entry.engine.view_.getElementsByClassName("entryRunButtonWorkspace_w")[0])Entry.objectAddable?
(f.style.top=e+25+"px",f.style.left=.7*d+"px",f.style.width=.3*d+"px"):(f.style.left="2px",f.style.top=e+25+"px",f.style.width=d-4+"px");if(f=Entry.engine.view_.getElementsByClassName("entryStopButtonWorkspace_w")[0])Entry.objectAddable?(f.style.top=e+25+"px",f.style.left=.7*d+"px",f.style.width=.3*d+"px"):(f.style.left="2px",f.style.top=e+25+"px",f.style.width=d+"px");(d=c.menuWidth)?244>d?d=244:400<d&&(d=400):d=264;c.menuWidth=d;b=b.blockMenu;e=b.hasCategory()?-64:0;$(".blockMenuContainer").css({width:d+
e+"px"});$(".blockMenuContainer>svg").css({width:d+e+"px"});b.setWidth();$(".entryWorkspaceBoard").css({left:d+"px"});Entry.playground.resizeHandle_.style.left=d+"px";Entry.playground.variableViewWrapper_.style.width=d+"px";this.interfaceState=c}Entry.windowResized.notify()}},getUpTime:function(){return(new Date).getTime()-this.startTime},addActivity:function(c){Entry.stateManager&&Entry.stateManager.addActivity(c)},startActivityLogging:function(){Entry.reporter&&Entry.reporter.start(Entry.projectId,
window.user?window.user._id:null,Entry.startTime)},getActivityLog:function(){var c={};Entry.stateManager&&(c.activityLog=Entry.stateManager.activityLog_);return c},DRAG_MODE_NONE:0,DRAG_MODE_MOUSEDOWN:1,DRAG_MODE_DRAG:2,cancelObjectEdit:function(c){var b=Entry.playground.object;if(b){var d=c.target,e=0!==$(b.view_).find(d).length,d=d.tagName.toUpperCase();c=c.type;!b.isEditing||"INPUT"===d&&e||"touchstart"===c||b.editObjectValues(!1)}},generateFunctionSchema:function(c){c="func_"+c;if(!Entry.block[c]){var b=
function(){};b.prototype=Entry.block.function_general;b=new b;b.changeEvent=new Entry.Event;b.template=Lang.template.function_general;Entry.block[c]=b}},getMainWS:function(){var c;Entry.mainWorkspace?c=Entry.mainWorkspace:Entry.playground&&Entry.playground.mainWorkspace&&(c=Entry.playground.mainWorkspace);return c},getDom:function(c){if(!c)return this.view_;c=JSON.parse(JSON.stringify(c));if(1<c.length)return this[c.shift()].getDom(c)}};window.Entry=Entry;Entry.Albert={PORT_MAP:{leftWheel:0,rightWheel:0,buzzer:0,leftEye:0,rightEye:0,note:0,bodyLed:0,frontLed:0,padWidth:0,padHeight:0},setZero:function(){var c=Entry.Albert.PORT_MAP,b=Entry.hw.sendQueue,d;for(d in c)b[d]=c[d];Entry.hw.update();c=Entry.Albert;c.tempo=60;c.removeAllTimeouts()},monitorTemplate:{imgPath:"hw/albert.png",width:387,height:503,listPorts:{temperature:{name:Lang.Blocks.ALBERT_sensor_temperature,type:"input",pos:{x:0,y:0}},accelerationX:{name:Lang.Blocks.ALBERT_sensor_acceleration_x,
type:"input",pos:{x:0,y:0}},accelerationY:{name:Lang.Blocks.ALBERT_sensor_acceleration_y,type:"input",pos:{x:0,y:0}},accelerationZ:{name:Lang.Blocks.ALBERT_sensor_acceleration_z,type:"input",pos:{x:0,y:0}},frontOid:{name:Lang.Blocks.ALBERT_sensor_front_oid,type:"input",pos:{x:0,y:0}},backOid:{name:Lang.Blocks.ALBERT_sensor_back_oid,type:"input",pos:{x:0,y:0}},positionX:{name:Lang.Blocks.ALBERT_sensor_position_x,type:"input",pos:{x:0,y:0}},positionY:{name:Lang.Blocks.ALBERT_sensor_position_y,type:"input",
pos:{x:0,y:0}},orientation:{name:Lang.Blocks.ALBERT_sensor_orientation,type:"input",pos:{x:0,y:0}},buzzer:{name:Lang.Hw.buzzer,type:"output",pos:{x:0,y:0}},note:{name:Lang.Hw.note,type:"output",pos:{x:0,y:0}}},ports:{leftProximity:{name:Lang.Blocks.ALBERT_sensor_left_proximity,type:"input",pos:{x:178,y:401}},rightProximity:{name:Lang.Blocks.ALBERT_sensor_right_proximity,type:"input",pos:{x:66,y:359}},battery:{name:Lang.Blocks.ALBERT_sensor_battery,type:"input",pos:{x:88,y:368}},light:{name:Lang.Blocks.ALBERT_sensor_light,
type:"input",pos:{x:127,y:391}},leftWheel:{name:Lang.Hw.leftWheel,type:"output",pos:{x:299,y:406}},rightWheel:{name:Lang.Hw.rightWheel,type:"output",pos:{x:22,y:325}},leftEye:{name:Lang.Hw.leftEye,type:"output",pos:{x:260,y:26}},rightEye:{name:Lang.Hw.rightEye,type:"output",pos:{x:164,y:13}},bodyLed:{name:Lang.Hw.body+" "+Lang.Hw.led_en,type:"output",pos:{x:367,y:308}},frontLed:{name:Lang.Hw.front+" "+Lang.Hw.led_en,pos:{x:117,y:410}}},mode:"both"},tempo:60,timeouts:[],removeTimeout:function(c){clearTimeout(c);
var b=this.timeouts;c=b.indexOf(c);0<=c&&b.splice(c,1)},removeAllTimeouts:function(){var c=this.timeouts,b;for(b in c)clearTimeout(c[b]);this.timeouts=[]},controller:{PI:3.14159265,PI2:6.2831853,prevDirection:0,prevDirectionFine:0,directionFineCount:0,positionCount:0,finalPositionCount:0,GAIN_ANGLE:30,GAIN_ANGLE_FINE:30,GAIN_POSITION_FINE:30,STRAIGHT_SPEED:20,MAX_BASE_SPEED:20,GAIN_BASE_SPEED:1,GAIN_POSITION:35,POSITION_TOLERANCE_FINE:3,POSITION_TOLERANCE_FINE_LARGE:5,POSITION_TOLERANCE_ROUGH:5,POSITION_TOLERANCE_ROUGH_LARGE:10,
ORIENTATION_TOLERANCE_FINE:.08,ORIENTATION_TOLERANCE_ROUGH:.09,ORIENTATION_TOLERANCE_ROUGH_LARGE:.18,MINIMUM_WHEEL_SPEED:18,MINIMUM_WHEEL_SPEED_FINE:15,clear:function(){this.finalPositionCount=this.positionCount=this.directionFineCount=this.prevDirectionFine=this.prevDirection=0},controlAngleFine:function(c,b){var d=Entry.hw.sendQueue;c=this.validateRadian(b-c);b=Math.abs(c);if(b<this.ORIENTATION_TOLERANCE_FINE)return!1;var e=0<c?1:-1;if(0>e*this.prevDirectionFine&&5<++this.directionFineCount)return!1;
this.prevDirectionFine=e;0<c?(c=Math.log(1+b)*this.GAIN_ANGLE_FINE,c<this.MINIMUM_WHEEL_SPEED&&(c=this.MINIMUM_WHEEL_SPEED)):(c=-Math.log(1+b)*this.GAIN_ANGLE_FINE,c>-this.MINIMUM_WHEEL_SPEED&&(c=-this.MINIMUM_WHEEL_SPEED));c=parseInt(c);d.leftWheel=-c;d.rightWheel=c;return!0},controlAngle:function(c,b){var d=Entry.hw.sendQueue;c=this.validateRadian(b-c);b=Math.abs(c);if(b<this.ORIENTATION_TOLERANCE_ROUGH)return!1;var e=0<c?1:-1;if(b<this.ORIENTATION_TOLERANCE_ROUGH_LARGE&&0>e*this.prevDirection)return!1;
this.prevDirection=e;0<c?(c=Math.log(1+b)*this.GAIN_ANGLE,c<this.MINIMUM_WHEEL_SPEED&&(c=this.MINIMUM_WHEEL_SPEED)):(c=-Math.log(1+b)*this.GAIN_ANGLE,c>-this.MINIMUM_WHEEL_SPEED&&(c=-this.MINIMUM_WHEEL_SPEED));c=parseInt(c);d.leftWheel=-c;d.rightWheel=c;return!0},controlPositionFine:function(c,b,d,e,f){var g=Entry.hw.sendQueue;d=this.validateRadian(Math.atan2(f-b,e-c)-d);var h=Math.abs(d);c=e-c;b=f-b;b=Math.sqrt(c*c+b*b);if(b<this.POSITION_TOLERANCE_FINE)return!1;if(b<this.POSITION_TOLERANCE_FINE_LARGE&&
5<++this.finalPositionCount)return this.finalPositionCount=0,!1;d=0<d?Math.log(1+h)*this.GAIN_POSITION_FINE:-Math.log(1+h)*this.GAIN_POSITION_FINE;d=parseInt(d);g.leftWheel=this.MINIMUM_WHEEL_SPEED_FINE-d;g.rightWheel=this.MINIMUM_WHEEL_SPEED_FINE+d;return!0},controlPosition:function(c,b,d,e,f){var g=Entry.hw.sendQueue;d=this.validateRadian(Math.atan2(f-b,e-c)-d);var h=Math.abs(d);c=e-c;b=f-b;b=Math.sqrt(c*c+b*b);if(b<this.POSITION_TOLERANCE_ROUGH)return!1;if(b<this.POSITION_TOLERANCE_ROUGH_LARGE){if(10<
++this.positionCount)return this.positionCount=0,!1}else this.positionCount=0;.01>h?(g.leftWheel=this.STRAIGHT_SPEED,g.rightWheel=this.STRAIGHT_SPEED):(b=(this.MINIMUM_WHEEL_SPEED+.5/h)*this.GAIN_BASE_SPEED,b>this.MAX_BASE_SPEED&&(b=this.MAX_BASE_SPEED),d=0<d?Math.log(1+h)*this.GAIN_POSITION:-Math.log(1+h)*this.GAIN_POSITION,b=parseInt(b),d=parseInt(d),g.leftWheel=b-d,g.rightWheel=b+d);return!0},validateRadian:function(c){return c>this.PI?c-this.PI2:c<-this.PI?c+this.PI2:c},toRadian:function(c){return 3.14159265*
c/180}},name:"albert"};Blockly.Blocks.albert_hand_found={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_hand_found);this.setOutput(!0,"Boolean");this.setInputsInline(!0)}};Entry.block.albert_hand_found=function(c,b){c=Entry.hw.portData;return 40<c.leftProximity||40<c.rightProximity};
Blockly.Blocks.albert_is_oid_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_is_oid_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_front_oid,"FRONT"],[Lang.Blocks.ALBERT_back_oid,"BACK"]]),"OID").appendField(Lang.Blocks.ALBERT_is_oid_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_is_oid_3);this.setOutput(!0,"Boolean");this.setInputsInline(!0)}};
Entry.block.albert_is_oid_value=function(c,b){c=Entry.hw.portData;var d=b.getField("OID",b);b=b.getNumberValue("VALUE");return"FRONT"==d?c.frontOid==b:c.backOid==b};
Blockly.Blocks.albert_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_sensor_left_proximity,"leftProximity"],[Lang.Blocks.ALBERT_sensor_right_proximity,"rightProximity"],[Lang.Blocks.ALBERT_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.ALBERT_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.ALBERT_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.ALBERT_sensor_front_oid,"frontOid"],[Lang.Blocks.ALBERT_sensor_back_oid,
"backOid"],[Lang.Blocks.ALBERT_sensor_position_x,"positionX"],[Lang.Blocks.ALBERT_sensor_position_y,"positionY"],[Lang.Blocks.ALBERT_sensor_orientation,"orientation"],[Lang.Blocks.ALBERT_sensor_light,"light"],[Lang.Blocks.ALBERT_sensor_temperature,"temperature"],[Lang.Blocks.ALBERT_sensor_battery,"battery"],[Lang.Blocks.ALBERT_sensor_signal_strength,"signalStrength"]]),"DEVICE");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.albert_value=function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]};
Blockly.Blocks.albert_move_forward_for_secs={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_forward_for_secs_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_forward_for_secs_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_move_forward_for_secs=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=30;c.rightWheel=30;c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},c);Entry.Albert.timeouts.push(d);return b};
Blockly.Blocks.albert_move_backward_for_secs={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_backward_for_secs_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_backward_for_secs_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_move_backward_for_secs=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=-30;c.rightWheel=-30;c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},c);Entry.Albert.timeouts.push(d);return b};
Blockly.Blocks.albert_turn_for_secs={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_turn_for_secs_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_turn_left,"LEFT"],[Lang.Blocks.ALBERT_turn_right,"RIGHT"]]),"DIRECTION").appendField(Lang.Blocks.ALBERT_turn_for_secs_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_turn_for_secs_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_turn_for_secs=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;"LEFT"==b.getField("DIRECTION",b)?(c.leftWheel=-30,c.rightWheel=30):(c.leftWheel=30,c.rightWheel=-30);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},c);Entry.Albert.timeouts.push(d);return b};
Blockly.Blocks.albert_change_both_wheels_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_both_wheels_by_1);this.appendValueInput("LEFT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_both_wheels_by_2);this.appendValueInput("RIGHT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_both_wheels_by_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.albert_change_both_wheels_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("LEFT"),e=b.getNumberValue("RIGHT");c.leftWheel=void 0!=c.leftWheel?c.leftWheel+d:d;c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e;return b.callReturn()};
Blockly.Blocks.albert_set_both_wheels_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_both_wheels_to_1);this.appendValueInput("LEFT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_both_wheels_to_2);this.appendValueInput("RIGHT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_both_wheels_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.albert_set_both_wheels_to=function(c,b){c=Entry.hw.sendQueue;c.leftWheel=b.getNumberValue("LEFT");c.rightWheel=b.getNumberValue("RIGHT");return b.callReturn()};
Blockly.Blocks.albert_change_wheel_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_wheel_by_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_left_wheel,"LEFT"],[Lang.Blocks.ALBERT_right_wheel,"RIGHT"],[Lang.Blocks.ALBERT_both_wheels,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.ALBERT_change_wheel_by_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_wheel_by_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.albert_change_wheel_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=void 0!=c.leftWheel?c.leftWheel+e:e:("RIGHT"!=d&&(c.leftWheel=void 0!=c.leftWheel?c.leftWheel+e:e),c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e);return b.callReturn()};
Blockly.Blocks.albert_set_wheel_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_wheel_to_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_left_wheel,"LEFT"],[Lang.Blocks.ALBERT_right_wheel,"RIGHT"],[Lang.Blocks.ALBERT_both_wheels,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.ALBERT_set_wheel_to_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_wheel_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.albert_set_wheel_to=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=e:("RIGHT"!=d&&(c.leftWheel=e),c.rightWheel=e);return b.callReturn()};
Blockly.Blocks.albert_stop={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_stop).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.albert_stop=function(c,b){c=Entry.hw.sendQueue;c.leftWheel=0;c.rightWheel=0;return b.callReturn()};
Blockly.Blocks.albert_set_pad_size_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_board_size_to_1);this.appendValueInput("WIDTH").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_board_size_to_2);this.appendValueInput("HEIGHT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_board_size_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.albert_set_pad_size_to=function(c,b){c=Entry.hw.sendQueue;c.padWidth=b.getNumberValue("WIDTH");c.padHeight=b.getNumberValue("HEIGHT");return b.callReturn()};
Blockly.Blocks.albert_move_to_x_y_on_board={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_to_x_y_1);this.appendValueInput("X").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_to_x_y_2);this.appendValueInput("Y").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_move_to_x_y_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);
this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_move_to_x_y_on_board=function(c,b){var d=Entry.hw.sendQueue,e=Entry.hw.portData;c=Entry.Albert.controller;if(b.isStart){if(b.isMoving){0<=e.positionX&&(b.x=e.positionX);0<=e.positionY&&(b.y=e.positionY);b.theta=e.orientation;switch(b.boardState){case 1:if(0==b.initialized){if(0>b.x||0>b.y){d.leftWheel=20;d.rightWheel=-20;break}b.initialized=!0}d=c.toRadian(b.theta);0==c.controlAngle(d,Math.atan2(b.targetY-b.y,b.targetX-b.x))&&(b.boardState=2);break;case 2:0==c.controlPosition(b.x,
b.y,c.toRadian(b.theta),b.targetX,b.targetY)&&(b.boardState=3);break;case 3:0==c.controlPositionFine(b.x,b.y,c.toRadian(b.theta),b.targetX,b.targetY)&&(d.leftWheel=0,d.rightWheel=0,b.isMoving=!1)}return b}delete b.isStart;delete b.isMoving;delete b.initialized;delete b.boardState;delete b.x;delete b.y;delete b.theta;delete b.targetX;delete b.targetY;Entry.engine.isContinue=!1;d.leftWheel=0;d.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.initialized=!1;b.boardState=1;b.x=-1;b.y=-1;
b.theta=-200;b.targetX=b.getNumberValue("X");b.targetY=b.getNumberValue("Y");c.clear();d.leftWheel=0;d.rightWheel=0;return b};
Blockly.Blocks.albert_set_orientation_on_board={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_orientation_to_1);this.appendValueInput("ORIENTATION").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_orientation_to_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_set_orientation_on_board=function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData,e=Entry.Albert.controller;if(b.isStart){if(b.isMoving){b.theta=d.orientation;switch(b.boardState){case 1:var d=e.toRadian(b.theta),f=e.toRadian(b.targetTheta);0==e.controlAngle(d,f)&&(b.boardState=2);break;case 2:d=e.toRadian(b.theta),f=e.toRadian(b.targetTheta),0==e.controlAngleFine(d,f)&&(c.leftWheel=0,c.rightWheel=0,b.isMoving=!1)}return b}delete b.isStart;delete b.isMoving;delete b.boardState;
delete b.theta;delete b.targetTheta;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.boardState=1;b.theta=-200;b.targetTheta=b.getNumberValue("ORIENTATION");e.clear();c.leftWheel=0;c.rightWheel=0;return b};
Blockly.Blocks.albert_set_eye_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_eye_to_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_left_eye,"LEFT"],[Lang.Blocks.ALBERT_right_eye,"RIGHT"],[Lang.Blocks.ALBERT_both_eyes,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.ALBERT_set_eye_to_2).appendField(new Blockly.FieldDropdown([[Lang.General.red,"4"],[Lang.General.yellow,"6"],[Lang.General.green,"2"],[Lang.Blocks.ALBERT_color_cyan,
"3"],[Lang.General.blue,"1"],[Lang.Blocks.ALBERT_color_magenta,"5"],[Lang.Blocks.ALBERT_color_white,"7"]]),"COLOR").appendField(Lang.Blocks.ALBERT_set_eye_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_set_eye_to=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b),e=Number(b.getField("COLOR",b));"LEFT"==d?c.leftEye=e:("RIGHT"!=d&&(c.leftEye=e),c.rightEye=e);return b.callReturn()};
Blockly.Blocks.albert_clear_eye={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_clear_eye_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_left_eye,"LEFT"],[Lang.Blocks.ALBERT_right_eye,"RIGHT"],[Lang.Blocks.ALBERT_both_eyes,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.ALBERT_clear_eye_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_clear_eye=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b);"LEFT"==d?c.leftEye=0:("RIGHT"!=d&&(c.leftEye=0),c.rightEye=0);return b.callReturn()};
Blockly.Blocks.albert_body_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_turn_body_led_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_turn_on,"ON"],[Lang.Blocks.ALBERT_turn_off,"OFF"]]),"STATE").appendField(Lang.Blocks.ALBERT_turn_body_led_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_body_led=function(c,b){c=Entry.hw.sendQueue;"ON"==b.getField("STATE",b)?c.bodyLed=1:c.bodyLed=0;return b.callReturn()};
Blockly.Blocks.albert_front_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_turn_front_led_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.ALBERT_turn_on,"ON"],[Lang.Blocks.ALBERT_turn_off,"OFF"]]),"STATE").appendField(Lang.Blocks.ALBERT_turn_front_led_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_front_led=function(c,b){c=Entry.hw.sendQueue;"ON"==b.getField("STATE",b)?c.frontLed=1:c.frontLed=0;return b.callReturn()};Blockly.Blocks.albert_beep={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_beep).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_beep=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.buzzer=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.buzzer=440;c.note=0;var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},200);Entry.Albert.timeouts.push(d);return b};
Blockly.Blocks.albert_change_buzzer_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_buzzer_by_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_buzzer_by_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_change_buzzer_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("VALUE");c.buzzer=void 0!=c.buzzer?c.buzzer+d:d;c.note=0;return b.callReturn()};
Blockly.Blocks.albert_set_buzzer_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_buzzer_to_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_buzzer_to_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_set_buzzer_to=function(c,b){c=Entry.hw.sendQueue;c.buzzer=b.getNumberValue("VALUE");c.note=0;return b.callReturn()};Blockly.Blocks.albert_clear_buzzer={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_clear_buzzer).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_clear_buzzer=function(c,b){c=Entry.hw.sendQueue;c.buzzer=0;c.note=0;return b.callReturn()};
Blockly.Blocks.albert_play_note_for={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_play_note_for_1).appendField(new Blockly.FieldDropdown([[Lang.General.note_c+"","4"],[Lang.General.note_c+"#","5"],[Lang.General.note_d+"","6"],[Lang.General.note_e+"b","7"],[Lang.General.note_e+"","8"],[Lang.General.note_f+"","9"],[Lang.General.note_f+"#","10"],[Lang.General.note_g+"","11"],[Lang.General.note_g+"#","12"],[Lang.General.note_a+"","13"],[Lang.General.note_b+
"b","14"],[Lang.General.note_b+"","15"]]),"NOTE").appendField(Lang.Blocks.ALBERT_play_note_for_2).appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]),"OCTAVE").appendField(Lang.Blocks.ALBERT_play_note_for_3);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_play_note_for_4).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);
this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_play_note_for=function(c,b){var d=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;d.note=0;return b.callReturn()}c=b.getNumberField("NOTE",b);var e=b.getNumberField("OCTAVE",b),f=6E4*b.getNumberValue("VALUE",b)/Entry.Albert.tempo;b.isStart=!0;b.timeFlag=1;d.buzzer=0;d.note=c+12*(e-1);if(100<f){var g=setTimeout(function(){d.note=0;Entry.Albert.removeTimeout(g)},f-100);Entry.Albert.timeouts.push(g)}var h=setTimeout(function(){b.timeFlag=
0;Entry.Albert.removeTimeout(h)},f);Entry.Albert.timeouts.push(h);return b};Blockly.Blocks.albert_rest_for={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_rest_for_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_rest_for_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_rest_for=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;return b.callReturn()}b.isStart=!0;b.timeFlag=1;var d=b.getNumberValue("VALUE"),d=6E4*d/Entry.Albert.tempo;c.buzzer=0;c.note=0;var e=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(e)},d);Entry.Albert.timeouts.push(e);return b};
Blockly.Blocks.albert_change_tempo_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_tempo_by_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_change_tempo_by_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_change_tempo_by=function(c,b){Entry.Albert.tempo+=b.getNumberValue("VALUE");1>Entry.Albert.tempo&&(Entry.Albert.tempo=1);return b.callReturn()};
Blockly.Blocks.albert_set_tempo_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_tempo_to_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ALBERT_set_tempo_to_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.albert_set_tempo_to=function(c,b){Entry.Albert.tempo=b.getNumberValue("VALUE");1>Entry.Albert.tempo&&(Entry.Albert.tempo=1);return b.callReturn()};Entry.Arduino={name:"arduino",setZero:function(){Entry.hw.sendQueue.readablePorts=[];for(var c=0;20>c;c++)Entry.hw.sendQueue[c]=0,Entry.hw.sendQueue.readablePorts.push(c);Entry.hw.update()},monitorTemplate:{imgPath:"hw/arduino.png",width:605,height:434,listPorts:{2:{name:Lang.Hw.port_en+" 2 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},3:{name:Lang.Hw.port_en+" 3 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},4:{name:Lang.Hw.port_en+" 4 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},5:{name:Lang.Hw.port_en+
" 5 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},6:{name:Lang.Hw.port_en+" 6 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},7:{name:Lang.Hw.port_en+" 7 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},8:{name:Lang.Hw.port_en+" 8 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},9:{name:Lang.Hw.port_en+" 9 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},10:{name:Lang.Hw.port_en+" 10 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},11:{name:Lang.Hw.port_en+" 11 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},12:{name:Lang.Hw.port_en+
" 12 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},13:{name:Lang.Hw.port_en+" 13 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a0:{name:Lang.Hw.port_en+" A0 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a1:{name:Lang.Hw.port_en+" A1 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a2:{name:Lang.Hw.port_en+" A2 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a3:{name:Lang.Hw.port_en+" A3 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a4:{name:Lang.Hw.port_en+" A4 "+Lang.Hw.port_ko,type:"input",pos:{x:0,
y:0}},a5:{name:Lang.Hw.port_en+" A5 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}}},mode:"both"}};
Entry.ArduinoExt={name:"ArduinoExt",setZero:function(){Entry.hw.sendQueue.SET?Object.keys(Entry.hw.sendQueue.SET).forEach(function(c){Entry.hw.sendQueue.SET[c].data=0;Entry.hw.sendQueue.SET[c].time=(new Date).getTime()}):Entry.hw.sendQueue={GET:{},SET:{}};Entry.hw.update()},sensorTypes:{ALIVE:0,DIGITAL:1,ANALOG:2,PWM:3,SERVO_PIN:4,TONE:5,PULSEIN:6,ULTRASONIC:7,TIMER:8},toneTable:{0:0,C:1,CS:2,D:3,DS:4,E:5,F:6,FS:7,G:8,GS:9,A:10,AS:11,B:12},toneMap:{1:[33,65,131,262,523,1046,2093,4186],2:[35,69,139,
277,554,1109,2217,4435],3:[37,73,147,294,587,1175,2349,4699],4:[39,78,156,311,622,1245,2849,4978],5:[41,82,165,330,659,1319,2637,5274],6:[44,87,175,349,698,1397,2794,5588],7:[46,92,185,370,740,1480,2960,5920],8:[49,98,196,392,784,1568,3136,6272],9:[52,104,208,415,831,1661,3322,6645],10:[55,110,220,440,880,1760,3520,7040],11:[58,117,233,466,932,1865,3729,7459],12:[62,123,247,494,988,1976,3951,7902]},highList:["high","1","on"],lowList:["low","0","off"],BlockState:{}};
Entry.DaduBlock={name:"dadublock",setZero:function(){Entry.hw.sendQueue.SET?Object.keys(Entry.hw.sendQueue.SET).forEach(function(c){Entry.hw.sendQueue.SET[c].data=0;Entry.hw.sendQueue.SET[c].time=(new Date).getTime()}):Entry.hw.sendQueue={GET:{},SET:{}};Entry.hw.update()},sensorTypes:{ALIVE:0,DIGITAL:1,ANALOG:2,PWM:3,SERVO_PIN:4,TONE:5,PULSEIN:6,ULTRASONIC:7,TIMER:8},toneMap:{1:[33,65,131,262,523,1046,2093,4186],2:[35,69,139,277,554,1109,2217,4435],3:[37,73,147,294,587,1175,2349,4699],4:[39,78,156,
311,622,1245,2849,4978],5:[41,82,165,330,659,1319,2637,5274],6:[44,87,175,349,698,1397,2794,5588],7:[46,92,185,370,740,1480,2960,5920],8:[49,98,196,392,784,1568,3136,6272],9:[52,104,208,415,831,1661,3322,6645],10:[55,110,220,440,880,1760,3520,7040],11:[58,117,233,466,932,1865,3729,7459],12:[62,123,247,494,988,1976,3951,7902]},BlockState:{}};
Entry.SmartBoard={name:"smartBoard",setZero:function(){Entry.hw.sendQueue.readablePorts=[];for(var c=0;20>c;c++)if(9!=c||10!=c||11!=c)Entry.hw.sendQueue[c]=0,Entry.hw.sendQueue.readablePorts.push(c);Entry.hw.update()},monitorTemplate:{listPorts:{2:{name:Lang.Hw.port_en+" GS2 ",type:"output",pos:{x:0,y:0}},3:{name:Lang.Hw.port_en+" GS1 ",type:"output",pos:{x:0,y:0}},4:{name:Lang.Hw.port_en+" MT1 \ud68c\uc804 \ubc29\ud5a5 ",type:"output",pos:{x:0,y:0}},5:{name:Lang.Hw.port_en+" MT1 PWM ",type:"output",
pos:{x:0,y:0}},6:{name:Lang.Hw.port_en+" MT2 PWM ",type:"output",pos:{x:0,y:0}},7:{name:Lang.Hw.port_en+" MT2 \ud68c\uc804 \ubc29\ud5a5 ",type:"output",pos:{x:0,y:0}},8:{name:Lang.Hw.port_en+" RELAY ",type:"output",pos:{x:0,y:0}},9:{name:Lang.Hw.port_en+" SM3 \uac01\ub3c4 ",type:"output",pos:{x:0,y:0}},10:{name:Lang.Hw.port_en+" SM2 \uac01\ub3c4 ",type:"output",pos:{x:0,y:0}},11:{name:Lang.Hw.port_en+"SM1 \uac01\ub3c4 ",type:"output",pos:{x:0,y:0}},12:{name:Lang.Hw.port_en+" \ube68\uac04 "+Lang.Hw.button,
type:"input",pos:{x:0,y:0}},13:{name:Lang.Hw.port_en+" \ub178\ub780 "+Lang.Hw.button,type:"input",pos:{x:0,y:0}},14:{name:Lang.Hw.port_en+" \ucd08\ub85d "+Lang.Hw.button,type:"input",pos:{x:0,y:0}},15:{name:Lang.Hw.port_en+" \ud30c\ub780 "+Lang.Hw.button,type:"input",pos:{x:0,y:0}},a2:{name:Lang.Hw.port_en+" 1\ubc88 "+Lang.Hw.sensor,type:"input",pos:{x:0,y:0}},a3:{name:Lang.Hw.port_en+" 2\ubc88 "+Lang.Hw.sensor,type:"input",pos:{x:0,y:0}},a4:{name:Lang.Hw.port_en+" 3\ubc88 "+Lang.Hw.sensor,type:"input",
pos:{x:0,y:0}},a5:{name:Lang.Hw.port_en+" 4\ubc88 "+Lang.Hw.sensor,type:"input",pos:{x:0,y:0}}},mode:"both"}};Entry.SensorBoard={name:"sensorBoard",setZero:Entry.Arduino.setZero};Entry.ardublock={name:"ardublock",setZero:Entry.Arduino.setZero};
Entry.dplay={name:"dplay",vel_value:255,Left_value:255,Right_value:255,setZero:Entry.Arduino.setZero,timeouts:[],removeTimeout:function(c){clearTimeout(c);var b=this.timeouts;c=b.indexOf(c);0<=c&&b.splice(c,1)},removeAllTimeouts:function(){var c=this.timeouts,b;for(b in c)clearTimeout(c[b]);this.timeouts=[]},monitorTemplate:{imgPath:"hw/dplay.png",width:500,height:600,listPorts:{2:{name:Lang.Hw.port_en+" 2 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},3:{name:Lang.Hw.port_en+" 3 "+Lang.Hw.port_ko,
type:"input",pos:{x:0,y:0}},4:{name:Lang.Hw.port_en+" 4 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},5:{name:Lang.Hw.port_en+" 5 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},6:{name:Lang.Hw.port_en+" 6 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},7:{name:Lang.Hw.port_en+" 7 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},8:{name:Lang.Hw.port_en+" 8 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},9:{name:Lang.Hw.port_en+" 9 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},10:{name:Lang.Hw.port_en+" 10 "+
Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},11:{name:Lang.Hw.port_en+" 11 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},12:{name:Lang.Hw.port_en+" 12 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},13:{name:Lang.Hw.port_en+" 13 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a0:{name:Lang.Hw.port_en+" A0 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a1:{name:Lang.Hw.port_en+" A1 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a2:{name:Lang.Hw.port_en+" A2 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a3:{name:Lang.Hw.port_en+
" A3 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a4:{name:Lang.Hw.port_en+" A4 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},a5:{name:Lang.Hw.port_en+" A5 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}}},mode:"both"}};Entry.nemoino={name:"nemoino",setZero:Entry.Arduino.setZero};Entry.joystick={name:"joystick",setZero:Entry.Arduino.setZero};
Entry.CODEino={name:"CODEino",getSensorKey:function(){return"xxxxxxxx".replace(/[xy]/g,function(c){var b=16*Math.random()|0;return("x"==c?b:b&0|0).toString(16)}).toUpperCase()},getSensorTime:function(c){return(new Date).getTime()+c},monitorTemplate:Entry.Arduino.monitorTemplate,setZero:function(){Entry.hw.sendQueue.SET?Object.keys(Entry.hw.sendQueue.SET).forEach(function(c){Entry.hw.sendQueue.SET[c].data=0;Entry.hw.sendQueue.TIME=Entry.CODEino.getSensorTime(Entry.hw.sendQueue.SET[c].type);Entry.hw.sendQueue.KEY=
Entry.CODEino.getSensorKey()}):Entry.hw.sendQueue={SET:{0:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},1:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},2:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},3:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},4:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},5:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},6:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},7:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},8:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},
9:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},10:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},11:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},12:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0},13:{type:Entry.CODEino.sensorTypes.DIGITAL,data:0}},TIME:Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.DIGITAL),KEY:Entry.CODEino.getSensorKey()};Entry.hw.update()},sensorTypes:{ALIVE:0,DIGITAL:1,ANALOG:2,PWM:3,RGBLED_PIN:4,TONE:5,PULSEIN:6,ULTRASONIC:7,TIMER:8,ADDCOLOR:9},BlockState:{}};
Blockly.Blocks.arduino_text={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldTextInput("Arduino"),"NAME");this.setOutput(!0,"String");this.setInputsInline(!0)}};Entry.block.arduino_text=function(c,b){return b.getStringField("NAME")};
Blockly.Blocks.arduino_send={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_arduino_send_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_arduino_send_2);this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.arduino_send=function(c,b){c=b.getValue("VALUE",b);var d=new XMLHttpRequest;d.open("POST","http://localhost:23518/arduino/",!1);d.send(String(c));Entry.assert(200==d.status,"arduino is not connected");return b.callReturn()};
Blockly.Blocks.arduino_get_string={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_arduino_get_string_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_arduino_get_string_2);this.setOutput(!0,"String");this.setInputsInline(!0)}};
Entry.block.arduino_get_number=function(c,b){c=b.getValue("VALUE",b);b=new XMLHttpRequest;b.open("POST","http://localhost:23518/arduino/",!1);b.send(String(c));Entry.assert(200==b.status,"arduino is not connected");return Number(b.responseText)};
Blockly.Blocks.arduino_get_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_arduino_get_number_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_arduino_get_number_2);this.setOutput(!0,"Number");this.setInputsInline(!0)}};
Entry.block.arduino_get_string=function(c,b){c=b.getValue("VALUE",b);b=new XMLHttpRequest;b.open("POST","http://localhost:23518/arduino/",!1);b.send(String(c));Entry.assert(200==b.status,"arduino is not connected");return b.responseText};
Blockly.Blocks.arduino_get_sensor_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.ARDUINO_arduino_get_sensor_number_0,"A0"],[Lang.Blocks.ARDUINO_arduino_get_sensor_number_1,"A1"],[Lang.Blocks.ARDUINO_arduino_get_sensor_number_2,"A2"],[Lang.Blocks.ARDUINO_arduino_get_sensor_number_3,"A3"],[Lang.Blocks.ARDUINO_arduino_get_sensor_number_4,"A4"],[Lang.Blocks.ARDUINO_arduino_get_sensor_number_5,"A5"]]),"PORT");this.appendDummyInput().appendField(" ");
this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.arduino_get_sensor_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.arduino_get_port_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.arduino_get_port_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.arduino_get_pwm_port_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.arduino_get_pwm_port_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.arduino_get_number_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_num_sensor_value_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_num_sensor_value_2).appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.arduino_get_number_sensor_value=function(c,b){c=b.getValue("VALUE",b);return Entry.hw.getAnalogPortValue(c[1])};
Blockly.Blocks.arduino_get_digital_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_get_digital_value_1);this.appendValueInput("VALUE").setCheck("Number");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_num_sensor_value_2).appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};Entry.block.arduino_get_digital_value=function(c,b){c=b.getNumberValue("VALUE",b);return Entry.hw.getDigitalPortValue(c)};
Blockly.Blocks.arduino_toggle_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_num_pin_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_num_pin_2);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));
this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.arduino_toggle_led=function(c,b){c=b.getNumberValue("VALUE");var d=b.getField("OPERATOR");Entry.hw.setDigitalPortValue(c,"on"==d?255:0);return b.callReturn()};
Blockly.Blocks.arduino_toggle_pwm={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_toggle_pwm_1);this.appendValueInput("PORT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_toggle_pwm_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_toggle_pwm_3);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.arduino_toggle_pwm=function(c,b){c=b.getNumberValue("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255);Entry.hw.setDigitalPortValue(c,d);return b.callReturn()};
Blockly.Blocks.arduino_convert_scale={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_1);this.appendValueInput("VALUE1").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_2);this.appendValueInput("VALUE2").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_3);this.appendValueInput("VALUE3").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_4);
this.appendValueInput("VALUE4").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_5);this.appendValueInput("VALUE5").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_6);this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};
Entry.block.arduino_convert_scale=function(c,b){var d=b.getNumberValue("VALUE1",b),e=b.getNumberValue("VALUE2",b),f=b.getNumberValue("VALUE3",b);c=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(e>f)var g=e,e=f,f=g;c>b&&(g=c,c=b,b=g);d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)};
Blockly.Blocks.sensorBoard_get_named_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["\uc18c\ub9ac","0"],["\ube5b \uac10\uc9c0","1"],["\uc2ac\ub77c\uc774\ub354","2"],["\uc628\ub3c4","3"]]),"PORT").appendField(" \uc13c\uc11c\uac12");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.sensorBoard_get_named_sensor_value=function(c,b){return Entry.hw.getAnalogPortValue(b.getField("PORT",b))};
Blockly.Blocks.sensorBoard_is_button_pressed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["\ube68\uac04","8"],["\ud30c\ub780","9"],["\ub178\ub780","10"],["\ucd08\ub85d","11"]]),"PORT");this.appendDummyInput().appendField(" \ubc84\ud2bc\uc744 \ub20c\ub800\ub294\uac00?");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.sensorBoard_is_button_pressed=function(c,b){return Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b))};
Blockly.Blocks.sensorBoard_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["\ube68\uac04","2"],["\ucd08\ub85d","3"],["\ud30c\ub780","4"],["\ud770\uc0c9","5"]]),"PORT").appendField(" LED").appendField(new Blockly.FieldDropdown([["\ucf1c\uae30","255"],["\ub044\uae30","0"]]),"OPERATOR").appendField(" ").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);
this.setNextStatement(!0)}};Entry.block.sensorBoard_led=function(c,b){Entry.hw.setDigitalPortValue(b.getField("PORT"),b.getNumberField("OPERATOR"));return b.callReturn()};Entry.block.arduino_download_connector={skeleton:"basic_button",color:"#eee",template:"%1",params:[{type:"Text",text:"\uc5f0\uacb0 \ud504\ub85c\uadf8\ub7a8 \ub2e4\uc6b4\ub85c\ub4dc",color:"#333",align:"center"}],func:function(){},events:{mousedown:[function(){console.log("download connector")}]}};
Entry.block.download_guide={skeleton:"basic_button",color:"#eee",template:"%1",params:[{type:"Text",text:"\uc5f0\uacb0 \uc548\ub0b4 \ub2e4\uc6b4\ub85c\ub4dc",color:"#333",align:"center"}],func:function(){},events:{mousedown:[function(){console.log("download guide")}]}};Entry.block.arduino_download_source={skeleton:"basic_button",color:"#eee",template:"%1",params:[{type:"Text",text:"\uc5d4\ud2b8\ub9ac \uc544\ub450\uc774\ub178 \uc18c\uc2a4",color:"#333",align:"center"}],func:function(){},events:{mousedown:[function(){console.log("download source")}]}};
Entry.block.arduino_connected={skeleton:"basic_button",color:"#eee",template:"%1",params:[{type:"Text",text:"\uc5f0\uacb0 \ub428",color:"#333",align:"center"}],func:function(){},events:{mousedown:[function(){console.log("download source")}]}};Entry.block.arduino_reconnect={skeleton:"basic_button",color:"#eee",template:"%1",params:[{type:"Text",text:"\ub2e4\uc2dc \uc5f0\uacb0\ud558\uae30",color:"#333",align:"center"}],func:function(){},events:{mousedown:[function(){console.log("download source")}]}};
Blockly.Blocks.CODEino_get_sensor_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_get_sensor_number_0,"A0"],[Lang.Blocks.CODEino_get_sensor_number_1,"A1"],[Lang.Blocks.CODEino_get_sensor_number_2,"A2"],[Lang.Blocks.CODEino_get_sensor_number_3,"A3"],[Lang.Blocks.CODEino_get_sensor_number_4,"A4"],[Lang.Blocks.CODEino_get_sensor_number_5,"A5"],[Lang.Blocks.CODEino_get_sensor_number_6,"A6"]]),"PORT");this.appendDummyInput().appendField(" ");
this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.CODEino_get_sensor_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.CODEino_get_named_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(" ").appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_sensor_name_0,"0"],[Lang.Blocks.CODEino_sensor_name_1,"1"],[Lang.Blocks.CODEino_sensor_name_2,"2"],[Lang.Blocks.CODEino_sensor_name_3,"3"],[Lang.Blocks.CODEino_sensor_name_4,"4"],[Lang.Blocks.CODEino_sensor_name_5,"5"],[Lang.Blocks.CODEino_sensor_name_6,"6"]]),"PORT").appendField(Lang.Blocks.CODEino_string_1);
this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.CODEino_get_named_sensor_value=function(c,b){return Entry.hw.getAnalogPortValue(b.getField("PORT",b))};
Blockly.Blocks.CODEino_get_sound_status={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.CODEino_string_10).appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_string_11,"GREAT"],[Lang.Blocks.CODEino_string_12,"SMALL"]]),"STATUS").appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.CODEino_get_sound_status=function(c,b){return"GREAT"==b.getField("STATUS",b)?600<Entry.hw.getAnalogPortValue(0)?1:0:600>Entry.hw.getAnalogPortValue(0)?1:0};
Blockly.Blocks.CODEino_get_light_status={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.CODEino_string_13).appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_string_14,"BRIGHT"],[Lang.Blocks.CODEino_string_15,"DARK"]]),"STATUS").appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.CODEino_get_light_status=function(c,b){return"DARK"==b.getField("STATUS",b)?800<Entry.hw.getAnalogPortValue(1)?1:0:800>Entry.hw.getAnalogPortValue(1)?1:0};
Blockly.Blocks.CODEino_is_button_pressed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.CODEino_string_2).appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_string_3,"4"],[Lang.Blocks.CODEino_string_4,"17"],[Lang.Blocks.CODEino_string_5,"18"],[Lang.Blocks.CODEino_string_6,"19"],[Lang.Blocks.CODEino_string_7,"20"]]),"PORT").appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.CODEino_is_button_pressed=function(c,b){c=b.getNumberField("PORT",b);return 14<c?!Entry.hw.getAnalogPortValue(c-14):!Entry.hw.getDigitalPortValue(c)};
Blockly.Blocks.CODEino_get_accelerometer_direction={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.CODEino_string_8).appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_string_16,"LEFT"],[Lang.Blocks.CODEino_string_17,"RIGHT"],[Lang.Blocks.CODEino_string_18,"FRONT"],[Lang.Blocks.CODEino_string_19,"REAR"],[Lang.Blocks.CODEino_string_20,"REVERSE"]]),"DIRECTION");this.appendDummyInput().appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.CODEino_get_accelerometer_direction=function(c,b){c=b.getField("DIRECTION",b);b=0;"LEFT"==c||"RIGHT"==c?b=3:"FRONT"==c||"REAR"==c?b=4:"REVERSE"==c&&(b=5);b=Entry.hw.getAnalogPortValue(b)-265;b=Math.min(90,180/137*b+-90);b=Math.max(-90,b);b=Math.round(b);if("LEFT"==c||"REAR"==c)return-30>b?1:0;if("RIGHT"==c||"FRONT"==c)return 30<b?1:0;if("REVERSE"==c)return-50>b?1:0};
Blockly.Blocks.CODEino_get_accelerometer_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.CODEino_string_8).appendField(new Blockly.FieldDropdown([[Lang.Blocks.CODEino_accelerometer_X,"3"],[Lang.Blocks.CODEino_accelerometer_Y,"4"],[Lang.Blocks.CODEino_accelerometer_Z,"5"]]),"PORT").appendField(Lang.Blocks.CODEino_string_9);this.setOutput(!0,"Number");this.setInputsInline(!0)}};
Entry.block.CODEino_get_accelerometer_value=function(c,b){var d=Entry.hw.getAnalogPortValue(b.getField("PORT",b)),e=265,f=402;c=-90;b=90;if(e>f)var g=e,e=f,f=g;c>b&&(g=c,c=b,b=g);d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)};
Blockly.Blocks.dplay_select_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_num_pin_1);this.appendDummyInput().appendField(new Blockly.FieldDropdown([["7","7"],["8","8"],["9","9"],["10","10"]]),"PORT");this.appendDummyInput().appendField(Lang.Blocks.dplay_num_pin_1);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.dplay_select_led=function(c,b){var d=b.getField("PORT");c=7;"7"==d?c=7:"8"==d?c=8:"9"==d?c=9:"10"==d&&(c=10);d=b.getField("OPERATOR");Entry.hw.setDigitalPortValue(c,"on"==d?255:0);return b.callReturn()};
Blockly.Blocks.dplay_get_switch_status={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ub514\uc9c0\ud138 ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["2","2"],["4","4"]]),"PORT");this.appendDummyInput().appendField(Lang.Blocks.dplay_num_pin_2).appendField(new Blockly.FieldDropdown([[Lang.Blocks.dplay_string_5,"ON"],[Lang.Blocks.dplay_string_6,"OFF"]]),"STATUS").appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.dplay_get_switch_status=function(c,b){c=b.getField("PORT");var d=2;"2"==c?d=2:"4"==c&&(d=4);return"OFF"==b.getField("STATUS")?1==Entry.hw.getDigitalPortValue(d)?1:0:0==Entry.hw.getDigitalPortValue(d)?1:0};
Blockly.Blocks.dplay_get_light_status={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.dplay_light).appendField(new Blockly.FieldDropdown([[Lang.Blocks.dplay_string_3,"BRIGHT"],[Lang.Blocks.dplay_string_4,"DARK"]]),"STATUS").appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.dplay_get_light_status=function(c,b){return"DARK"==b.getField("STATUS",b)?800<Entry.hw.getAnalogPortValue(1)?1:0:800>Entry.hw.getAnalogPortValue(1)?1:0};
Blockly.Blocks.dplay_get_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.dplay_num_pin_3);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField("\ubc88 ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["\uac00\ubcc0\uc800\ud56d","ADJU"],["\ube5b\uc13c\uc11c","LIGHT"],["\uc628\ub3c4\uc13c\uc11c","TEMP"],["\uc870\uc774\uc2a4\ud2f1 X","JOYS"],["\uc870\uc774\uc2a4\ud2f1 Y","JOYS"],["\uc801\uc678\uc120",
"INFR"]]),"OPERATOR");this.appendDummyInput().appendField(Lang.Blocks.dplay_num_pin_5);this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.dplay_get_value=function(c,b){c=b.getValue("VALUE",b);return Entry.hw.getAnalogPortValue(c[1])};
Blockly.Blocks.dplay_get_tilt={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.dplay_tilt).appendField(new Blockly.FieldDropdown([["\uc67c\ucabd \uae30\uc6b8\uc784","LEFT"],["\uc624\ub978\ucabd \uae30\uc6b8\uc784","LIGHT"]]),"STATUS").appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.dplay_get_tilt=function(c,b){return"LIGHT"==b.getField("STATUS",b)?1==Entry.hw.getDigitalPortValue(12)?1:0:0==Entry.hw.getDigitalPortValue(12)?1:0};
Blockly.Blocks.dplay_DCmotor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["\uc67c\ucabd","3"],["\uc624\ub978\ucabd","6"]]),"PORT");this.appendDummyInput().appendField(" DC\ubaa8\ud130 \uc0c1\ud0dc\ub97c");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["\uc815\ubc29\ud5a5","FRONT"],["\uc5ed\ubc29\ud5a5","REAR"],["\uc815\uc9c0","OFF"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.dplay_DCmotor=function(c,b){c=b.getField("PORT");var d=0;"3"==c?d=5:"6"==c&&(d=11);var e=b.getField("OPERATOR"),f=0,g=0;"FRONT"==e?(f=255,g=0):"REAR"==e?(f=0,g=255):"OFF"==e&&(g=f=0);Entry.hw.setDigitalPortValue(c,f);Entry.hw.setDigitalPortValue(d,g);return b.callReturn()};
Blockly.Blocks.dplay_buzzer={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ubd80\uc800\ub97c ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["\ub3c4","1"],["\ub808","2"],["\ubbf8","3"]]),"PORT");this.appendDummyInput().appendField("\ub85c");this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField("\ubc15\uc790\ub85c \uc5f0\uc8fc\ud558\uae30");this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.dplay_buzzer=function(c,b){var d=b.getField("PORT");c=2;"1"==d?c=2:"2"==d?c=4:"3"==d&&(c=7);d=b.getNumberValue("VALUE");d=Math.round(d);d=Math.max(d,0);d=Math.min(d,100);Entry.hw.setDigitalPortValue(c,d);return b.callReturn()};
Blockly.Blocks.dplay_servo={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc11c\ubcf4\ubaa8\ud130 \uac01\ub3c4\ub97c");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("\ub85c \uc774\ub3d9");this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.dplay_servo=function(c,b){c=b.getNumberValue("VALUE");c=Math.round(c);c=Math.max(c,0);c=Math.min(c,180);Entry.hw.setDigitalPortValue(9,c);return b.callReturn()};Entry.Bitbrick={SENSOR_MAP:{1:"light",2:"IR",3:"touch",4:"potentiometer",5:"MIC",21:"UserSensor",11:"UserInput",20:"LED",19:"SERVO",18:"DC"},PORT_MAP:{buzzer:2,5:4,6:6,7:8,8:10,LEDR:12,LEDG:14,LEDB:16},sensorList:function(){for(var c=[],b=Entry.hw.portData,d=1;5>d;d++){var e=b[d];e&&(e.value||0===e.value)&&c.push([d+" - "+Lang.Blocks["BITBRICK_"+e.type],d.toString()])}return 0==c.length?[[Lang.Blocks.no_target,"null"]]:c},touchList:function(){for(var c=[],b=Entry.hw.portData,d=1;5>d;d++){var e=b[d];
e&&"touch"===e.type&&c.push([d.toString(),d.toString()])}return 0==c.length?[[Lang.Blocks.no_target,"null"]]:c},servoList:function(){for(var c=[],b=Entry.hw.portData,d=5;9>d;d++){var e=b[d];e&&"SERVO"===e.type&&c.push(["ABCD"[d-5],d.toString()])}return 0==c.length?[[Lang.Blocks.no_target,"null"]]:c},dcList:function(){for(var c=[],b=Entry.hw.portData,d=5;9>d;d++){var e=b[d];e&&"DC"===e.type&&c.push(["ABCD"[d-5],d.toString()])}return 0==c.length?[[Lang.Blocks.no_target,"null"]]:c},setZero:function(){var c=
Entry.hw.sendQueue,b;for(b in Entry.Bitbrick.PORT_MAP)c[b]=0;Entry.hw.update()},name:"bitbrick",servoMaxValue:181,servoMinValue:1,dcMaxValue:100,dcMinValue:-100,monitorTemplate:{keys:["value"],imgPath:"hw/bitbrick.png",width:400,height:400,listPorts:{1:{name:Lang.Hw.port_en+" 1 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},2:{name:Lang.Hw.port_en+" 2 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},3:{name:Lang.Hw.port_en+" 3 "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},4:{name:Lang.Hw.port_en+" 4 "+
Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},A:{name:Lang.Hw.port_en+" A "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},B:{name:Lang.Hw.port_en+" B "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},C:{name:Lang.Hw.port_en+" C "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}},D:{name:Lang.Hw.port_en+" D "+Lang.Hw.port_ko,type:"input",pos:{x:0,y:0}}},mode:"both"}};
Blockly.Blocks.bitbrick_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdownDynamic(Entry.Bitbrick.sensorList),"PORT").appendField(" \uac12");this.setOutput(!0,"String");this.setInputsInline(!0)}};Entry.block.bitbrick_sensor_value=function(c,b){c=b.getStringField("PORT");return Entry.hw.portData[c].value};
Blockly.Blocks.bitbrick_is_touch_pressed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.BITBRICK_touch).appendField(new Blockly.FieldDropdownDynamic(Entry.Bitbrick.touchList),"PORT").appendField("\uc774(\uac00) \ub20c\ub838\ub294\uac00?");this.setOutput(!0,"Boolean");this.setInputsInline(!0)}};Entry.block.bitbrick_is_touch_pressed=function(c,b){return 0===Entry.hw.portData[b.getStringField("PORT")].value};
Blockly.Blocks.bitbrick_turn_off_color_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uceec\ub7ec LED \ub044\uae30").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.bitbrick_turn_off_color_led=function(c,b){Entry.hw.sendQueue.LEDR=0;Entry.hw.sendQueue.LEDG=0;Entry.hw.sendQueue.LEDB=0;return b.callReturn()};
Blockly.Blocks.bitbrick_turn_on_color_led_by_rgb={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uceec\ub7ec LED \ucf1c\uae30 R");this.appendValueInput("rValue").setCheck(["Number","String"]);this.appendDummyInput().appendField("G");this.appendValueInput("gValue").setCheck(["Number","String"]);this.appendDummyInput().appendField("B");this.appendValueInput("bValue").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.bitbrick_turn_on_color_led_by_rgb=function(c,b){c=b.getNumberValue("rValue");var d=b.getNumberValue("gValue"),e=b.getNumberValue("bValue"),f=Entry.adjustValueWithMaxMin,g=Entry.hw.sendQueue;g.LEDR=f(c,0,255);g.LEDG=f(d,0,255);g.LEDB=f(e,0,255);return b.callReturn()};
Blockly.Blocks.bitbrick_turn_on_color_led_by_picker={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uceec\ub7ec LED \uc0c9 ").appendField(new Blockly.FieldColour("#ff0000"),"VALUE").appendField("\ub85c \uc815\ud558\uae30").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.bitbrick_turn_on_color_led_by_picker=function(c,b){c=b.getStringField("VALUE");Entry.hw.sendQueue.LEDR=parseInt(c.substr(1,2),16);Entry.hw.sendQueue.LEDG=parseInt(c.substr(3,2),16);Entry.hw.sendQueue.LEDB=parseInt(c.substr(5,2),16);return b.callReturn()};
Blockly.Blocks.bitbrick_turn_on_color_led_by_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uceec\ub7ec LED \ucf1c\uae30 \uc0c9");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("\ub85c \uc815\ud558\uae30").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.bitbrick_turn_on_color_led_by_value=function(c,b){c=b.getNumberValue("VALUE");var d,e,f;c%=200;67>c?(d=200-3*c,e=3*c,f=0):134>c?(c-=67,d=0,e=200-3*c,f=3*c):201>c&&(c-=134,d=3*c,e=0,f=200-3*c);Entry.hw.sendQueue.LEDR=d;Entry.hw.sendQueue.LEDG=e;Entry.hw.sendQueue.LEDB=f;return b.callReturn()};
Blockly.Blocks.bitbrick_buzzer={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ubc84\uc800\uc74c ");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("\ub0b4\uae30").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.bitbrick_buzzer=function(c,b){if(b.isStart)return Entry.hw.sendQueue.buzzer=0,delete b.isStart,b.callReturn();c=b.getNumberValue("VALUE");Entry.hw.sendQueue.buzzer=c;b.isStart=!0;return b};
Blockly.Blocks.bitbrick_turn_off_all_motors={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ubaa8\ub4e0 \ubaa8\ud130 \ub044\uae30").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.bitbrick_turn_off_all_motors=function(c,b){var d=Entry.hw.sendQueue;c=Entry.Bitbrick;c.servoList().map(function(b){d[b[1]]=0});c.dcList().map(function(b){d[b[1]]=128});return b.callReturn()};
Blockly.Blocks.bitbrick_dc_speed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("DC \ubaa8\ud130").appendField(new Blockly.FieldDropdownDynamic(Entry.Bitbrick.dcList),"PORT").appendField(" \uc18d\ub3c4");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0)}};
Entry.block.bitbrick_dc_speed=function(c,b){c=b.getNumberValue("VALUE");c=Math.min(c,Entry.Bitbrick.dcMaxValue);c=Math.max(c,Entry.Bitbrick.dcMinValue);Entry.hw.sendQueue[b.getStringField("PORT")]=c+128;return b.callReturn()};
Blockly.Blocks.bitbrick_dc_direction_speed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("DC \ubaa8\ud130").appendField(new Blockly.FieldDropdownDynamic(Entry.Bitbrick.dcList),"PORT").appendField(" ").appendField(new Blockly.FieldDropdown([[Lang.Blocks.BITBRICK_dc_direction_cw,"CW"],[Lang.Blocks.BITBRICK_dc_direction_ccw,"CCW"]]),"DIRECTION").appendField(" \ubc29\ud5a5").appendField(" \uc18d\ub825");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setPreviousStatement(!0);this.setNextStatement(!0);this.setInputsInline(!0)}};Entry.block.bitbrick_dc_direction_speed=function(c,b){c="CW"===b.getStringField("DIRECTION");var d=b.getNumberValue("VALUE"),d=Math.min(d,Entry.Bitbrick.dcMaxValue),d=Math.max(d,0);Entry.hw.sendQueue[b.getStringField("PORT")]=c?d+128:128-d;return b.callReturn()};
Blockly.Blocks.bitbrick_servomotor_angle={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc11c\ubcf4 \ubaa8\ud130").appendField(new Blockly.FieldDropdownDynamic(Entry.Bitbrick.servoList),"PORT").appendField(" \uac01\ub3c4");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setPreviousStatement(!0);this.setNextStatement(!0);
this.setInputsInline(!0)}};Entry.block.bitbrick_servomotor_angle=function(c,b){c=b.getNumberValue("VALUE")+1;c=Math.min(c,Entry.Bitbrick.servoMaxValue);c=Math.max(c,Entry.Bitbrick.servoMinValue);Entry.hw.sendQueue[b.getStringField("PORT")]=c;return b.callReturn()};
Blockly.Blocks.bitbrick_convert_scale={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ubcc0\ud658");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdownDynamic(Entry.Bitbrick.sensorList),"PORT");this.appendDummyInput().appendField("\uac12");this.appendValueInput("VALUE2").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_3);this.appendValueInput("VALUE3").setCheck(["Number","String",null]);
this.appendDummyInput().appendField("\uc5d0\uc11c");this.appendValueInput("VALUE4").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.ARDUINO_convert_scale_5);this.appendValueInput("VALUE5").setCheck(["Number","String",null]);this.setOutput(!0,"Number");this.setInputsInline(!0)}};
Entry.block.bitbrick_convert_scale=function(c,b){c=b.getNumberField("PORT");var d=Entry.hw.portData[c].value,e=b.getNumberValue("VALUE2",b),f=b.getNumberValue("VALUE3",b);c=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(c>b){var g=c;c=b;b=g}d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)};Entry.byrobot_dronefighter_controller={name:"byrobot_dronefighter_controller",setZero:function(){for(var c=0;1>c;c++)this.transferVibrator(0,0,0,0),this.transferbuzzer(0,0,0),this.transferLightManual(17,255,0),this.transferCommand(17,129,0)},monitorTemplate:{imgPath:"hw/byrobot_dronefighter_controller.png",width:500,height:500,listPorts:{joystick_left_x:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_x,type:"input",pos:{x:0,y:0}},joystick_left_y:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_y,
type:"input",pos:{x:0,y:0}},joystick_left_direction:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_direction,type:"input",pos:{x:0,y:0}},joystick_left_event:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_event,type:"input",pos:{x:0,y:0}},joystick_left_command:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_command,type:"input",pos:{x:0,y:0}},joystick_right_x:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_x,type:"input",pos:{x:0,y:0}},
joystick_right_y:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_y,type:"input",pos:{x:0,y:0}},joystick_right_direction:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_direction,type:"input",pos:{x:0,y:0}},joystick_right_event:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_event,type:"input",pos:{x:0,y:0}},joystick_right_command:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_command,type:"input",pos:{x:0,y:0}},button_button:{name:Lang.Blocks.byrobot_dronefighter_controller_button_button,
type:"input",pos:{x:0,y:0}},button_event:{name:Lang.Blocks.byrobot_dronefighter_controller_button_event,type:"input",pos:{x:0,y:0}},entryhw_countTransferReserved:{name:Lang.Blocks.byrobot_dronefighter_entryhw_count_transfer_reserved,type:"output",pos:{x:0,y:0}}},ports:{},mode:"both"},checkFinish:function(c,b){if(c.isStart){if(1==c.timeFlag)return"Running";delete c.timeFlag;delete c.isStart;Entry.engine.isContinue=!1;return"Finish"}c.isStart=!0;c.timeFlag=1;setTimeout(function(){c.timeFlag=0},60/(Entry.FPS||
60)*b);return"Start"},transferLightManual:function(c,b,d){c=Math.max(c,0);c=Math.min(c,255);b=Math.max(b,0);b=Math.min(b,255);d=Math.max(d,0);d=Math.min(d,255);Entry.hw.setDigitalPortValue("target",c);Entry.hw.setDigitalPortValue("light_manual_flags",b);Entry.hw.setDigitalPortValue("light_manual_brightness",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.light_manual_flags;delete Entry.hw.sendQueue.light_manual_brightness},transferbuzzer:function(c,b,d){Entry.hw.setDigitalPortValue("target",
17);Entry.hw.setDigitalPortValue("buzzer_mode",c);Entry.hw.setDigitalPortValue("buzzer_value",b);Entry.hw.setDigitalPortValue("buzzer_time",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.buzzer_mode;delete Entry.hw.sendQueue.buzzer_value;delete Entry.hw.sendQueue.buzzer_time},transferVibrator:function(c,b,d,e){b=Math.max(b,1);b=Math.min(b,6E4);d=Math.max(d,1);d=Math.min(d,6E4);Entry.hw.setDigitalPortValue("target",17);Entry.hw.setDigitalPortValue("vibrator_mode",c);
Entry.hw.setDigitalPortValue("vibrator_on",b);Entry.hw.setDigitalPortValue("vibrator_off",d);Entry.hw.setDigitalPortValue("vibrator_total",e);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.vibrator_mode;delete Entry.hw.sendQueue.vibrator_on;delete Entry.hw.sendQueue.vibrator_off;delete Entry.hw.sendQueue.vibrator_total},transferCommand:function(c,b,d){Entry.hw.setDigitalPortValue("target",c);Entry.hw.setDigitalPortValue("command_command",b);Entry.hw.setDigitalPortValue("command_option",
d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.command_command;delete Entry.hw.sendQueue.command_option},transferUserInterface:function(c,b){Entry.hw.setDigitalPortValue("target",17);Entry.hw.setDigitalPortValue("userinterface_command",c);Entry.hw.setDigitalPortValue("userinterface_function",b);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.userinterface_command;delete Entry.hw.sendQueue.userinterface_function},getData:function(c,b){return Entry.hw.portData[b]},
setLightManual:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferLightManual(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerStop:function(c){switch(this.checkFinish(c,40)){case "Start":return this.transferbuzzer(0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerMute:function(c,b,d,e){b=Math.max(b,0);b=Math.min(b,6E4);var f=40;d&&(f=b);switch(this.checkFinish(c,
f)){case "Start":return d=2,e&&(d=1),this.transferbuzzer(d,238,b),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerScale:function(c,b,d,e,f,g){e=Math.max(e,0);e=Math.min(e,6E4);var h=40;f&&(h=e);switch(this.checkFinish(c,h)){case "Start":return f=4,g&&(f=3),this.transferbuzzer(f,12*b+d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerHz:function(c,b,d,e,f){d=Math.max(d,0);d=Math.min(d,6E4);
var g=40;e&&(g=d);switch(this.checkFinish(c,g)){case "Start":return e=6,f&&(e=5),b=Math.max(b,1),b=Math.min(b,63999),this.transferbuzzer(e,b,d),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setVibratorStop:function(c){switch(this.checkFinish(c,40)){case "Start":return this.transferVibrator(0,0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setVibrator:function(c,b,d,e,f,g){e=Math.max(e,0);e=Math.min(e,
6E4);var h=40;f&&(h=e);switch(this.checkFinish(c,h)){case "Start":return f=2,g&&(f=1),this.transferVibrator(f,b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},sendCommand:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferCommand(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setUserInterface:function(c,b,d){switch(this.checkFinish(c,40)){case "Start":return this.transferUserInterface(b,
d),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}}};Entry.byrobot_dronefighter_drive={name:"byrobot_dronefighter_drive",setZero:function(){for(var c=0;1>c;c++)this.transferCommand(16,36,0),this.transferVibrator(0,0,0,0),this.transferbuzzer(0,0,0),this.transferLightManual(16,255,0),this.transferLightManual(17,255,0)},monitorTemplate:{imgPath:"hw/byrobot_dronefighter_drive.png",width:500,height:500,listPorts:{state_modeVehicle:{name:Lang.Blocks.byrobot_dronefighter_drone_state_mode_vehicle,type:"input",pos:{x:0,y:0}},state_modeDrive:{name:Lang.Blocks.byrobot_dronefighter_drone_state_mode_drive,
type:"input",pos:{x:0,y:0}},state_battery:{name:Lang.Blocks.byrobot_dronefighter_drone_state_battery,type:"input",pos:{x:0,y:0}},attitude_roll:{name:Lang.Blocks.byrobot_dronefighter_drone_attitude_roll,type:"input",pos:{x:0,y:0}},attitude_pitch:{name:Lang.Blocks.byrobot_dronefighter_drone_attitude_pitch,type:"input",pos:{x:0,y:0}},attitude_yaw:{name:Lang.Blocks.byrobot_dronefighter_drone_attitude_yaw,type:"input",pos:{x:0,y:0}},irmessage_irdata:{name:Lang.Blocks.byrobot_dronefighter_drone_irmessage,
type:"input",pos:{x:0,y:0}},joystick_left_x:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_x,type:"input",pos:{x:0,y:0}},joystick_left_y:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_y,type:"input",pos:{x:0,y:0}},joystick_left_direction:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_direction,type:"input",pos:{x:0,y:0}},joystick_left_event:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_event,type:"input",pos:{x:0,y:0}},joystick_left_command:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_command,
type:"input",pos:{x:0,y:0}},joystick_right_x:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_x,type:"input",pos:{x:0,y:0}},joystick_right_y:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_y,type:"input",pos:{x:0,y:0}},joystick_right_direction:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_direction,type:"input",pos:{x:0,y:0}},joystick_right_event:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_event,type:"input",pos:{x:0,y:0}},joystick_right_command:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_command,
type:"input",pos:{x:0,y:0}},button_button:{name:Lang.Blocks.byrobot_dronefighter_controller_button_button,type:"input",pos:{x:0,y:0}},button_event:{name:Lang.Blocks.byrobot_dronefighter_controller_button_event,type:"input",pos:{x:0,y:0}},entryhw_countTransferReserved:{name:Lang.Blocks.byrobot_dronefighter_entryhw_count_transfer_reserved,type:"output",pos:{x:0,y:0}}},ports:{},mode:"both"},checkFinish:function(c,b){if(c.isStart){if(1==c.timeFlag)return"Running";delete c.timeFlag;delete c.isStart;Entry.engine.isContinue=
!1;return"Finish"}c.isStart=!0;c.timeFlag=1;setTimeout(function(){c.timeFlag=0},60/(Entry.FPS||60)*b);return"Start"},transferLightManual:function(c,b,d){c=Math.max(c,0);c=Math.min(c,255);b=Math.max(b,0);b=Math.min(b,255);d=Math.max(d,0);d=Math.min(d,255);Entry.hw.setDigitalPortValue("target",c);Entry.hw.setDigitalPortValue("light_manual_flags",b);Entry.hw.setDigitalPortValue("light_manual_brightness",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.light_manual_flags;
delete Entry.hw.sendQueue.light_manual_brightness},transferbuzzer:function(c,b,d){Entry.hw.setDigitalPortValue("target",17);Entry.hw.setDigitalPortValue("buzzer_mode",c);Entry.hw.setDigitalPortValue("buzzer_value",b);Entry.hw.setDigitalPortValue("buzzer_time",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.buzzer_mode;delete Entry.hw.sendQueue.buzzer_value;delete Entry.hw.sendQueue.buzzer_time},transferVibrator:function(c,b,d,e){b=Math.max(b,1);b=Math.min(b,6E4);d=
Math.max(d,1);d=Math.min(d,6E4);Entry.hw.setDigitalPortValue("target",17);Entry.hw.setDigitalPortValue("vibrator_mode",c);Entry.hw.setDigitalPortValue("vibrator_on",b);Entry.hw.setDigitalPortValue("vibrator_off",d);Entry.hw.setDigitalPortValue("vibrator_total",e);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.vibrator_mode;delete Entry.hw.sendQueue.vibrator_on;delete Entry.hw.sendQueue.vibrator_off;delete Entry.hw.sendQueue.vibrator_total},transferIrMessage:function(c){c=
Math.max(c,0);c=Math.min(c,127);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("irmessage_data",c);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.irmessage_data},transferMotorSingle:function(c,b,d){d=Math.max(d,0);d=Math.min(d,4096);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("motorsingle_target",c);Entry.hw.setDigitalPortValue("motorsingle_direction",b);Entry.hw.setDigitalPortValue("motorsingle_value",d);Entry.hw.update();
delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.motorsingle_target;delete Entry.hw.sendQueue.motorsingle_direction;delete Entry.hw.sendQueue.motorsingle_value},transferCommand:function(c,b,d){Entry.hw.setDigitalPortValue("target",c);Entry.hw.setDigitalPortValue("command_command",b);Entry.hw.setDigitalPortValue("command_option",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.command_command;delete Entry.hw.sendQueue.command_option},transferControlDouble:function(c,
b){c=Math.max(c,-100);c=Math.min(c,100);b=Math.max(b,0);b=Math.min(b,100);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("control_wheel",c);Entry.hw.setDigitalPortValue("control_accel",b);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.control_wheel;delete Entry.hw.sendQueue.control_accel},transferControlQuad:function(c,b,d,e){c=Math.max(c,-100);c=Math.min(c,100);b=Math.max(b,-100);b=Math.min(b,100);d=Math.max(d,-100);d=Math.min(d,100);e=Math.max(e,
-100);e=Math.min(e,100);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("control_roll",c);Entry.hw.setDigitalPortValue("control_pitch",b);Entry.hw.setDigitalPortValue("control_yaw",d);Entry.hw.setDigitalPortValue("control_throttle",e);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.control_roll;delete Entry.hw.sendQueue.control_pitch;delete Entry.hw.sendQueue.control_yaw;delete Entry.hw.sendQueue.control_throttle},getData:function(c,b){return Entry.hw.portData[b]},
setLightManual:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferLightManual(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerStop:function(c){switch(this.checkFinish(c,40)){case "Start":return this.transferbuzzer(0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerMute:function(c,b,d,e){b=Math.max(b,0);b=Math.min(b,6E4);var f=40;d&&(f=b);switch(this.checkFinish(c,
f)){case "Start":return d=2,e&&(d=1),this.transferbuzzer(d,238,b),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerScale:function(c,b,d,e,f,g){e=Math.max(e,0);e=Math.min(e,6E4);var h=40;f&&(h=e);switch(this.checkFinish(c,h)){case "Start":return f=4,g&&(f=3),this.transferbuzzer(f,12*b+d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerHz:function(c,b,d,e,f){d=Math.max(d,0);d=Math.min(d,6E4);
var g=40;e&&(g=d);switch(this.checkFinish(c,g)){case "Start":return e=6,f&&(e=5),b=Math.max(b,1),b=Math.min(b,63999),this.transferbuzzer(e,b,d),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setVibratorStop:function(c){switch(this.checkFinish(c,40)){case "Start":return this.transferVibrator(0,0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setVibrator:function(c,b,d,e,f,g){e=Math.max(e,0);e=Math.min(e,
6E4);var h=40;f&&(h=e);switch(this.checkFinish(c,h)){case "Start":return f=2,g&&(f=1),this.transferVibrator(f,b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},sendIrMessage:function(c,b){switch(this.checkFinish(c,40)){case "Start":return this.transferIrMessage(b),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},sendStop:function(c){return this.sendCommand(c,16,36,0)},sendCommand:function(c,b,d,e){switch(this.checkFinish(c,
40)){case "Start":return this.transferCommand(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setMotorSingle:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferMotorSingle(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setModeVehicle:function(c,b){switch(this.checkFinish(c,40)){case "Start":return this.transferCommand(16,16,b),this.transferControlDouble(0,0),this.transferControlQuad(0,
0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},sendControlDoubleSingle:function(c,b,d,e,f){var g=40;f&&(g=e);switch(this.checkFinish(c,g)){case "Start":switch(b){case "control_wheel":d=Math.max(d,-100);d=Math.min(d,100);break;case "control_accel":d=Math.max(d,0),d=Math.min(d,100)}Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue(b,d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue[b];return c;case "Running":return c;
case "Finish":return f&&(Entry.hw.setDigitalPortValue("target",16),Entry.hw.setDigitalPortValue(b,0),Entry.hw.update(),delete Entry.hw.sendQueue.target,delete Entry.hw.sendQueue[b]),c.callReturn();default:return c.callReturn()}},sendControlDouble:function(c,b,d,e,f){var g=40;f&&(g=e);switch(this.checkFinish(c,g)){case "Start":return this.transferControlDouble(b,d),c;case "Running":return c;case "Finish":return f&&this.transferControlDouble(0,0),c.callReturn();default:return c.callReturn()}}};Entry.byrobot_dronefighter_flight={name:"byrobot_dronefighter_flight",setZero:function(){for(var c=0;1>c;c++)this.transferCommand(16,36,0),this.transferVibrator(0,0,0,0),this.transferbuzzer(0,0,0),this.transferLightManual(16,255,0),this.transferLightManual(17,255,0)},monitorTemplate:{imgPath:"hw/byrobot_dronefighter_flight.png",width:500,height:500,listPorts:{state_modeVehicle:{name:Lang.Blocks.byrobot_dronefighter_drone_state_mode_vehicle,type:"input",pos:{x:0,y:0}},state_modeFlight:{name:Lang.Blocks.byrobot_dronefighter_drone_state_mode_flight,
type:"input",pos:{x:0,y:0}},state_coordinate:{name:Lang.Blocks.byrobot_dronefighter_drone_state_mode_coordinate,type:"input",pos:{x:0,y:0}},state_battery:{name:Lang.Blocks.byrobot_dronefighter_drone_state_battery,type:"input",pos:{x:0,y:0}},attitude_roll:{name:Lang.Blocks.byrobot_dronefighter_drone_attitude_roll,type:"input",pos:{x:0,y:0}},attitude_pitch:{name:Lang.Blocks.byrobot_dronefighter_drone_attitude_pitch,type:"input",pos:{x:0,y:0}},attitude_yaw:{name:Lang.Blocks.byrobot_dronefighter_drone_attitude_yaw,
type:"input",pos:{x:0,y:0}},irmessage_irdata:{name:Lang.Blocks.byrobot_dronefighter_drone_irmessage,type:"input",pos:{x:0,y:0}},joystick_left_x:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_x,type:"input",pos:{x:0,y:0}},joystick_left_y:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_y,type:"input",pos:{x:0,y:0}},joystick_left_direction:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_direction,type:"input",pos:{x:0,y:0}},joystick_left_event:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_event,
type:"input",pos:{x:0,y:0}},joystick_left_command:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_left_command,type:"input",pos:{x:0,y:0}},joystick_right_x:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_x,type:"input",pos:{x:0,y:0}},joystick_right_y:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_y,type:"input",pos:{x:0,y:0}},joystick_right_direction:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_direction,type:"input",pos:{x:0,y:0}},
joystick_right_event:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_event,type:"input",pos:{x:0,y:0}},joystick_right_command:{name:Lang.Blocks.byrobot_dronefighter_controller_joystick_right_command,type:"input",pos:{x:0,y:0}},button_button:{name:Lang.Blocks.byrobot_dronefighter_controller_button_button,type:"input",pos:{x:0,y:0}},button_event:{name:Lang.Blocks.byrobot_dronefighter_controller_button_event,type:"input",pos:{x:0,y:0}},entryhw_countTransferReserved:{name:Lang.Blocks.byrobot_dronefighter_entryhw_count_transfer_reserved,
type:"output",pos:{x:0,y:0}}},ports:{},mode:"both"},checkFinish:function(c,b){if(c.isStart){if(1==c.timeFlag)return"Running";delete c.timeFlag;delete c.isStart;Entry.engine.isContinue=!1;return"Finish"}c.isStart=!0;c.timeFlag=1;setTimeout(function(){c.timeFlag=0},60/(Entry.FPS||60)*b);return"Start"},transferLightManual:function(c,b,d){c=Math.max(c,0);c=Math.min(c,255);b=Math.max(b,0);b=Math.min(b,255);d=Math.max(d,0);d=Math.min(d,255);Entry.hw.setDigitalPortValue("target",c);Entry.hw.setDigitalPortValue("light_manual_flags",
b);Entry.hw.setDigitalPortValue("light_manual_brightness",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.light_manual_flags;delete Entry.hw.sendQueue.light_manual_brightness},transferbuzzer:function(c,b,d){Entry.hw.setDigitalPortValue("target",17);Entry.hw.setDigitalPortValue("buzzer_mode",c);Entry.hw.setDigitalPortValue("buzzer_value",b);Entry.hw.setDigitalPortValue("buzzer_time",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.buzzer_mode;
delete Entry.hw.sendQueue.buzzer_value;delete Entry.hw.sendQueue.buzzer_time},transferVibrator:function(c,b,d,e){b=Math.max(b,1);b=Math.min(b,6E4);d=Math.max(d,1);d=Math.min(d,6E4);Entry.hw.setDigitalPortValue("target",17);Entry.hw.setDigitalPortValue("vibrator_mode",c);Entry.hw.setDigitalPortValue("vibrator_on",b);Entry.hw.setDigitalPortValue("vibrator_off",d);Entry.hw.setDigitalPortValue("vibrator_total",e);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.vibrator_mode;
delete Entry.hw.sendQueue.vibrator_on;delete Entry.hw.sendQueue.vibrator_off;delete Entry.hw.sendQueue.vibrator_total},transferIrMessage:function(c){c=Math.max(c,0);c=Math.min(c,127);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("irmessage_data",c);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.irmessage_data},transferMotorSingle:function(c,b,d){d=Math.max(d,0);d=Math.min(d,4096);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("motorsingle_target",
c);Entry.hw.setDigitalPortValue("motorsingle_direction",b);Entry.hw.setDigitalPortValue("motorsingle_value",d);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.motorsingle_target;delete Entry.hw.sendQueue.motorsingle_direction;delete Entry.hw.sendQueue.motorsingle_value},transferCommand:function(c,b,d){Entry.hw.setDigitalPortValue("target",c);Entry.hw.setDigitalPortValue("command_command",b);Entry.hw.setDigitalPortValue("command_option",d);Entry.hw.update();delete Entry.hw.sendQueue.target;
delete Entry.hw.sendQueue.command_command;delete Entry.hw.sendQueue.command_option},transferControlDouble:function(c,b){c=Math.max(c,-100);c=Math.min(c,100);b=Math.max(b,0);b=Math.min(b,100);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("control_wheel",c);Entry.hw.setDigitalPortValue("control_accel",b);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.control_wheel;delete Entry.hw.sendQueue.control_accel},transferControlQuad:function(c,b,d,e){c=
Math.max(c,-100);c=Math.min(c,100);b=Math.max(b,-100);b=Math.min(b,100);d=Math.max(d,-100);d=Math.min(d,100);e=Math.max(e,-100);e=Math.min(e,100);Entry.hw.setDigitalPortValue("target",16);Entry.hw.setDigitalPortValue("control_roll",c);Entry.hw.setDigitalPortValue("control_pitch",b);Entry.hw.setDigitalPortValue("control_yaw",d);Entry.hw.setDigitalPortValue("control_throttle",e);Entry.hw.update();delete Entry.hw.sendQueue.target;delete Entry.hw.sendQueue.control_roll;delete Entry.hw.sendQueue.control_pitch;
delete Entry.hw.sendQueue.control_yaw;delete Entry.hw.sendQueue.control_throttle},getData:function(c,b){return Entry.hw.portData[b]},setLightManual:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferLightManual(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerStop:function(c){switch(this.checkFinish(c,40)){case "Start":return this.transferbuzzer(0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();
default:return c.callReturn()}},setBuzzerMute:function(c,b,d,e){b=Math.max(b,0);b=Math.min(b,6E4);var f=40;d&&(f=b);switch(this.checkFinish(c,f)){case "Start":return d=2,e&&(d=1),this.transferbuzzer(d,238,b),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerScale:function(c,b,d,e,f,g){e=Math.max(e,0);e=Math.min(e,6E4);var h=40;f&&(h=e);switch(this.checkFinish(c,h)){case "Start":return f=4,g&&(f=3),this.transferbuzzer(f,12*b+d,e),c;case "Running":return c;
case "Finish":return c.callReturn();default:return c.callReturn()}},setBuzzerHz:function(c,b,d,e,f){d=Math.max(d,0);d=Math.min(d,6E4);var g=40;e&&(g=d);switch(this.checkFinish(c,g)){case "Start":return e=6,f&&(e=5),b=Math.max(b,1),b=Math.min(b,63999),this.transferbuzzer(e,b,d),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setVibratorStop:function(c){switch(this.checkFinish(c,40)){case "Start":return this.transferVibrator(0,0,0,0),c;case "Running":return c;
case "Finish":return c.callReturn();default:return c.callReturn()}},setVibrator:function(c,b,d,e,f,g){e=Math.max(e,0);e=Math.min(e,6E4);var h=40;f&&(h=e);switch(this.checkFinish(c,h)){case "Start":return f=2,g&&(f=1),this.transferVibrator(f,b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},sendIrMessage:function(c,b){switch(this.checkFinish(c,40)){case "Start":return this.transferIrMessage(b),c;case "Running":return c;case "Finish":return c.callReturn();
default:return c.callReturn()}},sendStop:function(c){return this.sendCommand(c,16,36,0)},sendCommand:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferCommand(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setMotorSingle:function(c,b,d,e){switch(this.checkFinish(c,40)){case "Start":return this.transferMotorSingle(b,d,e),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},
setModeVehicle:function(c,b){switch(this.checkFinish(c,40)){case "Start":return this.transferCommand(16,16,b),this.transferControlQuad(0,0,0,0),this.transferControlDouble(0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},setEventFlight:function(c,b,d){switch(this.checkFinish(c,d)){case "Start":return this.transferCommand(16,34,b),this.transferControlQuad(0,0,0,0),c;case "Running":return c;case "Finish":return c.callReturn();default:return c.callReturn()}},
sendControlQuadSingle:function(c,b,d,e,f){var g=40;f&&(g=e);switch(this.checkFinish(c,g)){case "Start":return d=Math.max(d,-100),d=Math.min(d,100),Entry.hw.setDigitalPortValue("target",16),Entry.hw.setDigitalPortValue(b,d),Entry.hw.update(),delete Entry.hw.sendQueue.target,delete Entry.hw.sendQueue[b],c;case "Running":return c;case "Finish":return f&&(Entry.hw.setDigitalPortValue("target",16),Entry.hw.setDigitalPortValue(b,0),Entry.hw.update(),delete Entry.hw.sendQueue.target,delete Entry.hw.sendQueue[b]),
c.callReturn();default:return c.callReturn()}},sendControlQuad:function(c,b,d,e,f,g,h){var k=40;h&&(k=g);switch(this.checkFinish(c,k)){case "Start":return this.transferControlQuad(b,d,e,f),c;case "Running":return c;case "Finish":return h&&this.transferControlQuad(0,0,0,0),c.callReturn();default:return c.callReturn()}}};Entry.Cobl={name:"cobl",setZero:function(){for(var c=0;14>c;c++)Entry.hw.sendQueue[c]=0;Entry.hw.update()}};Blockly.Blocks.cobl_read_ultrason={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ucd08\uc74c\ud30c \uac70\ub9ac\uc7ac\uae30(0~400)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_ultrason=function(c,b){return Entry.hw.getAnalogPortValue("ultrason")};
Blockly.Blocks.cobl_read_potenmeter={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uac00\ubcc0\uc800\ud56d \uc77d\uae30(0~1023)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_potenmeter=function(c,b){console.log("cobl_read_potenmeter");return Entry.hw.getAnalogPortValue("potenmeter")};
Blockly.Blocks.cobl_read_irread1={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("IR1 \uc77d\uae30(0~1023)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_irread1=function(c,b){return Entry.hw.getAnalogPortValue("potenmeter")};Blockly.Blocks.cobl_read_irread2={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("IR2 \uc77d\uae30(0~1023)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.cobl_read_irread2=function(c,b){b.getValue("irread2",b);return Entry.hw.getAnalogPortValue("irread2")};Blockly.Blocks.cobl_read_joyx={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc870\uc774\uc2a4\ud2f1X\ucd95 \uc77d\uae30(1,0,-1)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_joyx=function(c,b){return Entry.hw.getAnalogPortValue("joyx")};
Blockly.Blocks.cobl_read_joyy={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc870\uc774\uc2a4\ud2f1Y\ucd95 \uc77d\uae30(1,0,-1)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_joyy=function(c,b){return Entry.hw.getAnalogPortValue("joyy")};Blockly.Blocks.cobl_read_sens1={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc13c\uc11c1 \uc77d\uae30(0~1023)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.cobl_read_sens1=function(c,b){return Entry.hw.getAnalogPortValue("sens1")};Blockly.Blocks.cobl_read_sens2={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc13c\uc11c2 \uc77d\uae30(0~1023)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_sens2=function(c,b){return Entry.hw.getAnalogPortValue("sens2")};
Blockly.Blocks.cobl_read_tilt={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uae30\uc6b8\uae30\uc13c\uc11c \uc77d\uae30(0~4)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_tilt=function(c,b){return Entry.hw.getAnalogPortValue("tilt")};
Blockly.Blocks.cobl_get_port_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.cobl_get_port_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.cobl_read_temps={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc628\ub3c4\uc13c\uc11c \uc77d\uae30@\ud3ec\ud2b8");this.appendValueInput("VALUE").setCheck("Number");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_temps=function(c,b){c=b.getValue("VALUE",b);if(1==c)return Entry.hw.getAnalogPortValue("temps1");if(2==c)return Entry.hw.getAnalogPortValue("temps2")};
Blockly.Blocks.cobl_read_light={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ubc1d\uae30\uc13c\uc11c \uc77d\uae30@\ud3ec\ud2b8");this.appendValueInput("VALUE").setCheck("Number");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.cobl_read_light=function(c,b){c=b.getValue("VALUE",b);if(1==c)return Entry.hw.getAnalogPortValue("light1");if(2==c)return Entry.hw.getAnalogPortValue("light2")};
Blockly.Blocks.cobl_read_btn={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\ubc84\ud2bc\uc13c\uc11c \uc77d\uae30@\ud3ec\ud2b8");this.appendValueInput("VALUE").setCheck("Number");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};Entry.block.cobl_read_btn=function(c,b){c=b.getValue("VALUE",b);if(1==c)return Entry.hw.getDigitalPortValue("btn1");if(2==c)return Entry.hw.getDigitalPortValue("btn2")};
Blockly.Blocks.cobl_led_control={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("Rainbow LED");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"]]),"PORT");this.appendDummyInput().appendField(" ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["OFF","OFF"],["Red","Red"],["Orange","Orange"],["Yellow","Yellow"],["Green","Green"],["Blue","Blue"],["Dark Blue","Dark Blue"],["Purple","Purple"],["White","White"]]),
"OPERATOR");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.cobl_led_control=function(c,b){c=b.getStringField("PORT");var d=b.getStringField("OPERATOR");Entry.hw.setDigitalPortValue("RainBowLED_IDX",c);Entry.hw.setDigitalPortValue("RainBowLED_COL",d);return b.callReturn()};Blockly.Blocks.cobl_text={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldTextInput("cobl"),"NAME");this.setOutput(!0,"String");this.setInputsInline(!0)}};
Entry.block.cobl_text=function(c,b){return b.getStringField("NAME")};Blockly.Blocks.cobl_servo_angle_control={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("Servo");this.appendValueInput("PORT").setCheck(["Number","String"]);this.appendDummyInput().appendField("Angle-");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("(15~165)");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.cobl_servo_angle_control=function(c,b){console.log("servo - test");c=b.getNumberValue("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,15),d=Math.min(d,165);1==c&&(console.log("servo 1  degree "+d),Entry.hw.setDigitalPortValue("Servo1",d));2==c&&(console.log("servo 2 degree "+d),Entry.hw.setDigitalPortValue("Servo2",d));return b.callReturn()};
Blockly.Blocks.cobl_melody={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("Melody");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["(Low)So","L_So"],["(Low)So#","L_So#"],["(Low)La","L_La"],["(Low)La#","L_La#"],["(Low)Ti","L_Ti"],["Do","Do"],["Do#","Do#"],["Re","Re"],["Re#","Re#"],["Mi","Mi"],["Fa","Fa"],["Fa#","Fa#"],["So","So"],["So#","So#"],["La","La"],["La#","La#"],["Ti","Ti"],["(High)Do","H_Do"],["(High)Do#","H_Do#"],["(High)Re","H_Re"],["(High)R2#",
"H_Re#"],["(High)Mi","H_Mi"],["(High)Fa","H_Fa"]]),"MELODY");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.cobl_melody=function(c,b){c=b.getStringField("MELODY");console.log("cobl_melody"+c);Entry.hw.setDigitalPortValue("Melody",c);return b.callReturn()};
Blockly.Blocks.cobl_dcmotor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("DcMotor");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"]]),"MOTOR");this.appendDummyInput().appendField(" ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1.Clockwise","1"],["2.Counter Clockwise","2"],["3.Stop","3"]]),"DIRECTION");this.appendDummyInput().appendField(" Speed");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1",
"1"],["2","2"],["3","3"],["4","4"],["5","5"]]),"SPEED");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.cobl_dcmotor=function(c,b){c=b.getStringField("MOTOR");var d=b.getStringField("DIRECTION"),e=b.getStringField("SPEED");console.log("MOTOR"+c+"  Direction"+d+"  speed"+e);1==c&&(Entry.hw.setDigitalPortValue("DC1_DIR",d),Entry.hw.setDigitalPortValue("DC1_SPEED",e));2==c&&(Entry.hw.setDigitalPortValue("DC2_DIR",d),Entry.hw.setDigitalPortValue("DC2_SPEED",e));return b.callReturn()};
Blockly.Blocks.cobl_extention_port={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("Extention Port");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"]]),"PORT");this.appendDummyInput().appendField(" Level");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]),"LEVEL");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.cobl_extention_port=function(c,b){c=b.getStringField("PORT");var d=b.getStringField("LEVEL");1==c&&Entry.hw.setDigitalPortValue("EXUSB1",d);2==c&&Entry.hw.setDigitalPortValue("EXUSB2",d);return b.callReturn()};
Blockly.Blocks.cobl_external_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("External LED ");this.appendValueInput("LED").setCheck(["Number","String"]);this.appendDummyInput().appendField(" (1~64)");this.appendDummyInput().appendField(" R ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]]),"RED");this.appendDummyInput().appendField(" G ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1",
"1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]]),"GREEN");this.appendDummyInput().appendField(" B ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]]),"BLUE");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.cobl_external_led=function(c,b){c=b.getNumberValue("LED");var d=b.getStringField("RED"),e=b.getStringField("GREEN"),f=b.getStringField("BLUE");Entry.hw.setDigitalPortValue("ELED_IDX",c);Entry.hw.setDigitalPortValue("ELED_R",d);Entry.hw.setDigitalPortValue("ELED_G",e);Entry.hw.setDigitalPortValue("ELED_B",f);return b.callReturn()};
Blockly.Blocks.cobl_7_segment={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("7 Segment");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField("(0~9999)");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.cobl_7_segment=function(c,b){c=b.getNumberValue("VALUE");Entry.hw.setDigitalPortValue("7SEG",c);return b.callReturn()};Entry.Codestar={name:"codestar",setZero:function(){Entry.hw.sendQueue.readablePorts=[];for(var c=0;20>c;c++)Entry.hw.sendQueue[c]=0,Entry.hw.sendQueue.readablePorts.push(c);Entry.hw.update()},monitorTemplate:{imgPath:"hw/codestar.png",width:333,height:409,listPorts:{13:{name:"\uc9c4\ub3d9\ubaa8\ud130",type:"output",pos:{x:0,y:0}},6:{name:"\uc9c4\ub3d9\uc13c\uc11c",type:"input",pos:{x:0,y:0}}},ports:{7:{name:"\ube68\uac04\uc0c9",type:"output",pos:{x:238,y:108}},8:{name:"\ud30c\ub780\uc0c9",type:"output",
pos:{x:265,y:126}},9:{name:"3\uc0c9 \ube68\uac04\uc0c9",type:"output",pos:{x:292,y:34}},10:{name:"3\uc0c9 \ub179\uc0c9",type:"output",pos:{x:292,y:34}},11:{name:"3\uc0c9 \ud30c\ub780\uc0c9",type:"output",pos:{x:292,y:34}},12:{name:"\ubc84\ud2bc",type:"input",pos:{x:248,y:142}},a0:{name:"\uc67c\ucabd \ubcbd\uac10\uc9c0",type:"input",pos:{x:24,y:231}},a2:{name:"\ub9c8\uc774\ud06c",type:"input",pos:{x:225,y:67}},a3:{name:"\ubd80\uc800",type:"output",pos:{x:283,y:105}},a4:{name:"\uc67c\ucabd \ub77c\uc778\uac10\uc9c0",
type:"input",pos:{x:37,y:353}},a5:{name:"\uc624\ub978\ucabd \ub77c\uc778\uac10\uc9c0",type:"input",pos:{x:50,y:368}},a6:{name:"\uc870\ub3c4\uc13c\uc11c",type:"input",pos:{x:273,y:22}},a7:{name:"\uc624\ub978\ucabd \ubcbd\uac10\uc9c0",type:"input",pos:{x:103,y:381}},temperature:{name:"\uc628\ub3c4\uc13c\uc11c",type:"input",pos:{x:311,y:238}},sonar:{name:"\ucd08\uc74c\ud30c",type:"input",pos:{x:7,y:277}},leftwheel:{name:"\uc67c\ucabd \ubc14\ud034",type:"output",pos:{x:177,y:370}},rightwheel:{name:"\uc624\ub978\ucabd \ubc14\ud034",
type:"output",pos:{x:83,y:218}}},mode:"both"}};Entry.EV3={PORT_MAP:{A:0,B:0,C:0,D:0,1:void 0,2:void 0,3:void 0,4:void 0},motorMovementTypes:{Degrees:0,Power:1},deviceTypes:{NxtTouch:1,NxtLight:2,NxtSound:3,NxtColor:4,NxtUltrasonic:5,NxtTemperature:6,LMotor:7,MMotor:8,Touch:16,Color:29,Ultrasonic:30,Gyroscope:32,Infrared:33,Initializing:125,Empty:126,WrongPort:127,Unknown:255},colorSensorValue:" 000000 0000FF 00FF00 FFFF00 FF0000 FFFFFF A52A2A".split(" "),timeouts:[],removeTimeout:function(c){clearTimeout(c);var b=this.timeouts;c=b.indexOf(c);
0<=c&&b.splice(c,1)},removeAllTimeouts:function(){var c=this.timeouts,b;for(b in c)clearTimeout(c[b]);this.timeouts=[]},setZero:function(){var c=this.PORT_MAP;Object.keys(c).forEach(function(b){/[A-D]/i.test(b)?Entry.hw.sendQueue[b]={type:Entry.EV3.motorMovementTypes.Power,power:0}:Entry.hw.sendQueue[b]=c[b]});Entry.hw.update()},name:"EV3"};
Blockly.Blocks.ev3_get_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"]]),"PORT").appendField("\uc758 \uac12");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.ev3_get_sensor_value=function(c,b){b.getStringField("PORT",b);c=Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b));var d;$.isPlainObject(c)&&(d=c.siValue||0);return d};
Blockly.Blocks.ev3_touch_sensor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"]]),"PORT").appendField("\uc758 \ud130\uce58\uc13c\uc11c\uac00 \uc791\ub3d9\ub418\uc5c8\ub294\uac00?");this.setOutput(!0,"Boolean");this.setInputsInline(!0)}};
Entry.block.ev3_touch_sensor=function(c,b){b.getStringField("PORT",b);c=Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b));b=!1;c.type==Entry.EV3.deviceTypes.Touch&&1<=Number(c.siValue)&&(b=!0);return b};
Blockly.Blocks.ev3_color_sensor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"]]),"PORT").appendField("\uc758 ").appendField(new Blockly.FieldDropdown([["RGB","RGB"],["R","R"],["G","G"],["B","B"]]),"RGB").appendField("\uac12");this.setOutput(!0,"String");this.setInputsInline(!0)}};
Entry.block.ev3_color_sensor=function(c,b){b.getStringField("PORT",b);c=b.getStringField("RGB",b);b=Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b));var d="";if(b.type==Entry.EV3.deviceTypes.Color)if(0==b.siValue)d="";else switch(c){case "RGB":d=Entry.EV3.colorSensorValue[b.siValue];break;case "R":d=Entry.EV3.colorSensorValue[b.siValue].substring(0,2);break;case "G":d=Entry.EV3.colorSensorValue[b.siValue].substring(2,4);break;case "B":d=Entry.EV3.colorSensorValue[b.siValue].substring(4,6)}else d=
"\uceec\ub7ec \uc13c\uc11c \uc544\ub2d8";return d};Blockly.Blocks.ev3_motor_power={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["A","A"],["B","B"],["C","C"],["D","D"]]),"PORT").appendField("\uc758 \uac12\uc744");this.appendValueInput("VALUE").setCheck(["Number"]);this.appendDummyInput().appendField("\uc73c\ub85c \ucd9c\ub825");this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.ev3_motor_power=function(c,b){c=b.getStringField("PORT",b);var d=b.getValue("VALUE",b);Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Power,power:d};return b.callReturn()};
Blockly.Blocks.ev3_motor_power_on_time={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["A","A"],["B","B"],["C","C"],["D","D"]]),"PORT").appendField("\uc758 \uac12\uc744");this.appendValueInput("TIME").setCheck(["Number"]);this.appendDummyInput().appendField("\ucd08 \ub3d9\uc548");this.appendValueInput("VALUE").setCheck(["Number"]);this.appendDummyInput().appendField("\uc73c\ub85c \ucd9c\ub825");this.setInputsInline(!0);this.setPreviousStatement(!0);
this.setNextStatement(!0)}};
Entry.block.ev3_motor_power_on_time=function(c,b){c=b.getStringField("PORT",b);if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Power,power:0};return b.callReturn()}var d=b.getValue("TIME",b),e=b.getValue("VALUE",b);b.isStart=!0;b.timeFlag=1;Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Power,power:e};var f=setTimeout(function(){b.timeFlag=
0;Entry.EV3.removeTimeout(f)},1E3*d);Entry.EV3.timeouts.push(f);return b};
Blockly.Blocks.ev3_motor_degrees={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["A","A"],["B","B"],["C","C"],["D","D"]]),"PORT").appendField("\uc758 \uac12\uc744").appendField(new Blockly.FieldDropdown([["\uc2dc\uacc4\ubc29\ud5a5","CW"],["\ubc18\uc2dc\uacc4\ubc29\ud5a5","CCW"]]),"DIRECTION").appendField("\uc73c\ub85c ");this.appendValueInput("DEGREE").setCheck(["Number"]);this.appendDummyInput().appendField("\ub3c4 \ub9cc\ud07c \ud68c\uc804");
this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.ev3_motor_degrees=function(c,b){c=b.getStringField("PORT",b);var d=b.getValue("DEGREE",b);0>=d?d=0:720<=d&&(d=720);var e=b.getStringField("DIRECTION",b);Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Degrees,degree:d,power:"CW"==e?50:-50};return b.callReturn()};Entry.Hamster={PORT_MAP:{leftWheel:0,rightWheel:0,buzzer:0,outputA:0,outputB:0,leftLed:0,rightLed:0,note:0,lineTracerMode:0,lineTracerModeId:0,lineTracerSpeed:5,ioModeA:0,ioModeB:0},setZero:function(){var c=Entry.Hamster.PORT_MAP,b=Entry.hw.sendQueue,d;for(d in c)b[d]=c[d];Entry.hw.update();c=Entry.Hamster;c.lineTracerModeId=0;c.lineTracerStateId=-1;c.tempo=60;c.removeAllTimeouts()},lineTracerModeId:0,lineTracerStateId:-1,tempo:60,timeouts:[],removeTimeout:function(c){clearTimeout(c);var b=this.timeouts;
c=b.indexOf(c);0<=c&&b.splice(c,1)},removeAllTimeouts:function(){var c=this.timeouts,b;for(b in c)clearTimeout(c[b]);this.timeouts=[]},setLineTracerMode:function(c,b){this.lineTracerModeId=this.lineTracerModeId+1&255;c.lineTracerMode=b;c.lineTracerModeId=this.lineTracerModeId},name:"hamster",monitorTemplate:{imgPath:"hw/hamster.png",width:256,height:256,listPorts:{temperature:{name:Lang.Blocks.HAMSTER_sensor_temperature,type:"input",pos:{x:0,y:0}},inputA:{name:Lang.Blocks.HAMSTER_sensor_input_a,type:"input",
pos:{x:0,y:0}},inputB:{name:Lang.Blocks.HAMSTER_sensor_input_b,type:"input",pos:{x:0,y:0}},accelerationX:{name:Lang.Blocks.HAMSTER_sensor_acceleration_x,type:"input",pos:{x:0,y:0}},accelerationY:{name:Lang.Blocks.HAMSTER_sensor_acceleration_y,type:"input",pos:{x:0,y:0}},accelerationZ:{name:Lang.Blocks.HAMSTER_sensor_acceleration_z,type:"input",pos:{x:0,y:0}},buzzer:{name:Lang.Hw.buzzer,type:"output",pos:{x:0,y:0}},note:{name:Lang.Hw.note,type:"output",pos:{x:0,y:0}},outputA:{name:Lang.Hw.output+"A",
type:"output",pos:{x:0,y:0}},outputB:{name:Lang.Hw.output+"B",type:"output",pos:{x:0,y:0}}},ports:{leftProximity:{name:Lang.Blocks.HAMSTER_sensor_left_proximity,type:"input",pos:{x:122,y:156}},rightProximity:{name:Lang.Blocks.HAMSTER_sensor_right_proximity,type:"input",pos:{x:10,y:108}},leftFloor:{name:Lang.Blocks.HAMSTER_sensor_left_floor,type:"input",pos:{x:100,y:234}},rightFloor:{name:Lang.Blocks.HAMSTER_sensor_right_floor,type:"input",pos:{x:13,y:180}},light:{name:Lang.Blocks.HAMSTER_sensor_light,
type:"input",pos:{x:56,y:189}},leftWheel:{name:Lang.Hw.leftWheel,type:"output",pos:{x:209,y:115}},rightWheel:{name:Lang.Hw.rightWheel,type:"output",pos:{x:98,y:30}},leftLed:{name:Lang.Hw.left+" "+Lang.Hw.led_en,type:"output",pos:{x:87,y:210}},rightLed:{name:Lang.Hw.right+" "+Lang.Hw.led_en,type:"output",pos:{x:24,y:168}}},mode:"both"}};
Blockly.Blocks.hamster_hand_found={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_hand_found);this.setOutput(!0,"Boolean");this.setInputsInline(!0)}};Entry.block.hamster_hand_found=function(c,b){c=Entry.hw.portData;return 50<c.leftProximity||50<c.rightProximity};
Blockly.Blocks.hamster_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,
"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]]),"DEVICE");this.setInputsInline(!0);this.setOutput(!0,"Number")}};Entry.block.hamster_value=function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]};
Blockly.Blocks.hamster_move_forward_once={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_move_forward_once).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_move_forward_once=function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData;if(b.isStart){if(b.isMoving){switch(b.boardState){case 1:2>b.count?(50>d.leftFloor&&50>d.rightFloor?b.count++:b.count=0,d=d.leftFloor-d.rightFloor,c.leftWheel=45+.25*d,c.rightWheel=45-.25*d):(b.count=0,b.boardState=2);break;case 2:d=d.leftFloor-d.rightFloor;c.leftWheel=45+.25*d;c.rightWheel=45-.25*d;b.boardState=3;var e=setTimeout(function(){b.boardState=4;Entry.Hamster.removeTimeout(e)},250);Entry.Hamster.timeouts.push(e);
break;case 3:d=d.leftFloor-d.rightFloor;c.leftWheel=45+.25*d;c.rightWheel=45-.25*d;break;case 4:c.leftWheel=0,c.rightWheel=0,b.boardState=0,b.isMoving=!1}return b}delete b.isStart;delete b.isMoving;delete b.count;delete b.boardState;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.count=0;b.boardState=1;c.leftWheel=45;c.rightWheel=45;Entry.Hamster.setLineTracerMode(c,0);return b};
Blockly.Blocks.hamster_turn_once={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_turn_once_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_once_right,"RIGHT"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_turn_once_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_turn_once=function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData;if(b.isStart){if(b.isMoving){if(b.isLeft)switch(b.boardState){case 1:2>b.count?50<d.leftFloor&&b.count++:(b.count=0,b.boardState=2);break;case 2:20>d.leftFloor&&(b.boardState=3);break;case 3:2>b.count?20>d.leftFloor&&b.count++:(b.count=0,b.boardState=4);break;case 4:50<d.leftFloor&&(b.boardState=5);break;case 5:d=d.leftFloor-d.rightFloor,-15<d?(c.leftWheel=0,c.rightWheel=0,b.boardState=0,b.isMoving=!1):(c.leftWheel=
.5*d,c.rightWheel=.5*-d)}else switch(b.boardState){case 1:2>b.count?50<d.rightFloor&&b.count++:(b.count=0,b.boardState=2);break;case 2:20>d.rightFloor&&(b.boardState=3);break;case 3:2>b.count?20>d.rightFloor&&b.count++:(b.count=0,b.boardState=4);break;case 4:50<d.rightFloor&&(b.boardState=5);break;case 5:d=d.rightFloor-d.leftFloor,-15<d?(c.leftWheel=0,c.rightWheel=0,b.boardState=0,b.isMoving=!1):(c.leftWheel=.5*-d,c.rightWheel=.5*d)}return b}delete b.isStart;delete b.isMoving;delete b.count;delete b.boardState;
delete b.isLeft;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.count=0;b.boardState=1;"LEFT"==b.getField("DIRECTION",b)?(b.isLeft=!0,c.leftWheel=-45,c.rightWheel=45):(b.isLeft=!1,c.leftWheel=45,c.rightWheel=-45);Entry.Hamster.setLineTracerMode(c,0);return b};
Blockly.Blocks.hamster_move_forward_for_secs={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_move_forward_for_secs_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_move_forward_for_secs_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_move_forward_for_secs=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=30;c.rightWheel=30;Entry.Hamster.setLineTracerMode(c,0);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},c);Entry.Hamster.timeouts.push(d);return b};
Blockly.Blocks.hamster_move_backward_for_secs={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_move_backward_for_secs_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_move_backward_for_secs_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_move_backward_for_secs=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=-30;c.rightWheel=-30;Entry.Hamster.setLineTracerMode(c,0);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},c);Entry.Hamster.timeouts.push(d);return b};
Blockly.Blocks.hamster_turn_for_secs={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_turn_for_secs_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_turn_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_right,"RIGHT"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_turn_for_secs_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_turn_for_secs_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_turn_for_secs=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;"LEFT"==b.getField("DIRECTION",b)?(c.leftWheel=-30,c.rightWheel=30):(c.leftWheel=30,c.rightWheel=-30);Entry.Hamster.setLineTracerMode(c,0);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},c);Entry.Hamster.timeouts.push(d);
return b};
Blockly.Blocks.hamster_change_both_wheels_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_both_wheels_by_1);this.appendValueInput("LEFT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_both_wheels_by_2);this.appendValueInput("RIGHT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_both_wheels_by_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_change_both_wheels_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("LEFT"),e=b.getNumberValue("RIGHT");c.leftWheel=void 0!=c.leftWheel?c.leftWheel+d:d;c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e;Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()};
Blockly.Blocks.hamster_set_both_wheels_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_both_wheels_to_1);this.appendValueInput("LEFT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_both_wheels_to_2);this.appendValueInput("RIGHT").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_both_wheels_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_set_both_wheels_to=function(c,b){c=Entry.hw.sendQueue;c.leftWheel=b.getNumberValue("LEFT");c.rightWheel=b.getNumberValue("RIGHT");Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()};
Blockly.Blocks.hamster_change_wheel_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_wheel_by_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_change_wheel_by_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_wheel_by_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_change_wheel_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=void 0!=c.leftWheel?c.leftWheel+e:e:("RIGHT"!=d&&(c.leftWheel=void 0!=c.leftWheel?c.leftWheel+e:e),c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e);Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()};
Blockly.Blocks.hamster_set_wheel_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_wheel_to_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_set_wheel_to_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_wheel_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_set_wheel_to=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=e:("RIGHT"!=d&&(c.leftWheel=e),c.rightWheel=e);Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()};
Blockly.Blocks.hamster_follow_line_using={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_follow_line_using_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]]),"COLOR").appendField(Lang.Blocks.HAMSTER_follow_line_using_2).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,
"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_follow_line_using_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_follow_line_using=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("COLOR"),e=b.getField("DIRECTION"),f=1;"RIGHT"==e?f=2:"BOTH"==e&&(f=3);"WHITE"==d&&(f+=7);c.leftWheel=0;c.rightWheel=0;Entry.Hamster.setLineTracerMode(c,f);return b.callReturn()};
Blockly.Blocks.hamster_follow_line_until={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_follow_line_until_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]]),"COLOR").appendField(Lang.Blocks.HAMSTER_follow_line_until_2).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_left_intersection,"LEFT"],[Lang.Blocks.HAMSTER_right_intersection,"RIGHT"],[Lang.Blocks.HAMSTER_front_intersection,
"FRONT"],[Lang.Blocks.HAMSTER_rear_intersection,"REAR"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_follow_line_until_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_follow_line_until=function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData,e=b.getField("COLOR"),f=b.getField("DIRECTION"),g=4;"RIGHT"==f?g=5:"FRONT"==f?g=6:"REAR"==f&&(g=7);"WHITE"==e&&(g+=7);if(b.isStart){if(e=Entry.Hamster,d.lineTracerStateId!=e.lineTracerStateId&&(e.lineTracerStateId=d.lineTracerStateId,64==d.lineTracerState))return delete b.isStart,Entry.engine.isContinue=!1,e.setLineTracerMode(c,0),b.callReturn()}else b.isStart=!0,c.leftWheel=0,c.rightWheel=0,Entry.Hamster.setLineTracerMode(c,
g);return b};
Blockly.Blocks.hamster_set_following_speed_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_following_speed_to_1).appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]]),"SPEED").appendField(Lang.Blocks.HAMSTER_set_following_speed_to_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_set_following_speed_to=function(c,b){Entry.hw.sendQueue.lineTracerSpeed=Number(b.getField("SPEED",b));return b.callReturn()};Blockly.Blocks.hamster_stop={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_stop).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_stop=function(c,b){c=Entry.hw.sendQueue;c.leftWheel=0;c.rightWheel=0;Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()};
Blockly.Blocks.hamster_set_led_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_led_to_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_set_led_to_2).appendField(new Blockly.FieldDropdown([[Lang.General.red,"4"],[Lang.General.yellow,"6"],[Lang.General.green,"2"],[Lang.Blocks.HAMSTER_color_cyan,
"3"],[Lang.General.blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]]),"COLOR").appendField(Lang.Blocks.HAMSTER_set_led_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_set_led_to=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b),e=Number(b.getField("COLOR",b));"LEFT"==d?c.leftLed=e:("RIGHT"!=d&&(c.leftLed=e),c.rightLed=e);return b.callReturn()};
Blockly.Blocks.hamster_clear_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_clear_led_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]]),"DIRECTION").appendField(Lang.Blocks.HAMSTER_clear_led_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);
this.setNextStatement(!0)}};Entry.block.hamster_clear_led=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b);"LEFT"==d?c.leftLed=0:("RIGHT"!=d&&(c.leftLed=0),c.rightLed=0);return b.callReturn()};Blockly.Blocks.hamster_beep={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_beep).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_beep=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.buzzer=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.buzzer=440;c.note=0;var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},200);Entry.Hamster.timeouts.push(d);return b};
Blockly.Blocks.hamster_change_buzzer_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_buzzer_by_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_buzzer_by_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_change_buzzer_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("VALUE");c.buzzer=void 0!=c.buzzer?c.buzzer+d:d;c.note=0;return b.callReturn()};
Blockly.Blocks.hamster_set_buzzer_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_buzzer_to_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_buzzer_to_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_set_buzzer_to=function(c,b){c=Entry.hw.sendQueue;c.buzzer=b.getNumberValue("VALUE");c.note=0;return b.callReturn()};Blockly.Blocks.hamster_clear_buzzer={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_clear_buzzer).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_clear_buzzer=function(c,b){c=Entry.hw.sendQueue;c.buzzer=0;c.note=0;return b.callReturn()};
Blockly.Blocks.hamster_play_note_for={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_play_note_for_1).appendField(new Blockly.FieldDropdown([[Lang.General.note_c+"","4"],[Lang.General.note_c+"#","5"],[Lang.General.note_d+"","6"],[Lang.General.note_e+"b","7"],[Lang.General.note_e+"","8"],[Lang.General.note_f+"","9"],[Lang.General.note_f+"#","10"],[Lang.General.note_g+"","11"],[Lang.General.note_g+"#","12"],[Lang.General.note_a+"","13"],[Lang.General.note_b+
"b","14"],[Lang.General.note_b+"","15"]]),"NOTE").appendField(Lang.Blocks.HAMSTER_play_note_for_2).appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]),"OCTAVE").appendField(Lang.Blocks.HAMSTER_play_note_for_3);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_play_note_for_4).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);
this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_play_note_for=function(c,b){var d=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;d.note=0;return b.callReturn()}c=b.getNumberField("NOTE",b);var e=b.getNumberField("OCTAVE",b),f=6E4*b.getNumberValue("VALUE",b)/Entry.Hamster.tempo;b.isStart=!0;b.timeFlag=1;d.buzzer=0;d.note=c+12*(e-1);if(100<f){var g=setTimeout(function(){d.note=0;Entry.Hamster.removeTimeout(g)},f-100);Entry.Hamster.timeouts.push(g)}var h=
setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(h)},f);Entry.Hamster.timeouts.push(h);return b};
Blockly.Blocks.hamster_rest_for={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_rest_for_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_rest_for_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_rest_for=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;return b.callReturn()}b.isStart=!0;b.timeFlag=1;var d=b.getNumberValue("VALUE"),d=6E4*d/Entry.Hamster.tempo;c.buzzer=0;c.note=0;var e=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(e)},d);Entry.Hamster.timeouts.push(e);return b};
Blockly.Blocks.hamster_change_tempo_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_tempo_by_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_tempo_by_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_change_tempo_by=function(c,b){Entry.Hamster.tempo+=b.getNumberValue("VALUE");1>Entry.Hamster.tempo&&(Entry.Hamster.tempo=1);return b.callReturn()};
Blockly.Blocks.hamster_set_tempo_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_tempo_to_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_tempo_to_2).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.hamster_set_tempo_to=function(c,b){Entry.Hamster.tempo=b.getNumberValue("VALUE");1>Entry.Hamster.tempo&&(Entry.Hamster.tempo=1);return b.callReturn()};
Blockly.Blocks.hamster_set_port_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_port_to_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_a_b,"AB"]]),"PORT").appendField(Lang.Blocks.HAMSTER_set_port_to_2).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_analog_input,"0"],[Lang.Blocks.HAMSTER_digital_input,"1"],[Lang.Blocks.HAMSTER_servo_output,"8"],
[Lang.Blocks.HAMSTER_pwm_output,"9"],[Lang.Blocks.HAMSTER_digital_output,"10"]]),"MODE").appendField(Lang.Blocks.HAMSTER_set_port_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_set_port_to=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT",b),e=Number(b.getField("MODE",b));"A"==d?c.ioModeA=e:("B"!=d&&(c.ioModeA=e),c.ioModeB=e);return b.callReturn()};
Blockly.Blocks.hamster_change_output_by={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_output_by_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_a_b,"AB"]]),"PORT").appendField(Lang.Blocks.HAMSTER_change_output_by_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_change_output_by_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_change_output_by=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT"),e=b.getNumberValue("VALUE");"A"==d?c.outputA=void 0!=c.outputA?c.outputA+e:e:("B"!=d&&(c.outputA=void 0!=c.outputA?c.outputA+e:e),c.outputB=void 0!=c.outputB?c.outputB+e:e);return b.callReturn()};
Blockly.Blocks.hamster_set_output_to={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_output_to_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_a_b,"AB"]]),"PORT").appendField(Lang.Blocks.HAMSTER_set_output_to_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_set_output_to_3).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.hamster_set_output_to=function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT"),e=b.getNumberValue("VALUE");"A"==d?c.outputA=e:("B"!=d&&(c.outputA=e),c.outputB=e);return b.callReturn()};Entry.Neobot={name:"neobot",LOCAL_MAP:["IN1","IN2","IN3","IR","BAT"],REMOTE_MAP:"OUT1 OUT2 OUT3 DCR DCL SND FND OPT".split(" "),setZero:function(){for(var c in Entry.Neobot.REMOTE_MAP)Entry.hw.sendQueue[Entry.Neobot.REMOTE_MAP[c]]=0;Entry.hw.update()},monitorTemplate:{imgPath:"hw/neobot.png",width:700,height:700,listPorts:{IR:{name:"\ub9ac\ubaa8\ucee8",type:"input",pos:{x:0,y:0}},BAT:{name:"\ubca0\ud130\ub9ac",type:"input",pos:{x:0,y:0}},SND:{name:Lang.Hw.buzzer,type:"output",pos:{x:0,y:0}},FND:{name:"FND",
type:"output",pos:{x:0,y:0}}},ports:{IN1:{name:"IN1",type:"input",pos:{x:270,y:200}},IN2:{name:"IN2",type:"input",pos:{x:325,y:200}},IN3:{name:"IN3",type:"input",pos:{x:325,y:500}},DCL:{name:"L-Motor",type:"output",pos:{x:270,y:500}},DCR:{name:"R-Motor",type:"output",pos:{x:435,y:500}},OUT1:{name:"OUT1",type:"output",pos:{x:380,y:200}},OUT2:{name:"OUT2",type:"output",pos:{x:435,y:200}},OUT3:{name:"OUT3",type:"output",pos:{x:380,y:500}}},mode:"both"}};
Blockly.Blocks.neobot_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([["1\ubc88 \ud3ec\ud2b8","IN1"],["2\ubc88 \ud3ec\ud2b8","IN2"],["3\ubc88 \ud3ec\ud2b8","IN3"],["\ub9ac\ubaa8\ucee8","IR"],["\ubc30\ud130\ub9ac","BAT"]]),"PORT").appendField(" \uac12");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.neobot_sensor_value=function(c,b){c=b.getStringField("PORT");return Entry.hw.portData[c]};
Blockly.Blocks.neobot_left_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc67c\ucabd\ubaa8\ud130\ub97c").appendField(new Blockly.FieldDropdown([["\uc55e\uc73c\ub85c","16"],["\ub4a4\ub85c","32"]]),"DIRECTION").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"]]),"SPEED").appendField("\uc758 \uc18d\ub3c4\ub85c \ud68c\uc804").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.neobot_left_motor=function(c,b){c=b.getNumberField("SPEED");var d=b.getNumberField("DIRECTION");Entry.hw.sendQueue.DCL=c+d;return b.callReturn()};
Blockly.Blocks.neobot_stop_left_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc67c\ucabd\ubaa8\ud130 \uc815\uc9c0").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.neobot_stop_left_motor=function(c,b){Entry.hw.sendQueue.DCL=0;return b.callReturn()};
Blockly.Blocks.neobot_right_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc624\ub978\ucabd\ubaa8\ud130\ub97c").appendField(new Blockly.FieldDropdown([["\uc55e\uc73c\ub85c","16"],["\ub4a4\ub85c","32"]]),"DIRECTION").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"]]),"SPEED").appendField("\uc758 \uc18d\ub3c4\ub85c \ud68c\uc804").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.neobot_right_motor=function(c,b){c=b.getNumberField("SPEED");var d=b.getNumberField("DIRECTION");Entry.hw.sendQueue.DCR=c+d;return b.callReturn()};
Blockly.Blocks.neobot_stop_right_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc624\ub978\ucabd\ubaa8\ud130 \uc815\uc9c0").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.neobot_stop_right_motor=function(c,b){Entry.hw.sendQueue.DCR=0;return b.callReturn()};
Blockly.Blocks.neobot_all_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uc591\ucabd \ubaa8\ud130\ub97c ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"]]),"SPEED").appendField(" \uc758 \uc18d\ub3c4\ub85c ").appendField(new Blockly.FieldDropdown([["\uc804\uc9c4","1"],["\ud6c4\uc9c4",
"2"],["\uc81c\uc790\ub9ac \uc88c\ud68c\uc804","3"],["\uc81c\uc790\ub9ac \uc6b0\ud68c\uc804","4"],["\uc88c\ud68c\uc804","5"],["\uc6b0\ud68c\uc804","6"]]),"DIRECTION").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.neobot_all_motor=function(c,b){b.getNumberField("TYPE");c=b.getNumberField("SPEED");switch(b.getNumberField("DIRECTION")){case 1:Entry.hw.sendQueue.DCL=16+c;Entry.hw.sendQueue.DCR=16+c;break;case 2:Entry.hw.sendQueue.DCL=32+c;Entry.hw.sendQueue.DCR=32+c;break;case 3:Entry.hw.sendQueue.DCL=32+c;Entry.hw.sendQueue.DCR=16+c;break;case 4:Entry.hw.sendQueue.DCL=16+c;Entry.hw.sendQueue.DCR=32+c;break;case 5:Entry.hw.sendQueue.DCL=0;Entry.hw.sendQueue.DCR=16+c;break;case 6:Entry.hw.sendQueue.DCL=
16+c,Entry.hw.sendQueue.DCR=0}return b.callReturn()};
Blockly.Blocks.neobot_set_servo={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["OUT1","1"],["OUT2","2"],["OUT3","3"]]),"PORT").appendField("\ud3ec\ud2b8\uc758 \uc11c\ubcf4\ubaa8\ud130\ub97c").appendField(new Blockly.FieldDropdown([["0\ub3c4","0"],["10\ub3c4","10"],["20\ub3c4","20"],["30\ub3c4","30"],["40\ub3c4","40"],["50\ub3c4","50"],["60\ub3c4","60"],["70\ub3c4","70"],["80\ub3c4","80"],["90\ub3c4","90"],["100\ub3c4","100"],["110\ub3c4",
"110"],["120\ub3c4","120"],["130\ub3c4","130"],["140\ub3c4","140"],["150\ub3c4","150"],["160\ub3c4","160"],["170\ub3c4","170"],["180\ub3c4","180"]]),"DEGREE").appendField(" \uc774\ub3d9").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.neobot_set_servo=function(c,b){c=b.getNumberField("PORT");var d=b.getNumberField("DEGREE");Entry.hw.sendQueue["OUT"+c]=d;3===c&&(c=4);Entry.hw.sendQueue.OPT|=c;return b.callReturn()};
Blockly.Blocks.neobot_set_output={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["OUT1","1"],["OUT2","2"],["OUT3","3"]]),"PORT").appendField("\ubc88 \ud3ec\ud2b8\uc758 \uac12\uc744");this.appendValueInput("VALUE").setCheck(["Number"]);this.appendDummyInput().appendField("\ub9cc\ud07c \ucd9c\ub825").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);
this.setNextStatement(!0)}};Entry.block.neobot_set_output=function(c,b){c=b.getStringField("PORT",b);var d=b.getNumberValue("VALUE",b),e=c;0>d?d=0:255<d&&(d=255);3===e&&(e=4);Entry.hw.sendQueue["OUT"+c]=d;Entry.hw.sendQueue.OPT&=~e;return b.callReturn()};
Blockly.Blocks.neobot_set_fnd={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("FND\uc5d0");this.appendValueInput("VALUE").setCheck(["Number"]);this.appendDummyInput().appendField("\ucd9c\ub825").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.neobot_set_fnd=function(c,b){c=b.getNumberValue("VALUE",b);255<c?c=255:0>c&&(c=0);Entry.hw.sendQueue.FND=c;return b.callReturn()};
Blockly.Blocks.neobot_play_note_for={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("\uba5c\ub85c\ub514").appendField(new Blockly.FieldDropdown([["\ubb34\uc74c","0"],[Lang.General.note_c,"1"],[Lang.General.note_c+"#","2"],[Lang.General.note_d,"3"],[Lang.General.note_d+"#","4"],[Lang.General.note_e,"5"],[Lang.General.note_f,"6"],[Lang.General.note_f+"#","7"],[Lang.General.note_g,"8"],[Lang.General.note_g+"#","9"],[Lang.General.note_a,"10"],[Lang.General.note_a+"#","11"],
[Lang.General.note_b,"12"]]),"NOTE").appendField("\uc744(\ub97c)").appendField(new Blockly.FieldDropdown([["1","0"],["2","1"],["3","2"],["4","3"],["5","4"],["6","5"]]),"OCTAVE").appendField("\uc625\ud0c0\ube0c\ub85c").appendField(new Blockly.FieldDropdown([["2\ubd84\uc74c\ud45c","2"],["4\ubd84\uc74c\ud45c","4"],["8\ubd84\uc74c\ud45c","8"],["16\ubd84\uc74c\ud45c","16"]]),"DURATION");this.appendDummyInput().appendField("\uae38\uc774\ub9cc\ud07c \uc18c\ub9ac\ub0b4\uae30").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.neobot_play_note_for=function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;Entry.hw.sendQueue.SND=0;Entry.engine.isContinue=!1;return b.callReturn()}var d=b.getNumberField("NOTE",b),e=b.getNumberField("OCTAVE",b),f=b.getNumberField("DURATION",b),d=d+12*e;b.isStart=!0;b.timeFlag=1;65<d&&(d=65);c.SND=d;setTimeout(function(){b.timeFlag=0},1/f*2E3);return b};Entry.Roborobo_Roduino={name:"roborobo_roduino",INSTRUCTION:{DIGITAL_READ:1,DIGITAL_SET_MODE:2,DIGITAL_WRITE:3,ANALOG_WRITE:4,ANALOG_READ:5,MOTOR:6,COLOR:7},setZero:function(){for(var c=0;5>c;c++)Entry.hw.sendQueue[c]=0;this.ColorPin=[0,0,0];Entry.hw.update()},setSendData:function(c){Entry.hw.sendQueue=c;Entry.hw.update();this.wait(32)},wait:function(c){for(var b=(new Date).getTime(),d=b;d<b+c;)d=(new Date).getTime()},ColorPin:[0,0,0]};
Entry.Roborobo_SchoolKit={name:"roborobo_schoolkit",INSTRUCTION:{DIGITAL_READ:1,DIGITAL_WRITE:2,MOTOR:3,COLOR:4,SERVO:5},setZero:function(){for(var c=0;5>c;c++)Entry.hw.sendQueue[c]=0;this.ColorPin=[0,0,0];Entry.hw.update()},setSendData:function(c){Entry.hw.sendQueue=c;Entry.hw.update();this.wait(32)},wait:function(c){for(var b=(new Date).getTime(),d=b;d<b+c;)d=(new Date).getTime()},ColorPin:[0,0,0]};
Blockly.Blocks.roduino_on_block={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_on);this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.roduino_on_block=function(c,b){return"1"};Blockly.Blocks.roduino_off_block={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_off);this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.roduino_off_block=function(c,b){return"0"};
Blockly.Blocks.roduino_get_analog_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.roduino_get_analog_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.roduino_get_port_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.roduino_get_port_number=function(c,b){return b.getStringField("PORT")};
Blockly.Blocks.roduino_get_analog_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_analog_value_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_analog_value_2).appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.roduino_get_analog_value=function(c,b){c=parseInt(b.getValue("VALUE",b));Entry.Roduino.setSendData([Entry.Roduino.INSTRUCTION.ANALOG_READ,c]);return Entry.hw.getAnalogPortValue(c)};
Blockly.Blocks.roduino_get_digital_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_get_digital_value_1);this.appendValueInput("VALUE").setCheck("Number");this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_sensor_value_2).appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.roduino_get_digital_value=function(c,b){c=b.getNumberValue("VALUE");Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.DIGITAL_READ,c]);return Entry.hw.portData[c-2]};
Blockly.Blocks.roduino_get_color={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_color+" ").appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_color_red,"red"],[Lang.Blocks.roborobo_color_green,"green"],[Lang.Blocks.roborobo_color_blue,"blue"],[Lang.Blocks.roborobo_color_yellow,"yellow"]]),"VALUE").appendField(Lang.Blocks.roborobo_color_detected);this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.roduino_get_color=function(c,b){c=0;b=b.getField("VALUE",b);var d=[Entry.hw.portData[Entry.Roborobo_Roduino.ColorPin[0]-2],Entry.hw.portData[Entry.Roborobo_Roduino.ColorPin[1]-2],Entry.hw.portData[Entry.Roborobo_Roduino.ColorPin[2]-2]];switch(b){case "red":1==d[0]&&0==d[1]&&0==d[2]&&(c=1);break;case "green":0==d[0]&&1==d[1]&&0==d[2]&&(c=1);break;case "blue":0==d[0]&&0==d[1]&&1==d[2]&&(c=1);break;case "yellow":1==d[0]&&1==d[1]&&1==d[2]&&(c=1)}return c};
Blockly.Blocks.roduino_set_digital={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_pin_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_pin_2);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_on,"on"],[Lang.Blocks.roborobo_off,"off"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.roduino_set_digital=function(c,b){c=b.getNumberValue("VALUE");var d=b.getField("OPERATOR");Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.DIGITAL_WRITE,c,"on"==d?1:0]);return b.callReturn()};
Blockly.Blocks.roduino_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_motor1,"motor1"],[Lang.Blocks.roborobo_motor2,"motor2"]]),"MODE");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_motor_CW,"cw"],[Lang.Blocks.roborobo_motor_CCW,"ccw"],[Lang.Blocks.roborobo_motor_stop,"stop"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));
this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.roduino_motor=function(c,b){pin2=0;var d;value2=0;c=b.getField("MODE");d=b.getField("OPERATOR");"motor1"==c?(c=9,pin2=10):(c=11,pin2=12);"cw"==d?(d=1,value2=0):"ccw"==d?(d=0,value2=1):value2=d=0;Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.MOTOR,c,d,pin2,value2]);return b.callReturn()};
Blockly.Blocks.roduino_set_color_pin={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_color+"R : ");this.appendValueInput("RED").setCheck(["Number","String",null]);this.appendDummyInput().appendField(" G : ");this.appendValueInput("GREEN").setCheck(["Number","String",null]);this.appendDummyInput().appendField(" B : ");this.appendValueInput("BLUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.roduino_set_color_pin=function(c,b){c=b.getNumberValue("RED",b);var d=b.getNumberValue("GREEN",b),e=b.getNumberValue("BLUE",b);Entry.Roborobo_Roduino.ColorPin=[c,d,e];Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.COLOR,c,d,e]);return b.callReturn()};
Blockly.Blocks.schoolkit_on_block={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_on);this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.schoolkit_on_block=function(c,b){return"1"};Blockly.Blocks.schoolkit_off_block={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_off);this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.schoolkit_off_block=function(c,b){return"0"};
Blockly.Blocks.schoolkit_get_out_port_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["OUT1","2"],["OUT2","3"],["OUT3","4"],["OUT4","5"],["OUT5","6"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.schoolkit_get_out_port_number=function(c,b){return b.getNumberField("PORT")};
Blockly.Blocks.schoolkit_set_output={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_pin_1);this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_pin_2);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_on,"on"],[Lang.Blocks.roborobo_off,"off"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.schoolkit_set_output=function(c,b){c=b.getNumberValue("VALUE");var d=b.getField("OPERATOR");Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.DIGITAL_WRITE,c,"on"==d?1:0]);return b.callReturn()};
Blockly.Blocks.schoolkit_get_in_port_number={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["IN1","7"],["IN2","8"],["IN3","9"],["IN4","10"],["IN5","11"],["IN6","12"],["IN7","13"]]),"PORT");this.appendDummyInput().appendField(" ");this.setOutput(!0,"Number");this.setInputsInline(!0)}};Entry.block.schoolkit_get_in_port_number=function(c,b){return b.getNumberField("PORT")};
Blockly.Blocks.schoolkit_get_input_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_get_digital_value_1);this.appendValueInput("VALUE").setCheck("Number");this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_sensor_value_2).appendField(" ");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.schoolkit_get_input_value=function(c,b){c=b.getNumberValue("VALUE");Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.DIGITAL_READ,c]);return Entry.hw.portData[c-7]};
Blockly.Blocks.schoolkit_motor={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_motor1,"motor1"],[Lang.Blocks.roborobo_motor2,"motor2"]]),"MODE");this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.roborobo_motor_CW,"cw"],[Lang.Blocks.roborobo_motor_CCW,"ccw"],[Lang.Blocks.roborobo_motor_stop,"stop"]]),"OPERATOR").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.schoolkit_motor=function(c,b){var d;d=b.getField("MODE");c=b.getField("OPERATOR");var e=b.getNumberValue("VALUE");d="motor1"==d?7:8;255<e?e=255:0>e&&(e=0);"cw"==c?Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.MOTOR,1,d,e]):"ccw"==c?Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.MOTOR,2,d,e]):"stop"==c&&Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.MOTOR,0,d,e]);return b.callReturn()};
Blockly.Blocks.schoolkit_set_servo_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_pin_1);this.appendValueInput("PIN").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.roborobo_num_pin_2);this.appendDummyInput().appendField(" : ");this.appendValueInput("VALUE").setCheck(["Number","String",null]);this.appendDummyInput().appendField(Lang.Blocks.roborobo_degree);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.schoolkit_set_servo_value=function(c,b){c=b.getNumberValue("PIN");var d=b.getNumberValue("VALUE");0>d?d=0:180<d&&(d=180);Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.SERVO,c,d]);return b.callReturn()};Entry.Robotis_carCont={INSTRUCTION:{NONE:0,WRITE:3,READ:2},CONTROL_TABLE:{CM_LED:[67,1],CM_SPRING_RIGHT:[69,1,69,2],CM_SPRING_LEFT:[70,1,69,2],CM_SWITCH:[71,1],CM_SOUND_DETECTED:[86,1],CM_SOUND_DETECTING:[87,1],CM_IR_LEFT:[91,2,91,4],CM_IR_RIGHT:[93,2,91,4],CM_CALIBRATION_LEFT:[95,2],CM_CALIBRATION_RIGHT:[97,2],AUX_MOTOR_SPEED_LEFT:[152,2],AUX_MOTOR_SPEED_RIGHT:[154,2]},setZero:function(){Entry.hw.sendQueue.setZero=[1];this.update();this.setRobotisData(null);Entry.hw.sendQueue.setZero=null;this.update();
this.setRobotisData([[Entry.Robotis_carCont.INSTRUCTION.WRITE,152,2,0],[Entry.Robotis_carCont.INSTRUCTION.WRITE,154,2,0]]);this.update()},name:"robotis_carCont",delay:40,postCallReturn:function(c,b,d){if(0>=d)return this.setRobotisData(b),this.update(),c.callReturn();if(c.isStart){if(1==c.timeFlag)return this.setRobotisData(null),this.update(),c;delete c.timeFlag;delete c.isStart;Entry.engine.isContinue=!1;this.update();return c.callReturn()}c.isStart=!0;c.timeFlag=1;this.setRobotisData(b);this.update();
setTimeout(function(){c.timeFlag=0},d);return c},wait:function(c,b){Entry.hw.socket.send(JSON.stringify(c));for(var d=c=(new Date).getTime();d<c+b;)d=(new Date).getTime()},update:function(){Entry.hw.update();var c=Entry.hw.sendQueue.ROBOTIS_DATA;c&&c.forEach(function(b){b.send=!0});this.setRobotisData(null)},filterSendData:function(){var c=Entry.hw.sendQueue.ROBOTIS_DATA;return c?c.filter(function(b){return!0!==b.send}):null},setRobotisData:function(c){var b=this.filterSendData();Entry.hw.sendQueue.ROBOTIS_DATA=
null==c?b:b?b.concat(c):c}};
Entry.Robotis_openCM70={INSTRUCTION:{NONE:0,WRITE:3,READ:2},CONTROL_TABLE:{CM_LED_R:[79,1],CM_LED_G:[80,1],CM_LED_B:[81,1],CM_BUZZER_INDEX:[84,1],CM_BUZZER_TIME:[85,1],CM_SOUND_DETECTED:[86,1],CM_SOUND_DETECTING:[87,1],CM_USER_BUTTON:[26,1],CM_MOTION:[66,1],AUX_SERVO_POSITION:[152,2],AUX_IR:[168,2],AUX_TOUCH:[202,1],AUX_TEMPERATURE:[234,1],AUX_ULTRASONIC:[242,1],AUX_MAGNETIC:[250,1],AUX_MOTION_DETECTION:[258,1],AUX_COLOR:[266,1],AUX_CUSTOM:[216,2],AUX_BRIGHTNESS:[288,2],AUX_HYDRO_THEMO_HUMIDITY:[274,
1],AUX_HYDRO_THEMO_TEMPER:[282,1],AUX_SERVO_MODE:[126,1],AUX_SERVO_SPEED:[136,2],AUX_MOTOR_SPEED:[136,2],AUX_LED_MODULE:[210,1]},setZero:function(){Entry.hw.sendQueue.setZero=[1];Entry.Robotis_carCont.update();Entry.Robotis_carCont.setRobotisData(null);Entry.hw.sendQueue.setZero=null;Entry.Robotis_carCont.update();Entry.Robotis_carCont.setRobotisData([[Entry.Robotis_openCM70.INSTRUCTION.WRITE,136,2,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,138,2,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,140,
2,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,142,2,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,144,2,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,146,2,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,79,1,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,80,1,0],[Entry.Robotis_openCM70.INSTRUCTION.WRITE,81,1,0]]);Entry.Robotis_carCont.update()},name:"robotis_openCM70",delay:15};
Blockly.Blocks.robotis_openCM70_cm_custom_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_custom);this.appendDummyInput().appendField("(");this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(")");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["BYTE","BYTE"],["WORD","WORD"],["DWORD","DWORD"]]),"SIZE");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_value);this.setOutput(!0,
"Number");this.setInputsInline(!0)}};Entry.block.robotis_openCM70_cm_custom_value=function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.READ;var d=0,e=b.getStringField("SIZE");"BYTE"==e?d=1:"WORD"==e?d=2:"DWORD"==e&&(d=4);b=b.getNumberValue("VALUE");Entry.Robotis_carCont.setRobotisData([[c,b,d,0,d]]);Entry.Robotis_carCont.update();return Entry.hw.portData[b]};
Blockly.Blocks.robotis_openCM70_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_cm);this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.sensorList()),"SENSOR");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_value);this.setOutput(!0,"Number");this.setInputsInline(!0)},sensorList:function(){var c=[];c.push([Lang.Blocks.robotis_cm_sound_detected,"CM_SOUND_DETECTED"]);c.push([Lang.Blocks.robotis_cm_sound_detecting,
"CM_SOUND_DETECTING"]);c.push([Lang.Blocks.robotis_cm_user_button,"CM_USER_BUTTON"]);return c}};
Entry.block.robotis_openCM70_sensor_value=function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.READ;var d=0,e=0,f=0,g=0;b=b.getStringField("SENSOR");"CM_SOUND_DETECTED"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[1]):"CM_SOUND_DETECTING"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[1],
d=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[1]):"CM_USER_BUTTON"==b&&(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[1]);f+=0*g;Entry.Robotis_carCont.setRobotisData([[c,d,e,0,g]]);Entry.Robotis_carCont.update();return Entry.hw.portData[f]};
Blockly.Blocks.robotis_openCM70_aux_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("");this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.portList()),"PORT");this.appendDummyInput().appendField(" ");this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.sensorList()),"SENSOR");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_value);this.setOutput(!0,"Number");this.setInputsInline(!0)},portList:function(){var c=
[];c.push([Lang.Blocks.robotis_common_port_3,"PORT_3"]);c.push([Lang.Blocks.robotis_common_port_4,"PORT_4"]);c.push([Lang.Blocks.robotis_common_port_5,"PORT_5"]);c.push([Lang.Blocks.robotis_common_port_6,"PORT_6"]);return c},sensorList:function(){var c=[];c.push([Lang.Blocks.robotis_aux_servo_position,"AUX_SERVO_POSITION"]);c.push([Lang.Blocks.robotis_aux_ir,"AUX_IR"]);c.push([Lang.Blocks.robotis_aux_touch,"AUX_TOUCH"]);c.push([Lang.Blocks.robotis_aux_brightness,"AUX_BRIGHTNESS"]);c.push([Lang.Blocks.robotis_aux_hydro_themo_humidity,
"AUX_HYDRO_THEMO_HUMIDITY"]);c.push([Lang.Blocks.robotis_aux_hydro_themo_temper,"AUX_HYDRO_THEMO_TEMPER"]);c.push([Lang.Blocks.robotis_aux_temperature,"AUX_TEMPERATURE"]);c.push([Lang.Blocks.robotis_aux_ultrasonic,"AUX_ULTRASONIC"]);c.push([Lang.Blocks.robotis_aux_magnetic,"AUX_MAGNETIC"]);c.push([Lang.Blocks.robotis_aux_motion_detection,"AUX_MOTION_DETECTION"]);c.push([Lang.Blocks.robotis_aux_color,"AUX_COLOR"]);c.push([Lang.Blocks.robotis_aux_custom,"AUX_CUSTOM"]);return c}};
Entry.block.robotis_openCM70_aux_sensor_value=function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.READ;var d=0,e=0,f=0,g=0,h=b.getStringField("PORT");b=b.getStringField("SENSOR");var k=0;"PORT_3"==h?k=2:"PORT_4"==h?k=3:"PORT_5"==h?k=4:"PORT_6"==h&&(k=5);"AUX_SERVO_POSITION"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[1]):
"AUX_IR"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[1]):"AUX_TOUCH"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[1]):"AUX_TEMPERATURE"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[0],
g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[1]):"AUX_BRIGHTNESS"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[1]):"AUX_HYDRO_THEMO_HUMIDITY"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[0],
g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[1]):"AUX_HYDRO_THEMO_TEMPER"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[1]):"AUX_ULTRASONIC"==
b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[1]):"AUX_MAGNETIC"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[1]):"AUX_MOTION_DETECTION"==b?(f=
Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[1]):"AUX_COLOR"==b?(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[1]):"AUX_CUSTOM"==b&&(f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[0],
g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[1],d=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[0],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[1]);f+=k*g;0!=k&&(e=6*g);Entry.Robotis_carCont.setRobotisData([[c,d,e,0,g]]);Entry.Robotis_carCont.update();return Entry.hw.portData[f]};
Blockly.Blocks.robotis_openCM70_cm_buzzer_index={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_cm);this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_buzzer_index);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.General.note_a+"(0)","0"],[Lang.General.note_a+"#(1)","1"],[Lang.General.note_b+"(2)","2"],[Lang.General.note_c+"(3)","3"],[Lang.General.note_c+"#(4)","4"],[Lang.General.note_d+"(5)","5"],[Lang.General.note_d+
"#(6)","6"],[Lang.General.note_e+"(7)","7"],[Lang.General.note_f+"(8)","8"],[Lang.General.note_f+"#(9)","9"],[Lang.General.note_g+"(10)","10"],[Lang.General.note_g+"#(11)","11"],[Lang.General.note_a+"(12)","12"],[Lang.General.note_a+"#(13)","13"],[Lang.General.note_b+"(14)","14"],[Lang.General.note_c+"(15)","15"],[Lang.General.note_c+"#(16)","16"],[Lang.General.note_d+"(17)","17"],[Lang.General.note_d+"#(18)","18"],[Lang.General.note_e+"(19)","19"],[Lang.General.note_f+"(20)","20"],[Lang.General.note_f+
"#(21)","21"],[Lang.General.note_g+"(22)","22"],[Lang.General.note_g+"#(23)","23"],[Lang.General.note_a+"(24)","24"],[Lang.General.note_a+"#(25)","25"],[Lang.General.note_b+"(26)","26"],[Lang.General.note_c+"(27)","27"],[Lang.General.note_c+"#(28)","28"],[Lang.General.note_d+"(29)","29"],[Lang.General.note_d+"#(30)","30"],[Lang.General.note_e+"(31)","31"],[Lang.General.note_f+"(32)","32"],[Lang.General.note_f+"#(33)","33"],[Lang.General.note_g+"(34)","34"],[Lang.General.note_g+"#(35)","35"],[Lang.General.note_a+
"(36)","36"],[Lang.General.note_a+"#(37)","37"],[Lang.General.note_b+"(38)","38"],[Lang.General.note_c+"(39)","39"],[Lang.General.note_c+"#(40)","40"],[Lang.General.note_d+"(41)","41"],[Lang.General.note_d+"#(42)","42"],[Lang.General.note_e+"(43)","43"],[Lang.General.note_f+"(44)","44"],[Lang.General.note_f+"#(45)","45"],[Lang.General.note_g+"(46)","46"],[Lang.General.note_g+"#(47)","47"],[Lang.General.note_a+"(48)","48"],[Lang.General.note_a+"#(49)","49"],[Lang.General.note_b+"(50)","50"],[Lang.General.note_c+
"(51)","51"]]),"CM_BUZZER_INDEX").appendField(Lang.Blocks.LOOKS_dialog_time_2);this.appendValueInput("CM_BUZZER_TIME").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.LOOKS_dialog_time_3).appendField(Lang.Blocks.robotis_common_play_buzzer).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_cm_buzzer_index=function(c,b){c=b.getField("CM_BUZZER_INDEX",b);var d=b.getNumberValue("CM_BUZZER_TIME",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g,h;f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[1];h=parseInt(10*d);50<h&&(h=50);return Entry.Robotis_carCont.postCallReturn(b,[[e,f,g,h],[e,Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[1],
c]],1E3*d)};
Blockly.Blocks.robotis_openCM70_cm_buzzer_melody={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_cm);this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_buzzer_melody);this.appendDummyInput().appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],
["19","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"]]),"CM_BUZZER_MELODY");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_index_number);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_play_buzzer).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_cm_buzzer_melody=function(c,b){c=b.getField("CM_BUZZER_MELODY",b);var d=Entry.Robotis_openCM70.INSTRUCTION.WRITE;return Entry.Robotis_carCont.postCallReturn(b,[[d,Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[1],255],[d,Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[1],c]],1E3)};
Blockly.Blocks.robotis_openCM70_cm_sound_detected_clear={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_clear_sound_detected).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_cm_sound_detected_clear=function(c,b){return Entry.Robotis_carCont.postCallReturn(b,[[Entry.Robotis_openCM70.INSTRUCTION.WRITE,Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[1],0]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_cm_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_cm);this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_red_color,"CM_LED_R"],[Lang.Blocks.robotis_common_green_color,"CM_LED_G"],[Lang.Blocks.robotis_common_blue_color,"CM_LED_B"]]),"CM_LED").appendField("LED").appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_common_off,
"0"]]),"VALUE").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_cm_led=function(c,b){c=b.getField("CM_LED",b);var d=b.getField("VALUE",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f=0,g=0;"CM_LED_R"==c?(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_R[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_R[1]):"CM_LED_G"==c?(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_G[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_G[1]):"CM_LED_B"==c&&(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_B[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_B[1]);
return Entry.Robotis_carCont.postCallReturn(b,[[e,f,g,d]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_cm_motion={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_motion);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_index_number);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_play_motion).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);
this.setNextStatement(!0)}};Entry.block.robotis_openCM70_cm_motion=function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.WRITE;var d,e,f;d=Entry.Robotis_openCM70.CONTROL_TABLE.CM_MOTION[0];e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_MOTION[1];f=b.getNumberValue("VALUE",b);return Entry.Robotis_carCont.postCallReturn(b,[[c,d,e,f]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_aux_motor_speed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_port_1,"1"],[Lang.Blocks.robotis_common_port_2,"2"]]),"PORT").appendField(Lang.Blocks.robotis_openCM70_aux_motor_speed_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]]),"DIRECTION_ANGLE").appendField(Lang.Blocks.robotis_openCM70_aux_motor_speed_2);
this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_aux_motor_speed=function(c,b){c=b.getField("PORT",b);var d=b.getField("DIRECTION_ANGLE",b),e=b.getNumberValue("VALUE"),f=Entry.Robotis_openCM70.INSTRUCTION.WRITE,g,h;g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTOR_SPEED[0];h=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTOR_SPEED[1];"CW"==d?(e+=1024,2047<e&&(e=2047)):1023<e&&(e=1023);return Entry.Robotis_carCont.postCallReturn(b,[[f,g+(c-1)*h,h,e]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_aux_servo_mode={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]]),"PORT").appendField(Lang.Blocks.robotis_openCM70_aux_servo_mode_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_wheel_mode,"0"],[Lang.Blocks.robotis_common_joint_mode,
"1"]]),"MODE");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_aux_servo_mode=function(c,b){c=b.getField("PORT",b);var d=b.getField("MODE",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_MODE[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_MODE[1];return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_aux_servo_speed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]]),"PORT").appendField(Lang.Blocks.robotis_openCM70_aux_servo_speed_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,
"CCW"]]),"DIRECTION_ANGLE").appendField(Lang.Blocks.robotis_openCM70_aux_servo_speed_2);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_aux_servo_speed=function(c,b){c=b.getField("PORT",b);var d=b.getField("DIRECTION_ANGLE",b),e=b.getNumberValue("VALUE"),f=Entry.Robotis_openCM70.INSTRUCTION.WRITE,g,h;g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_SPEED[0];h=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_SPEED[1];"CW"==d?(e+=1024,2047<e&&(e=2047)):1023<e&&(e=1023);return Entry.Robotis_carCont.postCallReturn(b,[[f,g+(c-1)*h,h,e]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_aux_servo_position={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]]),"PORT").appendField(Lang.Blocks.robotis_openCM70_aux_servo_position_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotis_openCM70_aux_servo_position=function(c,b){c=b.getField("PORT",b);var d=b.getNumberValue("VALUE"),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[1];1023<d?d=1023:0>d&&(d=0);return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_aux_led_module={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]]),"PORT").appendField(Lang.Blocks.robotis_openCM70_aux_led_module_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_cm_led_both+Lang.Blocks.robotis_common_off,"0"],[Lang.Blocks.robotis_cm_led_right+
Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_cm_led_left+Lang.Blocks.robotis_common_on,"2"],[Lang.Blocks.robotis_cm_led_both+Lang.Blocks.robotis_common_on,"3"]]),"LED_MODULE");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_openCM70_aux_led_module=function(c,b){c=b.getField("PORT",b);var d=b.getField("LED_MODULE",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_LED_MODULE[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_LED_MODULE[1];return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_aux_custom={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]]),"PORT").appendField(Lang.Blocks.robotis_openCM70_aux_custom_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotis_openCM70_aux_custom=function(c,b){c=b.getField("PORT",b);var d=b.getNumberValue("VALUE"),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[1];return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_openCM70_cm_custom={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_custom);this.appendDummyInput().appendField("(");this.appendValueInput("ADDRESS").setCheck(["Number","String"]);this.appendDummyInput().appendField(")");this.appendDummyInput().appendField(Lang.Blocks.robotis_common_case_01);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotis_openCM70_cm_custom=function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.WRITE;var d,e;d=b.getNumberValue("ADDRESS");e=b.getNumberValue("VALUE");return Entry.Robotis_carCont.postCallReturn(b,[[c,d,65535<e?4:255<e?2:1,e]],Entry.Robotis_openCM70.delay)};
Blockly.Blocks.robotis_carCont_sensor_value={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_cm_spring_left,"CM_SPRING_LEFT"],[Lang.Blocks.robotis_cm_spring_right,"CM_SPRING_RIGHT"],[Lang.Blocks.robotis_cm_switch,"CM_SWITCH"],[Lang.Blocks.robotis_cm_sound_detected,"CM_SOUND_DETECTED"],[Lang.Blocks.robotis_cm_sound_detecting,"CM_SOUND_DETECTING"],[Lang.Blocks.robotis_cm_ir_left,"CM_IR_LEFT"],[Lang.Blocks.robotis_cm_ir_right,
"CM_IR_RIGHT"],[Lang.Blocks.robotis_cm_calibration_left,"CM_CALIBRATION_LEFT"],[Lang.Blocks.robotis_cm_calibration_right,"CM_CALIBRATION_RIGHT"]]),"SENSOR").appendField(" ").appendField(Lang.Blocks.robotis_common_value);this.setOutput(!0,"Number");this.setInputsInline(!0)}};
Entry.block.robotis_carCont_sensor_value=function(c,b){c=Entry.Robotis_carCont.INSTRUCTION.READ;var d=0,e=0,f=0,g=0;b=b.getStringField("SENSOR");"CM_SPRING_LEFT"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[2],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[3]):"CM_SPRING_RIGHT"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[1],
d=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[2],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[3]):"CM_SWITCH"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[0],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[1]):"CM_SOUND_DETECTED"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[0],
e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[1]):"CM_SOUND_DETECTING"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[0],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[1]):"CM_IR_LEFT"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[2],e=
Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[3]):"CM_IR_RIGHT"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[2],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[3]):"CM_CALIBRATION_LEFT"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[0],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[1]):
"CM_CALIBRATION_RIGHT"==b?(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[0],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[1]):"CM_BUTTON_STATUS"==b&&(f=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[1],d=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[0],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[1]);
Entry.Robotis_carCont.setRobotisData([[c,d,e,0,g]]);Entry.Robotis_carCont.update();return Entry.hw.portData[f]};
Blockly.Blocks.robotis_carCont_cm_led={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_led_4).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_common_off,"0"]]),"VALUE_LEFT").appendField(", ").appendField(Lang.Blocks.robotis_cm_led_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_common_off,"0"]]),"VALUE_RIGHT").appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotis_carCont_cm_led=function(c,b){c=b.getField("VALUE_LEFT",b);var d=b.getField("VALUE_RIGHT",b),e=Entry.Robotis_carCont.INSTRUCTION.WRITE,f,g,h=0;f=Entry.Robotis_carCont.CONTROL_TABLE.CM_LED[0];g=Entry.Robotis_carCont.CONTROL_TABLE.CM_LED[1];1==c&&1==d?h=9:1==c&&0==d&&(h=8);0==c&&1==d&&(h=1);return Entry.Robotis_carCont.postCallReturn(b,[[e,f,g,h]],Entry.Robotis_carCont.delay)};
Blockly.Blocks.robotis_carCont_cm_sound_detected_clear={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotis_cm_clear_sound_detected).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_carCont_cm_sound_detected_clear=function(c,b){return Entry.Robotis_carCont.postCallReturn(b,[[Entry.Robotis_carCont.INSTRUCTION.WRITE,Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[0],Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[1],0]],Entry.Robotis_carCont.delay)};
Blockly.Blocks.robotis_carCont_aux_motor_speed={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.General.left,"LEFT"],[Lang.General.right,"RIGHT"]]),"DIRECTION").appendField(Lang.Blocks.robotis_carCont_aux_motor_speed_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]]),"DIRECTION_ANGLE").appendField(Lang.Blocks.robotis_carCont_aux_motor_speed_2);
this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_carCont_aux_motor_speed=function(c,b){var d=b.getField("DIRECTION",b);c=b.getField("DIRECTION_ANGLE",b);var e=b.getNumberValue("VALUE"),f=Entry.Robotis_carCont.INSTRUCTION.WRITE,g;"LEFT"==d?(d=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_LEFT[1]):(d=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_RIGHT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_RIGHT[1]);"CW"==c?(e+=1024,2047<e&&(e=2047)):1023<
e&&(e=1023);return Entry.Robotis_carCont.postCallReturn(b,[[f,d,g,e]],Entry.Robotis_carCont.delay)};
Blockly.Blocks.robotis_carCont_cm_calibration={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(new Blockly.FieldDropdown([[Lang.General.left,"LEFT"],[Lang.General.right,"RIGHT"]]),"DIRECTION").appendField(Lang.Blocks.robotis_carCont_calibration_1);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.robotis_common_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);
this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.robotis_carCont_cm_calibration=function(c,b){var d=b.getField("DIRECTION",b);c=b.getNumberValue("VALUE");var e=Entry.Robotis_carCont.INSTRUCTION.WRITE,f;"LEFT"==d?(d=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[1]):(d=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[1]);return Entry.Robotis_carCont.postCallReturn(b,[[e,d,f,c]],Entry.Robotis_carCont.delay)};Entry.robotori={PORT_MAP:{A0:0,A1:0,A2:0,A3:0,A4:0,A5:0,D2:0,D3:0,D10:0,D11:0,D12:0,D13:0,AOUT5:0,AOUT6:0,AOUT9:0,SERVO:90,rightMotor:0,leftMotor:0},setZero:function(){var c=Entry.robotori.PORT_MAP,b=Entry.hw.sendQueue,d;for(d in c)b[d]=c[d];Entry.hw.update()},name:"robotori",monitorTemplate:{imgPath:"hw/robotori.png",width:395,height:372,listPorts:{A0:{name:"A0",type:"input",pos:{x:0,y:0}},A1:{name:"A1",type:"input",pos:{x:0,y:0}},A2:{name:"A2",type:"input",pos:{x:0,y:0}},A3:{name:"A3",type:"input",
pos:{x:0,y:0}},A4:{name:"A4",type:"input",pos:{x:0,y:0}},A5:{name:"A5",type:"input",pos:{x:0,y:0}},D2:{name:"D2",type:"input",pos:{x:0,y:0}},D3:{name:"D3",type:"input",pos:{x:0,y:0}}},mode:"both"}};Blockly.Blocks.robotori_digitalInput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_D2_Input,"D2"],[Lang.Blocks.robotori_D3_Input,"D3"]]),"DEVICE");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};
Entry.block.robotori_digitalInput=function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]};
Blockly.Blocks.robotori_digitalOutput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("Digital Out").appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_D10_Output,"D10"],[Lang.Blocks.robotori_D11_Output,"D11"],[Lang.Blocks.robotori_D12_Output,"D12"],[Lang.Blocks.robotori_D13_Output,"D13"]]),"DEVICE").appendField("pin").appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_On,"ON"],[Lang.Blocks.robotori_Off,"OFF"]]),"VALUE");this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotori_digitalOutput=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getStringField("VALUE",b);c.D10="D10"==d&&"ON"==e?1:0;c.D11="D11"==d&&"ON"==e?1:0;c.D12="D12"==d&&"ON"==e?1:0;c.D13="D13"==d&&"ON"==e?1:0;return b.callReturn()};
Blockly.Blocks.robotori_analogInput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_A0_Input,"A0"],[Lang.Blocks.robotori_A1_Input,"A1"],[Lang.Blocks.robotori_A2_Input,"A2"],[Lang.Blocks.robotori_A3_Input,"A3"],[Lang.Blocks.robotori_A4_Input,"A4"],[Lang.Blocks.robotori_A5_Input,"A5"]]),"DEVICE");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.robotori_analogInput=function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]};
Blockly.Blocks.robotori_analogOutput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotori_analog).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_analog5,"AOUT5"],[Lang.Blocks.robotori_analog6,"AOUT6"],[Lang.Blocks.robotori_analog9,"AOUT9"]]),"DEVICE").appendField(Lang.Blocks.robotori_pin_OutputValue);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotori_analogOutput=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"AOUT5"==d&&(c.AOUT5=e);"AOUT6"==d&&(c.AOUT6=e);"AOUT9"==d&&(c.AOUT9=e);return b.callReturn()};
Blockly.Blocks.robotori_servo={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotori_Servo);this.appendValueInput("SERVO").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotori_servo=function(c,b){Entry.hw.sendQueue.SERVO=b.getNumberValue("SERVO");return b.callReturn()};
Blockly.Blocks.robotori_dc_direction={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.robotori_DC).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_DC_rightmotor,"RIGHT_MOTOR"],[Lang.Blocks.robotori_DC_leftmotor,"LEFT_MOTOR"]]),"DEVICE").appendField(Lang.Blocks.robotori_DC_select).appendField(new Blockly.FieldDropdown([[Lang.Blocks.robotori_DC_STOP,"STOP"],[Lang.Blocks.robotori_DC_CW,"CW"],[Lang.Blocks.robotori_DC_CCW,"CCW"]]),"VALUE");this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.robotori_dc_direction=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getStringField("VALUE",b);"RIGHT_MOTOR"==d&&("STOP"==e?c.RIGHT_MOTOR=255:"CW"==e?c.RIGHT_MOTOR=0:"CCW"==e&&(c.RIGHT_MOTOR=180));"LEFT_MOTOR"==d&&("STOP"==e?c.LEFT_MOTOR=255:"CW"==e?c.LEFT_MOTOR=0:"CCW"==e&&(c.LEFT_MOTOR=180));return b.callReturn()};Entry.Xbot={PORT_MAP:{rightWheel:0,leftWheel:0,head:90,armR:90,armL:90,analogD5:127,analogD6:127,D4:0,D7:0,D12:0,D13:0,ledR:0,ledG:0,ledB:0,lcdNum:0,lcdTxt:"                ",note:262,duration:0},setZero:function(){var c=Entry.Xbot.PORT_MAP,b=Entry.hw.sendQueue,d;for(d in c)b[d]=c[d];Entry.hw.update();Entry.Xbot.removeAllTimeouts()},timeouts:[],removeTimeout:function(c){clearTimeout(c);var b=this.timeouts;c=b.indexOf(c);0<=c&&b.splice(c,1)},removeAllTimeouts:function(){var c=this.timeouts,b;for(b in c)clearTimeout(c[b]);
this.timeouts=[]},name:"xbot_epor_edge"};Blockly.Blocks.xbot_digitalInput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.XBOT_D2_digitalInput,"D2"],[Lang.Blocks.XBOT_D3_digitalInput,"D3"],[Lang.Blocks.XBOT_D11_digitalInput,"D11"]]),"DEVICE");this.setInputsInline(!0);this.setOutput(!0,"Boolean")}};Entry.block.xbot_digitalInput=function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]};
Blockly.Blocks.xbot_analogValue={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("").appendField(new Blockly.FieldDropdown([[Lang.Blocks.XBOT_CDS,"light"],[Lang.Blocks.XBOT_MIC,"mic"],[Lang.Blocks.XBOT_analog0,"adc0"],[Lang.Blocks.XBOT_analog1,"adc1"],[Lang.Blocks.XBOT_analog2,"adc2"],[Lang.Blocks.XBOT_analog3,"adc3"]]),"DEVICE");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Entry.block.xbot_analogValue=function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]};
Blockly.Blocks.xbot_digitalOutput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_digital).appendField(new Blockly.FieldDropdown([["LED","D13"],["D4","D4"],["D7","D7"],["D12 ","D12"]]),"DEVICE").appendField(Lang.Blocks.XBOT_pin_OutputValue).appendField(new Blockly.FieldDropdown([[Lang.Blocks.XBOT_High,"HIGH"],[Lang.Blocks.XBOT_Low,"LOW"]]),"VALUE");this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.xbot_digitalOutput=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getStringField("VALUE",b);c.D13="D13"==d&&"HIGH"==e?1:0;c.D4="D4"==d&&"HIGH"==e?1:0;c.D7="D7"==d&&"HIGH"==e?1:0;c.D12="D12"==d&&"HIGH"==e?1:0;return b.callReturn()};
Blockly.Blocks.xbot_analogOutput={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_analog).appendField(new Blockly.FieldDropdown([["D5","analogD5"],["D6","analogD6"]]),"DEVICE").appendField(Lang.Blocks.XBOT_pin_Output_Value);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.xbot_analogOutput=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"analogD5"==d?c.analogD5=e:"analogD6"==d&&(c.analogD6=e);return b.callReturn()};
Blockly.Blocks.xbot_servo={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_Servo).appendField(new Blockly.FieldDropdown([[Lang.Blocks.XBOT_Head,"head"],[Lang.Blocks.XBOT_ArmR,"right"],[Lang.Blocks.XBOT_ArmL,"left"]]),"DEVICE").appendField(Lang.Blocks.XBOT_angle);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);
this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.xbot_servo=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"head"==d?c.head=e:"right"==d?c.armR=e:"left"==d&&(c.armL=e);return b.callReturn()};
Blockly.Blocks.xbot_oneWheel={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_DC).appendField(new Blockly.FieldDropdown([[Lang.Blocks.XBOT_rightWheel,"rightWheel"],[Lang.Blocks.XBOT_leftWheel,"leftWheel"],[Lang.Blocks.XBOT_bothWheel,"bothWheel"]]),"DEVICE").appendField(Lang.Blocks.XBOT_speed);this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png",
"*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.xbot_oneWheel=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"rightWheel"==d?c.rightWheel=e:"leftWheel"==d?c.leftWheel=e:c.rightWheel=c.leftWheel=e;return b.callReturn()};
Blockly.Blocks.xbot_twoWheel={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_rightSpeed);this.appendValueInput("rightWheel").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.XBOT_leftSpeed);this.appendValueInput("leftWheel").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.xbot_twoWheel=function(c,b){c=Entry.hw.sendQueue;c.rightWheel=b.getNumberValue("rightWheel");c.leftWheel=b.getNumberValue("leftWheel");return b.callReturn()};
Blockly.Blocks.xbot_rgb={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_RGBLED_R);this.appendValueInput("ledR").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.XBOT_RGBLED_G);this.appendValueInput("ledG").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.XBOT_RGBLED_B);this.appendValueInput("ledB").setCheck(["Number","String"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+
"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};Entry.block.xbot_rgb=function(c,b){c=Entry.hw.sendQueue;c.ledR=b.getNumberValue("ledR");c.ledG=b.getNumberValue("ledG");c.ledB=b.getNumberValue("ledB");return b.callReturn()};
Blockly.Blocks.xbot_rgb_picker={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.XBOT_RGBLED_color).appendField(new Blockly.FieldColour("#ff0000"),"VALUE").appendField(Lang.Blocks.XBOT_set).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.xbot_rgb_picker=function(c,b){c=b.getStringField("VALUE");var d=Entry.hw.sendQueue;d.ledR=parseInt(.3*parseInt(c.substr(1,2),16));d.ledG=parseInt(.3*parseInt(c.substr(3,2),16));d.ledB=parseInt(.3*parseInt(c.substr(5,2),16));return b.callReturn()};
Blockly.Blocks.xbot_buzzer={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField(Lang.Blocks.HAMSTER_play_note_for_1).appendField(new Blockly.FieldDropdown([[Lang.Blocks.XBOT_c,"C"],[Lang.Blocks.XBOT_d,"D"],[Lang.Blocks.XBOT_e,"E"],[Lang.Blocks.XBOT_f,"F"],[Lang.Blocks.XBOT_g,"G"],[Lang.Blocks.XBOT_a,"A"],[Lang.Blocks.XBOT_b,"B"]]),"NOTE").appendField(" ").appendField(new Blockly.FieldDropdown([["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]]),"OCTAVE").appendField(Lang.Blocks.HAMSTER_play_note_for_3);
this.appendValueInput("VALUE").setCheck(["Number","String"]);this.appendDummyInput().appendField(Lang.Blocks.XBOT_melody_ms).appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);this.setNextStatement(!0)}};
Entry.block.xbot_buzzer=function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("NOTE",b),e=b.getStringField("OCTAVE",b),f=b.getNumberValue("VALUE",b),d=d+e;c.note="C2"==d?65:"D2"==d?73:"E2"==d?82:"F2"==d?87:"G2"==d?98:"A2"==d?110:"B2"==d?123:"C3"==d?131:"D3"==d?147:"E3"==d?165:"F3"==d?175:"G3"==d?196:"A3"==d?220:"B3"==d?247:"C4"==d?262:"D4"==d?294:"E4"==d?330:"F4"==d?349:"G4"==d?392:"A4"==d?440:"B4"==d?494:"C5"==d?523:"D5"==d?587:"E5"==d?659:"F5"==d?698:"G5"==d?784:"A5"==d?880:"B5"==d?988:"C6"==
d?1047:"D6"==d?1175:"E6"==d?1319:"F6"==d?1397:"G6"==d?1568:"A6"==d?1760:"B6"==d?1976:"C7"==d?2093:"D7"==d?2349:"E7"==d?2637:"F7"==d?2794:"G7"==d?3136:"A7"==d?3520:"B7"==d?3951:262;c.duration=40*f;return b.callReturn()};
Blockly.Blocks.xbot_lcd={init:function(){this.setColour("#00979D");this.appendDummyInput().appendField("LCD").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"]]),"LINE").appendField(Lang.Blocks.XBOT_Line).appendField(", ").appendField(Lang.Blocks.XBOT_outputValue);this.appendValueInput("VALUE").setCheck(["String","Number"]);this.appendDummyInput().appendField(new Blockly.FieldIcon(Entry.mediaFilePath+"block_icon/hardware_03.png","*"));this.setInputsInline(!0);this.setPreviousStatement(!0);
this.setNextStatement(!0)}};Entry.block.xbot_lcd=function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberField("LINE",b),e=b.getStringValue("VALUE",b);0==d?(c.lcdNum=0,c.lcdTxt=e):1==d&&(c.lcdNum=1,c.lcdTxt=e);return b.callReturn()};Entry.Collection=function(c){this.length=0;this._hashMap={};this._observers=[];this.set(c)};
(function(c,b){c.set=function(c){for(;this.length;)b.pop.call(this);var d=this._hashMap,f;for(f in d)delete d[f];if(void 0!==c){f=0;for(var g=c.length;f<g;f++){var h=c[f];d[h.id]=h;b.push.call(this,h)}}};c.push=function(c){this._hashMap[c.id]=c;b.push.call(this,c)};c.unshift=function(){for(var c=Array.prototype.slice.call(arguments,0),e=this._hashMap,f=c.length-1;0<=f;f--){var g=c[f];b.unshift.call(this,g);e[g.id]=g}};c.insert=function(c,e){b.splice.call(this,e,0,c);this._hashMap[c.id]=c};c.has=function(b){return!!this._hashMap[b]};
c.get=function(b){return this._hashMap[b]};c.at=function(b){return this[b]};c.getAll=function(){for(var b=this.length,c=[],f=0;f<b;f++)c.push(this[f]);return c};c.indexOf=function(c){return b.indexOf.call(this,c)};c.find=function(b){for(var c=[],d,g=0,h=this.length;g<h;g++){d=!0;var k=this[g],l;for(l in b)if(b[l]!=k[l]){d=!1;break}d&&c.push(k)}return c};c.pop=function(){var c=b.pop.call(this);delete this._hashMap[c.id];return c};c.shift=function(){var c=b.shift.call(this);delete this._hashMap[c.id];
return c};c.slice=function(c,e){c=b.slice.call(this,c,e);e=this._hashMap;for(var d in c)delete e[c[d].id];return c};c.remove=function(b){var c=this.indexOf(b);-1<c&&(delete this._hashMap[b.id],this.splice(c,1))};c.splice=function(c,e){var d=b.slice.call(arguments,2),g=this._hashMap;e=void 0===e?this.length-c:e;for(var h=b.splice.call(this,c,e),k=0,l=h.length;k<l;k++)delete g[h[k].id];k=0;for(l=d.length;k<l;k++)g=d[k],b.splice.call(this,c++,0,g),this._hashMap[g.id]=g;return h};c.clear=function(){for(;this.length;)b.pop.call(this);
this._hashMap={}};c.map=function(b,c){for(var d=[],e=0,h=this.length;e<h;e++)d.push(b(this[e],c));return d};c.moveFromTo=function(c,e){var d=this.length-1;0>c||0>e||c>d||e>d||b.splice.call(this,e,0,b.splice.call(this,c,1)[0])};c.sort=function(){};c.fromJSON=function(){};c.toJSON=function(){for(var b=[],c=0,f=this.length;c<f;c++)b.push(this[c].toJSON());return b};c.observe=function(){};c.unobserve=function(){};c.notify=function(){};c.destroy=function(){}})(Entry.Collection.prototype,Array.prototype);Entry.Event=function(c){this._sender=c;this._listeners=[]};(function(c){c.attach=function(b,c){var d=this;b={obj:b,fn:c,destroy:function(){d.detach(this)}};this._listeners.push(b);return b};c.detach=function(b){var c=this._listeners;b=c.indexOf(b);if(-1<b)return c.splice(b,1)};c.clear=function(){for(var b=this._listeners;b.length;)b.pop()};c.notify=function(){var b=arguments;this._listeners.slice().forEach(function(c){c.fn.apply(c.obj,b)})}})(Entry.Event.prototype);Entry.Utils={};
Entry.overridePrototype=function(){Number.prototype.mod=function(c){return(this%c+c)%c};String.prototype.repeat||(String.prototype.repeat=function(c){if(null==this)throw new TypeError("can't convert "+this+" to object");var b=""+this;c=+c;c!=c&&(c=0);if(0>c)throw new RangeError("repeat count must be non-negative");if(Infinity==c)throw new RangeError("repeat count must be less than infinity");c=Math.floor(c);if(0==b.length||0==c)return"";if(268435456<=b.length*c)throw new RangeError("repeat count must not overflow maximum string size");for(var d=
"";;){1==(c&1)&&(d+=b);c>>>=1;if(0==c)break;b+=b}return d})};Entry.Utils.isNumber=function(c){if("number"===typeof c)return!0;var b=/^-?\d+\.?\d*$/;return"string"===typeof c&&b.test(c)?!0:!1};Entry.Utils.generateId=function(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).substr(-4)};Entry.Utils.intersectArray=function(c,b){for(var d=[],e=0;e<c.length;e++)for(var f=0;f<b.length;f++)if(c[e]==b[f]){d.push(c[e]);break}return d};
Entry.Utils.isPointInMatrix=function(c,b,d){d=void 0===d?0:d;var e=c.offsetX?c.x+c.offsetX:c.x,f=c.offsetY?c.y+c.offsety:c.y;return e-d<=b.x&&e+c.width+d>=b.x&&f-d<=b.y&&f+c.height+d>=b.y};
Entry.Utils.colorDarken=function(c,b){function d(b){2!=b.length&&(b="0"+b);return b}var e,f;7===c.length?(e=parseInt(c.substr(1,2),16),f=parseInt(c.substr(3,2),16),c=parseInt(c.substr(5,2),16)):(e=parseInt(c.substr(1,2),16),f=parseInt(c.substr(2,2),16),c=parseInt(c.substr(3,2),16));b=void 0===b?.7:b;e=d(Math.floor(e*b).toString(16));f=d(Math.floor(f*b).toString(16));c=d(Math.floor(c*b).toString(16));return"#"+e+f+c};
Entry.Utils.colorLighten=function(c,b){b=0===b?0:b||20;c=Entry.Utils.hexToHsl(c);c.l+=b/100;c.l=Math.min(1,Math.max(0,c.l));return Entry.Utils.hslToHex(c)};Entry.Utils.bound01=function(c,b){var d=c;"string"==typeof d&&-1!=d.indexOf(".")&&1===parseFloat(d)&&(c="100%");d="string"===typeof c&&-1!=c.indexOf("%");c=Math.min(b,Math.max(0,parseFloat(c)));d&&(c=parseInt(c*b,10)/100);return 1E-6>Math.abs(c-b)?1:c%b/parseFloat(b)};
Entry.Utils.hexToHsl=function(c){var b,d;7===c.length?(b=parseInt(c.substr(1,2),16),d=parseInt(c.substr(3,2),16),c=parseInt(c.substr(5,2),16)):(b=parseInt(c.substr(1,2),16),d=parseInt(c.substr(2,2),16),c=parseInt(c.substr(3,2),16));b=Entry.Utils.bound01(b,255);d=Entry.Utils.bound01(d,255);c=Entry.Utils.bound01(c,255);var e=Math.max(b,d,c),f=Math.min(b,d,c),g,h=(e+f)/2;if(e==f)g=f=0;else{var k=e-f,f=.5<h?k/(2-e-f):k/(e+f);switch(e){case b:g=(d-c)/k+(d<c?6:0);break;case d:g=(c-b)/k+2;break;case c:g=
(b-d)/k+4}g/=6}return{h:360*g,s:f,l:h}};Entry.Utils.hslToHex=function(c){function b(b,c,d){0>d&&(d+=1);1<d&&--d;return d<1/6?b+6*(c-b)*d:.5>d?c:d<2/3?b+(c-b)*(2/3-d)*6:b}function d(b){return 1==b.length?"0"+b:""+b}var e,f;f=Entry.Utils.bound01(c.h,360);e=Entry.Utils.bound01(c.s,1);c=Entry.Utils.bound01(c.l,1);if(0===e)e=c=f=c;else{var g=.5>c?c*(1+e):c+e-c*e,h=2*c-g;e=b(h,g,f+1/3);c=b(h,g,f);f=b(h,g,f-1/3)}c*=255;f*=255;return"#"+[d(Math.round(255*e).toString(16)),d(Math.round(c).toString(16)),d(Math.round(f).toString(16))].join("")};
Entry.Utils.bindGlobalEvent=function(c){var b=$(document);void 0===c&&(c="resize mousedown mousemove keydown keyup dispose".split(" "));-1<c.indexOf("resize")&&(Entry.windowReszied&&($(window).off("resize"),Entry.windowReszied.clear()),Entry.windowResized=new Entry.Event(window),$(window).on("resize",function(b){Entry.windowResized.notify(b)}));-1<c.indexOf("mousedown")&&(Entry.documentMousedown&&(b.off("mousedown"),Entry.documentMousedown.clear()),Entry.documentMousedown=new Entry.Event(window),
b.on("mousedown",function(b){Entry.documentMousedown.notify(b)}));-1<c.indexOf("mousemove")&&(Entry.documentMousemove&&(b.off("touchmove mousemove"),Entry.documentMousemove.clear()),Entry.mouseCoordinate={},Entry.documentMousemove=new Entry.Event(window),b.on("touchmove mousemove",function(b){b.originalEvent&&b.originalEvent.touches&&(b=b.originalEvent.touches[0]);Entry.documentMousemove.notify(b);Entry.mouseCoordinate.x=b.clientX;Entry.mouseCoordinate.y=b.clientY}));-1<c.indexOf("keydown")&&(Entry.keyPressed&&
(b.off("keydown"),Entry.keyPressed.clear()),Entry.pressedKeys=[],Entry.keyPressed=new Entry.Event(window),b.on("keydown",function(b){var c=b.keyCode;0>Entry.pressedKeys.indexOf(c)&&Entry.pressedKeys.push(c);Entry.keyPressed.notify(b)}));-1<c.indexOf("keyup")&&(Entry.keyUpped&&(b.off("keyup"),Entry.keyUpped.clear()),Entry.keyUpped=new Entry.Event(window),b.on("keyup",function(b){var c=Entry.pressedKeys.indexOf(b.keyCode);-1<c&&Entry.pressedKeys.splice(c,1);Entry.keyUpped.notify(b)}));-1<c.indexOf("dispose")&&
(Entry.disposeEvent&&Entry.disposeEvent.clear(),Entry.disposeEvent=new Entry.Event(window),Entry.documentMousedown&&Entry.documentMousedown.attach(this,function(b){Entry.disposeEvent.notify(b)}))};Entry.Utils.makeActivityReporter=function(){Entry.activityReporter=new Entry.ActivityReporter;Entry.commander&&Entry.commander.addReporter(Entry.activityReporter);return Entry.activityReporter};Entry.Utils.initEntryEvent_=function(){Entry.events_||(Entry.events_=[])};Entry.sampleColours=[];
Entry.assert=function(c,b){if(!c)throw Error(b||"Assert failed");};Entry.parseTexttoXML=function(c){var b;window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(c)):b=(new DOMParser).parseFromString(c,"text/xml");return b};
Entry.createElement=function(c,b){c=c instanceof HTMLElement?c:document.createElement(c);b&&(c.id=b);c.hasClass=function(b){return this.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))};c.addClass=function(b){for(var c=this.className,d=0;d<arguments.length;d++)b=arguments[d],this.hasClass(b)||(c+=" "+b);this.className=c};c.removeClass=function(b){for(var c=this.className,d=0;d<arguments.length;d++)b=arguments[d],this.hasClass(b)&&(c=c.replace(new RegExp("(\\s|^)"+b+"(\\s|$)")," "));this.className=
c};c.bindOnClick=function(b){$(this).on("click tab",function(c){c.stopImmediatePropagation();b.call(this,c)})};return c};Entry.makeAutolink=function(c){return c?c.replace(/(http|https|ftp|telnet|news|irc):\/\/([-/.a-zA-Z0-9_~#%$?&=:200-377()][^)\]}]+)/gi,"<a href='$1://$2' target='_blank'>$1://$2</a>").replace(/([xA1-xFEa-z0-9_-]+@[xA1-xFEa-z0-9-]+.[a-z0-9-]+)/gi,"<a href='mailto:$1'>$1</a>"):""};Entry.generateHash=function(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).substr(-4)};
Entry.addEventListener=function(c,b){this.events_||(this.events_={});this.events_[c]||(this.events_[c]=[]);b instanceof Function&&this.events_[c].push(b);return!0};Entry.dispatchEvent=function(c,b){this.events_||(this.events_={});var d=this.events_[c];if(d)for(var e=0,f=d.length;e<f;e++)d[e].apply(window,Array.prototype.slice.call(arguments).splice(1))};
Entry.removeEventListener=function(c,b){if(this.events_[c])for(var d=0,e=this.events_[c].length;d<e;d++)if(this.events_[c][d]===b){this.events_[c].splice(d,1);break}};Entry.removeAllEventListener=function(c){this.events_&&this.events_[c]&&delete this.events_[c]};
Entry.addTwoNumber=function(c,b){if(!Entry.Utils.isNumber(c)||!Entry.Utils.isNumber(b))return c+b;c+="";b+="";var d=c.indexOf("."),e=b.indexOf("."),f=0,g=0;0<d&&(f=c.length-d-1);0<e&&(g=b.length-e-1);return 0<f||0<g?f>=g?(parseFloat(c)+parseFloat(b)).toFixed(f):(parseFloat(c)+parseFloat(b)).toFixed(g):parseInt(c)+parseInt(b)};Entry.hex2rgb=function(c){return(c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(c))?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:null};
Entry.rgb2hex=function(c,b,d){return"#"+(16777216+(c<<16)+(b<<8)+d).toString(16).slice(1)};Entry.generateRgb=function(){return{r:Math.floor(256*Math.random()),g:Math.floor(256*Math.random()),b:Math.floor(256*Math.random())}};Entry.adjustValueWithMaxMin=function(c,b,d){return c>d?d:c<b?b:c};Entry.isExist=function(c,b,d){for(var e=0;e<d.length;e++)if(d[e][b]==c)return d[e];return!1};Entry.getColourCodes=function(){return"transparent #660000 #663300 #996633 #003300 #003333 #003399 #000066 #330066 #660066 #FFFFFF #990000 #993300 #CC9900 #006600 #336666 #0033FF #000099 #660099 #990066 #000000 #CC0000 #CC3300 #FFCC00 #009900 #006666 #0066FF #0000CC #663399 #CC0099 #333333 #FF0000 #FF3300 #FFFF00 #00CC00 #009999 #0099FF #0000FF #9900CC #FF0099 #666666 #CC3333 #FF6600 #FFFF33 #00FF00 #00CCCC #00CCFF #3366FF #9933FF #FF00FF #999999 #FF6666 #FF6633 #FFFF66 #66FF66 #66CCCC #00FFFF #3399FF #9966FF #FF66FF #BBBBBB #FF9999 #FF9966 #FFFF99 #99FF99 #66FFCC #99FFFF #66CCff #9999FF #FF99FF #CCCCCC #FFCCCC #FFCC99 #FFFFCC #CCFFCC #99FFCC #CCFFFF #99CCFF #CCCCFF #FFCCFF".split(" ")};
Entry.removeElement=function(c){c&&c.parentNode&&c.parentNode.removeChild(c)};Entry.getElementsByClassName=function(c){for(var b=[],d=document.getElementsByTagName("*"),e=0;e<d.length;e++)-1<(" "+d[e].className+" ").indexOf(" "+c+" ")&&b.push(d[e]);return b};Entry.parseNumber=function(c){return"string"==typeof c&&Entry.Utils.isNumber(c)?Number(c):"number"==typeof c&&Entry.Utils.isNumber(c)?c:!1};Entry.countStringLength=function(c){var b,d=0;for(b=0;b<c.length;b++)255<c.charCodeAt(b)?d+=2:d++;return d};
Entry.cutStringByLength=function(c,b){var d,e=0;for(d=0;e<b&&d<c.length;d++)255<c.charCodeAt(d)?e+=2:e++;return c.substr(0,d)};Entry.isChild=function(c,b){if(!b)for(;b.parentNode;)if((b=b.parentNode)==c)return!0;return!1};Entry.launchFullScreen=function(c){c.requestFullscreen?c.requestFullscreen():c.mozRequestFulScreen?c.mozRequestFulScreen():c.webkitRequestFullscreen?c.webkitRequestFullscreen():c.msRequestFullScreen&&c.msRequestFullScreen()};
Entry.exitFullScreen=function(){document.exitFullScreen?document.exitFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()};Entry.isPhone=function(){return!1};
Entry.getKeyCodeMap=function(){return{65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",32:Lang.Blocks.START_press_some_key_space,37:Lang.Blocks.START_press_some_key_left,38:Lang.Blocks.START_press_some_key_up,39:Lang.Blocks.START_press_some_key_right,40:Lang.Blocks.START_press_some_key_down,48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",13:Lang.Blocks.START_press_some_key_enter}};
Entry.checkCollisionRect=function(c,b){return!(c.y+c.height<b.y||c.y>b.y+b.height||c.x+c.width<b.x||c.x>b.x+b.width)};Entry.bindAnimationCallback=function(c,b){c.addEventListener("webkitAnimationEnd",b,!1);c.addEventListener("animationend",b,!1);c.addEventListener("oanimationend",b,!1)};Entry.cloneSimpleObject=function(c){var b={},d;for(d in c)b[d]=c[d];return b};Entry.nodeListToArray=function(c){for(var b=Array(c.length),d=-1,e=c.length;++d!==e;b[d]=c[d]);return b};
Entry.computeInputWidth=function(c){var b=document.getElementById("entryInputForComputeWidth");b||(b=document.createElement("span"),b.setAttribute("id","entryInputForComputeWidth"),b.className="elem-element",document.body.appendChild(b));b.innerHTML=c.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return Number(b.offsetWidth+10)+"px"};Entry.isArrowOrBackspace=function(c){return-1<[37,38,39,40,8].indexOf(c)};
Entry.hexStringToBin=function(c){for(var b=[],d=0;d<c.length-1;d+=2)b.push(parseInt(c.substr(d,2),16));return String.fromCharCode.apply(String,b)};Entry.findObjsByKey=function(c,b,d){for(var e=[],f=0;f<c.length;f++)c[f][b]==d&&e.push(c[f]);return e};Entry.factorials=[];Entry.factorial=function(c){return 0===c||1==c?1:0<Entry.factorials[c]?Entry.factorials[c]:Entry.factorials[c]=Entry.factorial(c-1)*c};
Entry.getListRealIndex=function(c,b){if(!Entry.Utils.isNumber(c))switch(c){case "FIRST":c=1;break;case "LAST":c=b.array_.length;break;case "RANDOM":c=Math.floor(Math.random()*b.array_.length)+1}return c};Entry.toRadian=function(c){return c*Math.PI/180};Entry.toDegrees=function(c){return 180*c/Math.PI};
Entry.getPicturesJSON=function(c){for(var b=[],d=0,e=c.length;d<e;d++){var f=c[d],g={};g._id=f._id;g.id=f.id;g.dimension=f.dimension;g.filename=f.filename;g.fileurl=f.fileurl;g.name=f.name;g.scale=f.scale;b.push(g)}return b};Entry.getSoundsJSON=function(c){for(var b=[],d=0,e=c.length;d<e;d++){var f=c[d],g={};g._id=f._id;g.duration=f.duration;g.ext=f.ext;g.id=f.id;g.filename=f.filename;g.fileurl=f.fileurl;g.name=f.name;b.push(g)}return b};Entry.cutDecimal=function(c){return Math.round(100*c)/100};
Entry.getBrowserType=function(){if(Entry.userAgent)return Entry.userAgent;var c=navigator.userAgent,b,d=c.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(d[1]))return b=/\brv[ :]+(\d+)/g.exec(c)||[],"IE "+(b[1]||"");if("Chrome"===d[1]&&(b=c.match(/\b(OPR|Edge)\/(\d+)/),null!=b))return b.slice(1).join(" ").replace("OPR","Opera");d=d[2]?[d[1],d[2]]:[navigator.appName,navigator.appVersion,"-?"];null!=(b=c.match(/version\/(\d+)/i))&&d.splice(1,1,b[1]);c=d.join(" ");
return Entry.userAgent=c};Entry.setBasicBrush=function(c){var b=new createjs.Graphics;b.thickness=1;b.rgb=Entry.hex2rgb("#ff0000");b.opacity=100;b.setStrokeStyle(1);b.beginStroke("rgba(255,0,0,1)");var d=new createjs.Shape(b);Entry.stage.selectedObjectContainer.addChild(d);c.brush&&(c.brush=null);c.brush=b;c.shape&&(c.shape=null);c.shape=d};
Entry.setCloneBrush=function(c,b){var d=new createjs.Graphics;d.thickness=b.thickness;d.rgb=b.rgb;d.opacity=b.opacity;d.setStrokeStyle(d.thickness);d.beginStroke("rgba("+d.rgb.r+","+d.rgb.g+","+d.rgb.b+","+d.opacity/100+")");b=new createjs.Shape(d);Entry.stage.selectedObjectContainer.addChild(b);c.brush&&(c.brush=null);c.brush=d;c.shape&&(c.shape=null);c.shape=b};Entry.isFloat=function(c){return/\d+\.{1}\d+$/.test(c)};
Entry.getStringIndex=function(c){if(!c)return"";for(var b={string:c,index:1},d=0,e=[],f=c.length-1;0<f;--f){var g=c.charAt(f);if(Entry.Utils.isNumber(g))e.unshift(g),d=f;else break}0<d&&(b.string=c.substring(0,d),b.index=parseInt(e.join(""))+1);return b};
Entry.getOrderedName=function(c,b,d){if(!c)return"untitled";if(!b||0===b.length)return c;d||(d="name");for(var e=0,f=Entry.getStringIndex(c),g=0,h=b.length;g<h;g++){var k=Entry.getStringIndex(b[g][d]);f.string===k.string&&k.index>e&&(e=k.index)}return 0<e?f.string+e:c};Entry.changeXmlHashId=function(c){if(/function_field/.test(c.getAttribute("type")))for(var b=c.getElementsByTagName("mutation"),d=0,e=b.length;d<e;d++)b[d].setAttribute("hashid",Entry.generateHash());return c};
Entry.getMaxFloatPoint=function(c){for(var b=0,d=0,e=c.length;d<e;d++){var f=String(c[d]),g=f.indexOf(".");-1!==g&&(f=f.length-(g+1),f>b&&(b=f))}return Math.min(b,20)};Entry.convertToRoundedDecimals=function(c,b){return Entry.Utils.isNumber(c)&&this.isFloat(c)?Number(Math.round(c+"e"+b)+"e-"+b):c};Entry.attachEventListener=function(c,b,d){setTimeout(function(){c.addEventListener(b,d)},0)};Entry.deAttachEventListener=function(c,b,d){c.removeEventListener(b,d)};
Entry.isEmpty=function(c){if(!c)return!0;for(var b in c)if(c.hasOwnProperty(b))return!1;return!0};Entry.Utils.disableContextmenu=function(c){if(c)$(c).on("contextmenu",this.contextPreventFunction)};Entry.Utils.contextPreventFunction=function(c){c.stopPropagation();c.preventDefault();return!1};Entry.Utils.enableContextmenu=function(c){c&&$(c).off("contextmenu",this.contextPreventFunction)};Entry.Utils.isRightButton=function(c){return 2==c.button||c.ctrlKey};
Entry.Utils.isTouchEvent=function(c){return"mousedown"!==c.type.toLowerCase()};Entry.Utils.inherit=function(c,b){function d(){}d.prototype=c.prototype;b.prototype=new d;return b};Entry.bindAnimationCallbackOnce=function(c,b){c.one("webkitAnimationEnd animationendo animationend",b)};Entry.Utils.isInInput=function(c){return"textarea"==c.target.type||"text"==c.target.type};Entry.Utils.isFunction=function(c){return"function"===typeof c};
Entry.Utils.addFilters=function(c,b){c=c.elem("defs");var d=c.elem("filter",{id:"entryTrashcanFilter_"+b});d.elem("feGaussianBlur",{"in":"SourceAlpha",stdDeviation:2,result:"blur"});d.elem("feOffset",{"in":"blur",dx:1,dy:1,result:"offsetBlur"});d=d.elem("feMerge");d.elem("feMergeNode",{"in":"offsetBlur"});d.elem("feMergeNode",{"in":"SourceGraphic"},d);d=c.elem("filter",{id:"entryBlockShadowFilter_"+b,height:"200%"});d.elem("feOffset",{result:"offOut",in:"SourceGraphic",dx:0,dy:1});d.elem("feColorMatrix",
{result:"matrixOut",in:"offOut",type:"matrix",values:"0.7 0 0 0 0 0 0.7 0 0 0 0 0 0.7 0 0 0 0 0 1 0"});d.elem("feBlend",{in:"SourceGraphic",in1:"offOut",mode:"normal"});b=c.elem("filter",{id:"entryBlockHighlightFilter_"+b});b.elem("feOffset",{result:"offOut",in:"SourceGraphic",dx:0,dy:0});b.elem("feColorMatrix",{result:"matrixOut",in:"offOut",type:"matrix",values:"1.3 0 0 0 0 0 1.3 0 0 0 0 0 1.3 0 0 0 0 0 1 0"})};
Entry.Utils.addBlockPattern=function(c,b){c=c.elem("pattern",{id:"blockHoverPattern_"+b,class:"blockHoverPattern",patternUnits:"userSpaceOnUse",patternTransform:"translate(12, 0)",x:0,y:0,width:125,height:33,style:"display: none"});b=Entry.mediaFilePath+"block_pattern_(order).png";for(var d=1;5>d;d++)c.elem("image",{class:"pattern"+d,href:b.replace("(order)",d),x:0,y:0,width:125,height:33});return{pattern:c}};Entry.Utils.COLLISION={NONE:0,UP:1,RIGHT:2,LEFT:3,DOWN:4};
Entry.Utils.createMouseEvent=function(c,b){var d=document.createEvent("MouseEvent");d.initMouseEvent(c,!0,!0,window,0,0,0,b.clientX,b.clientY,!1,!1,!1,!1,0,null);return d};Entry.Utils.xmlToJsonData=function(c){c=$.parseXML(c);var b=[];c=c.childNodes[0].childNodes;for(var d in c){var e=c[d];if(e.tagName){var f={category:e.getAttribute("id"),blocks:[]},e=e.childNodes;for(d in e){var g=e[d];g.tagName&&(g=g.getAttribute("type"))&&f.blocks.push(g)}b.push(f)}}return b};
Entry.Utils.stopProjectWithToast=function(c,b,d,e){e=c.block;b=b||"\ub7f0\ud0c0\uc784 \uc5d0\ub7ec \ubc1c\uc0dd";Entry.toast&&!d&&Entry.toast.alert(Lang.Msgs.warn,Lang.Workspace.check_runtime_error,!0);Entry.engine&&Entry.engine.toggleStop();"workspace"===Entry.type&&(c.block&&"funcBlock"in c.block?e=c.block.funcBlock:c.funcExecutor&&(e=c.funcExecutor.scope.block,c=c.type.replace("func_",""),Entry.Func.edit(Entry.variableContainer.functions_[c])),e&&(Entry.container.selectObject(e.getCode().object.id,
!0),e.view.getBoard().activateBlock(e)));throw Error(b);};Entry.Utils.AsyncError=function(c){this.name="AsyncError";this.message=c||"\ube44\ub3d9\uae30 \ud638\ucd9c \ub300\uae30"};Entry.Utils.AsyncError.prototype=Error();Entry.Utils.AsyncError.prototype.constructor=Entry.Utils.AsyncError;Entry.Utils.isChrome=function(){return/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())};
Entry.Utils.waitForWebfonts=function(c,b){var d=0;if(c&&c.length)for(var e=0,f=c.length;e<f;++e)(function(e){function f(){g&&g.offsetWidth!=l&&(++d,g.parentNode.removeChild(g),g=null);if(d>=c.length&&(m&&clearInterval(m),d==c.length))return b(),!0}var g=document.createElement("span");g.innerHTML="giItT1WQy@!-/#";g.style.position="absolute";g.style.left="-10000px";g.style.top="-10000px";g.style.fontSize="300px";g.style.fontFamily="sans-serif";g.style.fontVariant="normal";g.style.fontStyle="normal";
g.style.fontWeight="normal";g.style.letterSpacing="0";document.body.appendChild(g);var l=g.offsetWidth;g.style.fontFamily=e;var m;f()||(m=setInterval(f,50))})(c[e]);else return b&&b(),!0};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(c){window.setTimeout(c,1E3/60)}}();
Entry.isMobile=function(){if(Entry.device)return"tablet"===Entry.device;var c=window.platform;if(c&&c.type&&("tablet"===c.type||"mobile"===c.type))return Entry.device="tablet",!0;Entry.device="desktop";return!1};Entry.Utils.convertMouseEvent=function(c){return c.originalEvent&&c.originalEvent.touches?c.originalEvent.touches[0]:c};Entry.Utils.convertIntToHex=function(c){return c.toString(16).toUpperCase()};Entry.Utils.hasSpecialCharacter=function(c){return/!|@|#|\$|%|\^|&|\*|\(|\)|\+|=|-|\[|\]|\\|\'|;|,|\.|\/|{|}|\||\"|:|<|>|\?/g.test(c)};
Entry.Utils.debounce=function(c,b,d){var e;return function(){var f=this,g=arguments,h=d&&!e;clearTimeout(e);e=setTimeout(function(){e=null;d||c.apply(f,g)},b);h&&c.apply(f,g);return e}};Entry.Utils.isNewVersion=function(c,b){try{c=c.replace("v","");b=b.replace("v","");var d=c.split("."),e=b.split("."),f=d.length<e.length?d.length:e.length;c=!1;b=!0;for(var g=0;g<f;g++)Number(d[g])<Number(e[g])?(c=!0,b=!1):Number(d[g])>Number(e[g])&&(b=!1);b&&d.length<e.length&&(c=!0);return c}catch(h){return!1}};
Entry.Utils.getBlockCategory=function(){var c={},b;return function(d){if(d){if(c[d])return c[d];b||(b=EntryStatic.getAllBlocks());for(var e=0;e<b.length;e++){var f=b[e],g=f.category;if(-1<f.blocks.indexOf(d))return c[d]=g}}}}();Entry.Utils.getUniqObjectsBlocks=function(c){c=c||Entry.container.objects_;var b=[];c.forEach(function(c){c=c.script;c instanceof Entry.Code||(c=new Entry.Code(c));c.getBlockList().forEach(function(c){0>b.indexOf(c.type)&&b.push(c.type)})});return b};
Entry.Utils.getObjectsBlocks=function(c){c=c||Entry.container.objects_;var b=[];c.forEach(function(c){c=c.script;c instanceof Entry.Code||(c=new Entry.Code(c));c.getBlockList(!0).forEach(function(c){b.push(c.type)})});return b};
Entry.Utils.makeCategoryDataByBlocks=function(c){if(c){for(var b=this,d=EntryStatic.getAllBlocks(),e={},f=0;f<d.length;f++){var g=d[f];g.blocks=[];e[g.category]=f}c.forEach(function(c){var f=b.getBlockCategory(c),f=e[f];void 0!==f&&d[f].blocks.push(c)});c=EntryStatic.getAllBlocks();for(f=0;f<c.length;f++){var g=c[f],h=g.blocks;if("func"===g.category)c.splice(f,1);else{var k=d[f].blocks,l=[];h.forEach(function(b){-1<k.indexOf(b)&&l.push(b)});d[f].blocks=l}}return d}};
Entry.Utils.blur=function(){var c=document.activeElement;c&&c.blur&&c.blur()};Entry.Utils.getWindow=function(c){if(c)for(var b=0;b<window.frames.length;b++){var d=window.frames[b];if(d.Entry&&d.Entry.hashId===c)return d}};
Entry.Utils.restrictAction=function(c,b,d){var e=this;c=c||[];c=c.map(function(b){return b[0]});var f=function(f){f=f||window.event;var g=f.target||f.srcElement;if(!e.isRightButton(f))for(var h=0;h<c.length;h++){var m=c[h];if(m===g||$.contains(m,g)){d?g.focus&&g.focus():b(f);return}}f.preventDefault||(f.returnValue=!1,f.cancelBubble=!0);f.preventDefault();f.stopPropagation()};this._restrictHandler=f;var g=Entry.getDom();Entry.Utils.disableContextmenu(g);g.addEventListener?(g.addEventListener("click",
f,!0),g.addEventListener("mousedown",f,!0),g.addEventListener("touchstart",f,!0)):(g.attachEvent("onclick",f),g.attachEvent("onmousedown",f),g.attachEvent("ontouchstart",f))};
Entry.Utils.allowAction=function(){var c=Entry.getDom();Entry.Utils.enableContextmenu(c);this._restrictHandler&&(c.addEventListener?(c.removeEventListener("click",this._restrictHandler,!0),c.removeEventListener("mousedown",this._restrictHandler,!0),c.removeEventListener("touchstart",this._restrictHandler,!0)):(c.detachEvent("onclick",this._restrictHandler),c.detachEvent("onmousedown",this._restrictHandler),c.detachEvent("ontouchstart",this._restrictHandler)),delete this._restrictHandler)};
Entry.Utils.glideBlock=function(c,b,d,e){var f=c.getBoundingClientRect(),g=Entry.Dom($('<svg id="globalSvg" width="10" height="10"version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'),{parent:$(document.body)});c=$(c.cloneNode(!0));c.attr({transform:"translate(8,0)"});g.append(c);g.css({top:f.top,left:f.left});g.velocity({top:d,left:b-8},{duration:1200,complete:function(){setTimeout(function(){g.remove();e()},500)},easing:"ease-in-out"})};Entry.Model=function(c,b){var d=Entry.Model;d.generateSchema(c);d.generateSetter(c);d.generateObserve(c);(void 0===b||b)&&Object.seal(c);return c};
(function(c){c.generateSchema=function(b){var c=b.schema;if(void 0!==c){c=JSON.parse(JSON.stringify(c));b.data={};for(var e in c)(function(d){b.data[d]=c[d];Object.defineProperty(b,d,{get:function(){return b.data[d]}})})(e);b._toJSON=this._toJSON}};c.generateSetter=function(b){b.set=this.set};c.set=function(b,c){var d={},f;for(f in this.data)void 0!==b[f]&&(b[f]===this.data[f]?delete b[f]:(d[f]=this.data[f],this.data[f]=b[f]instanceof Array?b[f].concat():b[f]));c||this.notify(Object.keys(b),d)};c.generateObserve=
function(b){b.observers=[];b.observe=this.observe;b.unobserve=this.unobserve;b.notify=this.notify};c.observe=function(b,c,e,f){e=new Entry.Observer(this.observers,b,c,e);if(!1!==f)b[c]([]);return e};c.unobserve=function(b){b.destroy()};c.notify=function(b,c){"string"===typeof b&&(b=[b]);var d=this;d.observers.map(function(e){var f=b;void 0!==e.attrs&&(f=Entry.Utils.intersectArray(e.attrs,b));if(f.length)e.object[e.funcName](f.map(function(b){return{name:b,object:d,oldValue:c[b]}}))})};c._toJSON=function(){var b=
{},c;for(c in this.data)b[c]=this.data[c];return b}})(Entry.Model);Entry.Observer=function(c,b,d,e){this.parent=c;this.object=b;this.funcName=d;this.attrs=e;c.push(this)};(function(c){c.destroy=function(){var b=this.parent,c=b.indexOf(this);-1<c&&b.splice(c,1);return this}})(Entry.Observer.prototype);Entry.STATIC={OBJECT:0,ENTITY:1,SPRITE:2,SOUND:3,VARIABLE:4,FUNCTION:5,SCENE:6,MESSAGE:7,BLOCK_MODEL:8,BLOCK_RENDER_MODEL:9,BOX_MODEL:10,THREAD_MODEL:11,DRAG_INSTANCE:12,BLOCK_STATIC:0,BLOCK_MOVE:1,BLOCK_FOLLOW:2,RETURN:0,CONTINUE:1,BREAK:2,PASS:3,COMMAND_TYPES:{addThread:101,destroyThread:102,destroyBlock:103,recoverBlock:104,insertBlock:105,separateBlock:106,moveBlock:107,cloneBlock:108,uncloneBlock:109,scrollBoard:110,setFieldValue:111,selectBlockMenu:112,destroyBlockBelow:113,destroyThreads:114,
addThreads:115,recoverBlockBelow:116,addThreadFromBlockMenu:117,insertBlockFromBlockMenu:118,moveBlockFromBlockMenu:119,separateBlockForDestroy:120,moveBlockForDestroy:121,insertBlockFromBlockMenuFollowSeparate:122,insertBlockFollowSeparate:123,separateBlockByCommand:124,selectObject:201,objectEditButtonClick:202,objectAddPicture:203,objectRemovePicture:204,objectAddSound:205,objectRemoveSound:206,"do":301,undo:302,redo:303,editPicture:401,uneditPicture:402,processPicture:403,unprocessPicture:404,
toggleRun:501,toggleStop:502,containerSelectObject:601,playgroundChangeViewMode:701,playgroundClickAddPicture:702,playgroundClickAddSound:703,playgroundClickAddPictureCancel:704,playgroundClickAddSoundCancel:705,variableContainerSelectFilter:801,variableContainerClickVariableAddButton:802,variableContainerAddVariable:803,variableContainerRemoveVariable:804,variableAddSetName:805},RECORDABLE:{SUPPORT:1,SKIP:2,ABANDON:3}};Entry.Command={};(function(c){c[Entry.STATIC.COMMAND_TYPES.do]={recordable:Entry.STATIC.RECORDABLE.SKIP,log:function(b){return[]},skipUndoStack:!0};c[Entry.STATIC.COMMAND_TYPES.undo]={recordable:Entry.STATIC.RECORDABLE.SKIP,log:function(b){return[]},skipUndoStack:!0};c[Entry.STATIC.COMMAND_TYPES.redo]={recordable:Entry.STATIC.RECORDABLE.SKIP,log:function(b){return[]},skipUndoStack:!0}})(Entry.Command);Entry.Commander=function(c){if("workspace"==c||"phone"==c)Entry.stateManager=new Entry.StateManager;Entry.do=this.do.bind(this);Entry.undo=this.undo.bind(this);this.editor={};this.reporters=[];this._tempStorage=null;Entry.Command.editor=this.editor;this.doEvent=new Entry.Event(this);this.logEvent=new Entry.Event(this)};
(function(c){c.do=function(b){"string"===typeof b&&(b=Entry.STATIC.COMMAND_TYPES[b]);var c=Array.prototype.slice.call(arguments);c.shift();this.report(Entry.STATIC.COMMAND_TYPES.do);this.report(b,c);var e=Entry.Command[b],f;Entry.stateManager&&!0!==e.skipUndoStack&&(f=Entry.stateManager.addCommand.apply(Entry.stateManager,[b,this,this.do,e.undo].concat(e.state.apply(this,c))));e=Entry.Command[b].do.apply(this,c);this.doEvent.notify(b,c);var g=f?f.id:null;return{value:e,isPass:function(b,c){this.isPassById(g,
b,c)}.bind(this)}};c.undo=function(){var b=Array.prototype.slice.call(arguments),c=b.shift(),e=Entry.Command[c];this.report(Entry.STATIC.COMMAND_TYPES.undo);var f=Entry.Command[c],g;Entry.stateManager&&!0!==f.skipUndoStack&&(g=Entry.stateManager.addCommand.apply(Entry.stateManager,[c,this,this.do,e.undo].concat(e.state.apply(this,b))));return{value:Entry.Command[c].do.apply(this,b),isPass:function(b){this.isPassById(g.id,b)}.bind(this)}};c.redo=function(){var b=Array.prototype.slice.call(arguments),
c=b.shift(),e=Entry.Command[c];this.report(Entry.STATIC.COMMAND_TYPES.redo);var f=Entry.Command[c];Entry.stateManager&&!0!==f.skipUndoStack&&Entry.stateManager.addCommand.apply(Entry.stateManager,[c,this,this.undo,c].concat(e.state.apply(null,b)));e.undo.apply(this,b)};c.setCurrentEditor=function(b,c){this.editor[b]=c};c.isPass=function(b){if(Entry.stateManager){b=void 0===b?!0:b;var c=Entry.stateManager.getLastCommand();c&&(c.isPass=b)}};c.isPassById=function(b,c,e){b&&Entry.stateManager&&(c=void 0===
c?!0:c,b=Entry.stateManager.getLastCommandById(b))&&(b.isPass=c,e&&(b.skipCount=!!e))};c.addReporter=function(b){b.logEventListener=this.logEvent.attach(b,b.add)};c.removeReporter=function(b){b.logEventListener&&this.logEvent.detatch(b.logEventListener);delete b.logEventListener};c.report=function(b,c){c=b&&Entry.Command[b]&&Entry.Command[b].log?Entry.Command[b].log.apply(this,c):c;c.unshift(b);this.logEvent.notify(c)}})(Entry.Commander.prototype);(function(c){function b(b,d,e){c[b]=Entry.cloneSimpleObject(c[d]);e&&e instanceof Array&&e.forEach(function(d){c[b][d[0]]=d[1]});return c[b]}var d=Entry.STATIC.COMMAND_TYPES,e;c[d.addThread]={do:function(b,c){return this.editor.board.code.createThread(b,c)},state:function(b,c){if(void 0===c||null===c)c=this.editor.board.code.getThreadCount();return[c]},log:function(b,c){b instanceof Entry.Thread&&(b=b.toJSON());return[["blocks",b],["index",c]]},undo:"destroyThread",recordable:Entry.STATIC.RECORDABLE.SUPPORT,
validate:!1,dom:["playground","blockMenu","&0"]};e=Entry.cloneSimpleObject(c[d.addThread]);e.showMe=function(b){if(!b.isTooltipFaded()){b.fadeOutTooltip();var c=Entry.getDom(b.processDomQuery(this.dom)),e=b.requestNextData().content,e=Entry.getDom(b.processDomQuery(e[0]===d.moveBlockFromBlockMenu?["playground","board","coord","&1","&2"]:["playground","board","&1","magnet","next",0],e)).getBoundingClientRect();Entry.Utils.glideBlock(c,e.left,e.top,function(){b.fadeInTooltip()})}};e.followCmd=!0;e.restrict=
function(b,c,d,e){e=e.requestNextData().content;e[1]===Entry.STATIC.COMMAND_TYPES.insertBlockFromBlockMenu?Entry.Command.editor.board.scrollToPointer(e[2][2]):Entry.Command.editor.board.scrollToPointer(e[2][1]);return new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:d})};c[d.addThreadFromBlockMenu]=e;c[d.destroyThread]={do:function(b){b instanceof Entry.Thread||(b=this.editor.board.code.getThread(b));b.getFirstBlock().destroy(!0,!0)},state:function(b){b instanceof
Entry.Thread||(b=this.editor.board.code.getThread(b));var c=this.editor.board.code.getThreadIndex(b);return[b.toJSON(),c]},log:function(b){b instanceof Entry.Thread&&(b=this.editor.board.code.getThreadIndex(b));return[["index",b]]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,restrict:function(b,c,d){d()},validate:!1,undo:"addThread"};c[d.destroyBlock]={do:function(b){b=this.editor.board.findBlock(b);b.doDestroy(!0)},state:function(b){b=this.editor.board.findBlock(b);return[b.toJSON(),b.pointer()]},
log:function(b){b=this.editor.board.findBlock(b);return[["block",b.pointer?b.pointer():b]]},undo:"recoverBlock"};c[d.recoverBlock]={do:function(b,c){b=this.editor.board.code.createThread([b]).getFirstBlock();this.editor.board.insert(b,c)},state:function(b){"string"!==typeof b&&(b=b.id);return[b]},log:function(b,c){b=this.editor.board.findBlock(b.id);return[["block",b],["pointer",c]]},undo:"destroyBlock"};c[d.insertBlock]={do:function(b,c,d){b=this.editor.board.findBlock(b);this.editor.board.insert(b,
c,d)},state:function(b,c){b=this.editor.board.findBlock(b);c=[b,b.targetPointer()];"string"!==typeof b&&"basic"===b.getBlockType()&&c.push(b.thread.getCount(b));return c},log:function(b,c,d){b=this.editor.board.findBlock(b);c instanceof Array||(c=c.pointer());b=[["block",b?b.pointer():""],["targetPointer",c]];d&&b.push(["count",d?d:null]);return b},recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"insertBlock",restrict:function(b,c,d,e){Entry.Command.editor.board.scrollToPointer(b.content[1][1]);var f=
!1,g=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(c){!f&&c&&(f=!0,d(),g.init([{title:b.tooltip.title,content:b.tooltip.content,target:e.processDomQuery(["playground","board","&1","magnet"])}],{indicator:!0,callBack:function(){}}))}});return g},showMe:function(b){if(!b.isTooltipFaded()){b.fadeOutTooltip();var c=Entry.getDom(b.processDomQuery(this.dom)),d=Entry.getDom(b.processDomQuery(["playground","board","&1","magnet","next",
0])).getBoundingClientRect();Entry.Utils.glideBlock(c,d.left,d.top,function(){b.fadeInTooltip()})}},dom:["playground","board","&0"]};e=Entry.cloneSimpleObject(c[d.insertBlock]);e.followCmd=!0;c[d.insertBlockFollowSeparate]=e;e=Entry.cloneSimpleObject(c[d.insertBlock]);e.restrict=function(b,c,d){d();return new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{indicator:!0,callBack:function(){}})};e.dom=["playground","board","&1","magnet"];c[d.insertBlockFromBlockMenu]=e;e=
Entry.cloneSimpleObject(c[d.insertBlockFromBlockMenu]);e.followCmd=!0;c[d.insertBlockFromBlockMenuFollowSeparate]=e;c[d.separateBlock]={do:function(b,c,d){b=this.editor.board.findBlock(b);"number"===typeof d&&(b.view._moveTo(c,d),c=void 0);c=void 0===c?Entry.DRAG_MODE_DRAG:c;b.view&&b.view._toGlobalCoordinate(c);b.doSeparate()},state:function(b){b=this.editor.board.findBlock(b);var c=[b],d=b.targetPointer();c.push(d);"basic"===b.getBlockType()&&c.push(b.thread.getCount(b));return c},recordable:Entry.STATIC.RECORDABLE.SUPPORT,
log:function(b){b=this.editor.board.findBlock(b);var c=b.pointer();b.view&&(b=b.view);return[["block",c],["x",b.x],["y",b.y]]},restrict:function(b,c,d,e){Entry.Command.editor.board.scrollToPointer(b.content[1][1]);var f=!1,g=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(c){!f&&c&&(d(),f=!0,g.init([{title:b.tooltip.title,content:b.tooltip.content,target:e.processDomQuery(["playground","board","coord","&1","&2"])}],{indicator:!0,
callBack:function(){d()}}))}});return g},validate:!1,undo:"insertBlock",dom:["playground","board","&0"]};e=Entry.cloneSimpleObject(c[d.separateBlock]);e.restrict=function(b,c,d,e){Entry.Command.editor.board.scrollToPointer(b.content[1][1]);var f=!1,g=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(c){!f&&c&&(d(),f=!0,g.init([{title:b.tooltip.title,content:b.tooltip.content,target:["playground","board","trashcan"]}],{indicator:!0,
callBack:function(){d()}}))}});return g};e.showMe=function(b){if(!b.isTooltipFaded()){b.fadeOutTooltip();var c=Entry.getDom(b.processDomQuery(this.dom)),d=Entry.getDom(["playground","board","trashcan"]).getBoundingClientRect();Entry.Utils.glideBlock(c,d.left,d.top,function(){b.fadeInTooltip()})}};e.followCmd=!0;c[d.separateBlockForDestroy]=e;c[d.moveBlock]={do:function(b,c,d){void 0!==c?(b=this.editor.board.findBlock(b),b.moveTo(c,d)):b._updatePos()},state:function(b){b=this.editor.board.findBlock(b);
return[b,b.x,b.y]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,restrict:function(b,c,d,e){var f=!1,g=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(c){!f&&c&&(f=!0,d(),g.init([{title:b.tooltip.title,content:b.tooltip.content,target:e.processDomQuery(["playground","board","coord","&1","&2"])}],{indicator:!0,callBack:function(){}}))}});return g},validate:!1,log:function(b,c,d){b=this.editor.board.findBlock(b);return[["block",b.pointer()],
["x",b.view.x],["y",b.view.y]]},undo:"moveBlock",dom:["playground","board","&0"]};e=Entry.cloneSimpleObject(c[d.moveBlock]);e.followCmd=!0;e.restrict=function(b,c,d,e){Entry.Command.editor.board.scrollToPointer(b.content[1][1]);var f=!1,g=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(c){!f&&c&&(f=!0,d(),g.init([{title:b.tooltip.title,content:b.tooltip.content,target:["playground","board","trashcan"]}],{indicator:!0,callBack:function(){d()}}))}});
return g};c[d.moveBlockForDestroy]=e;e=Entry.cloneSimpleObject(c[d.moveBlock]);e.restrict=function(b,c,d){d();return new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{indicator:!0,callBack:function(){}})};e.dom=["playground","board","coord","&1","&2"];c[d.moveBlockFromBlockMenu]=e;b(d.cloneBlock,d.addThread,[["undo","uncloneBlock"]]);b(d.uncloneBlock,d.destroyThread,[["undo","cloneBlock"]]);c[d.scrollBoard]={do:function(b,c,d){d||this.editor.board.scroller._scroll(b,
c);delete this.editor.board.scroller._diffs},state:function(b,c){return[-b,-c]},log:function(b,c){return[["dx",b],["dy",c]]},recordable:Entry.STATIC.RECORDABLE.SKIP,undo:"scrollBoard"};c[d.setFieldValue]={do:function(b,c){this.editor.board.findBlock(b).setValue(c,!0);Entry.disposeEvent.notify(!0)},state:function(b,c){c=this.editor.board.findBlock(b);return[b,c._startValue||c.getValue()]},log:function(b,c){return[["pointer",b],["value",c]]},restrict:function(b,c,d,e){var f=!1;Entry.Command.editor.board.scrollToPointer(b.content[1][1]);
var g=Entry.Command.editor.board.findBlock(b.content[1][1]),h=b.content[2][1];g instanceof Entry.FieldTextInput&&g.fixNextValue(h);var k=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,direction:"left",target:c}],{dimmed:!0,restrict:!0,callBack:function(c){!f&&c&&(f=!0,d(),d(),k.init([{title:b.tooltip.title,content:b.tooltip.content,target:e.processDomQuery(["playground","board","&0","option"])}],{dimmed:!0,restrict:!0,callBack:function(){}}))}});return k},disableMouseUpDispose:!0,
recordable:Entry.STATIC.RECORDABLE.SUPPORT,dom:["playground","board","&0"],undo:"setFieldValue"};c[d.selectBlockMenu]={do:function(b,c,d){var e=Entry.getMainWS().blockMenu;e.selectMenu(b,c,d);e.align()},state:function(b,c,d){return[Entry.getMainWS().blockMenu.lastSelector,c,d]},log:function(b,c,d){return[["selector",b]]},skipUndoStack:!0,recordable:Entry.STATIC.RECORDABLE.SUPPORT,dom:["playground","blockMenu","category","&0"],undo:"selectBlockMenu"};c[d.destroyThreads]={do:function(){this.editor.board.code.getThreads().filter(function(b){return b.getFirstBlock().isDeletable()}).forEach(function(b){b.destroy()})},
state:function(){return[this.editor.board.code.getThreads().filter(function(b){return b.getFirstBlock().isDeletable()}).map(function(b){return b.toJSON()})]},log:function(){return[]},undo:"addThreads"};c[d.addThreads]={do:function(b){var c=this.editor.board.code;b.forEach(function(b){c.createThread(b)})},state:function(){return[]},log:function(){return[]},undo:"destroyThreads"};c[d.destroyBlockBelow]={do:function(b){b=this.editor.board.findBlock(b);b.doDestroyBelow(!0)},state:function(b){b=this.editor.board.findBlock(b);
var c=b.thread;return[c instanceof Entry.Thread?c.toJSON(!1,b):[b.toJSON()],b.targetPointer()]},log:function(b){return[]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"recoverBlockBelow"};c[d.recoverBlockBelow]={do:function(b,c){var d=this.editor.board;b=d.code.createThread(b);d.insert(b.getFirstBlock(),c)},state:function(b,c){return[b[0]]},log:function(b,c){return[]},undo:"destroyBlockBelow"};b(d.separateBlockByCommand,d.separateBlock)})(Entry.Command);(function(c){c[Entry.STATIC.COMMAND_TYPES.containerSelectObject]={do:function(b){Entry.container.selectObject(b)},state:function(){},log:function(b){return[["objectId",b],["objectIndex",Entry.container.getObjectIndex(b)]]},skipUndoStack:!0,undo:"",recordable:Entry.STATIC.RECORDABLE.SUPPORT,dom:["container","objectIndex","&1"]}})(Entry.Command);(function(c){var b=Entry.STATIC.COMMAND_TYPES;c[b.toggleRun]={do:function(b){Entry.engine.toggleRun(!0)},state:function(){return[]},log:function(b){return[["callerName",b]]},restrict:function(b,c,f,g){f=Entry.engine;f.isState("stop")||f.toggleStop();return new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(b){}})},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"toggleStop",dom:["engine","&0"]};c[b.toggleStop]={do:function(b){Entry.engine.toggleStop()},
state:function(){return[]},log:function(b){return[["callerName",b]]},restrict:function(b,c,f,g){g=Entry.engine;g.isState("run")||g.toggleRun();return new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{dimmed:!0,restrict:!0,callBack:function(b){f()}})},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"toggleRun",dom:["engine","&0"]}})(Entry.Command);(function(c){var b=Entry.STATIC.COMMAND_TYPES;c[b.selectObject]={do:function(b){return Entry.container.selectObject(b)},state:function(b){if((b=Entry.playground)&&b.object)return[b.object.id]},log:function(b){return[b]},undo:"selectObject"};c[b.objectEditButtonClick]={do:function(b){Entry.container.getObject(b).toggleEditObject()},state:function(b){return[]},log:function(b){return[["objectId",b],["objectIndex",Entry.container.getObjectIndex(b)]]},skipUndoStack:!0,recordable:Entry.STATIC.RECORDABLE.SUPPORT,
dom:["container","objectIndex","&1","editButton"],undo:"selectObject"};c[b.objectAddPicture]={do:function(d,e){var f=c[b.objectAddPicture].hashId;f&&(e.id=f,delete c[b.objectAddPicture].hashId);Entry.container.getObject(d).addPicture(e);Entry.playground.injectPicture();Entry.playground.selectPicture(e);Entry.dispatchEvent("dismissModal")},state:function(b,c){return[b,c]},log:function(b,c){var d={};d._id=c._id;d.id=c.id;d.dimension=c.dimension;d.filename=c.filename;d.fileurl=c.fileurl;d.name=c.name;
d.scale=c.scale;return[["objectId",b],["picture",d]]},dom:[".btn_confirm_modal"],restrict:function(b,c,f){this.hashId=b.content[2][1].id;c=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:".btn_confirm_modal"}],{restrict:!0,dimmed:!0,render:!1,callBack:f});f=Entry.getMainWS().widgetUpdateEvent;Entry.dispatchEvent("openPictureManager",b.content[2][1]._id,f.notify.bind(f));return c},recordable:Entry.STATIC.RECORDABLE.SUPPORT,validate:!1,undo:"objectRemovePicture"};c[b.objectRemovePicture]=
{do:function(b,c){Entry.container.getObject(b).removePicture(c.id)},state:function(b,c){return[b,c]},log:function(b,c){return[["objectId",b],["pictureId",c._id]]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,validate:!1,undo:"objectAddPicture"};c[b.objectAddSound]={do:function(d,e){var f=c[b.objectAddSound].hashId;f&&(e.id=f,delete c[b.objectAddSound].hashId);Entry.container.getObject(d).addSound(e);Entry.dispatchEvent("dismissModal")},state:function(b,c){return[b,c]},log:function(b,c){var d={};d._id=
c._id;d.duration=c.duration;d.ext=c.ext;d.id=c.id;d.filename=c.filename;d.fileurl=c.fileurl;d.name=c.name;return[["objectId",b],["sound",d]]},dom:[".btn_confirm_modal"],restrict:function(b,c,f){this.hashId=b.content[2][1].id;c=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:".btn_confirm_modal"}],{callBack:f,dimmed:!0,restrict:!0,render:!1});f=Entry.getMainWS().widgetUpdateEvent;Entry.dispatchEvent("openSoundManager",b.content[2][1]._id,f.notify.bind(f));return c},recordable:Entry.STATIC.RECORDABLE.SUPPORT,
validate:!1,undo:"objectRemoveSound"};c[b.objectRemoveSound]={do:function(b,c){return Entry.container.getObject(b).removeSound(c.id)},state:function(b,c){return[b,c]},log:function(b,c){return[["objectId",b],["soundId",c._id]]},dom:[".btn_confirm_modal"],recordable:Entry.STATIC.RECORDABLE.SUPPORT,validate:!1,undo:"objectAddSound"}})(Entry.Command);(function(c){var b=Entry.STATIC.COMMAND_TYPES;c[b.editPicture]={do:function(b,c){Entry.playground.painter.lc.canRedo()&&Entry.playground.painter.lc.redo()},state:function(b){},log:function(b){return[b]},recordable:Entry.STATIC.RECORDABLE.SKIP,undo:"uneditPicture"};c[b.uneditPicture]={type:Entry.STATIC.COMMAND_TYPES.uneditPicture,do:function(b,c){Entry.playground.painter.lc.undo()},state:function(b){},log:function(b){return[b]},recordable:Entry.STATIC.RECORDABLE.SKIP,undo:"editPicture"};c[b.processPicture]=
{do:function(b,c){Entry.playground.painter.lc.canRedo()&&Entry.playground.painter.lc.redo()},state:function(b){},log:function(b){return[b]},recordable:Entry.STATIC.RECORDABLE.SKIP,undo:"unprocessPicture",isPass:!0};c[b.unprocessPicture]={do:function(b,c){Entry.playground.painter.lc.undo()},state:function(b){},log:function(b){return[b]},recordable:Entry.STATIC.RECORDABLE.SKIP,undo:"processPicture",isPass:!0}})(Entry.Command);(function(c){var b=Entry.STATIC.COMMAND_TYPES;c[b.playgroundChangeViewMode]={do:function(b,c){Entry.playground.changeViewMode(b)},state:function(b,c){return[c,b]},log:function(b,c){return[["newType",b],["oldType",c||"code"]]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"playgroundChangeViewMode",dom:["playground","tabViewElements","&0"]};c[b.playgroundClickAddPicture]={do:function(){Entry.dispatchEvent("openPictureManager")},state:function(){return[]},log:function(){return[]},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,
undo:"playgroundClickAddPictureCancel",dom:["playground","pictureAddButton"]};c[b.playgroundClickAddPictureCancel]={do:function(){Entry.dispatchEvent("dismissModal")},state:function(){return[]},log:function(){return[]},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"",dom:["playground","pictureAddButton"]};c[b.playgroundClickAddSound]={do:function(){Entry.dispatchEvent("openSoundManager")},state:function(){return[]},log:function(){return[]},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,
undo:"playgroundClickAddSoundCancel",dom:["playground","soundAddButton"]};c[b.playgroundClickAddSoundCancel]={do:function(){Entry.dispatchEvent("dismissModal")},state:function(){return[]},log:function(){return[]},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"",dom:["playground","soundAddButton"]}})(Entry.Command);(function(c){var b=Entry.STATIC.COMMAND_TYPES;c[b.variableContainerSelectFilter]={do:function(b,c){Entry.variableContainer.selectFilter(b)},state:function(b,c){return[c,b]},log:function(b,c){return[["newType",b],["oldType",c||"all"]]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"variableContainerSelectFilter",dom:["variableContainer","filter","&0"]};c[b.variableContainerClickVariableAddButton]={do:function(){Entry.variableContainer.clickVariableAddButton()},state:function(){return[]},log:function(){return[]},
recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"variableContainerClickVariableAddButton",dom:["variableContainer","variableAddButton"]};c[b.variableContainerAddVariable]={do:function(d){var e=c[b.variableContainerAddVariable],f=e.hashId;f&&(d.id_=f,delete e.hashId);Entry.variableContainer.addVariable(d)},state:function(d){d instanceof Entry.Variable&&(d=d.toJSON());var e=c[b.variableContainerAddVariable].hashId;e&&(d.id=e);return[d]},log:function(b){b instanceof Entry.Variable&&(b=b.toJSON());return[["variable",
b]]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,validate:!1,undo:"variableContainerRemoveVariable",restrict:function(b,c,f){Entry.variableContainer.clickVariableAddButton(!0,!0);$(".entryVariableAddSpaceInputWorkspace").val(b.content[1][1].name);this.hashId=b.content[1][1].id;b=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],{restrict:!0,dimmed:!0,callBack:f});f();return b},dom:["variableContainer","variableAddConfirmButton"]};c[b.variableAddSetName]={do:function(d){var e=
c[b.variableAddSetName],f=$(".entryVariableAddSpaceInputWorkspace");f[0].blurred=!0;f.blur();d=e._nextValue||d;f.val(d);delete e._nextValue},state:function(b){return[""]},log:function(d){return[["value",c[b.variableAddSetName]._nextValue||d]]},restrict:function(b,c,f){Entry.variableContainer.clickVariableAddButton(!0);this._nextValue=b.content[1][1];$(".entryVariableAddSpaceInputWorkspace")[0].enterKeyDisabled=!0;return new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:c}],
{restrict:!0,noDispose:!0,dimmed:!0,callBack:f})},validate:!1,recordable:Entry.STATIC.RECORDABLE.SUPPORT,undo:"variableAddSetName",dom:["variableContainer","variableAddInput"]};c[b.variableContainerRemoveVariable]={do:function(b){Entry.variableContainer.removeVariable(b)},state:function(b){b instanceof Entry.Variable&&(b=b.toJSON());return[b]},log:function(b){b instanceof Entry.Variable&&(b=b.toJSON());return[["variable",b]]},recordable:Entry.STATIC.RECORDABLE.SUPPORT,validate:!1,undo:"variableContainerAddVariable",
dom:["variableContainer","variableAddConfirmButton"]}})(Entry.Command);Entry.Container=function(){this.objects_=[];this.cachedPicture={};this.inputValue={};this.currentObjects_=this.copiedObject=null;this._extensionObjects=[];Entry.addEventListener("workspaceChangeMode",function(){var c=Entry.getMainWS();c&&c.getMode()===Entry.Workspace.MODE_VIMBOARD&&this.objects_.forEach(function(b){b.script&&b.script.destroyView()})}.bind(this))};
Entry.Container.prototype.generateView=function(c,b){var d=this;this._view=c;this._view.addClass("entryContainer");this._view.addClass("entryContainerWorkspace");this._view.setAttribute("id","entryContainerWorkspaceId");c=Entry.createElement("div");c.addClass("entryAddObjectWorkspace");c.innerHTML=Lang.Workspace.add_object;c.bindOnClick(function(b){Entry.dispatchEvent("openSpriteManager")});c=Entry.createElement("div");b="entryContainerListWorkspaceWrapper";Entry.isForLecture&&(b+=" lecture");c.addClass(b);
Entry.Utils.disableContextmenu(c);$(c).bind("mousedown touchstart",function(b){function c(b){q&&5<Math.sqrt(Math.pow(b.pageX-q.x,2)+Math.pow(b.pageY-q.y,2))&&h&&(clearTimeout(h),h=null)}function e(b){b.stopPropagation();k.unbind(".container");h&&(clearTimeout(h),h=null)}var h=null,k=$(document),l=b.type,m=!1;if(Entry.Utils.isRightButton(b))d._rightClick(b),m=!0;else{var q={x:b.clientX,y:b.clientY};"touchstart"!==l||m||(b.stopPropagation(),b=Entry.Utils.convertMouseEvent(b),h=setTimeout(function(){h&&
(h=null,d._rightClick(b))},1E3),k.bind("mousemove.container touchmove.container",c),k.bind("mouseup.container touchend.container",e))}});this._view.appendChild(c);b=Entry.createElement("ul");c.appendChild(b);this._extensionListView=Entry.Dom(b,{class:"entryContainerExtensions"});b=Entry.createElement("ul");b.addClass("entryContainerListWorkspace");c.appendChild(b);this.listView_=b;this.enableSort()};
Entry.Container.prototype.enableSort=function(){$&&$(this.listView_).sortable({start:function(c,b){b.item.data("start_pos",b.item.index())},stop:function(c,b){c=b.item.data("start_pos");b=b.item.index();Entry.container.moveElement(c,b)},axis:"y",cancel:"input.selectedEditingObject"})};Entry.Container.prototype.disableSort=function(){$&&$(this.listView_).sortable("destroy")};
Entry.Container.prototype.updateListView=function(){if(this.listView_){for(var c=this.listView_;c.hasChildNodes();)c.removeChild(c.lastChild);var b=document.createDocumentFragment("div");this.getCurrentObjects().slice().sort(function(b,c){return b.index-c.index}).forEach(function(c){!c.view_&&c.generateView();b.appendChild(c.view_)});c.appendChild(b);Entry.stage.sortZorder();return!0}};
Entry.Container.prototype.setObjects=function(c){for(var b in c){var d=new Entry.EntryObject(c[b]);this.objects_.push(d)}this.updateObjectsOrder();!this.updateListView()&&Entry.stage.sortZorder();Entry.variableContainer.updateViews();c=Entry.type;("workspace"==c||"phone"==c)&&(c=this.getCurrentObjects()[0])&&this.selectObject(c.id)};Entry.Container.prototype.getPictureElement=function(c,b){if(c=this.getObject(b).getPicture(c))return c.view;throw Error("No picture found");};
Entry.Container.prototype.setPicture=function(c){var b=this.getObject(c.objectId),d;for(d in b.pictures)if(c.id===b.pictures[d].id){var e={};e.dimension=c.dimension;e.id=c.id;e.filename=c.filename;e.fileurl=c.fileurl;e.name=c.name;e.view=b.pictures[d].view;b.pictures[d]=e;return}throw Error("No picture found");};
Entry.Container.prototype.selectPicture=function(c,b){b=this.getObject(b);if(c=b.getPicture(c))return b.selectedPicture=c,b.entity.setImage(c),b.updateThumbnailView(),b.id;throw Error("No picture found");};
Entry.Container.prototype.addObject=function(c,b){var d=new Entry.EntryObject(c);d.name=Entry.getOrderedName(d.name,this.objects_);Entry.stateManager&&Entry.stateManager.addCommand("add object",this,this.removeObject,d);d.scene||(d.scene=Entry.scene.selectedScene);"number"==typeof b?c.sprite.category&&"background"==c.sprite.category.main?(d.setLock(!0),this.objects_.push(d)):this.objects_.splice(b,0,d):c.sprite.category&&"background"==c.sprite.category.main?this.objects_.push(d):this.objects_.unshift(d);
d.generateView();this.setCurrentObjects();this.updateObjectsOrder();this.updateListView();this.selectObject(d.id);Entry.variableContainer.updateViews();return new Entry.State(this,this.removeObject,d)};Entry.Container.prototype.addExtension=function(c){this._extensionObjects.push(c);this._extensionListView.append(c.renderView());return c};Entry.Container.prototype.removeExtension=function(c){if(c){var b=this._extensionObjects,d=b.indexOf(c);-1<d&&b.splice(d,1);c.destroy&&c.destroy()}};
Entry.Container.prototype.addCloneObject=function(c,b){c=c.toJSON();var d=Entry.generateHash();Entry.variableContainer.addCloneLocalVariables({objectId:c.id,newObjectId:d,json:c});c.id=d;c.scene=b||Entry.scene.selectedScene;this.addObject(c)};
Entry.Container.prototype.removeObject=function(c){var b=this.objects_.indexOf(c),d=c.toJSON();Entry.stateManager&&Entry.stateManager.addCommand("remove object",this,this.addObject,d,b);d=new Entry.State(this.addObject,d,b);c.destroy();this.objects_.splice(b,1);this.setCurrentObjects();Entry.stage.sortZorder();b=this.getCurrentObjects();b.length?this.selectObject(b[0].id):(this.selectObject(),Entry.playground.flushPlayground());Entry.toast.success(Lang.Workspace.remove_object,c.name+" "+Lang.Workspace.remove_object_msg);
Entry.variableContainer.removeLocalVariables(c.id);Entry.playground.reloadPlayground();return d};
Entry.Container.prototype.selectObject=function(c,b){c=this.getObject(c);var d=Entry.getMainWS();b&&c&&Entry.scene.selectScene(c.scene);this.mapObjectOnScene(function(b){!b.view_&&b.generateView();b.view_&&b.view_.removeClass("selectedObject");b.isSelected_=!1});if(c){if(c.view_&&c.view_.addClass("selectedObject"),c.isSelected_=!0,d&&d.vimBoard&&Entry.isTextMode){b=d.vimBoard._currentObject;var e=d.vimBoard._parser;if(e&&e._onError){if(b&&c.id!=b.id){if(Entry.scene.isSceneCloning)Entry.container.selectObject(b.id);
else{try{d._syncTextCode()}catch(f){}e&&!e._onError?Entry.container.selectObject(c.id,!0):Entry.container.selectObject(b.id,!0)}return}}else if(b&&c.id!=b.id){if(Entry.scene.isSceneCloning){Entry.container.selectObject(b.id);return}try{d._syncTextCode()}catch(f){}if(e&&e._onError){Entry.container.selectObject(b.id,!0);return}}}}else d&&d.vimBoard&&d.vimBoard.clearText();Entry.playground&&Entry.playground.injectObject(c);"minimize"!=Entry.type&&Entry.engine.isState("stop")&&Entry.stage.selectObject(c)};
Entry.Container.prototype.getAllObjects=function(){return this.objects_};Entry.Container.prototype.getObject=function(c){!c&&Entry.playground&&Entry.playground.object&&(c=Entry.playground.object.id);for(var b=this.objects_.length,d=0;d<b;d++){var e=this.objects_[d];if(e.id==c)return e}};Entry.Container.prototype.getEntity=function(c){if(c=this.getObject(c))return c.entity;Entry.toast.alert(Lang.Msgs.runtime_error,Lang.Workspace.object_not_found,!0)};
Entry.Container.prototype.getVariable=function(c){for(var b=0;b<this.variables_.length;b++){var d=this.variables_[b];if(d.getId()==c||d.getName()==c)return d}};
Entry.Container.prototype.moveElement=function(c,b,d){var e;e=this.getCurrentObjects();c=this.getAllObjects().indexOf(e[c]);b=this.getAllObjects().indexOf(e[b]);!d&&Entry.stateManager&&Entry.stateManager.addCommand("reorder object",Entry.container,Entry.container.moveElement,b,c,!0);this.objects_.splice(b,0,this.objects_.splice(c,1)[0]);this.setCurrentObjects();Entry.container.updateListView();Entry.requestUpdate=!0;return new Entry.State(Entry.container,Entry.container.moveElement,b,c,!0)};
Entry.Container.prototype.moveElementByBlock=function(c,b){c=this.getCurrentObjects().splice(c,1)[0];this.getCurrentObjects().splice(b,0,c);Entry.stage.sortZorder();this.updateListView()};
Entry.Container.prototype.getDropdownList=function(c,b){var d=[];switch(c){case "sprites":var e=this.getCurrentObjects(),f=e.length;for(c=0;c<f;c++)b=e[c],d.push([b.name,b.id]);break;case "spritesWithMouse":e=this.getCurrentObjects();f=e.length;for(c=0;c<f;c++)b=e[c],d.push([b.name,b.id]);d.push([Lang.Blocks.mouse_pointer,"mouse"]);break;case "spritesWithSelf":e=this.getCurrentObjects();f=e.length;for(c=0;c<f;c++)b=e[c],d.push([b.name,b.id]);d.push([Lang.Blocks.self,"self"]);break;case "collision":d.push([Lang.Blocks.mouse_pointer,
"mouse"]);e=this.getCurrentObjects();f=e.length;for(c=0;c<f;c++)b=e[c],d.push([b.name,b.id]);d.push([Lang.Blocks.wall,"wall"]);d.push([Lang.Blocks.wall_up,"wall_up"]);d.push([Lang.Blocks.wall_down,"wall_down"]);d.push([Lang.Blocks.wall_right,"wall_right"]);d.push([Lang.Blocks.wall_left,"wall_left"]);break;case "pictures":b=Entry.playground.object||b;if(!b)break;b=b.pictures||[];for(c=0;c<b.length;c++)e=b[c],d.push([e.name,e.id]);break;case "messages":b=Entry.variableContainer.messages_;for(c=0;c<
b.length;c++)e=b[c],d.push([e.name,e.id]);break;case "variables":b=Entry.variableContainer.variables_;for(c=0;c<b.length;c++)e=b[c],e.object_&&Entry.playground.object&&e.object_!=Entry.playground.object.id||d.push([e.getName(),e.getId()]);d&&0!==d.length||d.push([Lang.Blocks.VARIABLE_variable,"null"]);break;case "lists":b=Entry.playground.object||b;e=Entry.variableContainer.lists_;for(c=0;c<e.length;c++)f=e[c],f.object_&&b&&f.object_!=b.id||d.push([f.getName(),f.getId()]);d&&0!==d.length||d.push([Lang.Blocks.VARIABLE_list,
"null"]);break;case "scenes":b=Entry.scene.scenes_;for(c=0;c<b.length;c++)e=b[c],d.push([e.name,e.id]);break;case "sounds":b=Entry.playground.object||b;if(!b)break;b=b.sounds||[];for(c=0;c<b.length;c++)e=b[c],d.push([e.name,e.id]);break;case "clone":d.push([Lang.Blocks.oneself,"self"]);this.getCurrentObjects().forEach(function(b){d.push([b.name,b.id])});break;case "objectSequence":for(f=this.getCurrentObjects().length,c=0;c<f;c++)d.push([(c+1).toString(),c.toString()])}d.length||(d=[[Lang.Blocks.no_target,
"null"]]);return d};Entry.Container.prototype.clearRunningState=function(){this.mapObject(function(c){c.clearExecutor()})};Entry.Container.prototype.clearRunningStateOnScene=function(){this.mapObjectOnScene(function(c){c.clearExecutor()})};Entry.Container.prototype.mapObject=function(c,b){for(var d=this.objects_.length,e=[],f=0;f<this._extensionObjects.length;f++){var g=this._extensionObjects[f];e.push(c(g,b))}for(f=0;f<d;f++)g=this.objects_[f],e.push(c(g,b));return e};
Entry.Container.prototype.mapObjectOnScene=function(c,b){for(var d=this.getCurrentObjects(),e=d.length,f=[],g=0;g<this._extensionObjects.length;g++){var h=this._extensionObjects[g];f.push(c(h,b))}for(g=0;g<e;g++)h=d[g],f.push(c(h,b));return f};Entry.Container.prototype.mapEntity=function(c,b){for(var d=this.objects_.length,e=[],f=0;f<d;f++)e.push(c(this.objects_[f].entity,b));return e};
Entry.Container.prototype.mapEntityOnScene=function(c,b){for(var d=this.getCurrentObjects(),e=d.length,f=[],g=0;g<e;g++)f.push(c(d[g].entity,b));return f};Entry.Container.prototype.mapEntityIncludeClone=function(c,b){for(var d=this.objects_,e=d.length,f=[],g=0;g<e;g++){var h=d[g],k=h.clonedEntities.length;f.push(c(h.entity,b));for(var l=0;l<k;l++){var m=h.clonedEntities[l];m&&!m.isStamp&&f.push(c(m,b))}}return f};
Entry.Container.prototype.mapEntityIncludeCloneOnScene=function(c,b){for(var d=this.getCurrentObjects(),e=d.length,f=[],g=0;g<this._extensionObjects.length;g++){var h=this._extensionObjects[g];f.push(c(h.entity,b))}for(g=0;g<e;g++){var h=d[g],k=h.clonedEntities.length;f.push(c(h.entity,b));for(var l=0;l<k;l++){var m=h.clonedEntities[l];m&&!m.isStamp&&f.push(c(m,b))}}return f};Entry.Container.prototype.getCachedPicture=function(c){Entry.assert("string"==typeof c,"pictureId must be string");return this.cachedPicture[c]};
Entry.Container.prototype.cachePicture=function(c,b){this.cachedPicture[c]=b};Entry.Container.prototype.toJSON=function(){for(var c=[],b=this.objects_.length,d=0;d<b;d++)c.push(this.objects_[d].toJSON());return c};Entry.Container.prototype.takeSequenceSnapshot=function(){for(var c=this.objects_.length,b=this.objects_,d=0;d<c;d++)b[d].index=d};
Entry.Container.prototype.loadSequenceSnapshot=function(){for(var c=this.objects_.length,b=Array(c),d=0;d<c;d++){var e=this.objects_[d];b[e.index||d]=e;delete e.index}this.objects_=b;this.setCurrentObjects();Entry.stage.sortZorder();this.updateListView()};Entry.Container.prototype.getInputValue=function(){return this.inputValue.getValue()};
Entry.Container.prototype.setInputValue=function(c){this.inputValue.complete||(c?this.inputValue.setValue(c):this.inputValue.setValue(0),Entry.stage.hideInputField(),Entry.console&&Entry.console.stopInput(c),this.inputValue.complete=!0)};Entry.Container.prototype.resetSceneDuringRun=function(){this.mapEntityOnScene(function(c){c.loadSnapshot();c.object.filters=[];c.resetFilter();c.dialog&&c.dialog.remove();c.shape&&c.removeBrush()});this.clearRunningStateOnScene()};
Entry.Container.prototype.setCopiedObject=function(c){this.copiedObject=c};Entry.Container.prototype.updateObjectsOrder=function(){for(var c=Entry.scene.getScenes(),b=[],d=0;d<c.length;d++)for(var e=this.getSceneObjects(c[d]),f=0;f<e.length;f++)b.push(e[f]);this.objects_=b};Entry.Container.prototype.getSceneObjects=function(c){c=c||Entry.scene.selectedScene;for(var b=[],d=this.getAllObjects(),e=0;e<d.length;e++)c.id==d[e].scene.id&&b.push(d[e]);return b};
Entry.Container.prototype.setCurrentObjects=function(){this.currentObjects_=this.getSceneObjects()};Entry.Container.prototype.getCurrentObjects=function(){var c=this.currentObjects_;c&&0!==c.length||this.setCurrentObjects();return this.currentObjects_||[]};Entry.Container.prototype.getProjectWithJSON=function(c){c.objects=Entry.container.toJSON();c.variables=Entry.variableContainer.getVariableJSON();c.messages=Entry.variableContainer.getMessageJSON();c.scenes=Entry.scene.toJSON();return c};
Entry.Container.prototype.blurAllInputs=function(){this.getSceneObjects().map(function(c){c=c.view_.getElementsByTagName("input");for(var b=0,d=c.length;b<d;b++)c[b].blur()})};Entry.Container.prototype.showProjectAnswer=function(){var c=this.inputValue;c&&c.setVisible(!0)};
Entry.Container.prototype.hideProjectAnswer=function(c,b){var d=this.inputValue;if(d&&d.isVisible()&&!Entry.engine.isState("run")){for(var e=Entry.container.getAllObjects(),f=["ask_and_wait","get_canvas_input_value","set_visible_answer"],g=0,h=e.length;g<h;g++)for(var k=e[g].script,l=0;l<f.length;l++){var m=k.getBlockList(!1,f[l]);if(b){var q=m.indexOf(c);-1<q&&m.splice(q,1)}if(0<m.length)return}d.setVisible(!1)}};Entry.Container.prototype.getView=function(){return this._view};
Entry.Container.prototype.resize=function(){};
Entry.Container.prototype._rightClick=function(c){c.stopPropagation&&c.stopPropagation();var b=[{text:Lang.Blocks.Paste_blocks,enable:!Entry.engine.isState("run")&&!!Entry.container.copiedObject,callback:function(){Entry.container.copiedObject?Entry.container.addCloneObject(Entry.container.copiedObject):Entry.toast.alert(Lang.Workspace.add_object_alert,Lang.Workspace.object_not_found_for_paste)}}];Entry.ContextMenu.show(b,"workspace-contextmenu",{x:c.clientX,y:c.clientY})};
Entry.Container.prototype.removeFuncBlocks=function(c){this.objects_.forEach(function(b){b.script.removeBlocksByType(c)})};Entry.Container.prototype.clear=function(){this.objects_.map(function(c){c.destroy()});this.objects_=[];this._extensionObjects.map(function(c){c.destroy()});this._extensionObjects=[];Entry.playground.flushPlayground()};
Entry.Container.prototype.selectNeighborObject=function(c){var b=this.getCurrentObjects();if(b&&0!==b.length){var d=b.indexOf(Entry.playground.object),e=b.length;switch(c){case "prev":0>--d&&(d=b.length-1);break;case "next":d=++d%e}(c=b[d])&&Entry.container.selectObject(c.id)}};Entry.Container.prototype.getObjectIndex=function(c){return this.objects_.indexOf(this.getObject(c))};Entry.Container.prototype.getDom=function(c){if(1<=c.length)switch(c.shift()){case "objectIndex":return this.objects_[c.shift()].getDom(c)}};Entry.db={data:{},typeMap:{}};(function(c){c.add=function(b){this.data[b.id]=b;var c=b.type;void 0===this.typeMap[c]&&(this.typeMap[c]={});this.typeMap[c][b.id]=b};c.has=function(b){return this.data.hasOwnProperty(b)};c.remove=function(b){this.has(b)&&(delete this.typeMap[this.data[b].type][b],delete this.data[b])};c.get=function(b){return this.data[b]};c.find=function(){};c.clear=function(){this.data={};this.typeMap={}}})(Entry.db);Entry.Dom=function(c,b){var d=/<(\w+)>/,e;e=c instanceof HTMLElement?$(c):c instanceof jQuery?c:d.test(c)?$(c):$("<"+c+"></"+c+">");if(void 0===b)return e;b.id&&e.attr("id",b.id);b.class&&e.addClass(b.class);b.classes&&b.classes.map(function(b){e.addClass(b)});b.src&&e.attr("src",b.src);b.parent&&b.parent.append(e);e.bindOnClick=function(){var b,c,d=function(b){b.stopImmediatePropagation();b.handled||(b.handled=!0,c.call(this,b))};1<arguments.length?(c=arguments[1]instanceof Function?arguments[1]:
function(){},b="string"===typeof arguments[0]?arguments[0]:""):c=arguments[0]instanceof Function?arguments[0]:function(){};if(b)$(this).on("click tab",b,d);else $(this).on("click tab",d)};return e};Entry.SVG=function(c,b){c=b?b:document.getElementById(c);return Entry.SVG.createElement(c)};Entry.SVG.NS="http://www.w3.org/2000/svg";Entry.SVG.NS_XLINK="http://www.w3.org/1999/xlink";
Entry.SVG.createElement=function(c,b){var d;d="string"===typeof c?document.createElementNS(Entry.SVG.NS,c):c;if(b){b.href&&(d.setAttributeNS(Entry.SVG.NS_XLINK,"href",b.href),delete b.href);for(var e in b)d.setAttribute(e,b[e])}d.elem=Entry.SVG.createElement;d.attr=Entry.SVG.attr;d.addClass=Entry.SVG.addClass;d.removeClass=Entry.SVG.removeClass;d.hasClass=Entry.SVG.hasClass;d.remove=Entry.SVG.remove;d.removeAttr=Entry.SVG.removeAttr;"text"===c&&d.setAttributeNS("http://www.w3.org/XML/1998/namespace",
"xml:space","preserve");this instanceof SVGElement&&this.appendChild(d);return d};Entry.SVG.attr=function(c,b){if("string"===typeof c){var d={};d[c]=b;c=d}if(c){c.href&&(this.setAttributeNS(Entry.SVG.NS_XLINK,"href",c.href),delete c.href);for(var e in c)this.setAttribute(e,c[e])}return this};Entry.SVG.addClass=function(c){for(var b=this.getAttribute("class"),d=0;d<arguments.length;d++)c=arguments[d],this.hasClass(c)||(b+=" "+c);this.setAttribute("class",b);return this};
Entry.SVG.removeClass=function(c){for(var b=this.getAttribute("class"),d=0;d<arguments.length;d++)c=arguments[d],this.hasClass(c)&&(b=b.replace(new RegExp("(\\s|^)"+c+"(\\s|$)")," "));this.setAttribute("class",b);return this};Entry.SVG.hasClass=function(c){var b=this.getAttribute("class");return b?b.match(new RegExp("(\\s|^)"+c+"(\\s|$)")):!1};Entry.SVG.remove=function(){this.parentNode&&this.parentNode.removeChild(this)};Entry.SVG.removeAttr=function(c){this.removeAttribute(c)};Entry.Dialog=function(c,b,d,e){c.dialog&&c.dialog.remove();c.dialog=this;this.parent=c;this.padding=10;this.border=2;"number"==typeof b&&(b=String(b));Entry.console&&Entry.console.print(b,d);this.message_=b=b.match(/.{1,15}/g).join("\n");this.mode_=d;"speak"!==d&&"ask"!==d||this.generateSpeak();e||Entry.stage.loadDialog(this)};
Entry.Dialog.prototype.generateSpeak=function(){this.object=new createjs.Container;var c=new createjs.Text;c.font="15px NanumGothic";c.textBaseline="top";c.textAlign="left";c.text=this.message_;var b=c.getTransformedBounds(),d=b.height,b=10<=b.width?b.width:17,e=new createjs.Shape;e.graphics.f("#f5f5f5").ss(2,"round").s("#6FC0DD").rr(-this.padding,-this.padding,b+2*this.padding,d+2*this.padding,this.padding);this.object.addChild(e);this.object.regX=b/2;this.object.regY=d/2;this.width=b;this.height=
d;this.notch=this.createSpeakNotch("ne");this.update();this.object.addChild(this.notch);this.object.addChild(c);Entry.requestUpdate=!0};
Entry.Dialog.prototype.update=function(){var c=this.parent.object.getTransformedBounds();if(!c&&"textBox"===this.parent.type){if(this._isNoContentTried){delete this._isNoContentTried;return}this.parent.setText(" ");c=this.parent.object.getTransformedBounds();this._isNoContentTried=!0}var b="";-135<c.y-this.height-20-this.border?(this.object.y=c.y-this.height/2-20-this.padding,b+="n"):(this.object.y=c.y+c.height+this.height/2+20+this.padding,b+="s");240>c.x+c.width+this.width?(this.object.x=c.x+c.width+
this.width/2,b+="e"):(this.object.x=c.x-this.width/2,b+="w");this.notch.type!=b&&(this.object.removeChild(this.notch),this.notch=this.createSpeakNotch(b),this.object.addChild(this.notch));this._isNoContentTried&&this.parent.setText("");Entry.requestUpdate=!0};
Entry.Dialog.prototype.createSpeakNotch=function(c){var b=new createjs.Shape;b.type=c;"ne"==c?b.graphics.f("#f5f5f5").ss(2,"round").s("#6FC0DD").mt(0,this.height+this.padding-1.5).lt(-10,this.height+this.padding+20).lt(20,this.height+this.padding-1.5):"nw"==c?b.graphics.f("#f5f5f5").ss(2,"round").s("#6FC0DD").mt(this.width,this.height+this.padding-1.5).lt(this.width+10,this.height+this.padding+20).lt(this.width-20,this.height+this.padding-1.5):"se"==c?b.graphics.f("#f5f5f5").ss(2,"round").s("#6FC0DD").mt(0,
-this.padding+1.5).lt(-10,-this.padding-20).lt(20,-this.padding+1.5):"sw"==c&&b.graphics.f("#f5f5f5").ss(2,"round").s("#6FC0DD").mt(this.width,-this.padding+1.5).lt(this.width+10,-this.padding-20).lt(this.width-20,-this.padding+1.5);return b};Entry.Dialog.prototype.remove=function(){Entry.stage.unloadDialog(this);this.parent.dialog=null;Entry.requestUpdate=!0};Entry.DoneProject=function(c){this.generateView(c)};var p=Entry.DoneProject.prototype;p.init=function(c){this.projectId=c};p.generateView=function(c){var b=Entry.createElement("div");b.addClass("entryContainerDoneWorkspace");this.doneContainer=b;var d=Entry.createElement("iframe");d.setAttribute("id","doneProjectframe");d.setAttribute("frameborder",0);d.setAttribute("src","/api/iframe/project/"+c);this.doneProjectFrame=d;this.doneContainer.appendChild(d);b.addClass("entryRemove")};p.getView=function(){return this.doneContainer};
p.resize=function(){document.getElementById("entryContainerWorkspaceId");var c=document.getElementById("doneProjectframe"),b=this.doneContainer.offsetWidth;c.width=b+"px";c.height=9*b/16+"px"};Entry.Engine=function(){function c(b){var c=b.keyCode||b.which,e=Entry.stage.inputField;32==c&&e&&e.hasFocus()||-1<[37,38,39,40,32].indexOf(c)&&b.preventDefault()}this.state="stop";this.popup=null;this.isUpdating=!0;this.speeds=[1,15,30,45,60];this._mouseMoved=!1;this.attachKeyboardCapture();Entry.addEventListener("canvasClick",function(b){Entry.engine.fireEvent("mouse_clicked")});Entry.addEventListener("canvasClickCanceled",function(b){Entry.engine.fireEvent("mouse_click_cancled")});Entry.addEventListener("entityClick",
function(b){Entry.engine.fireEventOnEntity("when_object_click",b)});Entry.addEventListener("entityClickCanceled",function(b){Entry.engine.fireEventOnEntity("when_object_click_canceled",b)});"phone"!=Entry.type&&(Entry.addEventListener("stageMouseMove",function(b){this._mouseMoved=!0}.bind(this)),Entry.addEventListener("stageMouseOut",function(b){Entry.engine.hideMouseView()}));Entry.addEventListener("run",function(){$(window).bind("keydown",c)});Entry.addEventListener("stop",function(){$(window).unbind("keydown",
c)});setInterval(function(){this._mouseMoved&&(this.updateMouseView(),this._mouseMoved=!1)}.bind(this),100);Entry.message=new Entry.Event(window)};
(function(c){c.generateView=function(b,c){if(c&&"workspace"!=c)"minimize"==c?(this.view_=b,this.view_.addClass("entryEngine"),this.view_.addClass("entryEngineMinimize"),this.maximizeButton=Entry.createElement("button"),this.maximizeButton.addClass("entryEngineButtonMinimize"),this.maximizeButton.addClass("entryMaximizeButtonMinimize"),this.view_.appendChild(this.maximizeButton),this.maximizeButton.bindOnClick(function(b){Entry.engine.toggleFullscreen()}),this.coordinateButton=Entry.createElement("button"),
this.coordinateButton.addClass("entryEngineButtonMinimize"),this.coordinateButton.addClass("entryCoordinateButtonMinimize"),this.view_.appendChild(this.coordinateButton),this.coordinateButton.bindOnClick(function(b){this.hasClass("toggleOn")?this.removeClass("toggleOn"):this.addClass("toggleOn");Entry.stage.toggleCoordinator()}),this.stopButton=Entry.createElement("button"),this.stopButton.addClass("entryEngineButtonMinimize"),this.stopButton.addClass("entryStopButtonMinimize"),this.stopButton.addClass("entryRemove"),
this.stopButton.innerHTML=Lang.Workspace.stop,this.view_.appendChild(this.stopButton),this.stopButton.bindOnClick(function(b){this.blur();Entry.engine.toggleStop()}),this.pauseButton=Entry.createElement("button"),this.pauseButton.innerHTML=Lang.Workspace.pause,this.pauseButton.addClass("entryEngineButtonMinimize"),this.pauseButton.addClass("entryPauseButtonMinimize"),this.pauseButton.addClass("entryRemove"),this.view_.appendChild(this.pauseButton),this.pauseButton.bindOnClick(function(b){this.blur();
Entry.engine.togglePause()}),this.mouseView=Entry.createElement("div"),this.mouseView.addClass("entryMouseViewMinimize"),this.mouseView.addClass("entryRemove"),this.view_.appendChild(this.mouseView),Entry.addEventListener("loadComplete",function(){this.runButton=Entry.Dom("div",{class:"entryRunButtonBigMinimize",parent:$("#entryCanvasWrapper")});this.runButton.bindOnClick(function(b){Entry.engine.toggleRun()})}.bind(this))):"phone"==c&&(this.view_=b,this.view_.addClass("entryEngine","entryEnginePhone"),
this.headerView_=Entry.createElement("div","entryEngineHeader"),this.headerView_.addClass("entryEngineHeaderPhone"),this.view_.appendChild(this.headerView_),this.maximizeButton=Entry.createElement("button"),this.maximizeButton.addClass("entryEngineButtonPhone","entryMaximizeButtonPhone"),this.headerView_.appendChild(this.maximizeButton),this.maximizeButton.bindOnClick(function(b){Entry.engine.footerView_.addClass("entryRemove");Entry.engine.headerView_.addClass("entryRemove");Entry.launchFullScreen(Entry.engine.view_)}),
document.addEventListener("fullscreenchange",function(b){Entry.engine.exitFullScreen()}),document.addEventListener("webkitfullscreenchange",function(b){Entry.engine.exitFullScreen()}),document.addEventListener("mozfullscreenchange",function(b){Entry.engine.exitFullScreen()}),this.footerView_=Entry.createElement("div","entryEngineFooter"),this.footerView_.addClass("entryEngineFooterPhone"),this.view_.appendChild(this.footerView_),this.runButton=Entry.createElement("button"),this.runButton.addClass("entryEngineButtonPhone",
"entryRunButtonPhone"),Entry.objectAddable&&this.runButton.addClass("small"),this.runButton.innerHTML=Lang.Workspace.run,this.footerView_.appendChild(this.runButton),this.runButton.bindOnClick(function(b){Entry.engine.toggleRun()}),this.stopButton=Entry.createElement("button"),this.stopButton.addClass("entryEngineButtonPhone","entryStopButtonPhone","entryRemove"),Entry.objectAddable&&this.stopButton.addClass("small"),this.stopButton.innerHTML=Lang.Workspace.stop,this.footerView_.appendChild(this.stopButton),
this.stopButton.bindOnClick(function(b){Entry.engine.toggleStop()}));else{this.view_=b;this.view_.addClass("entryEngine_w");this.view_.addClass("entryEngineWorkspace_w");var d=Entry.createElement("button");this.speedButton=d;this.speedButton.addClass("entrySpeedButtonWorkspace","entryEngineTopWorkspace","entryEngineButtonWorkspace_w");this.view_.appendChild(this.speedButton);this.speedButton.bindOnClick(function(b){Entry.engine.toggleSpeedPanel();d.blur()});this.maximizeButton=Entry.createElement("button");
this.maximizeButton.addClass("entryEngineButtonWorkspace_w","entryEngineTopWorkspace","entryMaximizeButtonWorkspace_w");this.view_.appendChild(this.maximizeButton);this.maximizeButton.bindOnClick(function(b){Entry.engine.toggleFullscreen();this.blur()});var f=Entry.createElement("button");this.coordinateButton=f;this.coordinateButton.addClass("entryEngineButtonWorkspace_w","entryEngineTopWorkspace","entryCoordinateButtonWorkspace_w");this.view_.appendChild(this.coordinateButton);this.coordinateButton.bindOnClick(function(b){this.hasClass("toggleOn")?
this.removeClass("toggleOn"):this.addClass("toggleOn");f.blur();this.blur();Entry.stage.toggleCoordinator()});this.addButton=Entry.createElement("button");this.addButton.addClass("entryEngineButtonWorkspace_w");this.addButton.addClass("entryAddButtonWorkspace_w");this.addButton.innerHTML=Lang.Workspace.add_object;this.addButton.bindOnClick(function(b){Entry.dispatchEvent("openSpriteManager");this.blur()});this.view_.appendChild(this.addButton);this.runButton=Entry.createElement("button");this.runButton.addClass("entryEngineButtonWorkspace_w");
this.runButton.addClass("entryRunButtonWorkspace_w");this.runButton.innerHTML=Lang.Workspace.run;this.view_.appendChild(this.runButton);this.runButton.bindOnClick(function(b){Entry.do("toggleRun","runButton")});this.runButton2=Entry.createElement("button");this.runButton2.addClass("entryEngineButtonWorkspace_w");this.runButton2.addClass("entryRunButtonWorkspace_w2");this.view_.appendChild(this.runButton2);this.runButton2.bindOnClick(function(b){Entry.engine.toggleRun()});this.stopButton=Entry.createElement("button");
this.stopButton.addClass("entryEngineButtonWorkspace_w");this.stopButton.addClass("entryStopButtonWorkspace_w");this.stopButton.addClass("entryRemove");this.stopButton.innerHTML=Lang.Workspace.stop;this.view_.appendChild(this.stopButton);this.stopButton.bindOnClick(function(b){Entry.do("toggleStop","stopButton")});this.stopButton2=Entry.createElement("button");this.stopButton2.addClass("entryEngineButtonWorkspace_w");this.stopButton2.addClass("entryStopButtonWorkspace_w2");this.stopButton2.addClass("entryRemove");
this.stopButton2.innerHTML=Lang.Workspace.stop;this.view_.appendChild(this.stopButton2);this.stopButton2.bindOnClick(function(b){this.blur();Entry.engine.toggleStop()});this.pauseButton=Entry.createElement("button");this.pauseButton.addClass("entryEngineButtonWorkspace_w");this.pauseButton.addClass("entryPauseButtonWorkspace_w");this.pauseButton.addClass("entryRemove");this.view_.appendChild(this.pauseButton);this.pauseButton.bindOnClick(function(b){this.blur();Entry.engine.togglePause()});this.mouseView=
Entry.createElement("div");this.mouseView.addClass("entryMouseViewWorkspace_w");this.mouseView.addClass("entryRemove");this.view_.appendChild(this.mouseView)}};c.toggleSpeedPanel=function(){if(this.speedPanelOn)this.speedPanelOn=!1,$(Entry.stage.canvas.canvas).animate({top:"24px"}),this.coordinateButton.removeClass("entryRemove"),this.maximizeButton.removeClass("entryRemove"),this.mouseView.removeClass("entryRemoveElement"),$(this.speedLabel_).remove(),delete this.speedLabel_,$(this.speedProgress_).fadeOut(null,
function(b){$(this).remove();delete this.speedProgress_}),$(this.speedHandle_).remove(),delete this.speedHandle_;else{this.speedPanelOn=!0;$(Entry.stage.canvas.canvas).animate({top:"41px"});this.coordinateButton.addClass("entryRemove");this.maximizeButton.addClass("entryRemove");this.mouseView.addClass("entryRemoveElement");this.speedLabel_=Entry.createElement("div","entrySpeedLabelWorkspace");this.speedLabel_.innerHTML=Lang.Workspace.speed;this.view_.insertBefore(this.speedLabel_,this.maximizeButton);
this.speedProgress_=Entry.createElement("table","entrySpeedProgressWorkspace");for(var b=Entry.createElement("tr"),c=this.speeds,e=0;5>e;e++)(function(d){var e=Entry.createElement("td","progressCell"+d);e.bindOnClick(function(){Entry.engine.setSpeedMeter(c[d])});b.appendChild(e)})(e);this.view_.insertBefore(this.speedProgress_,this.maximizeButton);this.speedProgress_.appendChild(b);this.speedHandle_=Entry.createElement("div","entrySpeedHandleWorkspace");var f=(Entry.interfaceState.canvasWidth-84)/
5;$(this.speedHandle_).bind("mousedown.speedPanel touchstart.speedPanel",function(b){function c(b){b.stopPropagation();b=Entry.Utils.convertMouseEvent(b);b=Math.floor((b.clientX-80)/(5*f)*5);0>b||4<b||Entry.engine.setSpeedMeter(Entry.engine.speeds[b])}function d(b){$(document).unbind(".speedPanel")}b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();if(0===b.button||b.originalEvent&&b.originalEvent.touches)Entry.Utils.convertMouseEvent(b),b=$(document),b.bind("mousemove.speedPanel touchmove.speedPanel",
c),b.bind("mouseup.speedPanel touchend.speedPanel",d)});this.view_.insertBefore(this.speedHandle_,this.maximizeButton);this.setSpeedMeter(Entry.FPS)}};c.setSpeedMeter=function(b){var c=this.speeds.indexOf(b);0>c||(c=Math.min(4,c),c=Math.max(0,c),this.speedPanelOn&&(this.speedHandle_.style.left=(Entry.interfaceState.canvasWidth-80)/10*(2*c+1)+80-9+"px"),Entry.FPS!=b&&(clearInterval(this.ticker),this.ticker=setInterval(this.update,Math.floor(1E3/b)),Entry.FPS=b))};c.start=function(b){createjs.Ticker.setFPS(Entry.FPS);
this.ticker||(this.ticker=setInterval(this.update,Math.floor(1E3/Entry.FPS)))};c.stop=function(){createjs.Ticker.reset();clearInterval(this.ticker);this.ticker=null};c.update=function(){Entry.engine.isState("run")&&(Entry.engine.computeObjects(),Entry.hw.update())};c.computeObjects=function(){Entry.container.mapObjectOnScene(this.computeFunction)};c.computeFunction=function(b){b.script.tick()};Entry.Engine.computeThread=function(b,c){Entry.engine.isContinue=!0;for(b=!1;c&&Entry.engine.isContinue&&
!b;){Entry.engine.isContinue=!c.isRepeat;var d=c.run();b=d&&d===c;c=d}return c};c.isState=function(b){return-1<this.state.indexOf(b)};c.run=function(){this.isState("run")?this.toggleStop():(this.isState("stop")||this.isState("pause"))&&this.toggleRun()};c.toggleRun=function(b){var c=Entry.variableContainer,e=Entry.container;if("pause"===this.state)this.togglePause();else{Entry.Utils.blur();if(Entry.playground&&Entry.playground.mainWorkspace){var f=Entry.playground.mainWorkspace;f.mode==Entry.Workspace.MODE_VIMBOARD&&
f._syncTextCode()}Entry.addActivity("run");"stop"==this.state&&(e.mapEntity(function(b){b.takeSnapshot()}),c.mapVariable(function(b){b.takeSnapshot()}),c.mapList(function(b){b.takeSnapshot()}),this.projectTimer.takeSnapshot(),e.inputValue.takeSnapshot(),e.takeSequenceSnapshot(),Entry.scene.takeStartSceneSnapshot(),this.state="run",this.fireEvent("start"),this.achieveEnabled=!!b);this.state="run";"mobile"==Entry.type&&this.view_.addClass("entryEngineBlueWorkspace");this.runButton&&(this.pauseButton.innerHTML=
Lang.Workspace.pause,this.runButton.addClass("run"),this.runButton.addClass("entryRemove"),this.stopButton.removeClass("entryRemove"),this.pauseButton&&this.pauseButton.removeClass("entryRemove"),this.runButton2&&this.runButton2.addClass("entryRemove"),this.stopButton2&&this.stopButton2.removeClass("entryRemove"));this.isUpdating||(this.update(),this.isUpdating=!0);Entry.stage.selectObject();Entry.dispatchEvent("run")}};c.toggleStop=function(){var b=Entry.container,c=Entry.variableContainer;Entry.Utils.blur();
Entry.addActivity("stop");b.mapEntity(function(b){b.loadSnapshot();b.object.filters=[];b.resetFilter();b.dialog&&b.dialog.remove();b.brush&&b.removeBrush()});c.mapVariable(function(b){b.loadSnapshot()});c.mapList(function(b){b.loadSnapshot()});this.stopProjectTimer();b.clearRunningState();b.loadSequenceSnapshot();this.projectTimer.loadSnapshot();Entry.container.inputValue.loadSnapshot();Entry.scene.loadStartSceneSnapshot();Entry.Func.clearThreads();createjs.Sound.setVolume(1);createjs.Sound.stop();
this.view_.removeClass("entryEngineBlueWorkspace");this.runButton&&(this.runButton.removeClass("entryRemove"),this.stopButton.addClass("entryRemove"),this.pauseButton&&this.pauseButton.addClass("entryRemove"),this.runButton2&&this.runButton2.removeClass("entryRemove"),this.stopButton2&&this.stopButton2.addClass("entryRemove"));this.state="stop";Entry.dispatchEvent("stop");Entry.stage.hideInputField();(function(b){b&&b.getMode()===Entry.Workspace.MODE_VIMBOARD&&b.codeToText()})(Entry.getMainWS())};
c.togglePause=function(){var b=Entry.engine.projectTimer;"pause"==this.state?(b.pausedTime+=(new Date).getTime()-b.pauseStart,b.isPaused?b.pauseStart=(new Date).getTime():delete b.pauseStart,this.state="run",this.runButton&&(this.pauseButton.innerHTML=Lang.Workspace.pause,this.runButton.addClass("entryRemove"),this.runButton2&&this.runButton2.addClass("entryRemove"))):(this.state="pause",b.isPaused&&(b.pausedTime+=(new Date).getTime()-b.pauseStart),b.pauseStart=(new Date).getTime(),this.runButton&&
(this.pauseButton.innerHTML=Lang.Workspace.restart,this.runButton.removeClass("entryRemove"),this.stopButton.removeClass("entryRemove"),this.runButton2&&this.runButton2.removeClass("entryRemove")))};c.fireEvent=function(b){"run"===this.state&&Entry.container.mapEntityIncludeCloneOnScene(this.raiseEvent,b)};c.raiseEvent=function(b,c){b.parent.script.raiseEvent(c,b)};c.fireEventOnEntity=function(b,c){"run"==this.state&&Entry.container.mapEntityIncludeCloneOnScene(this.raiseEventOnEntity,[c,b])};c.raiseEventOnEntity=
function(b,c){b===c[0]&&b.parent.script.raiseEvent(c[1],b)};c.captureKeyEvent=function(b,c){var d=b.keyCode,f=Entry.type;if(!Entry.Utils.isInInput(b)||c)b.ctrlKey&&"workspace"==f?83==d?(b.preventDefault(),Entry.dispatchEvent("saveWorkspace")):82==d?(b.preventDefault(),Entry.engine.run()):90==d&&(b.preventDefault(),Entry.dispatchEvent(b.shiftKey?"redo":"undo")):Entry.engine.isState("run")&&Entry.container.mapEntityIncludeCloneOnScene(Entry.engine.raiseKeyEvent,["keyPress",d]),Entry.engine.isState("stop")&&
"workspace"===f&&37<=d&&40>=d&&Entry.stage.moveSprite(b)};c.raiseKeyEvent=function(b,c){return b.parent.script.raiseEvent(c[0],b,String(c[1]))};c.updateMouseView=function(){var b=Entry.stage.mouseCoordinate;this.mouseView.textContent="X : "+b.x+", Y : "+b.y;this.mouseView.removeClass("entryRemove")};c.hideMouseView=function(){this.mouseView.addClass("entryRemove")};c.toggleFullscreen=function(){if(this.popup)this.popup.remove(),this.popup=null;else{this.popup=new Entry.Popup;if("workspace"!=Entry.type){var b=
$(document);$(this.popup.body_).css("top",b.scrollTop());$("body").css("overflow","hidden");popup.window_.appendChild(Entry.stage.canvas.canvas);popup.window_.appendChild(Entry.engine.runButton[0])}popup.window_.appendChild(Entry.engine.view_)}Entry.windowResized.notify()};c.closeFullScreen=function(){this.popup&&(this.popup.remove(),this.popup=null);Entry.windowResized.notify()};c.exitFullScreen=function(){document.webkitIsFullScreen||document.mozIsFullScreen||document.isFullScreen||(Entry.engine.footerView_.removeClass("entryRemove"),
Entry.engine.headerView_.removeClass("entryRemove"));Entry.windowResized.notify()};c.showProjectTimer=function(){Entry.engine.projectTimer&&this.projectTimer.setVisible(!0)};c.hideProjectTimer=function(b,c){var d=this.projectTimer;if(d&&d.isVisible()&&!this.isState("run")){for(var f=Entry.container.getAllObjects(),g=["get_project_timer_value","reset_project_timer","set_visible_project_timer","choose_project_timer_action"],h=0,k=f.length;h<k;h++)for(var l=f[h].script,m=0;m<g.length;m++){var q=l.getBlockList(!1,
g[m]);if(c){var n=q.indexOf(b);-1<n&&q.splice(n,1)}if(0<q.length)return}d.setVisible(!1)}};c.clearTimer=function(){clearInterval(this.ticker);clearInterval(this.projectTimer.tick)};c.startProjectTimer=function(){var b=this.projectTimer;b&&(b.start=(new Date).getTime(),b.isInit=!0,b.pausedTime=0,b.tick=setInterval(function(b){Entry.engine.updateProjectTimer()},1E3/60))};c.stopProjectTimer=function(){var b=this.projectTimer;b&&(this.updateProjectTimer(0),b.isPaused=!1,b.isInit=!1,b.pausedTime=0,clearInterval(b.tick))};
c.updateProjectTimer=function(b){var c=Entry.engine,e=c.projectTimer;if(e){var f=(new Date).getTime();"undefined"==typeof b?e.isPaused||c.isState("pause")||e.setValue((f-e.start-e.pausedTime)/1E3):(e.setValue(b),e.pausedTime=0,e.start=f)}};c.raiseMessage=function(b){Entry.message.notify(Entry.variableContainer.getMessage(b));return Entry.container.mapEntityIncludeCloneOnScene(this.raiseKeyEvent,["when_message_cast",b])};c.getDom=function(b){if(1<=b.length)switch(b.shift()){case "runButton":return this.runButton;
case "stopButton":return this.stopButton}};c.attachKeyboardCapture=function(){Entry.keyPressed&&(this._keyboardEvent&&this.detachKeyboardCapture(),this._keyboardEvent=Entry.keyPressed.attach(this,this.captureKeyEvent))};c.detachKeyboardCapture=function(){Entry.keyPressed&&this._keyboardEvent&&(Entry.keyPressed.detach(this._keyboardEvent),delete this._keyboardEvent)}})(Entry.Engine.prototype);Entry.EntityObject=function(c){this.parent=c;this.type=c.objectType;this.flip=!1;this.collision=Entry.Utils.COLLISION.NONE;this.id=Entry.generateHash();"sprite"==this.type?(this.object=new createjs.Bitmap,this.effect={},this.setInitialEffectValue()):"textBox"==this.type&&(this.object=new createjs.Container,this.textObject=new createjs.Text,this.textObject.font="20px Nanum Gothic",this.textObject.textBaseline="middle",this.textObject.textAlign="center",this.bgObject=new createjs.Shape,this.bgObject.graphics.setStrokeStyle(1).beginStroke("#f00").drawRect(0,
0,100,100),this.object.addChild(this.bgObject),this.object.addChild(this.textObject),this.fontType="Nanum Gothic",this.fontSize=20,this.strike=this.underLine=this.fontItalic=this.fontBold=!1);this.object.entity=this;this.object.cursor="pointer";this.object.on("mousedown",function(b){var c=this.entity.parent.id;Entry.dispatchEvent("entityClick",this.entity);Entry.stage.isObjectClick=!0;"minimize"!=Entry.type&&Entry.stage.isEntitySelectable()&&(this.offset={x:-this.parent.x+this.entity.getX()-(.75*
b.stageX-240),y:-this.parent.y-this.entity.getY()-(.75*b.stageY-135)},this.cursor="move",this.entity.initCommand(),Entry.container.selectObject(c))});this.object.on("pressup",function(b){Entry.dispatchEvent("entityClickCanceled",this.entity);this.cursor="pointer";this.entity.checkCommand()});this.object.on("pressmove",function(b){"minimize"!=Entry.type&&Entry.stage.isEntitySelectable()&&!this.entity.parent.getLock()&&(this.entity.doCommand(),this.entity.setX(.75*b.stageX-240+this.offset.x),this.entity.setY(-(.75*
b.stageY-135)-this.offset.y),Entry.stage.updateObject())})};Entry.EntityObject.prototype.injectModel=function(c,b){"sprite"==this.type?this.setImage(c):"textBox"==this.type&&(c=this.parent,b.text=b.text||c.text||c.name,this.setFont(b.font),this.setBGColour(b.bgColor),this.setColour(b.colour),this.setUnderLine(b.underLine),this.setStrike(b.strike),this.setText(b.text));b&&this.syncModel_(b)};
Entry.EntityObject.prototype.syncModel_=function(c){this.setX(c.x);this.setY(c.y);this.setRegX(c.regX);this.setRegY(c.regY);this.setScaleX(c.scaleX);this.setScaleY(c.scaleY);this.setRotation(c.rotation);this.setDirection(c.direction,!0);this.setLineBreak(c.lineBreak);this.setWidth(c.width);this.setHeight(c.height);this.setText(c.text);this.setTextAlign(c.textAlign);this.setFontSize(c.fontSize||this.getFontSize());this.setVisible(c.visible)};
Entry.EntityObject.prototype.initCommand=function(){Entry.engine.isState("stop")&&(this.isCommandValid=!1,Entry.stateManager&&Entry.stateManager.addCommand("edit entity",this,this.restoreEntity,this.toJSON()))};Entry.EntityObject.prototype.doCommand=function(){this.isCommandValid=!0};Entry.EntityObject.prototype.checkCommand=function(){Entry.engine.isState("stop")&&!this.isCommandValid&&Entry.dispatchEvent("cancelLastCommand")};
Entry.EntityObject.prototype.restoreEntity=function(c){var b=this.toJSON();this.syncModel_(c);Entry.dispatchEvent("updateObject");Entry.stateManager&&Entry.stateManager.addCommand("restore object",this,this.restoreEntity,b)};Entry.EntityObject.prototype.setX=function(c){"number"==typeof c&&(this.x=c,this.object.x=this.x,this.isClone||this.parent.updateCoordinateView(),this.updateDialog(),Entry.requestUpdate=!0)};Entry.EntityObject.prototype.getX=function(){return this.x};
Entry.EntityObject.prototype.setY=function(c){"number"==typeof c&&(this.y=c,this.object.y=-this.y,this.isClone||this.parent.updateCoordinateView(),this.updateDialog(),Entry.requestUpdate=!0)};Entry.EntityObject.prototype.getY=function(){return this.y};Entry.EntityObject.prototype.getDirection=function(){return this.direction};
Entry.EntityObject.prototype.setDirection=function(c,b){c||(c=0);"vertical"!=this.parent.getRotateMethod()||b||(0<=this.direction&&180>this.direction)==(0<=c&&180>c)||(this.setScaleX(-this.getScaleX()),Entry.stage.updateObject(),this.flip=!this.flip);this.direction=c.mod(360);this.object.direction=this.direction;this.isClone||this.parent.updateRotationView();Entry.dispatchEvent("updateObject");Entry.requestUpdate=!0};
Entry.EntityObject.prototype.setRotation=function(c){"free"!=this.parent.getRotateMethod()&&(c=0);this.rotation=c.mod(360);this.object.rotation=this.rotation;this.updateDialog();this.isClone||this.parent.updateRotationView();Entry.dispatchEvent("updateObject");Entry.requestUpdate=!0};Entry.EntityObject.prototype.getRotation=function(){return this.rotation};Entry.EntityObject.prototype.setRegX=function(c){"textBox"==this.type&&(c=0);this.regX=c;this.object.regX=this.regX;Entry.requestUpdate=!0};
Entry.EntityObject.prototype.getRegX=function(){return this.regX};Entry.EntityObject.prototype.setRegY=function(c){"textBox"==this.type&&(c=0);this.regY=c;this.object.regY=this.regY;Entry.requestUpdate=!0};Entry.EntityObject.prototype.getRegY=function(){return this.regY};Entry.EntityObject.prototype.setScaleX=function(c){this.scaleX=c;this.object.scaleX=this.scaleX;this.parent.updateCoordinateView();this.updateDialog();Entry.requestUpdate=!0};Entry.EntityObject.prototype.getScaleX=function(){return this.scaleX};
Entry.EntityObject.prototype.setScaleY=function(c){this.scaleY=c;this.object.scaleY=this.scaleY;this.parent.updateCoordinateView();this.updateDialog();Entry.requestUpdate=!0};Entry.EntityObject.prototype.getScaleY=function(){return this.scaleY};Entry.EntityObject.prototype.setSize=function(c){1>c&&(c=1);c/=this.getSize();this.setScaleX(this.getScaleX()*c);this.setScaleY(this.getScaleY()*c);this.isClone||this.parent.updateCoordinateView();Entry.requestUpdate=!0};
Entry.EntityObject.prototype.getSize=function(){return(this.getWidth()*Math.abs(this.getScaleX())+this.getHeight()*Math.abs(this.getScaleY()))/2};Entry.EntityObject.prototype.setWidth=function(c){this.width=c;this.object.width=this.width;this.textObject&&this.getLineBreak()&&(this.textObject.lineWidth=this.width);this.updateDialog();this.updateBG();Entry.requestUpdate=!0};Entry.EntityObject.prototype.getWidth=function(){return this.width};
Entry.EntityObject.prototype.setHeight=function(c){this.height=c;this.textObject&&(this.object.height=this.height,this.alignTextBox());this.updateDialog();this.updateBG();Entry.requestUpdate=!0};Entry.EntityObject.prototype.getHeight=function(){return this.height};Entry.EntityObject.prototype.setColour=function(c){c||(c="#000000");this.colour=c;this.textObject&&(this.textObject.color=this.colour);Entry.requestUpdate=!0};Entry.EntityObject.prototype.getColour=function(){return this.colour};
Entry.EntityObject.prototype.setBGColour=function(c){c||(c="transparent");this.bgColor=c;this.updateBG();Entry.requestUpdate=!0};Entry.EntityObject.prototype.getBGColour=function(){return this.bgColor};Entry.EntityObject.prototype.setUnderLine=function(c){void 0===c&&(c=!1);this.underLine=c;this.textObject.underLine=c;Entry.requestUpdate=!0};Entry.EntityObject.prototype.getUnderLine=function(){return this.underLine};
Entry.EntityObject.prototype.setStrike=function(c){void 0===c&&(c=!1);this.strike=c;this.textObject.strike=c;Entry.requestUpdate=!0};Entry.EntityObject.prototype.getStrike=function(){return this.strike};Entry.EntityObject.prototype.getFont=function(){var c=[];this.fontBold&&c.push("bold");this.fontItalic&&c.push("italic");c.push(this.getFontSize()+"px");c.push(this.fontType);return c.join(" ")};
Entry.EntityObject.prototype.setFont=function(c){if("textBox"==this.parent.objectType&&this.font!==c){c||(c="20px Nanum Gothic");var b=c.split(" "),d;if(d=-1<b.indexOf("bold"))b.splice(d-1,1),this.setFontBold(!0);if(d=-1<b.indexOf("italic"))b.splice(d-1,1),this.setFontItalic(!0);d=parseInt(b.shift());this.setFontSize(d);this.setFontType(b.join(" "));this.font=this.getFont();this.textObject.font=c;Entry.stage.update();this.setWidth(this.textObject.getMeasuredWidth());this.updateBG();Entry.stage.updateObject()}};
Entry.EntityObject.prototype.setLineHeight=function(){switch(this.getFontType()){case "Nanum Gothic Coding":this.textObject.lineHeight=this.fontSize;break;default:this.textObject.lineHeight=0}};
Entry.EntityObject.prototype.syncFont=function(){this.textObject.font=this.getFont();this.setLineHeight();Entry.stage.update();if(this.getLineBreak()){if("Nanum Gothic Coding"==this.fontType){var c=this.textObject.getMeasuredLineHeight();this.textObject.y=c/2-this.getHeight()/2+10}}else this.setWidth(this.textObject.getMeasuredWidth());Entry.stage.updateObject();Entry.requestUpdate=!0};Entry.EntityObject.prototype.getFontType=function(){return this.fontType};
Entry.EntityObject.prototype.setFontType=function(c){"textBox"==this.parent.objectType&&(this.fontType=c?c:"Nanum Gothic",this.syncFont())};Entry.EntityObject.prototype.getFontSize=function(c){return this.fontSize};Entry.EntityObject.prototype.setFontSize=function(c){"textBox"==this.parent.objectType&&this.fontSize!=c&&(this.fontSize=c?c:20,this.syncFont(),this.alignTextBox())};Entry.EntityObject.prototype.setFontBold=function(c){this.fontBold=c;Entry.requestUpdate=!0};
Entry.EntityObject.prototype.toggleFontBold=function(){this.fontBold=!this.fontBold;this.syncFont();return this.fontBold};Entry.EntityObject.prototype.setFontItalic=function(c){this.fontItalic=c;Entry.requestUpdate=!0};Entry.EntityObject.prototype.toggleFontItalic=function(){this.fontItalic=!this.fontItalic;this.syncFont();return this.fontItalic};
Entry.EntityObject.prototype.setFontName=function(c){for(var b=this.font.split(" "),d=[],e=0,f=b.length;e<f;e++)("bold"===b[e]||"italic"===b[e]||-1<b[e].indexOf("px"))&&d.push(b[e]);this.setFont(d.join(" ")+" "+c)};Entry.EntityObject.prototype.getFontName=function(){if("textBox"==this.type){if(!this.font)return"";for(var c=this.font.split(" "),b=[],d=0,e=c.length;d<e;d++)"bold"!==c[d]&&"italic"!==c[d]&&-1===c[d].indexOf("px")&&b.push(c[d]);return b.join(" ").trim()}};
Entry.EntityObject.prototype.setText=function(c){"textBox"==this.parent.objectType&&(void 0===c&&(c=""),this.text=c,this.textObject.text=this.text,this.lineBreak||(this.setWidth(this.textObject.getMeasuredWidth()),this.parent.updateCoordinateView()),this.updateBG(),Entry.stage.updateObject())};Entry.EntityObject.prototype.getText=function(){return this.text};
Entry.EntityObject.prototype.setTextAlign=function(c){"textBox"==this.parent.objectType&&(void 0===c&&(c=Entry.TEXT_ALIGN_CENTER),this.textAlign=c,this.textObject.textAlign=Entry.TEXT_ALIGNS[this.textAlign],this.alignTextBox(),this.updateBG(),Entry.stage.updateObject())};Entry.EntityObject.prototype.getTextAlign=function(){return this.textAlign};
Entry.EntityObject.prototype.setLineBreak=function(c){if("textBox"==this.parent.objectType){void 0===c&&(c=!1);var b=this.lineBreak;this.lineBreak=c;b&&!this.lineBreak?(this.textObject.lineWidth=null,this.setHeight(this.textObject.getMeasuredLineHeight()),this.setText(this.getText().replace(/\n/g,""))):!b&&this.lineBreak&&(this.setFontSize(this.getFontSize()*this.getScaleX()),this.setHeight(3*this.textObject.getMeasuredLineHeight()),this.setWidth(this.getWidth()*this.getScaleX()),this.setScaleX(1),
this.setScaleY(1),this.textObject.lineWidth=this.getWidth(),this.alignTextBox(),"Nanum Gothic Coding"==this.fontType&&(c=this.textObject.getMeasuredLineHeight(),this.textObject.y=c/2-this.getHeight()/2+10));Entry.stage.updateObject()}};Entry.EntityObject.prototype.getLineBreak=function(){return this.lineBreak};Entry.EntityObject.prototype.setVisible=function(c){void 0===c&&(c=!0);this.visible=c;this.object.visible=this.visible;this.dialog&&this.syncDialogVisible();Entry.requestUpdate=!0;return this.visible};
Entry.EntityObject.prototype.getVisible=function(){return this.visible};
Entry.EntityObject.prototype.setImage=function(c){var b=this;delete c._id;Entry.assert("sprite"==this.type,"Set image is only for sprite object");c.id||(c.id=Entry.generateHash());this.picture=c;var d=this.picture.dimension,e=this.getRegX()-this.getWidth()/2,f=this.getRegY()-this.getHeight()/2;this.setWidth(d.width);this.setHeight(d.height);d.scaleX||(d.scaleX=this.getScaleX(),d.scaleY=this.getScaleY());this.setScaleX(this.scaleX);this.setScaleY(this.scaleY);this.setRegX(this.width/2+e);this.setRegY(this.height/
2+f);var g=c.id+this.id,h=Entry.container.getCachedPicture(g);h?(Entry.image=h,this.object.image=h,this.object.cache(0,0,this.getWidth(),this.getHeight())):(h=new Image,c.fileurl?h.src=c.fileurl:(c=c.filename,h.src=Entry.defaultPath+"/uploads/"+c.substring(0,2)+"/"+c.substring(2,4)+"/image/"+c+".png"),this.object.image=h,this.object.cache(0,0,this.getWidth(),this.getHeight()),h.onload=function(c){Entry.container.cachePicture(g,h);Entry.image=h;b.object.image=h;b.object.cache(0,0,b.getWidth(),b.getHeight());
Entry.requestUpdate=!0});Entry.dispatchEvent("updateObject")};
Entry.EntityObject.prototype.applyFilter=function(c,b){var d=this.effect,e=this.object,f=function(b,c){var d=[],e;for(e in b)b[e]!==c[e]&&d.push(e);return d}(d,this.getInitialEffectValue());if(c||0!==f.length)Array.isArray(b)&&(f=f.concat(b)),function(b,c){var d=[],e=Entry.adjustValueWithMaxMin;if(-1<f.indexOf("brightness")){b.brightness=b.brightness;var g=new createjs.ColorMatrix;g.adjustColor(e(b.brightness,-100,100),0,0,0);g=new createjs.ColorMatrixFilter(g);d.push(g)}-1<f.indexOf("hue")&&(b.hue=
b.hue.mod(360),g=new createjs.ColorMatrix,g.adjustColor(0,0,0,b.hue),g=new createjs.ColorMatrixFilter(g),d.push(g));if(-1<f.indexOf("hsv")){var g=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],h=10.8*b.hsv*Math.PI/180,n=Math.cos(h),h=Math.sin(h),t=Math.abs(b.hsv/100);1<t&&(t-=Math.floor(t));0<t&&.33>=t?g=[1,0,0,0,0,0,n,h,0,0,0,-1*h,n,0,0,0,0,0,1,0,0,0,0,0,1]:.66>=t?g=[n,0,h,0,0,0,1,0,0,0,h,0,n,0,0,0,0,0,1,0,0,0,0,0,1]:.99>=t&&(g=[n,h,0,0,0,-1*h,n,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]);g=(new createjs.ColorMatrix).concat(g);
g=new createjs.ColorMatrixFilter(g);d.push(g)}-1<f.indexOf("alpha")&&(c.alpha=b.alpha=e(b.alpha,0,1));c.filters=d}(d,e),e.cache(0,0,this.getWidth(),this.getHeight()),Entry.requestUpdate=!0};Entry.EntityObject.prototype.resetFilter=function(){"sprite"==this.parent.objectType&&(this.object.filters=[],this.setInitialEffectValue(),this.object.alpha=this.effect.alpha,this.object.cache(0,0,this.getWidth(),this.getHeight()),Entry.requestUpdate=!0)};
Entry.EntityObject.prototype.updateDialog=function(){this.dialog&&this.dialog.update();Entry.requestUpdate=!0};Entry.EntityObject.prototype.takeSnapshot=function(){this.snapshot_=this.toJSON();this.collision=Entry.Utils.COLLISION.NONE};Entry.EntityObject.prototype.loadSnapshot=function(){this.snapshot_&&this.syncModel_(this.snapshot_);"sprite"==this.parent.objectType&&this.setImage(this.parent.getPicture());Entry.requestUpdate=!0};
Entry.EntityObject.prototype.removeClone=function(){if(this.isClone){this.dialog&&this.dialog.remove();this.brush&&this.removeBrush();Entry.stage.unloadEntity(this);var c=this.parent.clonedEntities.indexOf(this);this.parent.clonedEntities.splice(c,1);Entry.Utils.isFunction(this.clearExecutor)&&this.clearExecutor()}};Entry.EntityObject.prototype.clearExecutor=function(){this.parent.script.clearExecutorsByEntity(this)};
Entry.EntityObject.prototype.toJSON=function(){var c={};c.x=Entry.cutDecimal(this.getX());c.y=Entry.cutDecimal(this.getY());c.regX=Entry.cutDecimal(this.getRegX());c.regY=Entry.cutDecimal(this.getRegY());c.scaleX=this.getScaleX();c.scaleY=this.getScaleY();c.rotation=Entry.cutDecimal(this.getRotation());c.direction=Entry.cutDecimal(this.getDirection());c.width=Entry.cutDecimal(this.getWidth());c.height=Entry.cutDecimal(this.getHeight());c.font=this.getFont();c.visible=this.getVisible();"textBox"==
this.parent.objectType&&(c.colour=this.getColour(),c.text=this.getText(),c.textAlign=this.getTextAlign(),c.lineBreak=this.getLineBreak(),c.bgColor=this.getBGColour(),c.underLine=this.getUnderLine(),c.strike=this.getStrike(),c.fontSize=this.getFontSize());return c};Entry.EntityObject.prototype.setInitialEffectValue=function(){this.effect=this.getInitialEffectValue();Entry.requestUpdate=!0};
Entry.EntityObject.prototype.getInitialEffectValue=function(){return{blur:0,hue:0,hsv:0,brightness:0,contrast:0,saturation:0,alpha:1}};Entry.EntityObject.prototype.removeBrush=function(){Entry.stage.selectedObjectContainer.removeChild(this.shape);this.shape=this.brush=null};
Entry.EntityObject.prototype.updateBG=function(){if(this.bgObject){this.bgObject.graphics.clear();var c=this.getWidth(),b=this.getHeight();this.bgObject.graphics.setStrokeStyle(1).beginStroke().beginFill(this.getBGColour()).drawRect(-c/2,-b/2,c,b);if(this.getLineBreak())this.bgObject.x=0;else switch(this.getTextAlign()){case Entry.TEXT_ALIGN_LEFT:this.bgObject.x=c/2;break;case Entry.TEXT_ALIGN_CENTER:this.bgObject.x=0;break;case Entry.TEXT_ALIGN_RIGHT:this.bgObject.x=-c/2}}};
Entry.EntityObject.prototype.alignTextBox=function(){if("textBox"==this.type){var c=this.textObject;if(this.lineBreak){var b=c.getMeasuredLineHeight();c.y=b/2-this.getHeight()/2;"Nanum Gothic Coding"==this.fontType&&(c.y=b/2-this.getHeight()/2+10);switch(this.textAlign){case Entry.TEXT_ALIGN_CENTER:c.x=0;break;case Entry.TEXT_ALIGN_LEFT:c.x=-this.getWidth()/2;break;case Entry.TEXT_ALIGN_RIGHT:c.x=this.getWidth()/2}c.maxHeight=this.getHeight()}else c.x=0,c.y=0}};
Entry.EntityObject.prototype.syncDialogVisible=function(){this.dialog&&(this.dialog.object.visible=this.visible)};Entry.Extension=function(){};(function(c){c.renderView=function(){};c.toggleInformation=function(){}})(Entry.Extension.prototype);Entry.TargetChecker=function(c,b){this.isForEdit=b;this.goals=[];this.unachievedGoals=[];this.isForEdit&&(this.watchingBlocks=[],Entry.playground.mainWorkspace.blockMenu.unbanClass("checker"),Entry.addEventListener("run",this.reRegisterAll.bind(this)));this.isSuccess=this.isFail=!1;this.entity=this;this.parent=this;Entry.achieve=this.achieveCheck.bind(this);Entry.achieveEvent=new Entry.Event;Entry.addEventListener("stop",this.reset.bind(this));Entry.registerAchievement=this.registerAchievement.bind(this);
this.script=new Entry.Code(c?c:[],this)};Entry.Utils.inherit(Entry.Extension,Entry.TargetChecker);
(function(c){c.renderView=function(){this._view=Entry.Dom("li",{class:"targetChecker"});this._view.bindOnClick(function(b){Entry.playground.injectObject(this)}.bind(this));this.updateView();this.isForEdit||this._view.addClass("entryRemove");return this._view};c.generateView=function(){};c.updateView=function(){if(this._view){var b=this.goals.length;this._view.text("\ubaa9\ud45c : "+(b-this.unachievedGoals.length)+" / "+b);this.isSuccess?this._view.addClass("success"):this._view.removeClass("success");
this.isFail?this._view.addClass("fail"):this._view.removeClass("fail")}};c.achieveCheck=function(b,c){!this.isFail&&Entry.engine.achieveEnabled&&(b?this.achieveGoal(c):this.fail(c))};c.achieveGoal=function(b){this.isSuccess||this.isFail||0>this.unachievedGoals.indexOf(b)||(this.unachievedGoals.splice(this.unachievedGoals.indexOf(b),1),0===this.unachievedGoals.length&&(this.isSuccess=!0,Entry.achieveEvent.notify("success")),this.updateView())};c.fail=function(){this.isSuccess||this.isFail||(this.isFail=
!0,Entry.achieveEvent.notify("fail"),this.updateView())};c.reset=function(){this.unachievedGoals=this.goals.concat();this.isSuccess=this.isFail=!1;this.updateView()};c.registerAchievement=function(b){this.isForEdit&&this.watchingBlocks.push(b);b.params[1]&&0>this.goals.indexOf(b.params[0]+"")&&this.goals.push(b.params[0]+"");this.reset()};c.reRegisterAll=function(){var b=this.script.getBlockList(!1,"check_lecture_goal");this.watchingBlocks=b;this.goals=_.uniq(b.filter(function(b){return 1===b.params[1]}).map(function(b){return b.params[0]+
""}))};c.clearExecutor=function(){this.script.clearExecutors()};c.destroy=function(){this.reset();Entry.achieveEvent.clear();this.script.destroy();$(this._view).remove()}})(Entry.TargetChecker.prototype);Entry.Func=function(c){this.id=c?c.id:Entry.generateHash();var b;c&&c.content&&4<c.content.length&&(b=c.content);this.content=b?new Entry.Code(b):new Entry.Code([[{type:"function_create",copyable:!1,deletable:!1,x:40,y:40}]]);this._backupContent=this.blockMenuBlock=this.block=null;this.hashMap={};this.paramMap={};Entry.generateFunctionSchema(this.id);if(c){c=this.content._blockMap;for(var d in c)Entry.Func.registerParamBlock(c[d].type);Entry.Func.generateWsBlock(this)}Entry.Func.registerFunction(this);
Entry.Func.updateMenu()};Entry.Func.threads={};Entry.Func.registerFunction=function(c){if(Entry.playground){var b=Entry.playground.mainWorkspace;b&&(this._targetFuncBlock=b.getBlockMenu().code.createThread([{type:"func_"+c.id,category:"func",x:-9999}]),c.blockMenuBlock=this._targetFuncBlock)}};Entry.Func.executeFunction=function(c){var b=this.threads[c];if(b=Entry.Engine.computeThread(b.entity,b))return this.threads[c]=b,!0;delete this.threads[c];return!1};
Entry.Func.clearThreads=function(){this.threads={}};Entry.Func.prototype.init=function(c){this.id=c.id;this.content=Blockly.Xml.textToDom(c.content);this.block=Blockly.Xml.textToDom("<xml>"+c.block+"</xml>").childNodes[0]};Entry.Func.prototype.destroy=function(){this.blockMenuBlock&&this.blockMenuBlock.destroy()};
Entry.Func.edit=function(c){this.unbindFuncChangeEvent();this.unbindWorkspaceStateChangeEvent();this.cancelEdit();Entry.Func.isEdit=!0;this.targetFunc=c;this.initEditView(c.content);this.bindFuncChangeEvent();this.updateMenu();setTimeout(function(){var b=Entry.block["func_"+c.id];b&&b.paramsBackupEvent&&b.paramsBackupEvent.notify();this._backupContent=c.content.stringify()}.bind(this),0)};
Entry.Func.initEditView=function(c){this.menuCode||this.setupMenuCode();var b=Entry.getMainWS();b.setMode(Entry.Workspace.MODE_OVERLAYBOARD);b.changeOverlayBoardCode(c);this._workspaceStateEvent=b.changeEvent.attach(this,function(c){this.endEdit(c||"cancelEdit");b.getMode()===Entry.Workspace.MODE_VIMBOARD&&b.blockMenu.banClass("functionInit")});c.board.alignThreads()};
Entry.Func.endEdit=function(c){this.unbindFuncChangeEvent();this.unbindWorkspaceStateChangeEvent();var b=this.targetFunc.id;this.targetFunc&&this.targetFunc.content&&this.targetFunc.content.destroyView();switch(c){case "save":this.save();break;case "cancelEdit":this.cancelEdit()}this._backupContent=null;delete this.targetFunc;(c=Entry.block["func_"+b])&&c.destroyParamsBackupEvent&&c.destroyParamsBackupEvent.notify();this.updateMenu();Entry.Func.isEdit=!1};
Entry.Func.save=function(){this.targetFunc.generateBlock(!0);Entry.variableContainer.saveFunction(this.targetFunc);var c=Entry.getMainWS();c&&c.overlayModefrom==Entry.Workspace.MODE_VIMBOARD&&(c={},c.boardType=Entry.Workspace.MODE_VIMBOARD,c.textType=Entry.Vim.TEXT_TYPE_PY,c.runType=Entry.Vim.WORKSPACE_MODE,Entry.getMainWS().setMode(c),Entry.variableContainer.functionAddButton_.addClass("disable"))};
Entry.Func.syncFuncName=function(c){var b=0;c=c.split(" ");var d="",e;e=Blockly.mainWorkspace.getAllBlocks();for(var f=0;f<e.length;f++){var g=e[f];if("function_general"===g.type){for(var g=g.inputList,h=0;h<g.length;h++){var k=g[h];0<k.fieldRow.length&&k.fieldRow[0]instanceof Blockly.FieldLabel&&void 0!=k.fieldRow[0].text_&&(d+=k.fieldRow[0].text_,d+=" ")}d=d.trim();if(d===this.srcFName&&this.srcFName.split(" ").length==c.length)for(d=0;d<g.length;d++)if(k=g[d],0<k.fieldRow.length&&k.fieldRow[0]instanceof
Blockly.FieldLabel&&void 0!=k.fieldRow[0].text_){if(void 0===c[b]){g.splice(d,1);break}else k.fieldRow[0].text_=c[b];b++}d="";b=0}}b=Blockly.Xml.workspaceToDom(Blockly.mainWorkspace);Blockly.mainWorkspace.clear();Blockly.Xml.domToWorkspace(Blockly.mainWorkspace,b)};
Entry.Func.cancelEdit=function(){if(this.targetFunc){this.targetFunc.block?this._backupContent&&(this.targetFunc.content.load(this._backupContent),Entry.generateFunctionSchema(this.targetFunc.id),Entry.Func.generateWsBlock(this.targetFunc,!0)):(this._targetFuncBlock.destroy(),delete Entry.variableContainer.functions_[this.targetFunc.id],delete Entry.variableContainer.selected);Entry.variableContainer.updateList();var c=Entry.getMainWS();c&&c.overlayModefrom==Entry.Workspace.MODE_VIMBOARD&&(c={},c.boardType=
Entry.Workspace.MODE_VIMBOARD,c.textType=Entry.Vim.TEXT_TYPE_PY,c.runType=Entry.Vim.WORKSPACE_MODE,Entry.getMainWS().setMode(c),Entry.variableContainer.functionAddButton_.addClass("disable"))}};
Entry.Func.getMenuXml=function(){var c=[];this.targetFunc||(c=c.concat(this.createBtn));if(this.targetFunc)var b=this.FIELD_BLOCK,b=b.replace("#1",Entry.generateHash()),b=b.replace("#2",Entry.generateHash()),b=Blockly.Xml.textToDom(b).childNodes,c=c.concat(Entry.nodeListToArray(b));for(var d in Entry.variableContainer.functions_)b=Entry.variableContainer.functions_[d],b===this.targetFunc?(b=Entry.Func.generateBlock(this.targetFunc,Blockly.Xml.workspaceToDom(Entry.Func.workspace),b.id).block,c.push(b)):
c.push(b.block);return c};Entry.Func.syncFunc=function(){var c=Entry.Func;if(c.targetFunc){var b=c.workspace.topBlocks_[0].toString(),d=c.workspace.topBlocks_.length;(c.fieldText!=b||c.workspaceLength!=d)&&1>Blockly.Block.dragMode_&&(c.updateMenu(),c.fieldText=b,c.workspaceLength=d)}};
Entry.Func.setupMenuCode=function(){var c=Entry.playground.mainWorkspace;if(c){var c=c.getBlockMenu(),b=c.code;this._fieldLabel=b.createThread([{type:"function_field_label",category:"func",x:-9999}]).getFirstBlock();this._fieldString=b.createThread([{type:"function_field_string",category:"func",x:-9999,copyable:!1,params:[{type:this.requestParamBlock("string")}]}]).getFirstBlock();this._fieldBoolean=b.createThread([{type:"function_field_boolean",copyable:!1,category:"func",x:-9999,params:[{type:this.requestParamBlock("boolean")}]}]).getFirstBlock();
this.menuCode=b;c.align()}};Entry.Func.refreshMenuCode=function(){Entry.playground.mainWorkspace&&(this.menuCode||this.setupMenuCode(),this._fieldString.params[0].changeType(this.requestParamBlock("string")),this._fieldBoolean.params[0].changeType(this.requestParamBlock("boolean")))};
Entry.Func.requestParamBlock=function(c){var b;switch(c){case "string":b=Entry.block.function_param_string;break;case "boolean":b=Entry.block.function_param_boolean;break;default:return null}var d=c+"Param_"+Entry.generateHash();Entry.block[d]=Entry.Func.createParamBlock(d,b,c);return d};
Entry.Func.registerParamBlock=function(c){if(c){var b;-1<c.indexOf("stringParam")?b=Entry.block.function_param_string:-1<c.indexOf("booleanParam")&&(b=Entry.block.function_param_boolean);b&&Entry.Func.createParamBlock(c,b,c)}};Entry.Func.createParamBlock=function(c,b,d){d=/string/gi.test(d)?"function_param_string":"function_param_boolean";var e=function(){};e.prototype=b;e=new e;e.changeEvent=new Entry.Event;e.template=Lang.template[d];return Entry.block[c]=e};
Entry.Func.updateMenu=function(){var c=Entry.getMainWS();if(c){var b=c.getBlockMenu();this.targetFunc?(!this.menuCode&&this.setupMenuCode(),b.banClass("functionInit",!0),b.unbanClass("functionEdit",!0)):(!c.isVimMode()&&b.unbanClass("functionInit",!0),b.banClass("functionEdit",!0));"func"===b.lastSelector&&b.align()}};Entry.Func.prototype.edit=function(){Entry.Func.isEdit||(Entry.Func.isEdit=!0,Entry.Func.svg?this.parentView.appendChild(this.svg):Entry.Func.initEditView())};
Entry.Func.generateBlock=function(c){c=Entry.block["func_"+c.id];var b={template:c.template,params:c.params},d=/(%\d)/mi,e=c.template.split(d),f="",g=0,h=0,k;for(k in e){var l=e[k];d.test(l)?(l=Number(l.split("%")[1])-1,l=c.params[l],"Indicator"!==l.type&&("boolean"===l.accept?(f+=Lang.template.function_param_boolean+(g?g:""),g++):(f+=Lang.template.function_param_string+(h?h:""),h++))):f+=l}return{block:b,description:f}};
Entry.Func.prototype.generateBlock=function(c){c=Entry.Func.generateBlock(this);this.block=c.block;this.description=c.description};
Entry.Func.generateWsBlock=function(c,b){this.unbindFuncChangeEvent();c=c?c:this.targetFunc;var d=c.content.getEventMap("funcDef")[0];if(d){for(var e=d.params[0],f=0,g=0,h=[],k="",d=c.hashMap,l=c.paramMap,m=[];e;){var q=e.params[0];switch(e.type){case "function_field_label":k=k+" "+q;break;case "function_field_boolean":Entry.Mutator.mutate(q.type,{template:Lang.Blocks.FUNCTION_logical_variable+" "+(f?f:"")});d[q.type]=!1;l[q.type]=f+g;f++;h.push({type:"Block",accept:"boolean"});k+=" %"+(f+g);m.push(e.id);
break;case "function_field_string":Entry.Mutator.mutate(q.type,{template:Lang.Blocks.FUNCTION_character_variable+" "+(g?g:"")}),d[q.type]=!1,l[q.type]=f+g,g++,k+=" %"+(f+g),h.push({type:"Block",accept:"string"}),m.push(e.id)}e=e.getOutputBlock()}f++;k+=" %"+(f+g);h.push({type:"Indicator",img:"block_icon/function_03.png",size:12});e="func_"+c.id;f=Entry.block[e].params.slice();f.pop();g=h.slice();g.pop();f=f.length;l=g.length;g={};if(l>f){if(f=c.outputBlockIds){for(g=0;f[g]===m[g];)g++;for(l=0;f[f.length-
l-1]===m[m.length-l-1];)l++;l=m.length-l-1;g={type:"insert",startPos:g,endPos:l}}}else g=l<f?{type:"cut",pos:l}:{type:"noChange"};g.isRestore=b;c.outputBlockIds=m;Entry.Mutator.mutate(e,{params:h,template:k},g);for(var n in d)d[n]?(b=-1<n.indexOf("string")?Lang.Blocks.FUNCTION_character_variable:Lang.Blocks.FUNCTION_logical_variable,Entry.Mutator.mutate(n,{template:b})):d[n]=!0;this.bindFuncChangeEvent(c)}};
Entry.Func.bindFuncChangeEvent=function(c){c=c?c:this.targetFunc;!this._funcChangeEvent&&c.content.getEventMap("funcDef")[0].view&&(this._funcChangeEvent=c.content.getEventMap("funcDef")[0].view._contents[1].changeEvent.attach(this,this.generateWsBlock))};Entry.Func.unbindFuncChangeEvent=function(){this._funcChangeEvent&&(this._funcChangeEvent.destroy(),delete this._funcChangeEvent)};
Entry.Func.unbindWorkspaceStateChangeEvent=function(){this._workspaceStateEvent&&(this._workspaceStateEvent.destroy(),delete this._workspaceStateEvent)};Entry.Helper=function(){this.visible=!1;Entry.addEventListener("workspaceChangeMode",function(){this._blockView&&this.renderBlock(this._blockView.type)}.bind(this));this.resize=Entry.Utils.debounce(this.resize,300)};p=Entry.Helper.prototype;
p.generateView=function(c,b){if(!this.parentView_){this.parentView_=c;this.blockHelpData=EntryStatic.blockInfo;this.view=b=Entry.createElement("div","entryBlockHelperWorkspace");Entry.isForLecture&&b.addClass("lecture");this.parentView_.appendChild(b);this._contentView=c=Entry.createElement("div","entryBlockHelperContentWorkspace");var d=Entry.createElement("div");d.addClass("entryBlockHelperTitle textModeElem");d.innerHTML="\uba85\ub839\uc5b4";c.appendChild(d);c.addClass("entryBlockHelperIntro");
Entry.isForLecture&&c.addClass("lecture");b.appendChild(c);this.blockHelperContent_=c;this.blockHelperView_=b;b=Entry.createElement("div","entryBlockHelperBlockWorkspace");this.blockHelperContent_.appendChild(b);d=Entry.createElement("div");d.addClass("entryBlockHelperTitle textModeElem");d.innerHTML="\uc124\uba85";c.appendChild(d);d=Entry.createElement("div","entryBlockHelperDescriptionWorkspace");d.addClass("entryBlockHelperContent selectAble");this.blockHelperContent_.appendChild(d);d.innerHTML=
Lang.Helper.Block_click_msg;this.blockHelperDescription_=d;d=Entry.createElement("div");d.addClass("entryBlockHelperTitle textModeElem");d.innerHTML="\uc694\uc18c";c.appendChild(d);this._elementsTitle=d;this._elementsContainer=Entry.createElement("div","entryBlockHelperElementsContainer");this._elementsContainer.addClass("entryBlockHelperContent textModeElem selectAble");c.appendChild(this._elementsContainer);"undefined"!==typeof CodeMirror&&(d=Entry.createElement("div"),d.addClass("entryBlockHelperTitle textModeElem"),
d.innerHTML="\uc608\uc2dc \ucf54\ub4dc",c.appendChild(d),d=Entry.createElement("div","entryBlockHelperCodeMirrorContainer"),d.addClass("textModeElem"),c.appendChild(d),this.codeMirror=CodeMirror(d,{lineNumbers:!0,value:"",mode:{name:"python"},indentUnit:4,theme:"default",viewportMargin:10,styleActiveLine:!1,readOnly:!0}),this._doc=this.codeMirror.getDoc(),this._codeMirror=this.codeMirror,d=Entry.createElement("div"),d.addClass("entryBlockHelperTitle textModeElem"),d.innerHTML="\uc608\uc2dc \uc124\uba85",
c.appendChild(d),this._codeMirrorDesc=Entry.createElement("div"),this._codeMirrorDesc.addClass("entryBlockHelperContent textModeElem selectAble"),c.appendChild(this._codeMirrorDesc));this._renderView=new Entry.RenderView($(b),"LEFT_MOST");this.code=new Entry.Code([]);this.code.isFor="blockHelper";this._renderView.changeCode(this.code);this.first=!0}};
p.bindWorkspace=function(c){c&&(this._blockViewObserver&&this._blockViewObserver.destroy(),this.workspace=c,this._renderView&&(this._renderView.workspace=c),this._blockViewObserver=c.observe(this,"_updateSelectedBlock",["selectedBlockView"]))};p._updateSelectedBlock=function(){var c=this.workspace.selectedBlockView;if(c&&this.visible&&c!=this._blockView){var b=c.block.type;this._blockView=c;this.renderBlock(b)}};
p.renderBlock=function(c){var b=Lang.Helper[c];if(c&&this.visible&&b&&!Entry.block[c].isPrimitive){this.first&&(this.blockHelperContent_.removeClass("entryBlockHelperIntro"),this.first=!1);this.code.clear();var d=Entry.block[c].def||{type:c};if(this.workspace.getMode()===Entry.Workspace.MODE_VIMBOARD){this._contentView.addClass("textMode");this.blockHelperDescription_.innerHTML=Lang.PythonHelper[c+"_desc"];b=Lang.PythonHelper[c+"_elements"];this._elementsContainer.innerHTML="";if(b)for(this._elementsTitle.removeClass("entryRemove"),
b=b.split("%next");b.length;){var e=b.shift().split("-- "),f=Entry.createElement("div");f.addClass("entryBlockHelperElementsContainer");var g=Entry.createElement("div");g.innerHTML=e[0];g.addClass("elementLeft");var h=Entry.createElement("div");h.addClass("elementRight");h.innerHTML=e[1];f.appendChild(g);f.appendChild(h);this._elementsContainer.appendChild(f)}else this._elementsTitle.addClass("entryRemove");this._codeMirrorDesc.innerHTML=Lang.PythonHelper[c+"_exampleDesc"];this._codeMirror.setValue(Lang.PythonHelper[c+
"_exampleCode"]);this.codeMirror.refresh();d=Entry.block[c].pyHelpDef||d}else this._contentView.removeClass("textMode"),this.blockHelperDescription_.innerHTML=b;this.code.createThread([d]);this.code.board.align();this.code.board.resize();this._renderView.align();this._renderView.setDomSize()}};p.getView=function(){return this.view};p.resize=function(){this.codeMirror&&this.codeMirror.refresh()};Entry.HWMontior={};Entry.HWMonitor=function(c){this.svgDom=Entry.Dom($('<svg id="hwMonitor" width="100%" height="100%"version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'));this._hwModule=c;var b=this;Entry.addEventListener("windowResized",function(){var c=b._hwModule.monitorTemplate.mode;"both"==c&&(b.resize(),b.resizeList());"list"==c?b.resizeList():b.resize()});Entry.addEventListener("hwModeChange",function(){b.changeMode()});this.changeOffset=0;this.scale=.5;this._listPortViews={}};
(function(c){c.initView=function(){this.svgDom=Entry.Dom($('<svg id="hwMonitor" width="100%" height="100%"version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'))};c.generateView=function(){this.snap=Entry.SVG("hwMonitor");this._svgGroup=this.snap.elem("g");this._portMap={n:[],e:[],s:[],w:[]};var b=this._hwModule.monitorTemplate,c={href:Entry.mediaFilePath+b.imgPath,x:-b.width/2,y:-b.height/2,width:b.width,height:b.height};this._portViews={};this.hwView=this._svgGroup.elem("image");this.hwView=
this.hwView.attr(c);this._template=b;b=b.ports;this.pathGroup=null;this.pathGroup=this._svgGroup.elem("g");var c=[],e;for(e in b){var f=this.generatePortView(b[e],"_svgGroup");this._portViews[e]=f;c.push(f)}c.sort(function(b,c){return b.box.x-c.box.x});var g=this._portMap;c.map(function(b){(1>(Math.atan2(-b.box.y,b.box.x)/Math.PI+2)%2?g.n:g.s).push(b)});this.resize()};c.toggleMode=function(b){var c=this._hwModule.monitorTemplate;"list"==b?(c.TempPort=null,this._hwModule.monitorTemplate.ports&&(this._hwModule.monitorTemplate.TempPort=
this._hwModule.monitorTemplate.ports,this._hwModule.monitorTemplate.listPorts=this.addPortEle(this._hwModule.monitorTemplate.listPorts,this._hwModule.monitorTemplate.ports)),$(this._svglistGroup).remove(),this._svgGroup&&$(this._svgGroup).remove(),$(this._pathGroup).remove(),this._hwModule.monitorTemplate.mode="list",this.generateListView()):(this._hwModule.monitorTemplate.TempPort&&(this._hwModule.monitorTemplate.ports=this._hwModule.monitorTemplate.TempPort,this._hwModule.monitorTemplate.listPorts=
this.removePortEle(this._hwModule.monitorTemplate.listPorts,this._hwModule.monitorTemplate.ports)),$(this._svglistGroup).remove(),this._hwModule.monitorTemplate.mode="both",this.generateListView(),this.generateView())};c.setHwmonitor=function(b){this._hwmodule=b};c.changeMode=function(b){"both"==this._hwModule.monitorTemplate.mode?this.toggleMode("list"):"list"==this._hwModule.monitorTemplate.mode&&this.toggleMode("both")};c.addPortEle=function(b,c){if("object"!=typeof c)return b;for(var d in c)b[d]=
c[d];return b};c.removePortEle=function(b,c){if("object"!=typeof c)return b;for(var d in c)delete b[d];return b};c.generateListView=function(){this._portMapList={n:[]};this._svglistGroup=null;this.listsnap=Entry.SVG("hwMonitor");this._svglistGroup=this.listsnap.elem("g");var b=this._hwModule.monitorTemplate;this._template=b;b=b.listPorts;this.pathGroup=this._svglistGroup.elem("g");var c=[],e;for(e in b){var f=this.generatePortView(b[e],"_svglistGroup");this._listPortViews[e]=f;c.push(f)}var g=this._portMapList;
c.map(function(b){g.n.push(b)});this.resizeList()};c.generatePortView=function(b,c){c=this[c].elem("g");c.addClass("hwComponent");var d;d=this.pathGroup.elem("path").attr({d:"m0,0",fill:"none",stroke:"input"===b.type?"#00979d":"#A751E3","stroke-width":3});var f=c.elem("rect").attr({x:0,y:0,width:150,height:22,rx:4,ry:4,fill:"#fff",stroke:"#a0a1a1"}),g=c.elem("text").attr({x:4,y:12,fill:"#000","class":"hwComponentName","alignment-baseline":"central"});g.textContent=b.name;g=g.getComputedTextLength();
c.elem("rect").attr({x:g+8,y:2,width:30,height:18,rx:9,ry:9,fill:"input"===b.type?"#00979d":"#A751E3"});var h=c.elem("text").attr({x:g+13,y:12,fill:"#fff","class":"hwComponentValue","alignment-baseline":"central"});h.textContent=0;g+=40;f.attr({width:g});return{group:c,value:h,type:b.type,path:d,box:{x:b.pos.x-this._template.width/2,y:b.pos.y-this._template.height/2,width:g},width:g}};c.getView=function(){return this.svgDom};c.update=function(){var b=Entry.hw.portData,c=Entry.hw.sendQueue,e=this._hwModule.monitorTemplate.mode,
f=this._hwModule.monitorTemplate.keys||[],g=[];if("list"==e)g=this._listPortViews;else if("both"==e){if(g=this._listPortViews,this._portViews)for(var h in this._portViews)g[h]=this._portViews[h]}else g=this._portViews;if(c)for(h in c)0!=c[h]&&g[h]&&(g[h].type="output");for(var k in g)if(e=g[k],"input"==e.type){var l=b[k];0<f.length&&$.each(f,function(b,c){if($.isPlainObject(l))l=l[c]||0;else return!1});e.value.textContent=l?l:0;e.group.getElementsByTagName("rect")[1].attr({fill:"#00979D"})}else l=
c[k],0<f.length&&$.each(f,function(b,c){if($.isPlainObject(l))l=l[c]||0;else return!1}),e.value.textContent=l?l:0,e.group.getElementsByTagName("rect")[1].attr({fill:"#A751E3"})};c.resize=function(){this.hwView&&this.hwView.attr({transform:"scale("+this.scale+")"});if(this.svgDom)var b=this.svgDom.get(0).getBoundingClientRect();this._svgGroup.attr({transform:"translate("+b.width/2+","+b.height/1.8+")"});this._rect=b;0>=this._template.height||0>=b.height||(this.scale=b.height/this._template.height*
this._template.height/1E3,this.align())};c.resizeList=function(){var b=this.svgDom.get(0).getBoundingClientRect();this._svglistGroup.attr({transform:"translate("+b.width/2+","+b.height/2+")"});this._rect=b;this.alignList()};c.align=function(){var b;b=this._portMap.s.concat();this._alignNS(b,this.scale/3*this._template.height+5,27);b=this._portMap.n.concat();this._alignNS(b,-this._template.height*this.scale/3-32,-27);b=this._portMap.e.concat();this._alignEW(b,-this._template.width*this.scale/3-5,-27);
b=this._portMap.w.concat();this._alignEW(b,this._template.width*this.scale/3-32,-27)};c.alignList=function(){var b;b=this._hwModule.monitorTemplate.listPorts;for(var c=b.length,e=0;e<b.length;e++)b[e].group.attr({transform:"translate("+this._template.width*(e/c-.5)+","+(-this._template.width/2-30)+")"});b=this._portMapList.n.concat();this._alignNSList(b,-this._template.width*this.scale/2-32,-27)};c._alignEW=function(b,c,e){var d=b.length,g=this._rect.height-50;tP=-g/2;bP=g/2;height=this._rect.height;
listVLine=wholeHeight=0;mode=this._hwModule.monitorTemplate;for(g=0;g<d;g++)wholeHeight+=b[g].height+5;wholeHeight<bP-tP&&(bP=wholeHeight/2+3,tP=-wholeHeight/2-3);for(;1<d;){var h=b.shift(),g=b.pop(),k=tP,l=bP,m=e;wholeWidth<=bP-tP?(tP+=h.width+5,bP-=g.width+5,m=0):0===b.length?(tP=(tP+bP)/2-3,bP=tP+6):(tP=Math.max(tP,-width/2+h.width)+15,bP=Math.min(bP,width/2-g.width)-15);wholeWidth-=h.width+g.width+10;c+=m}b.length&&b[0].group.attr({transform:"translate("+c+",60)"});h&&rPort&&(this._movePort(h,
c,tP,k),this._movePort(rPort,c,bP,l))};c._alignNS=function(b,c,e){for(var d=-this._rect.width/2,g=this._rect.width/2,h=this._rect.width,k=0,l=0;l<b.length;l++)k+=b[l].width+5;k<g-d&&(g=k/2+3,d=-k/2-3);for(;1<b.length;){var l=b.shift(),m=b.pop(),q=d,n=g,t=e;k<=g-d?(d+=l.width+5,g-=m.width+5,t=0):0===b.length?(d=(d+g)/2-3,g=d+6):(d=Math.max(d,-h/2+l.width)+15,g=Math.min(g,h/2-m.width)-15);this._movePort(l,d,c,q);this._movePort(m,g,c,n);k-=l.width+m.width+10;c+=t}b.length&&this._movePort(b[0],(g+d-b[0].width)/
2,c,100)};c._alignNSList=function(b,c){c=this._rect.width;initX=-this._rect.width/2+10;initY=-this._rect.height/2+10;for(var d=listLine=wholeWidth=0;d<b.length;d++)wholeWidth+=b[d].width;for(var f=0,g=0,h=initX,k,l,m=0,d=0;d<b.length;d++)l=b[d],d!=b.length-1&&(m=b[d+1]),g+=l.width,lP=initX,k=initY+30*f,l.group.attr({transform:"translate("+lP+","+k+")"}),initX+=l.width+10,g>c-(l.width+m.width/2.2)&&(f+=1,initX=h,g=0)};c._movePort=function(b,c,e,f){var d=c,h=b.box.x*this.scale,k=b.box.y*this.scale;
c>f?(d=c-b.width,c=c>h&&h>f?"M"+h+","+e+"L"+h+","+k:"M"+(c+f)/2+","+e+"l0,"+(k>e?28:-3)+"H"+h+"L"+h+","+k):c=c<h&&h<f?"m"+h+","+e+"L"+h+","+k:"m"+(f+c)/2+","+e+"l0,"+(k>e?28:-3)+"H"+h+"L"+h+","+k;b.group.attr({transform:"translate("+d+","+e+")"});b.path.attr({d:c})}})(Entry.HWMonitor.prototype);Entry.HW=function(){this.sessionRoomId=localStorage.getItem("entryhwRoomId");this.sessionRoomId||(this.sessionRoomId=this.createRandomRoomId(),localStorage.setItem("entryhwRoomId",this.sessionRoomId));this.connectTrial=0;this.isFirstConnect=!0;this.requireVerion="v1.6.1";this.downloadPath="http://download.play-entry.org/apps/Entry_HW_1.6.6_Setup.exe";this.downloadPathOsx="http://download.play-entry.org/apps/Entry_HW-1.6.6.dmg";this.hwPopupCreate();this.initSocket();this.connected=!1;this.portData=
{};this.sendQueue={};this.outputQueue={};this.settingQueue={};this.socketType=this.hwModule=this.selectedDevice=null;Entry.addEventListener("stop",this.setZero);this.hwInfo={"1.1":Entry.Arduino,"1.9":Entry.ArduinoExt,"1.2":Entry.SensorBoard,"1.3":Entry.CODEino,"1.4":Entry.joystick,"1.5":Entry.dplay,"1.6":Entry.nemoino,"1.7":Entry.Xbot,"1.8":Entry.ardublock,"1.A":Entry.Cobl,"2.4":Entry.Hamster,"2.5":Entry.Albert,"3.1":Entry.Bitbrick,"4.2":Entry.Arduino,"5.1":Entry.Neobot,"7.1":Entry.Robotis_carCont,
"7.2":Entry.Robotis_openCM70,"8.1":Entry.Arduino,"10.1":Entry.Roborobo_Roduino,"10.2":Entry.Roborobo_SchoolKit,"12.1":Entry.EV3,"B.1":Entry.Codestar,"A.1":Entry.SmartBoard,"C.1":Entry.DaduBlock,"D.1":Entry.robotori,"F.1":Entry.byrobot_dronefighter_controller,"F.2":Entry.byrobot_dronefighter_drive,"F.3":Entry.byrobot_dronefighter_flight}};Entry.HW.TRIAL_LIMIT=2;p=Entry.HW.prototype;
p.createRandomRoomId=function(){return"xxxxxxxxyx".replace(/[xy]/g,function(c){var b=16*Math.random()|0;return("x"==c?b:b&3|8).toString(16)})};
p.connectWebSocket=function(c,b){var d=this,e=io(c,b);e.io.reconnectionAttempts(Entry.HW.TRIAL_LIMIT);e.io.reconnectionDelayMax(1E3);e.io.timeout(1E3);e.on("connect",function(){d.socketType="WebSocket";d.initHardware(e)});e.on("mode",function(b){0===e.mode&&1===b&&d.disconnectHardware();d.socketMode=b;e.mode=b});e.on("message",function(b){if(b.data&&"string"===typeof b.data)switch(b.data){case "disconnectHardware":d.disconnectHardware();break;default:var c=JSON.parse(b.data);d.checkDevice(c,b.version);
d.updatePortData(c)}});e.on("disconnect",function(){d.initSocket()});return e};
p.initSocket=function(){try{this.connected=!1;this.tlsSocketIo&&this.tlsSocketIo.removeAllListeners();this.socketIo&&this.socketIo.removeAllListeners();this.isOpenHardware||this.checkOldClient();if(-1<location.protocol.indexOf("https"))this.tlsSocketIo=this.connectWebSocket("https://hardware.play-entry.org:23518",{query:{client:!0,roomId:this.sessionRoomId}});else{try{this.socketIo=this.connectWebSocket("http://127.0.0.1:23518",{query:{client:!0,roomId:this.sessionRoomId}})}catch(c){}try{this.tlsSocketIo=
this.connectWebSocket("https://hardware.play-entry.org:23518",{query:{client:!0,roomId:this.sessionRoomId}})}catch(c){}}Entry.dispatchEvent("hwChanged")}catch(c){}};p.checkOldClient=function(){try{var c=this,b=new WebSocket("wss://hardware.play-entry.org:23518");b.onopen=function(){c.popupHelper.show("newVersion",!0);b.close()}}catch(d){}};p.retryConnect=function(){this.isOpenHardware=!1;Entry.HW.TRIAL_LIMIT=5;this.initSocket()};
p.openHardwareProgram=function(){var c=this;this.isOpenHardware=!0;Entry.HW.TRIAL_LIMIT=5;this.executeHardware();this.socket&&this.socket.connected||setTimeout(function(){c.initSocket()},1E3)};p.initHardware=function(c){this.socket=c;this.connectTrial=0;this.connected=!0;Entry.dispatchEvent("hwChanged");Entry.playground&&Entry.playground.object&&Entry.playground.setMenu(Entry.playground.object.objectType)};
p.disconnectHardware=function(){Entry.propertyPanel.removeMode("hw");this.hwModule=this.selectedDevice=void 0;Entry.dispatchEvent("hwChanged")};
p.disconnectedSocket=function(){this.tlsSocketIo.close();this.socketIo&&this.socketIo.close();Entry.propertyPanel.removeMode("hw");this.socket=void 0;this.connectTrial=0;this.connected=!1;this.hwModule=this.selectedDevice=void 0;Entry.dispatchEvent("hwChanged");Entry.toast.alert("\ud558\ub4dc\uc6e8\uc5b4 \ud504\ub85c\uadf8\ub7a8 \uc5f0\uacb0 \uc885\ub8cc","\ud558\ub4dc\uc6e8\uc5b4 \ud504\ub85c\uadf8\ub7a8\uacfc\uc758 \uc5f0\uacb0\uc774 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.",!1)};
p.setDigitalPortValue=function(c,b){this.sendQueue[c]=b;this.removePortReadable(c)};p.getAnalogPortValue=function(c){return this.connected?this.portData["a"+c]:0};p.getDigitalPortValue=function(c){if(!this.connected)return 0;this.setPortReadable(c);return void 0!==this.portData[c]?this.portData[c]:0};p.setPortReadable=function(c){this.sendQueue.readablePorts||(this.sendQueue.readablePorts=[]);var b=!1,d;for(d in this.sendQueue.readablePorts)if(this.sendQueue.readablePorts[d]==c){b=!0;break}b||this.sendQueue.readablePorts.push(c)};
p.removePortReadable=function(c){if(this.sendQueue.readablePorts||Array.isArray(this.sendQueue.readablePorts)){var b,d;for(d in this.sendQueue.readablePorts)if(this.sendQueue.readablePorts[d]==c){b=Number(d);break}this.sendQueue.readablePorts=void 0!=b?this.sendQueue.readablePorts.slice(0,b).concat(this.sendQueue.readablePorts.slice(b+1,this.sendQueue.readablePorts.length)):[]}};
p.update=function(){this.socket&&(this.socket.disconnected||this.socket.emit("message",{data:JSON.stringify(this.sendQueue),mode:this.socket.mode,type:"utf8"}))};p.updatePortData=function(c){this.portData=c;this.hwMonitor&&"hw"==Entry.propertyPanel.selected&&this.hwMonitor.update()};p.closeConnection=function(){this.socket&&this.socket.close()};p.downloadConnector=function(){window.open("MacIntel"===navigator.platform?this.downloadPathOsx:this.downloadPath,"_blank").focus()};
p.downloadGuide=function(){window.open("http://download.play-entry.org/data/hardware_manual.zip","download")};p.downloadSource=function(){window.open("http://play-entry.com/down/board.ino","_blank").focus()};p.setZero=function(){Entry.hw.hwModule&&Entry.hw.hwModule.setZero()};
p.checkDevice=function(c,b){void 0!==c.company&&(c=[Entry.Utils.convertIntToHex(c.company),".",Entry.Utils.convertIntToHex(c.model)].join(""),c!=this.selectedDevice&&(Entry.Utils.isNewVersion(b,this.requireVerion)&&this.popupHelper.show("newVersion",!0),this.selectedDevice=c,this.hwModule=this.hwInfo[c],Entry.dispatchEvent("hwChanged"),this.hwModule.monitorTemplate?(b=Lang.Msgs.hw_connection_success_desc,this.hwMonitor?(this.hwMonitor._hwModule=this.hwModule,this.hwMonitor.initView()):this.hwMonitor=
new Entry.HWMonitor(this.hwModule),Entry.propertyPanel.addMode("hw",this.hwMonitor),c=this.hwModule.monitorTemplate,"both"==c.mode?(c.mode="list",this.hwMonitor.generateListView(),c.mode="general",this.hwMonitor.generateView(),c.mode="both"):"list"==c.mode?this.hwMonitor.generateListView():this.hwMonitor.generateView()):b=Lang.Msgs.hw_connection_success_desc2,Entry.toast.success(Lang.Msgs.hw_connection_success,b)))};
p.banHW=function(){var c=this.hwInfo,b;for(b in c)Entry.playground.mainWorkspace.blockMenu.banClass(c[b].name,!0)};
p.executeHardware=function(){function c(b){navigator.msLaunchUri(b,function(){},function(){e.popupHelper.show("hwDownload",!0)})}function b(b){var c=document.createElement("iframe");c.src="about:blank";c.style="display:none";document.getElementsByTagName("body")[0].appendChild(c);var d=null,d=setTimeout(function(){var f=!1;try{c.contentWindow.location.href=b,f=!0}catch(q){"NS_ERROR_UNKNOWN_PROTOCOL"==q.name&&(f=!1)}f||e.popupHelper.show("hwDownload",!0);document.getElementsByTagName("body")[0].removeChild(c);
clearTimeout(d)},500)}function d(b){var c=!1;window.focus();$(window).one("blur",function(){c=!0});Entry.dispatchEvent("workspaceUnbindUnload",!0);location.assign(encodeURI(b));setTimeout(function(){Entry.dispatchEvent("workspaceBindUnload",!0)},100);setTimeout(function(){0==c&&e.popupHelper.show("hwDownload",!0);window.onblur=null},3E3)}var e=this,f={_bNotInstalled:!1,init:function(b,c){this._w=window.open("/views/hwLoading.html","entry_hw_launcher","width=220, height=225,  top="+window.screenTop+
", left="+window.screenLeft);var d=null,d=setTimeout(function(){f.runViewer(b,c);clearInterval(d)},1E3)},runViewer:function(b,c){this._w.document.write("<iframe src='"+b+"' onload='opener.Entry.hw.ieLauncher.set()' style='display:none;width:0;height:0'></iframe>");var d=0,e=null,e=setInterval(function(){try{this._w.location.href}catch(t){this._bNotInstalled=!0}if(10<d){clearInterval(e);var b=0,f=null,f=setInterval(function(){b++;this._w.closed||2<b?clearInterval(f):this._w.close();this._bNotInstalled=
!1;d=0}.bind(this),5E3);c(!this._bNotInstalled)}d++}.bind(this),100)},set:function(){this._bNotInstalled=!0}};e.ieLauncher=f;var g="entryhw://-roomId:"+this.sessionRoomId;0<navigator.userAgent.indexOf("MSIE")||0<navigator.userAgent.indexOf("Trident")?void 0!=navigator.msLaunchUri?c(g):9>(0<document.documentMode?document.documentMode:navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1])?alert(Lang.msgs.not_support_browser):f.init(g,function(b){0==b&&e.popupHelper.show("hwDownload",!0)}):0<navigator.userAgent.indexOf("Firefox")?
b(g):0<navigator.userAgent.indexOf("Chrome")||0<navigator.userAgent.indexOf("Safari")?d(g):alert(Lang.msgs.not_support_browser)};
p.hwPopupCreate=function(){var c=this;this.popupHelper||(this.popupHelper=window.popupHelper?window.popupHelper:new Entry.popupHelper(!0));this.popupHelper.addPopup("newVersion",{type:"confirm",title:Lang.Msgs.new_version_title,setPopupLayout:function(b){var d=Entry.Dom("div",{class:"contentArea"}),e=Entry.Dom("div",{class:"textArea",parent:d}),f=Entry.Dom("div",{class:"text1",parent:e}),g=Entry.Dom("div",{class:"text2",parent:e}),h=Entry.Dom("div",{class:"text3",parent:e}),e=Entry.Dom("div",{class:"text4",
parent:e}),k=Entry.Dom("div",{classes:["popupCancelBtn","popupDefaultBtn"],parent:d}),l=Entry.Dom("div",{classes:["popupOkBtn","popupDefaultBtn"],parent:d});f.text(Lang.Msgs.new_version_text1);g.html(Lang.Msgs.new_version_text2);h.text(Lang.Msgs.new_version_text3);e.text(Lang.Msgs.new_version_text4);k.text(Lang.Buttons.cancel);l.html(Lang.Msgs.new_version_download);d.bindOnClick(".popupDefaultBtn",function(b){$(this).hasClass("popupOkBtn")&&c.downloadConnector();c.popupHelper.hide("newVersion")});
b.append(d)}});this.popupHelper.addPopup("hwDownload",{type:"confirm",title:Lang.Msgs.not_install_title,setPopupLayout:function(b){var d=Entry.Dom("div",{class:"contentArea"}),e=Entry.Dom("div",{class:"textArea",parent:d}),f=Entry.Dom("div",{class:"text1",parent:e}),g=Entry.Dom("div",{class:"text2",parent:e}),h=Entry.Dom("div",{class:"text3",parent:e}),e=Entry.Dom("div",{class:"text4",parent:e}),k=Entry.Dom("div",{classes:["popupCancelBtn","popupDefaultBtn"],parent:d}),l=Entry.Dom("div",{classes:["popupOkBtn",
"popupDefaultBtn"],parent:d});f.text(Lang.Msgs.hw_download_text1);g.html(Lang.Msgs.hw_download_text2);h.text(Lang.Msgs.hw_download_text3);e.text(Lang.Msgs.hw_download_text4);k.text(Lang.Buttons.cancel);l.html(Lang.Msgs.hw_download_btn);d.bindOnClick(".popupDefaultBtn",function(b){$(this).hasClass("popupOkBtn")&&c.downloadConnector();c.popupHelper.hide("hwDownload")});b.append(d)}})};Entry.PropertyPanel=function(){this.modes={};this.selected=null};
(function(c){c.generateView=function(b,c){this._view=Entry.Dom("div",{class:"propertyPanel",parent:$(b)});this._tabView=Entry.Dom("div",{class:"propertyTab",parent:this._view});this._contentView=Entry.Dom("div",{class:"propertyContent",parent:this._view});this._cover=Entry.Dom("div",{classes:["propertyPanelCover","entryRemove"],parent:this._view});b=Entry.Dom("div",{class:"entryObjectSelectedImgWorkspace",parent:this._view});this.initializeSplitter(b)};c.addMode=function(b,c){this.modes[b]&&this.removeMode(b);
var d=c.getView(),d=Entry.Dom(d,{parent:this._contentView}),f=Entry.Dom("<div>"+Lang.Menus[b]+"</div>",{classes:["propertyTabElement","propertyTab"+b],parent:this._tabView}),g=this;f.bind("click",function(){g.select(b)});"console"==b&&c.codeMirror.refresh();this.modes[b]&&(this.modes[b].tabDom.remove(),this.modes[b].contentDom.remove(),"hw"==b&&($(this.modes).removeClass(".propertyTabhw"),$(".propertyTabhw").unbind("dblclick")));this.modes[b]={obj:c,tabDom:f,contentDom:d};"hw"==b&&$(".propertyTabhw").bind("dblclick",
function(){Entry.dispatchEvent("hwModeChange")})};c.removeMode=function(b){this.modes[b]&&(this.modes[b].tabDom.remove(),this.modes[b].contentDom.remove(),"hw"==b&&($(this.modes).removeClass(".propertyTabhw"),$(".propertyTabhw").unbind("dblclick")));(b=Object.keys(this.modes))&&0<b.length&&this.select(b[0])};c.resize=function(b){var c=this.selected;c&&(this._view.css({width:b+"px",top:9*b/16+123-22+"px"}),430<=b?this._view.removeClass("collapsed"):this._view.addClass("collapsed"),Entry.dispatchEvent("windowResized"),
b=this.modes[c].obj,"hw"==c?this.modes.hw.obj.listPorts?b.resizeList():b.resize&&b.resize():b.resize&&b.resize())};c.select=function(b){for(var c in this.modes){var e=this.modes[c];e.tabDom.removeClass("selected");e.contentDom.addClass("entryRemove");$(e.contentDom).detach();e.obj.visible=!1}c=this.modes[b];$(this._contentView).append(c.contentDom);c.tabDom.addClass("selected");c.contentDom.removeClass("entryRemove");c.obj.resize&&c.obj.resize();c.obj.visible=!0;this.selected=b};c.initializeSplitter=
function(b){var c=this;b.bind("mousedown touchstart",function(b){c._cover.removeClass("entryRemove");c._cover._isVisible=!0;Entry.container.disableSort();Entry.container.splitterEnable=!0;Entry.documentMousemove&&(Entry.container.resizeEvent=Entry.documentMousemove.attach(this,function(b){Entry.container.splitterEnable&&Entry.resizeElement({canvasWidth:b.clientX||b.x})}))});$(document).bind("mouseup touchend",function(b){if(b=Entry.container.resizeEvent)Entry.container.splitterEnable=!1,Entry.documentMousemove.detach(b),
delete Entry.container.resizeEvent;c._cover._isVisible&&(c._cover._isVisible=!1,c._cover.addClass("entryRemove"));Entry.container.enableSort()})}})(Entry.PropertyPanel.prototype);Entry.init=function(c,b){Entry.assert("object"===typeof b,"Init option is not object");this.events_={};this.interfaceState={menuWidth:264};Entry.Utils.bindGlobalEvent("resize mousedown mousemove keydown keyup dispose".split(" "));this.options=b;this.parseOptions(b);this.mediaFilePath=(b.libDir?b.libDir:"/lib")+"/entryjs/images/";this.defaultPath=b.defaultDir||"";this.blockInjectPath=b.blockInjectDir||"";"workspace"==this.type&&this.isPhone()&&(this.type="phone");this.initialize_();this.view_=c;$(this.view_).addClass("entry");
"minimize"===this.type&&$(this.view_).addClass(this.type);"tablet"===this.device&&$(this.view_).addClass("tablet");Entry.initFonts(b.fonts);this.createDom(c,this.type);this.loadInterfaceState();this.overridePrototype();this.maxCloneLimit=360;this.cloudSavable=!0;this.startTime=(new Date).getTime();document.onkeydown=function(b){Entry.dispatchEvent("keyPressed",b)};document.onkeyup=function(b){Entry.dispatchEvent("keyUpped",b)};window.onresize=function(b){Entry.dispatchEvent("windowResized",b)};window.onbeforeunload=
this.beforeUnload;Entry.addEventListener("saveWorkspace",function(b){Entry.addActivity("save")});Entry.addEventListener("showBlockHelper",function(b){Entry.propertyPanel.select("helper")});"IE"!=Entry.getBrowserType().substr(0,2)||window.flashaudio?createjs.Sound.registerPlugins([createjs.WebAudioPlugin]):(createjs.FlashAudioPlugin.swfPath=this.mediaFilePath+"media/",createjs.Sound.registerPlugins([createjs.FlashAudioPlugin]),window.flashaudio=!0);Entry.soundQueue=new createjs.LoadQueue;Entry.soundQueue.installPlugin(createjs.Sound);
Entry.loadAudio_([Entry.mediaFilePath+"sounds/click.mp3",Entry.mediaFilePath+"sounds/click.wav",Entry.mediaFilePath+"sounds/click.ogg"],"entryMagneting");Entry.loadAudio_([Entry.mediaFilePath+"sounds/delete.mp3",Entry.mediaFilePath+"sounds/delete.ogg",Entry.mediaFilePath+"sounds/delete.wav"],"entryDelete");createjs.Sound.stop()};Entry.changeContainer=function(c){c.appendChild(this.view_)};
Entry.loadAudio_=function(c,b){if(window.Audio&&c.length)for(;0<c.length;){c=c[0];c.match(/\/([^.]+)./);Entry.soundQueue.loadFile({id:b,src:c,type:createjs.LoadQueue.SOUND});break}};
Entry.initialize_=function(){this.stage=new Entry.Stage;Entry.engine&&Entry.engine.projectTimer&&Entry.engine.clearTimer();this.engine=new Entry.Engine;this.propertyPanel=new Entry.PropertyPanel;this.container=new Entry.Container;this.helper=new Entry.Helper;this.youtube=new Entry.Youtube;this.variableContainer=new Entry.VariableContainer;this.commander=new Entry.Commander(this.type);this.scene=new Entry.Scene;this.playground=new Entry.Playground;this.toast=new Entry.Toast;this.hw&&this.hw.closeConnection();
this.hw=new Entry.HW;if(Entry.enableActivityLogging)this.reporter=new Entry.Reporter(!1);else if("workspace"==this.type||"phone"==this.type)this.reporter=new Entry.Reporter(!0)};
Entry.createDom=function(c,b){if(b&&"workspace"!=b)"minimize"==b?(d=Entry.createElement("canvas"),d.className="entryCanvasWorkspace minimize",d.id="entryCanvas",d.width=640,d.height=360,e=Entry.createElement("div","entryCanvasWrapper"),e.appendChild(d),c.appendChild(e),this.canvas_=d,this.stage.initStage(this.canvas_),e=Entry.createElement("div"),c.appendChild(e),this.engineView=e,this.engine.generateView(this.engineView,b)):"phone"==b&&(this.stateManagerView=d=Entry.createElement("div"),this.stateManager.generateView(this.stateManagerView,
b),e=Entry.createElement("div"),c.appendChild(e),this.engineView=e,this.engine.generateView(this.engineView,b),d=Entry.createElement("canvas"),d.addClass("entryCanvasPhone"),d.id="entryCanvas",d.width=640,d.height=360,e.insertBefore(d,this.engine.footerView_),this.canvas_=d,this.stage.initStage(this.canvas_),d=Entry.createElement("div"),c.appendChild(d),this.containerView=d,this.container.generateView(this.containerView,b),d=Entry.createElement("div"),c.appendChild(d),this.playgroundView=d,this.playground.generateView(this.playgroundView,
b));else{Entry.documentMousedown.attach(this,this.cancelObjectEdit);var d=Entry.createElement("div");c.appendChild(d);this.sceneView=d;this.scene.generateView(this.sceneView,b);d=Entry.createElement("div");this.sceneView.appendChild(d);this.stateManagerView=d;this.stateManager.generateView(this.stateManagerView,b);var e=Entry.createElement("div");c.appendChild(e);this.engineView=e;this.engine.generateView(this.engineView,b);d=Entry.createElement("canvas");d.addClass("entryCanvasWorkspace");d.id="entryCanvas";
d.width=640;d.height=360;e.insertBefore(d,this.engine.addButton);d.addEventListener("mousewheel",function(b){var c=Entry.variableContainer.getListById(Entry.stage.mouseCoordinate);b=0<b.wheelDelta?!0:!1;for(var d=0;d<c.length;d++){var e=c[d];e.scrollButton_.y=b?46<=e.scrollButton_.y?e.scrollButton_.y-23:23:e.scrollButton_.y+23;e.updateView()}});this.canvas_=d;this.stage.initStage(this.canvas_);d=Entry.createElement("div");this.propertyPanel.generateView(c,b);this.containerView=d;this.container.generateView(this.containerView,
b);this.propertyPanel.addMode("object",this.container);this.helper.generateView(this.containerView,b);this.propertyPanel.addMode("helper",this.helper);d=Entry.createElement("div");c.appendChild(d);this.playgroundView=d;this.playground.generateView(this.playgroundView,b);this.propertyPanel.select("object");this.helper.bindWorkspace(this.playground.mainWorkspace)}};
Entry.start=function(c){"invisible"!==Entry.type&&(this.FPS||(this.FPS=60),Entry.assert("number"==typeof this.FPS,"FPS must be number"),Entry.engine.start(this.FPS))};Entry.stop=function(){"invisible"!==Entry.type&&(this.FPS=null,Entry.engine.stop())};
Entry.parseOptions=function(c){this.type=c.type||this.type;this.hashId=c.hashId||this.hasId;c.device&&(this.device=c.device);this.projectSaveable=c.projectsaveable;void 0===this.projectSaveable&&(this.projectSaveable=!0);this.objectAddable=c.objectaddable;void 0===this.objectAddable&&(this.objectAddable=!0);this.objectEditable=c.objectEditable;void 0===this.objectEditable&&(this.objectEditable=!0);this.objectEditable||(this.objectAddable=!1);this.objectDeletable=c.objectdeletable;void 0===this.objectDeletable&&
(this.objectDeletable=!0);this.soundEditable=c.soundeditable;void 0===this.soundEditable&&(this.soundEditable=!0);this.pictureEditable=c.pictureeditable;void 0===this.pictureEditable&&(this.pictureEditable=!0);this.sceneEditable=c.sceneEditable;void 0===this.sceneEditable&&(this.sceneEditable=!0);this.functionEnable=c.functionEnable;void 0===this.functionEnable&&(this.functionEnable=!0);this.messageEnable=c.messageEnable;void 0===this.messageEnable&&(this.messageEnable=!0);this.variableEnable=c.variableEnable;
void 0===this.variableEnable&&(this.variableEnable=!0);this.listEnable=c.listEnable;void 0===this.listEnable&&(this.listEnable=!0);this.hasVariableManager=c.hasvariablemanager;this.variableEnable||this.messageEnable||this.listEnable||this.functionEnable?void 0===this.hasVariableManager&&(this.hasVariableManager=!0):this.hasVariableManager=!1;if(this.readOnly=c.readOnly||!1)this.soundEditable=a.sceneEditable=this.objectAddable=!1;c.isForLecture&&(this.isForLecture=c.isForLecture);c.textCodingEnable&&
(this.textCodingEnable=c.textCodingEnable)};Entry.initFonts=function(c){this.fonts=c;c||(this.fonts=[])};Entry.reloadOption=function(c){this.options=c;this.parseOptions(c);this.playground.applyTabOption()};Entry.Activity=function(c,b){this.name=c;this.timestamp=new Date;c=[];if(void 0!==b)for(var d=0,e=b.length;d<e;d++){var f=b[d];c.push({key:f[0],value:f[1]})}this.data=c};Entry.ActivityReporter=function(){this._activities=[]};(function(c){c.add=function(b){if(b&&0!==b.length){if(!(b instanceof Entry.Activity)){var c=b.shift();b=new Entry.Activity(c,b)}this._activities.push(b)}};c.clear=function(){this._activities=[]};c.get=function(){return this._activities};c.report=function(){}})(Entry.ActivityReporter.prototype);Entry.Recorder=function(){this._recordData=[];Entry.commander.addReporter(this)};(function(c){c.add=function(b){var c=b[0];if(c)switch(Entry.Command[c].recordable){case Entry.STATIC.RECORDABLE.SUPPORT:this._recordData.push(b);Entry.toast.warning("Record",Lang.Command[c+""]);break;case Entry.STATIC.RECORDABLE.ABANDON:Entry.toast.alert("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc74c")}};c.getData=function(){return this._recordData}})(Entry.Recorder.prototype);Entry.State=function(c,b,d,e){this.caller=b;this.func=d;3<arguments.length&&(this.params=Array.prototype.slice.call(arguments).slice(3));this.message=c;this.time=Entry.getUpTime();this.isPass=Entry.Command[c]?Entry.Command[c].isPass:!1;this.id=Entry.generateHash()};Entry.State.prototype.generateMessage=function(){};Entry.StateManager=function(){this.undoStack_=[];this.redoStack_=[];this.isIgnore=this._isRedoing=this.isRestore=!1;Entry.addEventListener("cancelLastCommand",function(c){Entry.stateManager.cancelLastCommand()});Entry.addEventListener("saveWorkspace",function(c){Entry.stateManager.addStamp()});Entry.addEventListener("undo",function(c){Entry.stateManager.undo()});Entry.addEventListener("redo",function(c){Entry.stateManager.redo()})};Entry.StateManager.prototype.generateView=function(c,b){};
Entry.StateManager.prototype.addCommand=function(c,b,d,e){if(!this.isIgnoring()){var f=new Entry.State;Entry.State.prototype.constructor.apply(f,Array.prototype.slice.call(arguments));this.isRestoring()?this.redoStack_.push(f):(this.undoStack_.push(f),this._isRedoing||(this.redoStack_=[]));Entry.reporter&&Entry.reporter.report(f);Entry.creationChangedEvent&&Entry.creationChangedEvent.notify();return f}};
Entry.StateManager.prototype.cancelLastCommand=function(){this.canUndo()&&(this.undoStack_.pop(),Entry.creationChangedEvent&&Entry.creationChangedEvent.notify())};Entry.StateManager.prototype.getLastCommand=function(){return this.undoStack_[this.undoStack_.length-1]};Entry.StateManager.prototype.getLastCommandById=function(c){for(var b=this.undoStack_,d=b.length-1;0<=d;d--){var e=b[d];if(e.id===c)return e}};
Entry.StateManager.prototype.getLastRedoCommand=function(){return this.redoStack_[this.redoStack_.length-1]};Entry.StateManager.prototype.removeAllPictureCommand=function(){this.undoStack_=this.undoStack_.filter(function(c){return!(400<=c.message&&500>c.message)});this.redoStack_=this.redoStack_.filter(function(c){return!(400<=c.message&&500>c.message)})};
Entry.StateManager.prototype.undo=function(c){if(this.canUndo()&&!this.isRestoring()){this.addActivity("undo");this.startRestore();for(var b=!0;this.undoStack_.length;){var d=this.undoStack_.pop();d.func.apply(d.caller,d.params);var e=this.getLastRedoCommand();b?(e.isPass=!1,b=!b):e.isPass=!0;c&&c--;if(!c&&!0!==d.isPass)break}this.endRestore();Entry.creationChangedEvent&&Entry.creationChangedEvent.notify()}};
Entry.StateManager.prototype.redo=function(){if(this.canRedo()&&!this.isRestoring()){this._isRedoing=!0;this.addActivity("undo");this.addActivity("redo");for(var c=!0;this.redoStack_.length;){var b=this.redoStack_.pop(),d=b.func.apply(b.caller,b.params);c?(d.isPass(!1),c=!c):d.isPass(!0);if(!0!==b.isPass)break}this._isRedoing=!1;Entry.creationChangedEvent&&Entry.creationChangedEvent.notify()}};Entry.StateManager.prototype.updateView=function(){};
Entry.StateManager.prototype.startRestore=function(){this.isRestore=!0};Entry.StateManager.prototype.endRestore=function(){this.isRestore=!1};Entry.StateManager.prototype.isRestoring=function(){return this.isRestore};Entry.StateManager.prototype.startIgnore=function(){this.isIgnore=!0};Entry.StateManager.prototype.endIgnore=function(){this.isIgnore=!1};Entry.StateManager.prototype.isIgnoring=function(){return this.isIgnore};
Entry.StateManager.prototype.canUndo=function(){return 0<this.undoStack_.length&&Entry.engine.isState("stop")};Entry.StateManager.prototype.canRedo=function(){return 0<this.redoStack_.length&&Entry.engine.isState("stop")};Entry.StateManager.prototype.addStamp=function(){this.stamp=Entry.generateHash();this.undoStack_.length&&(this.undoStack_[this.undoStack_.length-1].stamp=this.stamp)};
Entry.StateManager.prototype.isSaved=function(){return 0===this.undoStack_.length||this.undoStack_[this.undoStack_.length-1].stamp==this.stamp&&"string"==typeof this.stamp};Entry.StateManager.prototype.addActivity=function(c){Entry.reporter&&Entry.reporter.report(new Entry.State(c))};Entry.StateManager.prototype.getUndoStack=function(){return this.undoStack_.slice(0)};Entry.StateManager.prototype.changeLastCommandType=function(c){var b=this.getLastCommand();b&&(b.message=c);return b};Entry.BlockModel=function(){Entry.Model(this)};Entry.BlockModel.prototype.schema={id:null,x:0,y:0,type:null,params:{},statements:{},prev:null,next:null,view:null};Entry.BlockRenderModel=function(){Entry.Model(this)};Entry.BlockRenderModel.prototype.schema={id:0,type:Entry.STATIC.BLOCK_RENDER_MODEL,x:0,y:0,width:0,height:0,magneting:!1};Entry.BoxModel=function(){Entry.Model(this)};Entry.BoxModel.prototype.schema={id:0,type:Entry.STATIC.BOX_MODEL,x:0,y:0,width:0,height:0};Entry.DragInstance=function(c){Entry.Model(this);this.set(c)};Entry.DragInstance.prototype.schema={type:Entry.STATIC.DRAG_INSTANCE,startX:0,startY:0,offsetX:0,offsetY:0,absX:0,absY:0,prev:null,height:0,mode:0,isNew:!1};Entry.ThreadModel=function(){Entry.Model(this)};Entry.ThreadModel.prototype.schema={id:0,type:Entry.STATIC.THREAD_MODEL,x:0,y:0,width:0,minWidth:0,height:0};Entry.EntryObject=function(c){var b=this;if(c){this.id=c.id;this.name=c.name||c.sprite.name;this.text=c.text||this.name;this.objectType=c.objectType;this.objectType||(this.objectType="sprite");this.script=new Entry.Code(c.script?c.script:[],this);this.pictures=c.sprite.pictures;this.sounds=[];this.sounds=c.sprite.sounds;for(var d=0;d<this.sounds.length;d++)this.sounds[d].id||(this.sounds[d].id=Entry.generateHash()),Entry.initSound(this.sounds[d]);this.lock=c.lock?c.lock:!1;this.isEditing=!1;"sprite"==
this.objectType&&(this.selectedPicture=c.selectedPictureId?this.getPicture(c.selectedPictureId):this.pictures[0]);this.scene=Entry.scene.getSceneById(c.scene)||Entry.scene.selectedScene;this.setRotateMethod(c.rotateMethod);this.entity=new Entry.EntityObject(this);this.entity.injectModel(this.selectedPicture?this.selectedPicture:null,c.entity?c.entity:this.initEntity(c));this.clonedEntities=[];Entry.stage.loadObject(this);for(d in this.pictures)(function(c){c.objectId=this.id;c.id||(c.id=Entry.generateHash());
var d=new Image;if(c.fileurl)d.src=c.fileurl;else if(c.fileurl)d.src=c.fileurl;else{var e=c.filename;d.src=Entry.defaultPath+"/uploads/"+e.substring(0,2)+"/"+e.substring(2,4)+"/image/"+e+".png"}Entry.Loader.addQueue();d.onload=function(d){Entry.container.cachePicture(c.id+b.entity.id,this);Entry.requestUpdate=!0;Entry.Loader.removeQueue()};d.onerror=function(b){Entry.Loader.removeQueue()}})(this.pictures[d])}this._isContextMenuEnabled=!0};
(function(c){c.generateView=function(){if("workspace"==Entry.type){var b=Entry.createElement("li",this.id);document.createDocumentFragment("div").appendChild(b);b.addClass("entryContainerListElementWorkspace");b.object=this;Entry.Utils.disableContextmenu(b);var c=this;longPressTimer=null;$(b).bind("mousedown touchstart",function(b){function d(b){b.stopPropagation();k&&5<Math.sqrt(Math.pow(b.pageX-k.x,2)+Math.pow(b.pageY-k.y,2))&&longPressTimer&&(clearTimeout(longPressTimer),longPressTimer=null)}function e(b){b.stopPropagation();
f.unbind(".object");longPressTimer&&(clearTimeout(longPressTimer),longPressTimer=null)}Entry.container.getObject(this.id)&&Entry.do("containerSelectObject",this.id);var f=$(document),g=b.type,h=!1;if(Entry.Utils.isRightButton(b))b.stopPropagation(),Entry.documentMousedown.notify(b),h=!0,c._rightClick(b);else{var k={x:b.clientX,y:b.clientY};"touchstart"!==g||h||(b.stopPropagation(),Entry.documentMousedown.notify(b),longPressTimer=setTimeout(function(){longPressTimer&&(longPressTimer=null,c._rightClick(b))},
1E3),f.bind("mousemove.object touchmove.object",d),f.bind("mouseup.object touchend.object",e))}});this.view_=b;var e=this,b=Entry.createElement("ul");b.addClass("objectInfoView");Entry.objectEditable||b.addClass("entryHide");var f=Entry.createElement("li");f.addClass("objectInfo_visible");this.entity.getVisible()||f.addClass("objectInfo_unvisible");f.bindOnClick(function(b){Entry.engine.isState("run")||(b=e.entity,b.setVisible(!b.getVisible())?this.removeClass("objectInfo_unvisible"):this.addClass("objectInfo_unvisible"))});
var g=Entry.createElement("li");g.addClass("objectInfo_unlock");this.getLock()&&g.addClass("objectInfo_lock");g.bindOnClick(function(b){Entry.engine.isState("run")||(b=e,b.setLock(!b.getLock())?this.addClass("objectInfo_lock"):this.removeClass("objectInfo_lock"),b.updateInputViews(b.getLock()))});b.appendChild(f);b.appendChild(g);this.view_.appendChild(b);b=Entry.createElement("div");b.addClass("entryObjectThumbnailWorkspace");this.view_.appendChild(b);this.thumbnailView_=b;b=Entry.createElement("div");
b.addClass("entryObjectWrapperWorkspace");this.view_.appendChild(b);f=Entry.createElement("input");f.bindOnClick(function(b){b.preventDefault();this.readOnly||(this.focus(),this.select())});f.addClass("entryObjectNameWorkspace");b.appendChild(f);this.nameView_=f;this.nameView_.entryObject=this;f.setAttribute("readonly",!0);var h=this;this.nameView_.onblur=function(b){this.entryObject.name=this.value;Entry.playground.reloadPlayground()};this.nameView_.onkeypress=function(b){13==b.keyCode&&h.editObjectValues(!1)};
this.nameView_.value=this.name;f=Entry.createElement("div");f.addClass("entryObjectEditWorkspace");f.object=this;this.editView_=f;this.view_.appendChild(f);$(f).mousedown(function(b){b.stopPropagation();Entry.documentMousedown.notify(b);Entry.do("objectEditButtonClick",c.id)});f.blur=function(b){c.editObjectComplete()};Entry.objectEditable&&Entry.objectDeletable&&(f=Entry.createElement("div"),f.addClass("entryObjectDeleteWorkspace"),f.object=this,this.deleteView_=f,this.view_.appendChild(f),f.bindOnClick(function(b){Entry.engine.isState("run")||
Entry.container.removeObject(this.object)}));f=Entry.createElement("div");f.addClass("entryObjectInformationWorkspace");f.object=this;this.isInformationToggle=!1;b.appendChild(f);this.informationView_=f;b=Entry.createElement("div");b.addClass("entryObjectRotationWrapperWorkspace");b.object=this;this.view_.appendChild(b);f=Entry.createElement("span");f.addClass("entryObjectCoordinateWorkspace");b.appendChild(f);g=Entry.createElement("span");g.addClass("entryObjectCoordinateSpanWorkspace");g.innerHTML=
"X:";var k=Entry.createElement("input");k.addClass("entryObjectCoordinateInputWorkspace");k.setAttribute("readonly",!0);k.bindOnClick(function(b){b.stopPropagation();this.select()});var l=Entry.createElement("span");l.addClass("entryObjectCoordinateSpanWorkspace");l.innerHTML="Y:";var m=Entry.createElement("input");m.addClass("entryObjectCoordinateInputWorkspace entryObjectCoordinateInputWorkspace_right");m.bindOnClick(function(b){b.stopPropagation();this.select()});m.setAttribute("readonly",!0);
var q=Entry.createElement("span");q.addClass("entryObjectCoordinateSizeWorkspace");q.innerHTML=Lang.Workspace.Size+" : ";var n=Entry.createElement("input");n.addClass("entryObjectCoordinateInputWorkspace","entryObjectCoordinateInputWorkspace_size");n.bindOnClick(function(b){b.stopPropagation();this.select()});n.setAttribute("readonly",!0);f.appendChild(g);f.appendChild(k);f.appendChild(l);f.appendChild(m);f.appendChild(q);f.appendChild(n);f.xInput_=k;f.yInput_=m;f.sizeInput_=n;this.coordinateView_=
f;e=this;k.onkeypress=function(b){13==b.keyCode&&e.editObjectValues(!1)};k.onblur=function(b){Entry.Utils.isNumber(k.value)&&e.entity.setX(Number(k.value));e.updateCoordinateView();Entry.stage.updateObject()};m.onkeypress=function(b){13==b.keyCode&&e.editObjectValues(!1)};m.onblur=function(b){Entry.Utils.isNumber(m.value)&&e.entity.setY(Number(m.value));e.updateCoordinateView();Entry.stage.updateObject()};n.onkeypress=function(b){13==b.keyCode&&e.editObjectValues(!1)};n.onblur=function(b){Entry.Utils.isNumber(n.value)&&
e.entity.setSize(Number(n.value));e.updateCoordinateView();Entry.stage.updateObject()};f=Entry.createElement("div");f.addClass("entryObjectRotateLabelWrapperWorkspace");this.view_.appendChild(f);this.rotateLabelWrapperView_=f;g=Entry.createElement("span");g.addClass("entryObjectRotateSpanWorkspace");g.innerHTML=Lang.Workspace.rotation+" : ";var t=Entry.createElement("input");t.addClass("entryObjectRotateInputWorkspace");t.setAttribute("readonly",!0);t.bindOnClick(function(b){b.stopPropagation();this.select()});
this.rotateSpan_=g;this.rotateInput_=t;l=Entry.createElement("span");l.addClass("entryObjectDirectionSpanWorkspace");l.innerHTML=Lang.Workspace.direction+" : ";var v=Entry.createElement("input");v.addClass("entryObjectDirectionInputWorkspace");v.setAttribute("readonly",!0);v.bindOnClick(function(b){b.stopPropagation();this.select()});this.directionInput_=v;f.appendChild(g);f.appendChild(t);f.appendChild(l);f.appendChild(v);f.rotateInput_=t;f.directionInput_=v;e=this;t.onkeypress=function(b){13==b.keyCode&&
e.editObjectValues(!1)};t.onblur=function(b){b=t.value;-1!=b.indexOf("\u02da")&&(b=b.substring(0,b.indexOf("\u02da")));Entry.Utils.isNumber(b)&&e.entity.setRotation(Number(b));e.updateRotationView();Entry.stage.updateObject()};v.onkeypress=function(b){13==b.keyCode&&e.editObjectValues(!1)};v.onblur=function(b){b=v.value;-1!=b.indexOf("\u02da")&&(b=b.substring(0,b.indexOf("\u02da")));Entry.Utils.isNumber(b)&&e.entity.setDirection(Number(b));e.updateRotationView();Entry.stage.updateObject()};f=Entry.createElement("div");
f.addClass("rotationMethodWrapper");b.appendChild(f);this.rotationMethodWrapper_=f;b=Entry.createElement("span");b.addClass("entryObjectRotateMethodLabelWorkspace");f.appendChild(b);b.innerHTML=Lang.Workspace.rotate_method+" : ";b=Entry.createElement("div");b.addClass("entryObjectRotateModeWorkspace entryObjectRotateModeAWorkspace");b.object=this;this.rotateModeAView_=b;f.appendChild(b);b.bindOnClick(function(b){Entry.engine.isState("run")||this.object.getLock()||(this.object.initRotateValue("free"),
this.object.setRotateMethod("free"))});b=Entry.createElement("div");b.addClass("entryObjectRotateModeWorkspace entryObjectRotateModeBWorkspace");b.object=this;this.rotateModeBView_=b;f.appendChild(b);b.bindOnClick(function(b){Entry.engine.isState("run")||this.object.getLock()||(this.object.initRotateValue("vertical"),this.object.setRotateMethod("vertical"))});b=Entry.createElement("div");b.addClass("entryObjectRotateModeWorkspace entryObjectRotateModeCWorkspace");b.object=this;this.rotateModeCView_=
b;f.appendChild(b);b.bindOnClick(function(b){Entry.engine.isState("run")||this.object.getLock()||(this.object.initRotateValue("none"),this.object.setRotateMethod("none"))});this.updateThumbnailView();this.updateCoordinateView();this.updateRotateMethodView();this.updateInputViews();this.updateCoordinateView(!0);this.updateRotationView(!0);return this.view_}if("phone"==Entry.type)return b=Entry.createElement("li",this.id),b.addClass("entryContainerListElementWorkspace"),b.object=this,b.bindOnClick(function(b){Entry.container.getObject(this.id)&&
Entry.container.selectObject(this.id)}),$&&(c=this,context.attach("#"+this.id,[{text:Lang.Workspace.context_rename,href:"/",action:function(b){b.preventDefault()}},{text:Lang.Workspace.context_duplicate,href:"/",action:function(b){b.preventDefault();Entry.container.addCloneObject(c)}},{text:Lang.Workspace.context_remove,href:"/",action:function(b){b.preventDefault();Entry.container.removeObject(c)}}])),this.view_=b,b=Entry.createElement("ul"),b.addClass("objectInfoView"),f=Entry.createElement("li"),
f.addClass("objectInfo_visible"),g=Entry.createElement("li"),g.addClass("objectInfo_lock"),b.appendChild(f),b.appendChild(g),this.view_.appendChild(b),b=Entry.createElement("div"),b.addClass("entryObjectThumbnailWorkspace"),this.view_.appendChild(b),this.thumbnailView_=b,b=Entry.createElement("div"),b.addClass("entryObjectWrapperWorkspace"),this.view_.appendChild(b),f=Entry.createElement("input"),f.addClass("entryObjectNameWorkspace"),b.appendChild(f),this.nameView_=f,this.nameView_.entryObject=this,
this.nameView_.onblur=function(){this.entryObject.name=this.value;Entry.playground.reloadPlayground()},this.nameView_.onkeypress=function(b){13==b.keyCode&&e.editObjectValues(!1)},this.nameView_.value=this.name,Entry.objectEditable&&Entry.objectDeletable&&(f=Entry.createElement("div"),f.addClass("entryObjectDeletePhone"),f.object=this,this.deleteView_=f,this.view_.appendChild(f),f.bindOnClick(function(b){Entry.engine.isState("run")||Entry.container.removeObject(this.object)})),f=Entry.createElement("button"),
f.addClass("entryObjectEditPhone"),f.object=this,f.bindOnClick(function(b){if(b=Entry.container.getObject(this.id))Entry.container.selectObject(b.id),Entry.playground.injectObject(b)}),this.view_.appendChild(f),f=Entry.createElement("div"),f.addClass("entryObjectInformationWorkspace"),f.object=this,this.isInformationToggle=!1,b.appendChild(f),this.informationView_=f,f=Entry.createElement("div"),f.addClass("entryObjectRotateLabelWrapperWorkspace"),this.view_.appendChild(f),this.rotateLabelWrapperView_=
f,g=Entry.createElement("span"),g.addClass("entryObjectRotateSpanWorkspace"),g.innerHTML=Lang.Workspace.rotation+" : ",t=Entry.createElement("input"),t.addClass("entryObjectRotateInputWorkspace"),this.rotateSpan_=g,this.rotateInput_=t,l=Entry.createElement("span"),l.addClass("entryObjectDirectionSpanWorkspace"),l.innerHTML=Lang.Workspace.direction+" : ",v=Entry.createElement("input"),v.addClass("entryObjectDirectionInputWorkspace"),this.directionInput_=v,f.appendChild(g),f.appendChild(t),f.appendChild(l),
f.appendChild(v),f.rotateInput_=t,f.directionInput_=v,e=this,t.onkeypress=function(b){13==b.keyCode&&(b=t.value,-1!=b.indexOf("\u02da")&&(b=b.substring(0,b.indexOf("\u02da"))),Entry.Utils.isNumber(b)&&e.entity.setRotation(Number(b)),e.updateRotationView(),t.blur())},t.onblur=function(b){e.entity.setRotation(e.entity.getRotation());Entry.stage.updateObject()},v.onkeypress=function(b){13==b.keyCode&&(b=v.value,-1!=b.indexOf("\u02da")&&(b=b.substring(0,b.indexOf("\u02da"))),Entry.Utils.isNumber(b)&&
e.entity.setDirection(Number(b)),e.updateRotationView(),v.blur())},v.onblur=function(b){e.entity.setDirection(e.entity.getDirection());Entry.stage.updateObject()},b=Entry.createElement("div"),b.addClass("entryObjectRotationWrapperWorkspace"),b.object=this,this.view_.appendChild(b),f=Entry.createElement("span"),f.addClass("entryObjectCoordinateWorkspace"),b.appendChild(f),g=Entry.createElement("span"),g.addClass("entryObjectCoordinateSpanWorkspace"),g.innerHTML="X:",k=Entry.createElement("input"),
k.addClass("entryObjectCoordinateInputWorkspace"),l=Entry.createElement("span"),l.addClass("entryObjectCoordinateSpanWorkspace"),l.innerHTML="Y:",m=Entry.createElement("input"),m.addClass("entryObjectCoordinateInputWorkspace entryObjectCoordinateInputWorkspace_right"),q=Entry.createElement("span"),q.addClass("entryObjectCoordinateSpanWorkspace"),q.innerHTML=Lang.Workspace.Size,n=Entry.createElement("input"),n.addClass("entryObjectCoordinateInputWorkspace","entryObjectCoordinateInputWorkspace_size"),
f.appendChild(g),f.appendChild(k),f.appendChild(l),f.appendChild(m),f.appendChild(q),f.appendChild(n),f.xInput_=k,f.yInput_=m,f.sizeInput_=n,this.coordinateView_=f,e=this,k.onkeypress=function(b){13==b.keyCode&&(Entry.Utils.isNumber(k.value)&&e.entity.setX(Number(k.value)),e.updateCoordinateView(),e.blur())},k.onblur=function(b){e.entity.setX(e.entity.getX());Entry.stage.updateObject()},m.onkeypress=function(b){13==b.keyCode&&(Entry.Utils.isNumber(m.value)&&e.entity.setY(Number(m.value)),e.updateCoordinateView(),
e.blur())},m.onblur=function(b){e.entity.setY(e.entity.getY());Entry.stage.updateObject()},f=Entry.createElement("div"),f.addClass("rotationMethodWrapper"),b.appendChild(f),this.rotationMethodWrapper_=f,b=Entry.createElement("span"),b.addClass("entryObjectRotateMethodLabelWorkspace"),f.appendChild(b),b.innerHTML=Lang.Workspace.rotate_method+" : ",b=Entry.createElement("div"),b.addClass("entryObjectRotateModeWorkspace"),b.addClass("entryObjectRotateModeAWorkspace"),b.object=this,this.rotateModeAView_=
b,f.appendChild(b),b.bindOnClick(function(b){Entry.engine.isState("run")||this.object.setRotateMethod("free")}),b=Entry.createElement("div"),b.addClass("entryObjectRotateModeWorkspace"),b.addClass("entryObjectRotateModeBWorkspace"),b.object=this,this.rotateModeBView_=b,f.appendChild(b),b.bindOnClick(function(b){Entry.engine.isState("run")||this.object.setRotateMethod("vertical")}),b=Entry.createElement("div"),b.addClass("entryObjectRotateModeWorkspace"),b.addClass("entryObjectRotateModeCWorkspace"),
b.object=this,this.rotateModeCView_=b,f.appendChild(b),b.bindOnClick(function(b){Entry.engine.isState("run")||this.object.setRotateMethod("none")}),this.updateThumbnailView(),this.updateCoordinateView(),this.updateRotateMethodView(),this.updateInputViews(),this.view_};c.setName=function(b){Entry.assert("string"==typeof b,"object name must be string");this.name=b;this.nameView_.value=b};c.setText=function(b){Entry.assert("string"==typeof b,"object text must be string");this.text=b};c.setScript=function(b){this.script=
b};c.getScriptText=function(){return JSON.stringify(this.script.toJSON())};c.initEntity=function(b){var c={};c.x=c.y=0;c.rotation=0;c.direction=90;if("sprite"==this.objectType){var e=b.sprite.pictures[0].dimension;c.regX=e.width/2;c.regY=e.height/2;c.scaleX=c.scaleY="background"==b.sprite.category.main||"new"==b.sprite.category.main?Math.max(270/e.height,480/e.width):"new"==b.sprite.category.main?1:200/(e.width+e.height);c.width=e.width;c.height=e.height}else if("textBox"==this.objectType)if(c.regX=
25,c.regY=12,c.scaleX=c.scaleY=1.5,c.width=50,c.height=24,c.text=b.text,b.options){if(b=b.options,e="",b.bold&&(e+="bold "),b.italic&&(e+="italic "),c.underline=b.underline,c.strike=b.strike,c.font=e+"20px "+b.font.family,c.colour=b.colour,c.bgColor=b.background,c.lineBreak=b.lineBreak)c.width=256,c.height=.5625*c.width,c.regX=c.width/2,c.regY=c.height/2}else c.underline=!1,c.strike=!1,c.font="20px Nanum Gothic",c.colour="#000000",c.bgColor="#ffffff";return c};c.updateThumbnailView=function(){if("sprite"==
this.objectType)if(this.entity.picture.fileurl)this.thumbnailView_.style.backgroundImage='url("'+this.entity.picture.fileurl+'")';else{var b=this.entity.picture.filename;this.thumbnailView_.style.backgroundImage='url("'+Entry.defaultPath+"/uploads/"+b.substring(0,2)+"/"+b.substring(2,4)+"/thumb/"+b+'.png")'}else"textBox"==this.objectType&&(this.thumbnailView_.style.backgroundImage="url("+(Entry.mediaFilePath+"/text_icon.png")+")")};c.updateCoordinateView=function(b){if((this.isSelected()||b)&&this.coordinateView_&&
this.coordinateView_.xInput_&&this.coordinateView_.yInput_){b=this.coordinateView_.xInput_.value;var c=this.coordinateView_.yInput_.value,e=this.coordinateView_.sizeInput_.value,f=this.entity.getX().toFixed(1),g=this.entity.getY().toFixed(1),h=this.entity.getSize().toFixed(1);b!=f&&(this.coordinateView_.xInput_.value=f);c!=g&&(this.coordinateView_.yInput_.value=g);e!=h&&(this.coordinateView_.sizeInput_.value=h)}};c.updateRotationView=function(b){if(this.isSelected()&&this.view_||b)b="","free"==this.getRotateMethod()?
(this.rotateSpan_.removeClass("entryRemove"),this.rotateInput_.removeClass("entryRemove"),b+=this.entity.getRotation().toFixed(1),this.rotateInput_.value=b+"\u02da"):(this.rotateSpan_.addClass("entryRemove"),this.rotateInput_.addClass("entryRemove")),b=""+this.entity.getDirection().toFixed(1),this.directionInput_.value=b+"\u02da"};c.select=function(b){console.log(this)};c.addPicture=function(b,c){b.objectId=this.id;c||0===c?this.pictures.splice(c,0,b):this.pictures.push(b);Entry.playground.injectPicture(this)};
c.removePicture=function(b){if(2>this.pictures.length)return!1;b=this.getPicture(b);var c=this.pictures.indexOf(b);this.pictures.splice(c,1);b===this.selectedPicture&&Entry.playground.selectPicture(this.pictures[0]);Entry.playground.injectPicture(this);Entry.playground.reloadPlayground()};c.getPicture=function(b){if(!b)return this.selectedPicture;b=b.trim();for(var c=this.pictures,e=c.length,f=0;f<e;f++)if(c[f].id==b)return c[f];for(f=0;f<e;f++)if(c[f].name==b)return c[f];b=Entry.parseNumber(b);if((!1!==
b||"boolean"!=typeof b)&&e>=b&&0<b)return c[b-1];throw Error("No picture found");};c.setPicture=function(b){for(var c in this.pictures)if(b.id===this.pictures[c].id){this.pictures[c]=b;return}throw Error("No picture found");};c.getPrevPicture=function(b){for(var c=this.pictures,e=c.length,f=0;f<e;f++)if(c[f].id==b)return c[0==f?e-1:f-1]};c.getNextPicture=function(b){for(var c=this.pictures,e=c.length,f=0;f<e;f++)if(c[f].id==b)return c[f==e-1?0:f+1]};c.selectPicture=function(b){var c=this.getPicture(b);
if(c)this.selectedPicture=c,this.entity.setImage(c),this.updateThumbnailView();else throw Error("No picture with pictureId : "+b);};c.addSound=function(b,c){b.id||(b.id=Entry.generateHash());Entry.initSound(b,c);c||0===c?this.sounds.splice(c,0,b):this.sounds.push(b);Entry.playground.injectSound(this)};c.removeSound=function(b){b=this.getSound(b);b=this.sounds.indexOf(b);this.sounds.splice(b,1);Entry.playground.reloadPlayground();Entry.playground.injectSound(this)};c.getRotateMethod=function(){this.rotateMethod||
(this.rotateMethod="free");return this.rotateMethod};c.setRotateMethod=function(b){b||(b="free");this.rotateMethod=b;this.updateRotateMethodView();Entry.stage.selectedObject&&Entry.stage.selectedObject.entity&&(Entry.stage.updateObject(),Entry.stage.updateHandle())};c.initRotateValue=function(b){this.rotateMethod!=b&&(b=this.entity,b.rotation=0,b.direction=90,b.flip=!1)};c.updateRotateMethodView=function(){var b=this.rotateMethod;this.rotateModeAView_&&(this.rotateModeAView_.removeClass("selected"),
this.rotateModeBView_.removeClass("selected"),this.rotateModeCView_.removeClass("selected"),"free"==b?this.rotateModeAView_.addClass("selected"):"vertical"==b?this.rotateModeBView_.addClass("selected"):this.rotateModeCView_.addClass("selected"),this.updateRotationView())};c.toggleInformation=function(b){this.setRotateMethod(this.getRotateMethod());void 0===b&&(b=this.isInformationToggle=!this.isInformationToggle);b?this.view_.addClass("informationToggle"):this.view_.removeClass("informationToggle")};
c.addCloneEntity=function(b,c,e){this.clonedEntities.length>Entry.maxCloneLimit||(b=new Entry.EntityObject(this),c?(b.injectModel(c.picture?c.picture:null,c.toJSON()),b.snapshot_=c.snapshot_,c.effect&&(b.effect=Entry.cloneSimpleObject(c.effect),b.applyFilter()),c.brush&&Entry.setCloneBrush(b,c.brush)):(b.injectModel(this.entity.picture?this.entity.picture:null,this.entity.toJSON(b)),b.snapshot_=this.entity.snapshot_,this.entity.effect&&(b.effect=Entry.cloneSimpleObject(this.entity.effect),b.applyFilter()),
this.entity.brush&&Entry.setCloneBrush(b,this.entity.brush)),Entry.engine.raiseEventOnEntity(b,[b,"when_clone_start"]),b.isClone=!0,b.isStarted=!0,this.addCloneVariables(this,b,c?c.variables:null,c?c.lists:null),this.clonedEntities.push(b),Entry.stage.loadEntity(b))};c.initializeSplitter=function(b){b.onmousedown=function(b){Entry.container.disableSort();Entry.container.splitterEnable=!0};document.addEventListener("mousemove",function(b){Entry.container.splitterEnable&&Entry.resizeElement({canvasWidth:b.x||
b.clientX})});document.addEventListener("mouseup",function(b){Entry.container.splitterEnable=!1;Entry.container.enableSort()})};c.isSelected=function(){return this.isSelected_};c.toJSON=function(){var b={};b.id=this.id;b.name=this.name;"textBox"==this.objectType&&(b.text=this.text);b.script=this.getScriptText();"sprite"==this.objectType&&(b.selectedPictureId=this.selectedPicture.id);b.objectType=this.objectType;b.rotateMethod=this.getRotateMethod();b.scene=this.scene.id;b.sprite={pictures:Entry.getPicturesJSON(this.pictures),
sounds:Entry.getSoundsJSON(this.sounds)};b.lock=this.lock;b.entity=this.entity.toJSON();return b};c.destroy=function(){Entry.stage.unloadEntity(this.entity);this.view_&&Entry.removeElement(this.view_)};c.getSound=function(b){b=b.trim();for(var c=this.sounds,e=c.length,f=0;f<e;f++)if(c[f].id==b)return c[f];for(f=0;f<e;f++)if(c[f].name==b)return c[f];b=Entry.parseNumber(b);if((!1!==b||"boolean"!=typeof b)&&e>=b&&0<b)return c[b-1];throw Error("No Sound");};c.addCloneVariables=function(b,c,e,f){c.variables=
[];c.lists=[];e||(e=Entry.findObjsByKey(Entry.variableContainer.variables_,"object_",b.id));f||(f=Entry.findObjsByKey(Entry.variableContainer.lists_,"object_",b.id));for(b=0;b<e.length;b++)c.variables.push(e[b].clone());for(b=0;b<f.length;b++)c.lists.push(f[b].clone())};c.getLock=function(){return this.lock};c.setLock=function(b){this.lock=b;Entry.stage.updateObject();return b};c.updateInputViews=function(b){b=b||this.getLock();var c=[this.nameView_,this.coordinateView_.xInput_,this.coordinateView_.yInput_,
this.rotateInput_,this.directionInput_,this.coordinateView_.sizeInput_];if(b&&1!=c[0].getAttribute("readonly"))for(b=0;b<c.length;b++)c[b].removeClass("selectedEditingObject"),c[b].setAttribute("readonly",!1),this.isEditing=!1};c.editObjectValues=function(b){var c;c=this.getLock()?[this.nameView_]:[this.coordinateView_.xInput_,this.coordinateView_.yInput_,this.rotateInput_,this.directionInput_,this.coordinateView_.sizeInput_];if(b){var e=this.nameView_;$(c).removeClass("selectedNotEditingObject");
$(e).removeClass("selectedNotEditingObject");window.setTimeout(function(){$(e).removeAttr("readonly");e.addClass("selectedEditingObject")});for(b=0;b<c.length;b++)$(c[b]).removeAttr("readonly"),c[b].addClass("selectedEditingObject");this.isEditing=!0}else{for(b=0;b<c.length;b++)c[b].blur(!0);this.nameView_.blur(!0);this.blurAllInput();this.isEditing=!1}};c.blurAllInput=function(){var b;document.getElementsByClassName("");$(".selectedEditingObject").removeClass("selectedEditingObject");b=[this.nameView_,
this.coordinateView_.xInput_,this.coordinateView_.yInput_,this.rotateInput_,this.directionInput_,this.coordinateView_.sizeInput_];for(var c=0;c<b.length;c++){var e=b[c];e.addClass("selectedNotEditingObject");e.setAttribute("readonly",!0)}};c.addStampEntity=function(b){b=new Entry.StampEntity(this,b);Entry.stage.loadEntity(b);this.clonedEntities.push(b);Entry.stage.sortZorder()};c.getClonedEntities=function(){var b=[];this.clonedEntities.map(function(c){c.isStamp||b.push(c)});return b};c.getStampEntities=
function(){var b=[];this.clonedEntities.map(function(c){c.isStamp&&b.push(c)});return b};c.clearExecutor=function(){this.script.clearExecutors();for(var b=this.clonedEntities.length;0<b;b--)this.clonedEntities[b-1].removeClone();this.clonedEntities=[]};c._rightClick=function(b){if(this._isContextMenuEnabled){var c=this,e=[{text:Lang.Workspace.context_rename,callback:function(b){b.stopPropagation();c.setLock(!1);c.editObjectValues(!0);c.nameView_.select()}},{text:Lang.Workspace.context_duplicate,enable:!Entry.engine.isState("run"),
callback:function(){Entry.container.addCloneObject(c)}},{text:Lang.Workspace.context_remove,callback:function(){Entry.container.removeObject(c)}},{text:Lang.Workspace.copy_file,callback:function(){Entry.container.setCopiedObject(c)}},{text:Lang.Blocks.Paste_blocks,enable:!Entry.engine.isState("run")&&!!Entry.container.copiedObject,callback:function(){Entry.container.copiedObject?Entry.container.addCloneObject(Entry.container.copiedObject):Entry.toast.alert(Lang.Workspace.add_object_alert,Lang.Workspace.object_not_found_for_paste)}}];
b=Entry.Utils.convertMouseEvent(b);Entry.ContextMenu.show(e,"workspace-contextmenu",{x:b.clientX,y:b.clientY})}};c.enableContextMenu=function(){this._isContextMenuEnabled=!0};c.disableContextMenu=function(){this._isContextMenuEnabled=!1};c.toggleEditObject=function(){var b=this.isEditing;Entry.engine.isState("run")||!1!==b||(this.editObjectValues(!b),Entry.playground.object!==this&&Entry.container.selectObject(this.id),this.nameView_.select())};c.toggleEditObject=function(){var b=this.isEditing;Entry.engine.isState("run")||
!1!==b||(this.editObjectValues(!b),Entry.playground.object!==this&&Entry.container.selectObject(this.id),this.nameView_.select())};c.getDom=function(b){if(!b||0===b.length)return this.view_;if(1<=b.length)switch(b.shift()){case "editButton":return this.editView_}}})(Entry.EntryObject.prototype);Entry.Painter=function(){this.toolbox={selected:"cursor"};this.stroke={enabled:!1,fillColor:"#000000",lineColor:"#000000",thickness:1,fill:!0,transparent:!1,style:"line",locked:!1};this.file={id:Entry.generateHash(),name:"\uc0c8\uadf8\ub9bc",modified:!1,mode:"new"};this.font={name:"KoPub Batang",size:20,style:"normal"};this.selectArea={};this.firstStatement=!1};
Entry.Painter.prototype.initialize=function(c){this.generateView(c);this.canvas=document.getElementById("entryPainterCanvas");this.canvas_=document.getElementById("entryPainterCanvas_");this.stage=new createjs.Stage(this.canvas);this.stage.autoClear=!0;this.stage.enableDOMEvents(!0);this.stage.enableMouseOver(10);this.stage.mouseMoveOutside=!0;createjs.Touch.enable(this.stage);this.objectContainer=new createjs.Container;this.objectContainer.name="container";this.stage.addChild(this.objectContainer);
this.ctx=this.stage.canvas.getContext("2d");this.ctx.imageSmoothingEnabled=!1;this.ctx.webkitImageSmoothingEnabled=!1;this.ctx.mozImageSmoothingEnabled=!1;this.ctx.msImageSmoothingEnabled=!1;this.ctx.oImageSmoothingEnabled=!1;this.ctx_=this.canvas_.getContext("2d");this.initDashedLine();this.initPicture();this.initCoordinator();this.initHandle();this.initDraw();var b=this;Entry.addEventListener("textUpdate",function(){var c=b.inputField.value();""===c?(b.inputField.hide(),delete b.inputField):(b.inputField.hide(),
b.drawText(c),b.selectToolbox("cursor"))});this.selectToolbox("cursor")};
Entry.Painter.prototype.initHandle=function(){this._handle=new createjs.Container;this._handle.rect=new createjs.Shape;this._handle.addChild(this._handle.rect);var c=new createjs.Container;c.name="move";c.width=90;c.height=90;c.x=90;c.y=90;c.rect=new createjs.Shape;var b=this;c.rect.on("mousedown",function(d){"cursor"===b.toolbox.selected&&(b.initCommand(),this.offset={x:this.parent.x-this.x-d.stageX,y:this.parent.y-this.y-d.stageY},this.parent.handleMode="move",c.isSelectCenter=!1)});c.rect.on("pressmove",
function(d){"cursor"!==b.toolbox.selected||c.isSelectCenter||(b.doCommand(),this.parent.x=d.stageX+this.offset.x,this.parent.y=d.stageY+this.offset.y,b.updateImageHandle())});c.on("mouseup",function(c){b.checkCommand()});c.rect.cursor="move";c.addChild(c.rect);c.notch=new createjs.Shape;c.addChild(c.notch);c.NEHandle=this.generateCornerHandle();c.addChild(c.NEHandle);c.NWHandle=this.generateCornerHandle();c.addChild(c.NWHandle);c.SWHandle=this.generateCornerHandle();c.addChild(c.SWHandle);c.SEHandle=
this.generateCornerHandle();c.addChild(c.SEHandle);c.EHandle=this.generateXHandle();c.addChild(c.EHandle);c.WHandle=this.generateXHandle();c.addChild(c.WHandle);c.NHandle=this.generateYHandle();c.addChild(c.NHandle);c.SHandle=this.generateYHandle();c.addChild(c.SHandle);c.RHandle=new createjs.Shape;c.RHandle.graphics.ss(2,2,0).beginFill("#888").s("#c1c7cd").f("#c1c7cd").dr(-2,-2,8,8);c.RHandle.on("mousedown",function(c){b.initCommand()});c.RHandle.on("pressmove",function(c){b.doCommand();var d=c.stageX-
this.parent.x;c=c.stageY-this.parent.y;this.parent.rotation=0<=d?Math.atan(c/d)/Math.PI*180+90:Math.atan(c/d)/Math.PI*180+270;b.updateImageHandle()});c.RHandle.cursor="crosshair";c.addChild(c.RHandle);c.on("mouseup",function(c){b.checkCommand()});c.visible=!1;this.handle=c;this.stage.addChild(c);this.updateImageHandleCursor()};
Entry.Painter.prototype.generateCornerHandle=function(){var c=this,b=new createjs.Shape;b.graphics.beginFill("#c1c7cd").ss(2,2,0).s("#c1c7cd").dr(-4,-4,8,8);b.on("mousedown",function(b){c.initCommand();this.offset={x:b.stageX-this.parent.x+this.parent.regX,y:b.stageY-this.parent.y+this.parent.regY}});b.on("pressmove",function(b){c.doCommand();var d=Math.sqrt(Math.abs((b.stageX-this.parent.x+this.parent.regX)/this.offset.x*(b.stageY-this.parent.y+this.parent.regY)/this.offset.y));10<this.parent.width*
d&&10<this.parent.height*d&&(this.parent.width*=d,this.parent.height*=d,this.offset={x:b.stageX-this.parent.x+this.parent.regX,y:b.stageY-this.parent.y+this.parent.regY});c.updateImageHandle()});b.on("mouseup",function(b){c.checkCommand()});return b};
Entry.Painter.prototype.generateXHandle=function(){var c=this,b=new createjs.Shape;b.graphics.beginFill("#c1c7cd").ss(2,2,0).s("#c1c7cd").dr(-4,-4,8,8);b.on("mousedown",function(b){c.initCommand();this.offset={x:b.stageX-this.parent.x+this.parent.regX}});b.on("pressmove",function(b){c.doCommand();var d=Math.abs((b.stageX-this.parent.x+this.parent.regX)/this.offset.x);10<this.parent.width*d&&(this.parent.width*=d,this.offset={x:b.stageX-this.parent.x+this.parent.regX});c.updateImageHandle()});b.on("mouseup",
function(b){c.checkCommand()});return b};
Entry.Painter.prototype.generateYHandle=function(){var c=this,b=new createjs.Shape;b.graphics.beginFill("#c1c7cd").ss(2,2,0).s("#c1c7cd").dr(-4,-4,8,8);b.on("mousedown",function(b){c.initCommand();this.offset={y:b.stageY-this.parent.y+this.parent.regY}});b.on("pressmove",function(b){c.doCommand();var d=Math.abs((b.stageY-this.parent.y+this.parent.regY)/this.offset.y);10<this.parent.height*d&&(this.parent.height*=d,this.offset={y:b.stageY-this.parent.y+this.parent.regY});c.updateImageHandle()});b.on("mouseup",
function(b){c.checkCommand()});return b};
Entry.Painter.prototype.updateImageHandle=function(){if(this.handle.visible){var c=this.handle,b=c.direction,d=c.width,e=c.height,f=c.regX,g=c.regY;c.rect.graphics.clear().f("rgba(0,0,1,0.01)").ss(2,2,0).s("#c1c7cd").lt(-d/2,-e/2).lt(0,-e/2).lt(0,-e/2).lt(+d/2,-e/2).lt(+d/2,+e/2).lt(-d/2,+e/2).cp();c.notch.graphics.clear().f("rgba(0,0,1,0.01)").ss(2,2,0).s("#c1c7cd").lt(0,-e/2).lt(0,-e/2-20).cp();c.NEHandle.x=+c.width/2;c.NEHandle.y=-c.height/2;c.NWHandle.x=-c.width/2;c.NWHandle.y=-c.height/2;c.SWHandle.x=
-c.width/2;c.SWHandle.y=+c.height/2;c.SEHandle.x=+c.width/2;c.SEHandle.y=+c.height/2;c.EHandle.x=+c.width/2;c.EHandle.y=0;c.WHandle.x=-c.width/2;c.WHandle.y=0;c.NHandle.x=0;c.NHandle.y=-c.height/2;c.SHandle.x=0;c.SHandle.y=+c.height/2;c.RHandle.x=-2;c.RHandle.y=-c.height/2-20-2;this.handle.visible&&(d=this.selectedObject,this.selectedObject.text?(d.width=this.selectedObject.width,d.height=this.selectedObject.height):(d.width=d.image.width,d.height=d.image.height),d.scaleX=c.width/d.width,d.scaleY=
c.height/d.height,d.x=c.x,d.y=c.y,d.regX=d.width/2+f/d.scaleX,d.regY=d.height/2+g/d.scaleY,d.rotation=c.rotation,d.direction=b,this.selectArea.x1=c.x-c.width/2,this.selectArea.y1=c.y-c.height/2,this.selectArea.x2=c.width,this.selectArea.y2=c.height,this.objectWidthInput.value=Math.abs(d.width*d.scaleX).toFixed(0),this.objectHeightInput.value=Math.abs(d.height*d.scaleY).toFixed(0),this.objectRotateInput.value=(1*d.rotation).toFixed(0));this.updateImageHandleCursor();this.stage.update()}};
Entry.Painter.prototype.updateImageHandleCursor=function(){var c=this.handle;c.rect.cursor="move";c.RHandle.cursor="crosshair";for(var b=["nwse-resize","ns-resize","nesw-resize","ew-resize"],d=Math.floor((c.rotation+22.5)%180/45),e=0;e<d;e++)b.push(b.shift());c.NHandle.cursor=b[1];c.NEHandle.cursor=b[2];c.EHandle.cursor=b[3];c.SEHandle.cursor=b[0];c.SHandle.cursor=b[1];c.SWHandle.cursor=b[2];c.WHandle.cursor=b[3];c.NWHandle.cursor=b[0]};
Entry.Painter.prototype.clearCanvas=function(c){this.clearHandle();c||this.initCommand();this.objectContainer.removeAllChildren();this.stage.update();this.colorLayerData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);c=0;for(var b=this.colorLayerData.data.length;c<b;c++)this.colorLayerData.data[c]=255,this.colorLayerData.data[c+1]=255,this.colorLayerData.data[c+2]=255,this.colorLayerData.data[c+3]=255;this.reloadContext()};
Entry.Painter.prototype.newPicture=function(){var c={dimension:{height:1,width:1},fileurl:Entry.mediaFilePath+"_1x1.png",name:Lang.Workspace.new_picture};c.id=Entry.generateHash();Entry.playground.addPicture(c,!0)};
Entry.Painter.prototype.initPicture=function(){var c=this;Entry.addEventListener("pictureSelected",function(b){c.selectToolbox("cursor");if(c.file.id!==b.id){c.file.modified&&confirm("\uc218\uc815\ub41c \ub0b4\uc6a9\uc744 \uc800\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(c.file_=JSON.parse(JSON.stringify(c.file)),c.file_save(!0));c.file.modified=!1;c.clearCanvas(!0);var d=new Image;d.id=b.id?b.id:Entry.generateHash();c.file.id=d.id;c.file.name=b.name;c.file.mode="edit";d.src=b.fileurl?b.fileurl:
Entry.defaultPath+"/uploads/"+b.filename.substring(0,2)+"/"+b.filename.substring(2,4)+"/image/"+b.filename+".png";d.onload=function(b){c.addImage(b.target)}}});Entry.addEventListener("pictureImport",function(b){c.addPicture(b)});Entry.addEventListener("pictureNameChanged",function(b){c.file.name=b.name});Entry.addEventListener("pictureClear",function(b){c.file.modified=!1;c.file.id="";c.file.name="";c.clearCanvas()})};
Entry.Painter.prototype.initDraw=function(){var c=this;this.stage.on("stagemousedown",function(b){c.stagemousedown(b)});this.stage.on("stagemouseup",function(b){c.stagemouseup(b)});this.stage.on("stagemousemove",function(b){c.stagemousemove(b)})};
Entry.Painter.prototype.selectObject=function(c,b){this.selectedObject=c;this.handle.visible=c.visible;b?(this.handle.width=this.copy.width,this.handle.height=this.copy.height,this.handle.x=this.selectArea.x1+this.copy.width/2,this.handle.y=this.selectArea.y1+this.copy.height/2):(this.handle.width=c.scaleX*c.image.width,this.handle.height=c.scaleY*c.image.height,this.handle.x=c.x,this.handle.y=c.y,this.handle.regX=+(c.regX-c.image.width/2)*c.scaleX,this.handle.regY=+(c.regY-c.image.height/2)*c.scaleY);
this.handle.rotation=c.rotation;this.handle.direction=0;this.updateImageHandle()};
Entry.Painter.prototype.selectTextObject=function(c){this.selectedObject=c;var b=c.getTransformedBounds();this.handle.visible=c.visible;c.width||(this.selectedObject.width=b.width);c.height||(this.selectedObject.height=b.height);this.handle.width=c.scaleX*this.selectedObject.width;this.handle.height=c.scaleY*this.selectedObject.height;this.handle.x=c.x;this.handle.y=c.y;c.regX||(c.regX=c.width/2);c.regY||(c.regY=c.height/2);this.handle.regX=(c.regX-this.selectedObject.width/2)*c.scaleX;this.handle.regY=
(c.regY-this.selectedObject.height/2)*c.scaleY;this.handle.rotation=c.rotation;this.handle.direction=0;this.updateImageHandle()};
Entry.Painter.prototype.updateHandle=function(){-1<this.stage.getChildIndex(this._handle)&&this.stage.removeChild(this._handle);-1===this.stage.getChildIndex(this.handle)&&this.stage.addChild(this.handle);var c=new createjs.Shape;c.graphics.clear().beginFill("#000").rect(this.selectArea.x1,this.selectArea.y1,this.selectArea.x2,this.selectArea.y2);this.handle.rect.hitArea=c;this.handle.rect.graphics.clear().setStrokeStyle(1,"round").beginStroke("#000000").drawDashedRect(this.selectArea.x1,this.selectArea.y1,
this.selectArea.x2,this.selectArea.y2,4);this.stage.update()};Entry.Painter.prototype.updateHandle_=function(){this.stage.getChildIndex(-1<this._handle)&&this.stage.addChild(this._handle);this._handle.rect.graphics.clear().setStrokeStyle(1,"round").beginStroke("#cccccc").drawDashedRect(this.selectArea.x1,this.selectArea.y1,this.selectArea.x2,this.selectArea.y2,2);this.stage.update()};
Entry.Painter.prototype.matchTolerance=function(c,b,d,e,f){var g=this.colorLayerData.data[c],h=this.colorLayerData.data[c+1];c=this.colorLayerData.data[c+2];return g>=b-f/100*b&&g<=b+f/100*b&&h>=d-f/100*d&&h<=d+f/100*d&&c>=e-f/100*e&&c<=e+f/100*e};Entry.Painter.prototype.matchColorOnly=function(c,b,d,e){return b===this.colorLayerData.data[c]&&d===this.colorLayerData.data[c+1]&&e===this.colorLayerData.data[c+2]?!0:!1};
Entry.Painter.prototype.matchColor=function(c,b,d,e,f){return b===this.colorLayerData.data[c]&&d===this.colorLayerData.data[c+1]&&e===this.colorLayerData.data[c+2]&&f===this.colorLayerData.data[c+3]?!0:!1};Entry.Painter.prototype.colorPixel=function(c,b,d,e,f){f||(f=255);this.stroke.transparent&&(f=e=d=b=0);this.colorLayerData.data[c]=b;this.colorLayerData.data[c+1]=d;this.colorLayerData.data[c+2]=e;this.colorLayerData.data[c+3]=f};
Entry.Painter.prototype.pickStrokeColor=function(c){c=4*(Math.round(c.stageY)*this.canvas.width+Math.round(c.stageX));this.stroke.lineColor=Entry.rgb2hex(this.colorLayerData.data[c],this.colorLayerData.data[c+1],this.colorLayerData.data[c+2]);document.getElementById("entryPainterAttrCircle").style.backgroundColor=this.stroke.lineColor;document.getElementById("entryPainterAttrCircleInput").value=this.stroke.lineColor};
Entry.Painter.prototype.drawText=function(c){var b=document.getElementById("entryPainterAttrFontStyle").value,d=document.getElementById("entryPainterAttrFontName").value,e=document.getElementById("entryPainterAttrFontSize").value;c=new createjs.Text(c,b+" "+e+'px "'+d+'"',this.stroke.lineColor);c.textBaseline="top";c.x=this.oldPt.x;c.y=this.oldPt.y;this.objectContainer.addChild(c);this.selectTextObject(c);this.file.modified=!0};
Entry.Painter.prototype.addImage=function(c){var b=new createjs.Bitmap(c);this.objectContainer.addChild(b);b.x=this.stage.canvas.width/2;b.y=this.stage.canvas.height/2;b.regX=b.image.width/2|0;b.regY=b.image.height/2|0;if(540<b.image.height){var d=540/b.image.height;b.scaleX=d;b.scaleY=d}b.name=c.id;b.id=c.id;this.selectObject(b);this.stage.update()};Entry.Painter.prototype.createBrush=function(){this.initCommand();this.brush=new createjs.Shape;this.objectContainer.addChild(this.brush);this.stage.update()};
Entry.Painter.prototype.createEraser=function(){this.initCommand();this.eraser=new createjs.Shape;this.objectContainer.addChild(this.eraser);this.stage.update()};Entry.Painter.prototype.clearHandle=function(){this.handle.visible&&(this.handle.visible=!1);this.coordinator.visible&&(this.coordinator.visible=!1);this.stage.update()};
Entry.Painter.prototype.initCommand=function(){var c=!1;this.handle.visible&&(c=!0,this.handle.visible=!1);var b=!1;this.coordinator.visible&&(b=!0,this.coordinator.visible=!1);(c||b)&&this.stage.update();this.isCommandValid=!1;this.colorLayerModel=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);Entry.stateManager&&this.firstStatement&&Entry.stateManager.addCommand("edit sprite",this,this.restorePainter,this.colorLayerModel);this.firstStatement=!0;c&&(this.handle.visible=!0);b&&(this.coordinator.visible=
!0);(c||b)&&this.stage.update()};Entry.Painter.prototype.doCommand=function(){this.isCommandValid=!0};Entry.Painter.prototype.checkCommand=function(){this.isCommandValid||Entry.dispatchEvent("cancelLastCommand")};
Entry.Painter.prototype.restorePainter=function(c){this.clearHandle();var b=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.putImageData(c,0,0);c=new Image;c.src=this.canvas.toDataURL();var d=this;c.onload=function(b){b=new createjs.Bitmap(b.target);d.objectContainer.removeAllChildren();d.objectContainer.addChild(b)};Entry.stateManager&&Entry.stateManager.addCommand("restore sprite",this,this.restorePainter,b)};
Entry.Painter.prototype.platten=function(){this.colorLayerData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.reloadContext()};
Entry.Painter.prototype.fill=function(){if(!this.stroke.locked){this.stroke.locked=!0;this.initCommand();this.doCommand();this.clearHandle();var c=this.canvas.width,b=this.canvas.height;this.colorLayerData=this.ctx.getImageData(0,0,c,b);var d=new createjs.Point(this.stage.mouseX,this.stage.mouseY);d.x=Math.round(d.x);d.y=Math.round(d.y);for(var e=4*(d.y*c+d.x),f=this.colorLayerData.data[e],g=this.colorLayerData.data[e+1],h=this.colorLayerData.data[e+2],k=this.colorLayerData.data[e+3],l,m,d=[[d.x,
d.y]],q=Entry.hex2rgb(this.stroke.lineColor);d.length;){for(var e=d.pop(),n=e[0],t=e[1],e=4*(t*c+n);0<=t&&this.matchColor(e,f,g,h,k);)--t,e-=4*c;e+=4*c;t+=1;for(m=l=!1;t<b-1&&this.matchColor(e,f,g,h,k);)t+=1,this.colorPixel(e,q.r,q.g,q.b),0<n&&(this.matchColor(e-4,f,g,h,k)?l||(d.push([n-1,t]),l=!0):l&&(l=!1)),n<c-1&&(this.matchColor(e+4,f,g,h,k)?m||(d.push([n+1,t]),m=!0):m&&(m=!1)),e+=4*c;if(1080<d.length)break}this.file.modified=!0;this.reloadContext()}};
Entry.Painter.prototype.reloadContext=function(){delete this.selectedObject;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.putImageData(this.colorLayerData,0,0);var c=new Image;c.src=this.canvas.toDataURL();var b=this;c.onload=function(c){c=new createjs.Bitmap(c.target);b.objectContainer.removeAllChildren();b.objectContainer.addChild(c);b.stroke.locked=!1}};
Entry.Painter.prototype.move_pen=function(){var c=new createjs.Point(this.oldPt.x+this.stage.mouseX>>1,this.oldPt.y+this.stage.mouseY>>1);this.brush.graphics.setStrokeStyle(this.stroke.thickness,"round").beginStroke(this.stroke.lineColor).moveTo(c.x,c.y).curveTo(this.oldPt.x,this.oldPt.y,this.oldMidPt.x,this.oldMidPt.y);this.oldPt.x=this.stage.mouseX;this.oldPt.y=this.stage.mouseY;this.oldMidPt.x=c.x;this.oldMidPt.y=c.y;this.file.modified=!0;this.stage.update()};
Entry.Painter.prototype.move_line=function(){this.brush.graphics.clear().beginStroke(this.stroke.lineColor).setStrokeStyle(this.stroke.thickness,"round").moveTo(this.oldPt.x,this.oldPt.y).lineTo(this.stage.mouseX,this.stage.mouseY);this.file.modified=!0;this.stage.update()};
Entry.Painter.prototype.move_rect=function(){var c=this.stage.mouseX-this.oldPt.x,b=this.stage.mouseY-this.oldPt.y;event.shiftKey&&(b=c);this.stroke.fill?0===this.stroke.thickness?this.brush.graphics.clear().setStrokeStyle(this.stroke.thickness,"round").beginFill(this.stroke.fillColor).drawRect(this.oldPt.x,this.oldPt.y,c,b):this.brush.graphics.clear().beginStroke(this.stroke.lineColor).setStrokeStyle(this.stroke.thickness,"round").beginFill(this.stroke.fillColor).drawRect(this.oldPt.x,this.oldPt.y,
c,b):0===this.stroke.thickness?this.brush.graphics.clear().setStrokeStyle(this.stroke.thickness,"round").drawRect(this.oldPt.x,this.oldPt.y,c,b):this.brush.graphics.clear().beginStroke(this.stroke.lineColor).setStrokeStyle(this.stroke.thickness,"round").drawRect(this.oldPt.x,this.oldPt.y,c,b);this.file.modified=!0;this.stage.update()};
Entry.Painter.prototype.move_circle=function(){var c=this.stage.mouseX-this.oldPt.x,b=this.stage.mouseY-this.oldPt.y;event.shiftKey&&(b=c);this.stroke.fill?0===this.stroke.thickness?this.brush.graphics.clear().beginStroke(this.stroke.fillColor).setStrokeStyle(this.stroke.thickness,"round").beginFill(this.stroke.fillColor).drawEllipse(this.oldPt.x,this.oldPt.y,c,b):this.brush.graphics.clear().beginStroke(this.stroke.lineColor).setStrokeStyle(this.stroke.thickness,"round").beginFill(this.stroke.fillColor).drawEllipse(this.oldPt.x,
this.oldPt.y,c,b):this.stroke.fill||(0===this.stroke.thickness?this.brush.graphics.clear().drawEllipse(this.oldPt.x,this.oldPt.y,c,b):this.brush.graphics.clear().beginStroke(this.stroke.lineColor).setStrokeStyle(this.stroke.thickness,"round").drawEllipse(this.oldPt.x,this.oldPt.y,c,b));this.file.modified=!0;this.stage.update()};
Entry.Painter.prototype.edit_copy=function(){this.selectArea?(this.clearHandle(),this.selectedObject&&delete this.selectedObject,this.copyLayerData=this.ctx.getImageData(this.selectArea.x1,this.selectArea.y1,this.selectArea.x2,this.selectArea.y2),this.copy={},this.copy.width=this.selectArea.x2,this.copy.height=this.selectArea.y2,this.canvas_.width=this.copy.width,this.canvas_.height=this.copy.height,this.ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height),this.ctx_.putImageData(this.copyLayerData,
0,0)):alert("\ubcf5\uc0ac\ud560 \uc601\uc5ed\uc744 \uc120\ud0dd\ud558\uc138\uc694.")};
Entry.Painter.prototype.edit_cut=function(){this.selectArea?(this.clearHandle(),this.selectedObject&&delete this.selectedObject,this.copyLayerData=this.ctx.getImageData(this.selectArea.x1,this.selectArea.y1,this.selectArea.x2,this.selectArea.y2),this.copy={},this.copy.width=this.selectArea.x2,this.copy.height=this.selectArea.y2,this.canvas_.width=this.copy.width,this.canvas_.height=this.copy.height,this.ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height),this.ctx_.putImageData(this.copyLayerData,
0,0),this.ctx.clearRect(this.selectArea.x1,this.selectArea.y1,this.selectArea.x2,this.selectArea.y2),this.colorLayerData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),this.reloadContext(),this.file.modified=!0):alert("\uc790\ub97c \uc601\uc5ed\uc744 \uc120\ud0dd\ud558\uc138\uc694.")};
Entry.Painter.prototype.edit_paste=function(){var c=new Image;c.src=this.canvas_.toDataURL();var b=this;c.onload=function(c){c=new createjs.Bitmap(c.target);c.x=b.canvas.width/2;c.y=b.canvas.height/2;c.regX=b.copy.width/2|0;c.regY=b.copy.height/2|0;c.id=Entry.generateHash();b.objectContainer.addChild(c);b.selectObject(c,!0)};this.file.modified=!0};
Entry.Painter.prototype.edit_select=function(){this.clearHandle();this.selectedObject&&delete this.selectedObject;this.copyLayerData=this.ctx.getImageData(this.selectArea.x1,this.selectArea.y1,this.selectArea.x2,this.selectArea.y2);this.copy={};this.copy.width=this.selectArea.x2;this.copy.height=this.selectArea.y2;this.canvas_.width=this.copy.width;this.canvas_.height=this.copy.height;this.ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height);this.ctx_.putImageData(this.copyLayerData,0,0);this.ctx.clearRect(this.selectArea.x1,
this.selectArea.y1,this.selectArea.x2,this.selectArea.y2);this.colorLayerData=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.putImageData(this.colorLayerData,0,0);var c=new Image;c.src=this.canvas.toDataURL();var b=this;c.onload=function(c){c=new createjs.Bitmap(c.target);b.objectContainer.removeAllChildren();b.objectContainer.addChild(c);c=new Image;c.src=b.canvas_.toDataURL();c.onload=function(c){c=new createjs.Bitmap(c.target);
c.x=b.selectArea.x1+b.copy.width/2;c.y=b.selectArea.y1+b.copy.height/2;c.regX=b.copy.width/2|0;c.regY=b.copy.height/2|0;c.id=Entry.generateHash();c.name=c.id;b.objectContainer.addChild(c);b.selectObject(c,!0)}}};
Entry.Painter.prototype.move_erase=function(c){c=new createjs.Point(this.oldPt.x+this.stage.mouseX>>1,this.oldPt.y+this.stage.mouseY>>1);this.eraser.graphics.setStrokeStyle(this.stroke.thickness,"round").beginStroke("#ffffff").moveTo(c.x,c.y).curveTo(this.oldPt.x,this.oldPt.y,this.oldMidPt.x,this.oldMidPt.y);this.oldPt.x=this.stage.mouseX;this.oldPt.y=this.stage.mouseY;this.oldMidPt.x=c.x;this.oldMidPt.y=c.y;this.file.modified=!0;this.stage.update()};
Entry.Painter.prototype.settingShapeBlur=function(){this.objectWidthInput.blur();this.objectHeightInput.blur();this.objectRotateInput.blur()};
Entry.Painter.prototype.stagemousedown=function(c){"picture"==Entry.playground.getViewMode()&&(this.settingShapeBlur(),this.oldPt=new createjs.Point(c.stageX,c.stageY),this.oldMidPt=this.oldPt.clone(),"select"===this.toolbox.selected?this.stage.addChild(this._handle):"spoid"===this.toolbox.selected?this.pickStrokeColor(c):"text"===this.toolbox.selected?(this.showInputField(c),this.stage.update()):"erase"===this.toolbox.selected?(this.createEraser(),this.stroke.enabled=!0):"fill"===this.toolbox.selected?
this.fill():"cursor"!==this.toolbox.selected&&(this.createBrush(),this.stroke.enabled=!0))};
Entry.Painter.prototype.stagemousemove=function(c){"picture"==Entry.playground.getViewMode()&&("select"===this.toolbox.selected&&-1<this.stage.getChildIndex(this._handle)?(this.selectArea.x1=this.oldPt.x,this.selectArea.y1=this.oldPt.y,this.selectArea.x2=c.stageX-this.oldPt.x,this.selectArea.y2=c.stageY-this.oldPt.y,this.updateHandle_()):this.stroke.enabled&&(this.doCommand(),"pen"===this.toolbox.selected?this.move_pen(c):"line"===this.toolbox.selected?this.move_line(c):"rect"===this.toolbox.selected?
this.move_rect(c):"circle"===this.toolbox.selected?this.move_circle(c):"erase"===this.toolbox.selected&&this.move_erase(c)),this.painterTopStageXY.innerHTML="x:"+c.stageX.toFixed(1)+", y:"+c.stageY.toFixed(1))};
Entry.Painter.prototype.stagemouseup=function(c){"picture"==Entry.playground.getViewMode()&&("select"===this.toolbox.selected?(this.selectArea.x1=this.oldPt.x,this.selectArea.y1=this.oldPt.y,this.selectArea.x2=c.stageX-this.oldPt.x,this.selectArea.y2=c.stageY-this.oldPt.y,this.stage.removeChild(this._handle),this.stage.update(),0<this.selectArea.x2&&0<this.selectArea.y2&&this.edit_select(),this.selectToolbox("cursor")):"cursor"!==this.toolbox.selected&&this.stroke.enabled&&(-1<this.objectContainer.getChildIndex(this.eraser)&&
this.eraser.graphics.endStroke(),-1<this.objectContainer.getChildIndex(this.brush)&&this.brush.graphics.endStroke(),this.clearHandle(),this.platten(),this.stroke.enabled=!1,this.checkCommand()))};Entry.Painter.prototype.file_save=function(c){this.clearHandle();this.transparent();this.trim();var b=this.canvas_.toDataURL();Entry.dispatchEvent("saveCanvasImage",{file:c?this.file_:this.file,image:b});this.file.modified=!1};
Entry.Painter.prototype.transparent=function(){var c=this.canvas.width,b=this.canvas.height;this.colorLayerData=this.ctx.getImageData(0,0,c,b);var d=c*(b-1)*4,e=4*(c-1),f=4*(c*b-1);this.matchColorOnly(0,255,255,255)?this.fillTransparent(1,1):this.matchColorOnly(d,255,255,255)?this.fillTransparent(1,b):this.matchColorOnly(e,255,255,255)?this.fillTransparent(c,1):this.matchColorOnly(f,255,255,255)&&this.fillTransparent(c,b)};
Entry.Painter.prototype.fillTransparent=function(c,b){this.stage.mouseX=c;this.stage.mouseY=b;this.stroke.transparent=!0;this.fill()};
Entry.Painter.prototype.trim=function(){var c=this.canvas.width,b=this.ctx.getImageData(0,0,c,this.canvas.height),d=b.data.length,e,f=null,g=null,h=null,k=null,l;for(e=0;e<d;e+=4)0!==b.data[e+3]&&(h=e/4%c,l=~~(e/4/c),null===f&&(f=l),null===g?g=h:h<g&&(g=h),null===k?k=l:k<l&&(k=l));c=k-f;b=h-g;0===c||0===b?(f=this.ctx.getImageData(0,0,1,1),f.data[0]=255,f.data[1]=255,f.data[2]=255,f.data[3]=255,this.canvas_.width=1,this.canvas_.height=1):(f=this.ctx.getImageData(g,f,b,c),this.canvas_.width=b,this.canvas_.height=
c);this.ctx_.putImageData(f,0,0)};
Entry.Painter.prototype.showInputField=function(c){this.inputField?(Entry.dispatchEvent("textUpdate"),delete this.inputField):(this.initCommand(),this.doCommand(),this.inputField=new CanvasInput({canvas:document.getElementById("entryPainterCanvas"),fontSize:20,fontFamily:this.font.name,fontColor:"#000",width:650,padding:8,borderWidth:1,borderColor:"#000",borderRadius:3,boxShadow:"1px 1px 0px #fff",innerShadow:"0px 0px 5px rgba(0, 0, 0, 0.5)",x:c.stageX,y:c.stageY,onsubmit:function(){Entry.dispatchEvent("textUpdate")}}),
this.inputField.show())};Entry.Painter.prototype.addPicture=function(c){this.initCommand();var b=new Image;b.id=Entry.generateHash();b.src=c.fileurl?c.fileurl:Entry.defaultPath+"/uploads/"+c.filename.substring(0,2)+"/"+c.filename.substring(2,4)+"/image/"+c.filename+".png";var d=this;b.onload=function(b){d.addImage(b.target);d.selectToolbox("cursor")}};
Entry.Painter.prototype.initCoordinator=function(){var c=new createjs.Container,b=new createjs.Bitmap(Entry.mediaFilePath+"/workspace_coordinate.png");c.addChild(b);this.stage.addChild(c);c.visible=!1;this.coordinator=c};Entry.Painter.prototype.toggleCoordinator=function(){this.coordinator.visible=!this.coordinator.visible;this.stage.update()};
Entry.Painter.prototype.initDashedLine=function(){createjs.Graphics.prototype.dashedLineTo=function(c,b,d,e,f){this.moveTo(c,b);var g=d-c,h=e-b;f=Math.floor(Math.sqrt(g*g+h*h)/f);for(var g=g/f,h=h/f,k=0;k++<f;)c+=g,b+=h,this[0===k%2?"moveTo":"lineTo"](c,b);this[0===k%2?"moveTo":"lineTo"](d,e);return this};createjs.Graphics.prototype.drawDashedRect=function(c,b,d,e,f){this.moveTo(c,b);d=c+d;e=b+e;this.dashedLineTo(c,b,d,b,f);this.dashedLineTo(d,b,d,e,f);this.dashedLineTo(d,e,c,e,f);this.dashedLineTo(c,
e,c,b,f);return this};createjs.Graphics.prototype.drawResizableDashedRect=function(c,b,d,e,f,g){this.moveTo(c,b);d=c+d;e=b+e;this.dashedLineTo(c+g,b,d-g,b,f);this.dashedLineTo(d,b+g,d,e-g,f);this.dashedLineTo(d-g,e,c+g,e,f);this.dashedLineTo(c,e-g,c,b+g,f);return this}};
Entry.Painter.prototype.generateView=function(c){var b=this;this.view_=c;if(!Entry.type||"workspace"==Entry.type){this.view_.addClass("entryPainterWorkspace");var d=Entry.createElement("div","entryPainterTop");d.addClass("entryPlaygroundPainterTop");this.view_.appendChild(d);var e=Entry.createElement("div","entryPainterToolbox");e.addClass("entryPlaygroundPainterToolbox");this.view_.appendChild(e);var f=Entry.createElement("div","entryPainterToolboxTop");f.addClass("entryPainterToolboxTop");e.appendChild(f);
var g=Entry.createElement("div","entryPainterContainer");g.addClass("entryPlaygroundPainterContainer");this.view_.appendChild(g);f=Entry.createElement("canvas","entryPainterCanvas");f.width=960;f.height=540;f.addClass("entryPlaygroundPainterCanvas");g.appendChild(f);f=Entry.createElement("canvas","entryPainterCanvas_");f.addClass("entryRemove");f.width=960;f.height=540;g.appendChild(f);var h=Entry.createElement("div","entryPainterAttr");h.addClass("entryPlaygroundPainterAttr");this.view_.appendChild(h);
this.flipObject=Entry.createElement("div","entryPictureFlip");this.flipObject.addClass("entryPlaygroundPainterFlip");h.appendChild(this.flipObject);f=Entry.createElement("div","entryPictureFlipX");f.title="\uc88c\uc6b0\ub4a4\uc9d1\uae30";f.bindOnClick(function(){b.selectedObject&&(b.selectedObject.scaleX*=-1,b.selectedObject.text?b.selectTextObject(b.selectedObject):b.selectObject(b.selectedObject),b.updateImageHandle(),b.stage.update())});f.addClass("entryPlaygroundPainterFlipX");this.flipObject.appendChild(f);
f=Entry.createElement("div","entryPictureFlipY");f.title="\uc0c1\ud558\ub4a4\uc9d1\uae30";f.bindOnClick(function(){b.selectedObject&&(b.selectedObject.scaleY*=-1,b.selectedObject.text?b.selectTextObject(b.selectedObject):b.selectObject(b.selectedObject),b.updateImageHandle(),b.stage.update())});f.addClass("entryPlaygroundPainterFlipY");this.flipObject.appendChild(f);Entry.addEventListener("windowResized",function(b){var d=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;
b=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;var e=parseInt(document.getElementById("entryCanvas").style.width),d=d-(e+240),e=b-349;c.style.width=d+"px";g.style.width=d-54+"px";g.style.height=e+"px";h.style.top=e+30+"px";h.style.height=b-e+"px"});var k=Entry.createElement("nav","entryPainterTopMenu");k.addClass("entryPlaygroundPainterTopMenu");d.appendChild(k);f=Entry.createElement("ul");k.appendChild(f);var l=Entry.createElement("li");k.appendChild(l);k=
Entry.createElement("a","entryPainterTopMenuFileNew");k.bindOnClick(function(){b.newPicture()});k.addClass("entryPlaygroundPainterTopMenuFileNew");k.innerHTML=Lang.Workspace.new_picture;l.appendChild(k);k=Entry.createElement("li","entryPainterTopMenuFile");k.addClass("entryPlaygroundPainterTopMenuFile");k.innerHTML=Lang.Workspace.painter_file;f.appendChild(k);l=Entry.createElement("ul");k.appendChild(l);k=Entry.createElement("li");l.appendChild(k);var m=Entry.createElement("a","entryPainterTopMenuFileSave");
m.bindOnClick(function(){b.file_save(!1)});m.addClass("entryPainterTopMenuFileSave");m.innerHTML=Lang.Workspace.painter_file_save;k.appendChild(m);k=Entry.createElement("li");l.appendChild(k);l=Entry.createElement("a","entryPainterTopMenuFileSaveAs");l.bindOnClick(function(){b.file.mode="new";b.file_save(!1)});l.addClass("entryPlaygroundPainterTopMenuFileSaveAs");l.innerHTML=Lang.Workspace.painter_file_saveas;k.appendChild(l);l=Entry.createElement("li","entryPainterTopMenuEdit");l.addClass("entryPlaygroundPainterTopMenuEdit");
l.innerHTML=Lang.Workspace.painter_edit;f.appendChild(l);f=Entry.createElement("ul");l.appendChild(f);l=Entry.createElement("li");f.appendChild(l);k=Entry.createElement("a","entryPainterTopMenuEditImportLink");k.bindOnClick(function(){Entry.dispatchEvent("openPictureImport")});k.addClass("entryPainterTopMenuEditImport");k.innerHTML=Lang.Workspace.get_file;l.appendChild(k);l=Entry.createElement("li");f.appendChild(l);k=Entry.createElement("a","entryPainterTopMenuEditCopy");k.bindOnClick(function(){b.edit_copy()});
k.addClass("entryPlaygroundPainterTopMenuEditCopy");k.innerHTML=Lang.Workspace.copy_file;l.appendChild(k);l=Entry.createElement("li");f.appendChild(l);k=Entry.createElement("a","entryPainterTopMenuEditCut");k.bindOnClick(function(){b.edit_cut()});k.addClass("entryPlaygroundPainterTopMenuEditCut");k.innerHTML=Lang.Workspace.cut_picture;l.appendChild(k);l=Entry.createElement("li");f.appendChild(l);k=Entry.createElement("a","entryPainterTopMenuEditPaste");k.bindOnClick(function(){b.edit_paste()});k.addClass("entryPlaygroundPainterTopMenuEditPaste");
k.innerHTML=Lang.Workspace.paste_picture;l.appendChild(k);l=Entry.createElement("li");f.appendChild(l);f=Entry.createElement("a","entryPainterTopMenuEditEraseAll");f.addClass("entryPlaygroundPainterTopMenuEditEraseAll");f.innerHTML=Lang.Workspace.remove_all;f.bindOnClick(function(){b.clearCanvas()});l.appendChild(f);this.painterTopStageXY=f=Entry.createElement("div","entryPainterTopStageXY");f.addClass("entryPlaygroundPainterTopStageXY");d.appendChild(f);f=Entry.createElement("ul","entryPainterTopToolbar");
f.addClass("entryPlaygroundPainterTopToolbar");d.appendChild(f);d=Entry.createElement("li","entryPainterTopToolbarUndo");d.bindOnClick(function(){});d.addClass("entryPlaygroundPainterTopToolbar");f.appendChild(d);d=Entry.createElement("li","entryPainterTopToolbarRedo");d.bindOnClick(function(){});d.addClass("entryPlaygroundPainterTopToolbar");f.appendChild(d);d=Entry.createElement("ul");d.addClass("entryPlaygroundPainterToolboxContainer");e.appendChild(d);this.toolboxCursor=Entry.createElement("li",
"entryPainterToolboxCursor");this.toolboxCursor.title="\uc774\ub3d9";this.toolboxCursor.bindOnClick(function(){b.selectToolbox("cursor")});this.toolboxCursor.addClass("entryPlaygroundPainterToolboxCursor");d.appendChild(this.toolboxCursor);this.toolboxSelect=Entry.createElement("li","entryPainterToolboxSelect");this.toolboxSelect.title="\uc790\ub974\uae30";this.toolboxSelect.bindOnClick(function(){b.selectToolbox("select")});this.toolboxSelect.addClass("entryPlaygroundPainterToolboxSelect");d.appendChild(this.toolboxSelect);
this.toolboxPen=Entry.createElement("li","entryPainterToolboxPen");this.toolboxPen.title="\ud39c";this.toolboxPen.bindOnClick(function(){b.selectToolbox("pen")});this.toolboxPen.addClass("entryPlaygroundPainterToolboxPen");d.appendChild(this.toolboxPen);this.toolboxLine=Entry.createElement("li","entryPainterToolboxLine");this.toolboxLine.title="\uc9c1\uc120";this.toolboxLine.bindOnClick(function(){b.selectToolbox("line")});this.toolboxLine.addClass("entryPlaygroundPainterToolboxLine");d.appendChild(this.toolboxLine);
this.toolboxRect=Entry.createElement("li","entryPainterToolboxRect");this.toolboxRect.title="\uc0ac\uac01\ud615";this.toolboxRect.bindOnClick(function(){b.selectToolbox("rect")});this.toolboxRect.addClass("entryPlaygroundPainterToolboxRect");d.appendChild(this.toolboxRect);this.toolboxCircle=Entry.createElement("li","entryPainterToolboxCircle");this.toolboxCircle.title="\uc6d0";this.toolboxCircle.bindOnClick(function(){b.selectToolbox("circle")});this.toolboxCircle.addClass("entryPlaygroundPainterToolboxCircle");
d.appendChild(this.toolboxCircle);this.toolboxText=Entry.createElement("li","entryPainterToolboxText");this.toolboxText.title="\uae00\uc0c1\uc790";this.toolboxText.bindOnClick(function(){b.selectToolbox("text")});this.toolboxText.addClass("entryPlaygroundPainterToolboxText");d.appendChild(this.toolboxText);this.toolboxFill=Entry.createElement("li","entryPainterToolboxFill");this.toolboxFill.bindOnClick(function(){b.selectToolbox("fill")});this.toolboxFill.addClass("entryPlaygroundPainterToolboxFill");
d.appendChild(this.toolboxFill);this.toolboxErase=Entry.createElement("li","entryPainterToolboxErase");this.toolboxErase.title="\uc9c0\uc6b0\uae30";this.toolboxErase.bindOnClick(function(){b.selectToolbox("erase")});this.toolboxErase.addClass("entryPlaygroundPainterToolboxErase");d.appendChild(this.toolboxErase);e=Entry.createElement("li","entryPainterToolboxCoordinate");e.title="\uc88c\ud45c";e.bindOnClick(function(){b.toggleCoordinator()});e.addClass("entryPlaygroundPainterToolboxCoordinate");d.appendChild(e);
this.attrResizeArea=Entry.createElement("fieldset","painterAttrResize");this.attrResizeArea.addClass("entryPlaygroundPainterAttrResize");h.appendChild(this.attrResizeArea);e=Entry.createElement("legend");e.innerHTML=Lang.Workspace.picture_size;this.attrResizeArea.appendChild(e);e=Entry.createElement("div","painterAttrWrapper");e.addClass("painterAttrWrapper");this.attrResizeArea.appendChild(e);d=Entry.createElement("div");d.addClass("entryPlaygroundPainterAttrResizeX");e.appendChild(d);f=Entry.createElement("div");
f.addClass("entryPlaygroundPainterAttrResizeXTop");f.innerHTML="X";d.appendChild(f);this.objectWidthInput=Entry.createElement("input","entryPainterAttrWidth");this.objectWidthInput.onblur=function(){if(!Entry.Utils.isNumber(this.value))return alert("\uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."),!1;b.handle.width=this.value;b.updateImageHandle()};this.objectWidthInput.addClass("entryPlaygroundPainterNumberInput");d.appendChild(this.objectWidthInput);d=Entry.createElement("div");
d.addClass("entryPlaygroundPainterSizeText");d.innerHTML="x";e.appendChild(d);d=Entry.createElement("div");d.addClass("entryPlaygroundAttrReiszeY");e.appendChild(d);e=Entry.createElement("div");e.addClass("entryPlaygroundPainterAttrResizeYTop");e.innerHTML="Y";d.appendChild(e);this.objectHeightInput=Entry.createElement("input","entryPainterAttrHeight");this.objectHeightInput.onblur=function(){if(!Entry.Utils.isNumber(this.value))return alert("\uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."),
!1;b.handle.height=this.value;b.updateImageHandle()};this.objectHeightInput.addClass("entryPlaygroundPainterNumberInput");d.appendChild(this.objectHeightInput);this.attrRotateArea=Entry.createElement("div","painterAttrRotateArea");this.attrRotateArea.addClass("painterAttrRotateArea");h.appendChild(this.attrRotateArea);e=Entry.createElement("div");e.addClass("painterAttrRotateName");e.innerHTML=Lang.Workspace.picture_rotation;this.attrRotateArea.appendChild(e);e=Entry.createElement("fieldset","entryPainterAttrRotate");
e.addClass("entryPlaygroundPainterAttrRotate");this.attrRotateArea.appendChild(e);d=Entry.createElement("div");d.addClass("painterAttrRotateTop");d.innerHTML="\u03bf";e.appendChild(d);this.objectRotateInput=Entry.createElement("input","entryPainterAttrDegree");this.objectRotateInput.onblur=function(){if(!Entry.Utils.isNumber(this.value))return alert("\uc22b\uc790\ub9cc \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4."),!1;360<=this.value?this.value%=360:0>this.value&&(this.value=360+this.value%360);b.handle.rotation=
this.value;b.updateImageHandle()};this.objectRotateInput.addClass("entryPlaygroundPainterNumberInput");this.objectRotateInput.defaultValue="0";e.appendChild(this.objectRotateInput);this.attrColorArea=Entry.createElement("fieldset","entryPainterAttrColor");this.attrColorArea.addClass("entryPlaygroundPainterAttrColor");h.appendChild(this.attrColorArea);var q=Entry.createElement("div");q.addClass("entryPlaygroundPainterAttrColorContainer");this.attrColorArea.appendChild(q);this.attrCircleArea=Entry.createElement("div");
this.attrCircleArea.addClass("painterAttrCircleArea");h.appendChild(this.attrCircleArea);e=Entry.createElement("div","entryPainterAttrCircle");e.addClass("painterAttrCircle");this.attrCircleArea.appendChild(e);this.attrCircleArea.painterAttrCircle=e;e=Entry.createElement("input","entryPainterAttrCircleInput");e.value="#000000";e.addClass("painterAttrCircleInput");this.attrCircleArea.appendChild(e);this.attrColorSpoid=Entry.createElement("div");this.attrColorSpoid.bindOnClick(function(){b.selectToolbox("spoid")});
this.attrColorSpoid.addClass("painterAttrColorSpoid");h.appendChild(this.attrColorSpoid);Entry.getColourCodes().forEach(function(c){var d=Entry.createElement("div");d.addClass("entryPlaygroundPainterAttrColorElement");"transparent"===c?d.style.backgroundImage="url("+(Entry.mediaFilePath+"/transparent.png")+")":d.style.backgroundColor=c;d.bindOnClick(function(d){"transparent"===c?(b.stroke.transparent=!0,b.stroke.lineColor="#ffffff"):(b.stroke.transparent=!1,v&&(document.getElementById("entryPainterShapeBackgroundColor").style.backgroundColor=
c,b.stroke.fillColor=c),v||(document.getElementById("entryPainterShapeLineColor").style.backgroundColor=c,b.stroke.lineColor=c));document.getElementById("entryPainterAttrCircle").style.backgroundColor=b.stroke.lineColor;document.getElementById("entryPainterAttrCircleInput").value=c});q.appendChild(d)});this.attrThickArea=Entry.createElement("div","painterAttrThickArea");this.attrThickArea.addClass("entryPlaygroundentryPlaygroundPainterAttrThickArea");h.appendChild(this.attrThickArea);e=Entry.createElement("legend");
e.addClass("painterAttrThickName");e.innerHTML=Lang.Workspace.thickness;this.attrThickArea.appendChild(e);var n=Entry.createElement("fieldset","entryPainterAttrThick");n.addClass("entryPlaygroundPainterAttrThick");this.attrThickArea.appendChild(n);e=Entry.createElement("div");e.addClass("paintAttrThickTop");n.appendChild(e);f=Entry.createElement("select","entryPainterAttrThick");f.addClass("entryPlaygroundPainterAttrThickInput");f.size="1";f.onchange=function(c){b.stroke.thickness=c.target.value};
for(e=1;10>=e;e++)d=Entry.createElement("option"),d.value=e,d.innerHTML=e,f.appendChild(d);n.appendChild(f);e=Entry.createElement("div","entryPainterShapeLineColor");e.addClass("painterAttrShapeLineColor");d=Entry.createElement("div","entryPainterShapeInnerBackground");d.addClass("painterAttrShapeInnerBackground");e.appendChild(d);n.appendChild(e);this.attrThickArea.painterAttrShapeLineColor=e;n.bindOnClick(function(){t.style.zIndex="1";this.style.zIndex="10";v=!1});this.attrBackgroundArea=Entry.createElement("div",
"painterAttrBackgroundArea");this.attrBackgroundArea.addClass("entryPlaygroundPainterBackgroundArea");h.appendChild(this.attrBackgroundArea);e=Entry.createElement("fieldset","entryPainterAttrbackground");e.addClass("entryPlaygroundPainterAttrBackground");this.attrBackgroundArea.appendChild(e);d=Entry.createElement("div");d.addClass("paintAttrBackgroundTop");e.appendChild(d);var t=Entry.createElement("div","entryPainterShapeBackgroundColor");t.addClass("painterAttrShapeBackgroundColor");this.attrBackgroundArea.painterAttrShapeBackgroundColor=
t;d.appendChild(t);var v=!1;t.bindOnClick(function(b){n.style.zIndex="1";this.style.zIndex="10";v=!0});this.attrFontArea=Entry.createElement("div","painterAttrFont");this.attrFontArea.addClass("entryPlaygroundPainterAttrFont");h.appendChild(this.attrFontArea);f=Entry.createElement("div");f.addClass("entryPlaygroundPainterAttrTop");this.attrFontArea.appendChild(f);e=Entry.createElement("div");e.addClass("entryPlaygroundPaintAttrTop_");f.appendChild(e);e=Entry.createElement("legend");e.addClass("panterAttrFontTitle");
e.innerHTML=Lang.Workspace.textStyle;l=Entry.createElement("select","entryPainterAttrFontName");l.addClass("entryPlaygroundPainterAttrFontName");l.size="1";l.onchange=function(c){b.font.name=c.target.value};for(e=0;e<Entry.fonts.length;e++)k=Entry.fonts[e],d=Entry.createElement("option"),d.value=k.family,d.innerHTML=k.name,l.appendChild(d);f.appendChild(l);f=Entry.createElement("div");f.addClass("painterAttrFontSizeArea");this.attrFontArea.appendChild(f);e=Entry.createElement("div");e.addClass("painterAttrFontSizeTop");
f.appendChild(e);l=Entry.createElement("select","entryPainterAttrFontSize");l.addClass("entryPlaygroundPainterAttrFontSize");l.size="1";l.onchange=function(c){b.font.size=c.target.value};for(e=20;72>=e;e++)d=Entry.createElement("option"),d.value=e,d.innerHTML=e,l.appendChild(d);f.appendChild(l);f=Entry.createElement("div");f.addClass("entryPlaygroundPainterAttrFontStyleArea");this.attrFontArea.appendChild(f);e=Entry.createElement("div");e.addClass("entryPlaygroundPainterAttrFontTop");f.appendChild(e);
l=Entry.createElement("select","entryPainterAttrFontStyle");l.addClass("entryPlaygroundPainterAttrFontStyle");l.size="1";l.onchange=function(c){b.font.style=c.target.value};k=[{label:"\ubcf4\ud1b5",value:"normal"},{label:"\uad75\uac8c",value:"bold"},{label:"\uae30\uc6b8\uc784",value:"italic"}];for(e=0;e<k.length;e++)m=k[e],d=Entry.createElement("option"),d.value=m.value,d.innerHTML=m.label,l.appendChild(d);f.appendChild(l);this.attrLineArea=Entry.createElement("div","painterAttrLineStyle");this.attrLineArea.addClass("entryPlaygroundPainterAttrLineStyle");
h.appendChild(this.attrLineArea);var y=Entry.createElement("div");y.addClass("entryPlaygroundPainterAttrLineStyleLine");this.attrLineArea.appendChild(y);var x=Entry.createElement("div");x.addClass("entryPlaygroundPaitnerAttrLineArea");this.attrLineArea.appendChild(x);e=Entry.createElement("div");e.addClass("entryPlaygroundPainterAttrLineStyleLine1");x.appendChild(e);e.value="line";var r=Entry.createElement("div");r.addClass("painterAttrLineStyleBackgroundLine");y.bindOnClick(function(b){x.removeClass("entryRemove")});
x.blur=function(b){this.addClass("entryRemove")};x.onmouseleave=function(b){this.addClass("entryRemove")};e.bindOnClick(function(b){this.attrLineArea.removeClass(y);this.attrLineArea.appendChild(r);this.attrLineArea.onchange(b);x.blur()});r.bindOnClick(function(b){x.removeClass("entryRemove")});this.attrLineArea.onchange=function(c){b.stroke.style=c.target.value};x.blur()}};Entry.Painter.prototype.restoreHandle=function(){this.selectedObject&&!1===this.handle.visible&&(this.handle.visible=!0,this.stage.update())};
Entry.Painter.prototype.initDisplay=function(){this.stroke.enabled=!1;this.toolboxCursor.addClass("entryPlaygroundPainterToolboxCursor");this.toolboxCursor.removeClass("entryToolboxCursorClicked");this.toolboxSelect.addClass("entryPlaygroundPainterToolboxSelect");this.toolboxSelect.removeClass("entryToolboxSelectClicked");this.toolboxPen.addClass("entryPlaygroundPainterToolboxPen");this.toolboxPen.removeClass("entryToolboxPenClicked");this.toolboxLine.addClass("entryPlaygroundPainterToolboxLine");
this.toolboxLine.removeClass("entryToolboxLineClicked");this.toolboxRect.addClass("entryPlaygroundPainterToolboxRect");this.toolboxRect.removeClass("entryToolboxRectClicked");this.toolboxCircle.addClass("entryPlaygroundPainterToolboxCircle");this.toolboxCircle.removeClass("entryToolBoxCircleClicked");this.toolboxText.addClass("entryPlaygroundPainterToolboxText");this.toolboxText.removeClass("entryToolBoxTextClicked");this.toolboxFill.addClass("entryPlaygroundPainterToolboxFill");this.toolboxFill.removeClass("entryToolBoxFillClicked");
this.toolboxErase.addClass("entryPlaygroundPainterToolboxErase");this.toolboxErase.removeClass("entryToolBoxEraseClicked");this.attrColorSpoid.addClass("painterAttrColorSpoid");this.attrColorSpoid.removeClass("painterAttrColorSpoidClicked");this.attrResizeArea.addClass("entryRemove");this.attrRotateArea.addClass("entryRemove");this.attrThickArea.addClass("entryRemove");this.attrFontArea.addClass("entryRemove");this.attrLineArea.addClass("entryRemove");this.attrColorArea.addClass("entryRemove");this.attrCircleArea.addClass("entryRemove");
this.attrColorSpoid.addClass("entryRemove");this.attrFontArea.addClass("entryRemove");this.attrBackgroundArea.addClass("entryRemove");this.flipObject.addClass("entryRemove");this.attrThickArea.painterAttrShapeLineColor.addClass("entryRemove");this.attrBackgroundArea.painterAttrShapeBackgroundColor.addClass("entryRemove");this.attrCircleArea.painterAttrCircle.addClass("entryRemove");this.inputField&&!this.inputField._isHidden&&(this.inputField.hide(),this.stage.update())};
Entry.Painter.prototype.selectToolbox=function(c){this.toolbox.selected=c;"erase"!=c&&$(".entryPlaygroundPainterContainer").removeClass("dd");this.initDisplay();"cursor"!==c&&this.clearHandle();"text"!==c&&this.inputField&&delete this.inputField;switch(c){case "cursor":this.restoreHandle();this.toolboxCursor.addClass("entryToolboxCursorClicked");this.attrResizeArea.removeClass("entryRemove");this.attrRotateArea.removeClass("entryRemove");this.flipObject.removeClass("entryRemove");break;case "select":this.toolboxSelect.addClass("entryToolboxSelectClicked");
break;case "pen":this.toolboxPen.addClass("entryToolboxPenClicked");this.attrThickArea.removeClass("entryRemove");this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");this.attrColorSpoid.removeClass("entryRemove");this.attrThickArea.painterAttrShapeLineColor.removeClass("entryRemove");break;case "line":this.toolboxLine.addClass("entryToolboxLineClicked");this.attrThickArea.removeClass("entryRemove");this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");
this.attrColorSpoid.removeClass("entryRemove");this.attrThickArea.painterAttrShapeLineColor.removeClass("entryRemove");break;case "rect":this.toolboxRect.addClass("entryToolboxRectClicked");this.attrThickArea.removeClass("entryRemove");this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");this.attrColorSpoid.removeClass("entryRemove");this.attrBackgroundArea.removeClass("entryRemove");this.attrThickArea.painterAttrShapeLineColor.removeClass("entryRemove");this.attrBackgroundArea.painterAttrShapeBackgroundColor.removeClass("entryRemove");
break;case "circle":this.toolboxCircle.addClass("entryToolBoxCircleClicked");this.attrThickArea.removeClass("entryRemove");this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");this.attrColorSpoid.removeClass("entryRemove");this.attrThickArea.painterAttrShapeLineColor.removeClass("entryRemove");this.attrBackgroundArea.removeClass("entryRemove");this.attrBackgroundArea.painterAttrShapeBackgroundColor.removeClass("entryRemove");break;case "text":this.toolboxText.addClass("entryToolBoxTextClicked");
this.attrFontArea.removeClass("entryRemove");this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");this.attrColorSpoid.removeClass("entryRemove");this.attrCircleArea.painterAttrCircle.removeClass("entryRemove");break;case "fill":this.toolboxFill.addClass("entryToolBoxFillClicked");this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");this.attrColorSpoid.removeClass("entryRemove");this.attrCircleArea.painterAttrCircle.removeClass("entryRemove");
break;case "erase":$(".entryPlaygroundPainterContainer").addClass("dd");this.toolboxErase.addClass("entryToolBoxEraseClicked");this.attrThickArea.removeClass("entryRemove");break;case "spoid":this.attrColorArea.removeClass("entryRemove");this.attrCircleArea.removeClass("entryRemove");this.attrColorSpoid.removeClass("entryRemove");this.attrColorSpoid.removeClass("painterAttrColorSpoid");this.attrColorSpoid.addClass("painterAttrColorSpoidClicked");break;case "coordinate":this.toggleCoordinator()}};Entry.Painter2=function(c){this.view=c;this.baseUrl=Entry.painterBaseUrl||"/lib/literallycanvas/lib/img";this.file={id:Entry.generateHash(),name:"\uc0c8\uadf8\ub9bc",modified:!1,mode:"new"};Entry.addEventListener("pictureImport",function(b){this.addPicture(b)}.bind(this));this.clipboard=null};
(function(c){c.initialize=function(){if(!this.lc){var b=this.baseUrl,c=new Image;c.src=b+"/transparent-pattern.png";this.lc=LC.init(this.view,{imageURLPrefix:b,zoomMax:3,zoomMin:.5,toolbarPosition:"bottom",imageSize:{width:960,height:540},backgroundShapes:[LC.createShape("Rectangle",{x:0,y:0,width:960,height:540,strokeWidth:0,strokeColor:"transparent"})]});c.onload=function(){this.lc.repaintLayer("background")}.bind(this);b=function(b){b&&(b.shape&&!b.opts&&b.shape.isPass||b.opts&&b.opts.isPass)?
Entry.do("processPicture",b,this.lc):Entry.do("editPicture",b,this.lc);this.file.modified=!0}.bind(this);this.lc.on("clear",b);this.lc.on("remove",b);this.lc.on("shapeEdit",b);this.lc.on("shapeSave",b);this.lc.on("toolChange",function(b){this.updateEditMenu()}.bind(this));this.lc.on("lc-pointerdrag",this.stagemousemove.bind(this));this.lc.on("lc-pointermove",this.stagemousemove.bind(this));this.initTopBar();this.updateEditMenu();Entry.keyPressed&&Entry.keyPressed.attach(this,this._keyboardPressControl);
Entry.keyUpped&&Entry.keyUpped.attach(this,this._keyboardUpControl)}};c.show=function(){this.lc||this.initialize();this.isShow=!0};c.hide=function(){this.isShow=!1};c.changePicture=function(b){this.file&&this.file.id===b.id||(this.file.modified&&confirm("\uc218\uc815\ub41c \ub0b4\uc6a9\uc744 \uc800\uc7a5\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&this.file_save(!0),this.file.modified=!1,this.lc.clear(!1),this.file.id=b.id?b.id:Entry.generateHash(),this.file.name=b.name,this.file.mode="edit",this.addPicture(b,
!0),this.lc.undoStack=[],Entry.stateManager.removeAllPictureCommand())};c.addPicture=function(b,c){var d=new Image;d.src=b.fileurl?b.fileurl:Entry.defaultPath+"/uploads/"+b.filename.substring(0,2)+"/"+b.filename.substring(2,4)+"/image/"+b.filename+".png";b=b.dimension;var f=LC.createShape("Image",{x:480,y:270,width:b.width,height:b.height,image:d});this.lc.saveShape(f,!c);d.onload=function(){this.lc.setTool(this.lc.tools.SelectShape);this.lc.tool.setShape(this.lc,f)}.bind(this)};c.copy=function(){if("SelectShape"===
this.lc.tool.name&&this.lc.tool.selectedShape){var b=this.lc.tool.selectedShape;this.clipboard={className:b.className,data:b.toJSON()};this.updateEditMenu()}};c.cut=function(){"SelectShape"===this.lc.tool.name&&this.lc.tool.selectedShape&&(this.copy(),this.lc.removeShape(this.lc.tool.selectedShape),this.lc.tool.setShape(this.lc,null))};c.paste=function(){if(this.clipboard){var b=this.lc.addShape(this.clipboard);this.lc.setTool(this.lc.tools.SelectShape);this.lc.tool.setShape(this.lc,b)}};c.updateEditMenu=
function(){var b="SelectShape"===this.lc.tool.name?"block":"none";this._cutButton.style.display=b;this._copyButton.style.display=b;this._pasteButton.style.display=this.clipboard?"block":"none"};c.file_save=function(){this.lc.trigger("dispose");var b=this.lc.getImage().toDataURL();this.file_=JSON.parse(JSON.stringify(this.file));Entry.dispatchEvent("saveCanvasImage",{file:this.file_,image:b});this.file.modified=!1};c.newPicture=function(){var b={dimension:{height:1,width:1},fileurl:Entry.mediaFilePath+
"_1x1.png",name:Lang.Workspace.new_picture};b.id=Entry.generateHash();Entry.playground.addPicture(b,!0)};c._keyboardPressControl=function(b){if(this.isShow&&!Entry.Utils.isInInput(b)){var c=b.keyCode||b.which,e=b.ctrlKey;8==c||46==c?(this.cut(),b.preventDefault()):e&&(67==c?this.copy():88==c&&this.cut());e&&86==c&&this.paste();this.lc.trigger("keyDown",b)}};c._keyboardUpControl=function(b){this.lc.trigger("keyUp",b)};c.initTopBar=function(){var b=this,c=Entry.createElement(document.getElementById("canvas-top-menu"));
c.addClass("entryPlaygroundPainterTop");c.addClass("entryPainterTop");var e=Entry.createElement("nav","entryPainterTopMenu");e.addClass("entryPlaygroundPainterTopMenu");c.appendChild(e);var f=Entry.createElement("ul");e.appendChild(f);var g=Entry.createElement("li");e.appendChild(g);e=Entry.createElement("a","entryPainterTopMenuFileNew");e.bindOnClick(function(){b.newPicture()});e.addClass("entryPlaygroundPainterTopMenuFileNew");e.innerHTML=Lang.Workspace.new_picture;g.appendChild(e);e=Entry.createElement("li",
"entryPainterTopMenuFile");e.addClass("entryPlaygroundPainterTopMenuFile");e.innerHTML=Lang.Workspace.painter_file;f.appendChild(e);g=Entry.createElement("ul");e.appendChild(g);e=Entry.createElement("li");g.appendChild(e);var h=Entry.createElement("a","entryPainterTopMenuFileSave");h.bindOnClick(function(){b.file_save(!1)});h.addClass("entryPainterTopMenuFileSave");h.innerHTML=Lang.Workspace.painter_file_save;e.appendChild(h);e=Entry.createElement("li");g.appendChild(e);g=Entry.createElement("a",
"entryPainterTopMenuFileSaveAs");g.bindOnClick(function(){b.file.mode="new";b.file_save(!1)});g.addClass("entryPlaygroundPainterTopMenuFileSaveAs");g.innerHTML=Lang.Workspace.painter_file_saveas;e.appendChild(g);g=Entry.createElement("li","entryPainterTopMenuEdit");g.addClass("entryPlaygroundPainterTopMenuEdit");g.innerHTML=Lang.Workspace.painter_edit;f.appendChild(g);f=Entry.createElement("ul");g.appendChild(f);g=Entry.createElement("li");f.appendChild(g);e=Entry.createElement("a","entryPainterTopMenuEditImportLink");
e.bindOnClick(function(){Entry.dispatchEvent("openPictureImport")});e.addClass("entryPainterTopMenuEditImport");e.innerHTML=Lang.Workspace.get_file;g.appendChild(e);g=Entry.createElement("li");f.appendChild(g);e=Entry.createElement("a","entryPainterTopMenuEditCopy");e.bindOnClick(function(){b.copy()});e.addClass("entryPlaygroundPainterTopMenuEditCopy");e.innerHTML=Lang.Workspace.copy_file;g.appendChild(e);this._copyButton=g;g=Entry.createElement("li");f.appendChild(g);e=Entry.createElement("a","entryPainterTopMenuEditCut");
e.bindOnClick(function(){b.cut()});e.addClass("entryPlaygroundPainterTopMenuEditCut");e.innerHTML=Lang.Workspace.cut_picture;g.appendChild(e);this._cutButton=g;g=Entry.createElement("li");f.appendChild(g);e=Entry.createElement("a","entryPainterTopMenuEditPaste");e.bindOnClick(function(){b.paste()});e.addClass("entryPlaygroundPainterTopMenuEditPaste");e.innerHTML=Lang.Workspace.paste_picture;g.appendChild(e);this._pasteButton=g;g=Entry.createElement("li");f.appendChild(g);f=Entry.createElement("a",
"entryPainterTopMenuEditEraseAll");f.addClass("entryPlaygroundPainterTopMenuEditEraseAll");f.innerHTML=Lang.Workspace.remove_all;f.bindOnClick(function(){b.lc.clear()});g.appendChild(f);this.painterTopStageXY=f=Entry.createElement("div","entryPainterTopStageXY");f.addClass("entryPlaygroundPainterTopStageXY");c.appendChild(f);Entry.addEventListener("pictureSelected",this.changePicture.bind(this))};c.stagemousemove=function(b){this.painterTopStageXY.textContent="x:"+b.x.toFixed(1)+", y:"+b.y.toFixed(1)}})(Entry.Painter2.prototype);Entry.BlockParser=function(c){this.syntax=c;this._iterVariableCount=0;this._iterVariableChunk=["i","j","k"]};
(function(c){c.Code=function(b){if(b instanceof Entry.Thread)return this.Thread(b);if(b instanceof Entry.Block)return this.Block(b);var c="";b=b.getThreads();for(var e=0;e<b.length;e++)c+=this.Thread(b[e]);return c};c.Thread=function(b){if(b instanceof Entry.Block)return this.Block(b);var c="";b=b.getBlocks();for(var e=0;e<b.length;e++)c+=this.Block(b[e]);return c};c.Block=function(b){var c=b._schema.syntax;return c?this[c[0]](b):""};c.Program=function(b){return""};c.Scope=function(b){b=b._schema.syntax.concat();
return b.splice(1,b.length-1).join(".")+"();\n"};c.BasicFunction=function(b){b=this.Thread(b.statements[0]);return"function promise() {\n"+this.indent(b)+"}\n"};c.BasicIteration=function(b){var c=b.params[0],e=this.publishIterateVariable();b=this.Thread(b.statements[0]);this.unpublishIterateVariable();return"for (var "+e+" = 0; "+e+" < "+c+"; "+e+"++){\n"+this.indent(b)+"}\n"};c.BasicIf=function(b){var c=this.Thread(b.statements[0]);return"if ("+b._schema.syntax.concat()[1]+") {\n"+this.indent(c)+
"}\n"};c.BasicWhile=function(b){var c=this.Thread(b.statements[0]);return"while ("+b._schema.syntax.concat()[1]+") {\n"+this.indent(c)+"}\n"};c.indent=function(b){var c="    ";b=b.split("\n");b.pop();return c+=b.join("\n    ")+"\n"};c.publishIterateVariable=function(){var b="",c=this._iterVariableCount;do b=this._iterVariableChunk[c%3]+b,c=parseInt(c/3)-1,0===c&&(b=this._iterVariableChunk[0]+b);while(0<c);this._iterVariableCount++;return b};c.unpublishIterateVariable=function(){this._iterVariableCount&&
this._iterVariableCount--}})(Entry.BlockParser.prototype);Entry.JSParser=function(c){this.syntax=c;this.scopeChain=[];this.scope=null};
(function(c){c.Program=function(b){var c=[],e=[];e.push({type:this.syntax.Program});var f=this.initScope(b),e=e.concat(this.BlockStatement(b));this.unloadScope();c.push(e);return c=c.concat(f)};c.Identifier=function(b,c){return c?c[b.name]:this.scope[b.name]};c.ExpressionStatement=function(b){b=b.expression;return this[b.type](b)};c.ForStatement=function(b){var c=b.init,e=b.test,f=b.update,g=b.body;if(this.syntax.ForStatement)throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};
var g=this[g.type](g),c=c.declarations[0].init.value,h=e.operator,e=e.right.value,k=0;"++"!=f.operator&&(f=c,c=e,e=f);switch(h){case "<":k=e-c;break;case "<=":k=e+1-c;break;case ">":k=c-e;break;case ">=":k=c+1-e}return this.BasicIteration(b,k,g)};c.BlockStatement=function(b){var c=[];b=b.body;for(var e=0;e<b.length;e++){var f=b[e],g=this[f.type](f);if(g){if(void 0===g.type)throw{message:"\ud574\ub2f9\ud558\ub294 \ube14\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",node:f};g&&c.push(g)}}return c};c.EmptyStatement=
function(b){throw{message:"empty\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.DebuggerStatement=function(b){throw{message:"debugger\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.WithStatement=function(b){throw{message:"with\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ReturnStaement=function(b){throw{message:"return\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.LabeledStatement=function(b){throw{message:"label\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.BreakStatement=function(b){throw{message:"break\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ContinueStatement=function(b){throw{message:"continue\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.IfStatement=function(b){if(this.syntax.IfStatement)throw{message:"if\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};return this.BasicIf(b)};c.SwitchStatement=function(b){throw{message:"switch\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.SwitchCase=function(b){throw{message:"switch ~ case\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ThrowStatement=function(b){throw{message:"throw\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.TryStatement=function(b){throw{message:"try\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.CatchClause=function(b){throw{message:"catch\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.WhileStatement=function(b){var c=b.body,e=this.syntax.WhileStatement,c=this[c.type](c);if(e)throw{message:"while\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};return this.BasicWhile(b,c)};c.DoWhileStatement=function(b){throw{message:"do ~ while\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.ForInStatement=function(b){throw{message:"for ~ in\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.FunctionDeclaration=function(b){if(this.syntax.FunctionDeclaration)throw{message:"function\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};return null};c.VariableDeclaration=function(b){throw{message:"var\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};
c.ThisExpression=function(b){return this.scope.this};c.ArrayExpression=function(b){throw{message:"array\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ObjectExpression=function(b){throw{message:"object\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.Property=function(b){throw{message:"init, get, set\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.FunctionExpression=
function(b){throw{message:"function\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.UnaryExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub839\uc5b4 \uc785\ub2c8\ub2e4.",node:b};};c.UnaryOperator=function(){return"- + ! ~ typeof void delete".split(" ")};c.updateOperator=function(){return["++","--"]};c.BinaryOperator=function(){return"== != === !== < <= > >= << >> >>> + - * / % , ^ & in instanceof".split(" ")};
c.AssignmentExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub839\uc5b4 \uc785\ub2c8\ub2e4.",node:b};};c.AssignmentOperator=function(){return"= += -= *= /= %= <<= >>= >>>= ,= ^= &=".split(" ")};c.LogicalExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub839\uc5b4 \uc785\ub2c8\ub2e4.",node:b};};c.LogicalOperator=function(){return["||","&&"]};c.MemberExpression=function(b){var c=
b.object,e=b.property;console.log(c.type);c=this[c.type](c);console.log(c);e=this[e.type](e,c);if(Object(c)!==c||Object.getPrototypeOf(c)!==Object.prototype)throw{message:c+"\uc740(\ub294) \uc798\ubabb\ub41c \uba64\ubc84 \ubcc0\uc218\uc785\ub2c8\ub2e4.",node:b};c=e;if(!c)throw{message:e+"\uc774(\uac00) \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",node:b};return c};c.ConditionalExpression=function(b){throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.UpdateExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub801\uc5b4 \uc785\ub2c8\ub2e4.",node:b};};c.CallExpression=function(b){b=b.callee;return{type:this[b.type](b)}};c.NewExpression=function(b){throw{message:"new\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.SequenceExpression=function(b){throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.initScope=function(b){if(null===this.scope){var c=function(){};c.prototype=this.syntax.Scope}else c=function(){},c.prototype=this.scope;this.scope=new c;this.scopeChain.push(this.scope);return this.scanDefinition(b)};c.unloadScope=function(){this.scopeChain.pop();this.scope=this.scopeChain.length?this.scopeChain[this.scopeChain.length-1]:null};c.scanDefinition=function(b){b=b.body;for(var c=[],e=0;e<b.length;e++){var f=b[e];"FunctionDeclaration"===f.type&&(this.scope[f.id.name]=this.scope.promise,
this.syntax.BasicFunction&&(f=f.body,c.push([{type:this.syntax.BasicFunction,statements:[this[f.type](f)]}])))}return c};c.BasicFunction=function(b,c){return null};c.BasicIteration=function(b,c,e){var d=this.syntax.BasicIteration;if(!d)throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};return{params:[c],type:d,statements:[e]}};c.BasicWhile=function(b,c){var d=b.test.raw;if(this.syntax.BasicWhile[d])return{type:this.syntax.BasicWhile[d],statements:[c]};
throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b.test};};c.BasicIf=function(b){var c=b.consequent,c=this[c.type](c);try{var e="",f="==="===b.test.operator?"==":b.test.operator;if("Identifier"===b.test.left.type&&"Literal"===b.test.right.type)e=b.test.left.name+" "+f+" "+b.test.right.raw;else if("Literal"===b.test.left.type&&"Identifier"===b.test.right.type)e=b.test.right.name+" "+f+" "+b.test.left.raw;else throw Error();if(this.syntax.BasicIf[e])return Array.isArray(c)||
"object"!==typeof c||(c=[c]),{type:this.syntax.BasicIf[e],statements:[c]};throw Error();}catch(g){throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b.test};}}})(Entry.JSParser.prototype);Entry.ParserOld={};
Entry.Parser=function(c,b,d){this._mode=c;this.syntax={};this.codeMirror=d;this._lang=b||"js";this.availableCode=[];"maze"===c&&(this._stageId=Number(Ntry.configManager.getConfig("stageId")),"object"==typeof NtryData&&this.setAvailableCode(NtryData.config[this._stageId].availableCode,NtryData.player[this._stageId].code));this.mappingSyntax(c);switch(this._lang){case "js":this._parser=new Entry.JSParser(this.syntax);b=this.syntax;var e={},f;for(f in b.Scope)e[f+"();\n"]=b.Scope[f];"BasicIf"in b&&(e.front=
"BasicIf");CodeMirror.commands.javascriptComplete=function(b){CodeMirror.showHint(b,null,{globalScope:e})};d.on("keyup",function(b,c){!b.state.completionActive&&65<=c.keyCode&&95>=c.keyCode&&CodeMirror.showHint(b,null,{completeSingle:!1,globalScope:e})});break;case "block":this._parser=new Entry.BlockParser(this.syntax)}};
(function(c){c.parse=function(b){var c=null;switch(this._lang){case "js":try{var e=acorn.parse(b),c=this._parser.Program(e)}catch(f){this.codeMirror&&(f instanceof SyntaxError?(b={from:{line:f.loc.line-1,ch:f.loc.column-2},to:{line:f.loc.line-1,ch:f.loc.column+1}},f.message="\ubb38\ubc95 \uc624\ub958\uc785\ub2c8\ub2e4."):(b=this.getLineNumber(f.node.start,f.node.end),b.message=f.message,b.severity="error",this.codeMirror.markText(b.from,b.to,{className:"CodeMirror-lint-mark-error",__annotation:b,
clearOnEnter:!0})),Entry.toast.alert("Error",f.message)),c=[]}break;case "block":b=this._parser.Code(b).match(/(.*{.*[\S|\s]+?}|.+)/g),c=Array.isArray(b)?b.reduce(function(b,c,d){1===d&&(b+="\n");return(-1<c.indexOf("function")?c+b:b+c)+"\n"}):""}return c};c.getLineNumber=function(b,c){var d=this.codeMirror.getValue(),f={from:{},to:{}};b=d.substring(0,b).split(/\n/gi);f.from.line=b.length-1;f.from.ch=b[b.length-1].length;c=d.substring(0,c).split(/\n/gi);f.to.line=c.length-1;f.to.ch=c[c.length-1].length;
return f};c.mappingSyntax=function(b){for(var c=Object.keys(Entry.block),e=0;e<c.length;e++){var f=c[e],g=Entry.block[f];if(g.mode===b&&-1<this.availableCode.indexOf(f)&&(g=g.syntax))for(var h=this.syntax,k=0;k<g.length;k++){var l=g[k];if(k===g.length-2&&"function"===typeof g[k+1]){h[l]=g[k+1];break}h[l]||(h[l]={});k===g.length-1?h[l]=f:h=h[l]}}};c.setAvailableCode=function(b,c){var d=[];b.forEach(function(b,c){b.forEach(function(b,c){d.push(b.type)})});c instanceof Entry.Code?c.getBlockList().forEach(function(b){b.type!==
NtryData.START&&-1===d.indexOf(b.type)&&d.push(b.type)}):c.forEach(function(b,c){b.forEach(function(b,c){b.type!==NtryData.START&&-1===d.indexOf(b.type)&&d.push(b.type)})});this.availableCode=this.availableCode.concat(d)}})(Entry.Parser.prototype);Entry.Pdf=function(c){this.generateView(c)};p=Entry.Pdf.prototype;p.generateView=function(c){var b=Entry.createElement("div","entryPdfWorkspace");b.addClass("entryRemove");this._view=b;var d="/pdfjs/web/viewer.html";c&&""!=c&&(d+="?file="+c);pdfViewIframe=Entry.createElement("iframe","entryPdfIframeWorkspace");pdfViewIframe.setAttribute("id","pdfViewIframe");pdfViewIframe.setAttribute("frameborder",0);pdfViewIframe.setAttribute("src",d);b.appendChild(pdfViewIframe)};p.getView=function(){return this._view};
p.resize=function(){var c=document.getElementById("entryContainerWorkspaceId"),b=document.getElementById("pdfViewIframe");w=c.offsetWidth;b.width=w+"px";b.height=9*w/16+"px"};Entry.FieldTrashcan=function(c){c&&this.setBoard(c);this.dragBlockObserver=this.dragBlock=null;this.isOver=!1;Entry.windowResized&&Entry.windowResized.attach(this,this.setPosition)};
(function(c){c._generateView=function(){this.svgGroup=this.board.svg.elem("g");this.renderStart();this._addControl()};c.renderStart=function(){var b=Entry.mediaFilePath+"delete_";this.trashcanTop=this.svgGroup.elem("image",{href:b+"cover.png",width:60,height:20});this.svgGroup.elem("image",{href:b+"body.png",y:20,width:60,height:60})};c._addControl=function(){$(this.svgGroup).bind("mousedown",function(b){Entry.Utils.isRightButton(b)&&(b.stopPropagation(),$("#entryWorkspaceBoard").css("background",
"white"))})};c.updateDragBlock=function(){var b=this.board.dragBlock,c=this.dragBlockObserver;c&&(c.destroy(),this.dragBlockObserver=null);b?this.dragBlockObserver=b.observe(this,"checkBlock",["x","y"]):(this.isOver&&this.dragBlock&&!this.dragBlock.block.getPrevBlock()&&(Entry.do("destroyThread",this.dragBlock.block.thread,"trashcan").isPass(!0,!0),createjs.Sound.play("entryDelete")),this.tAnimation(!1));this.dragBlock=b};c.checkBlock=function(){var b=this.dragBlock;if(b&&b.block.isDeletable()){var c=
this.board.offset(),e=this.getPosition(),f=e.x+c.left,c=e.y+c.top,g,h;if(b=b.dragInstance)g=b.offsetX,h=b.offsetY;this.tAnimation(g>=f&&h>=c)}};c.align=function(){var b=this.getPosition();this.svgGroup.attr({transform:"translate("+b.x+","+b.y+")"})};c.setPosition=function(){if(this.board){var b=this.board.svgDom;this._x=b.width()-110;this._y=b.height()-110;this.align()}};c.getPosition=function(){return{x:this._x,y:this._y}};c.tAnimation=function(b){if(b!==this.isOver){b=void 0===b?!0:b;var c,e=this.trashcanTop;
c=b?{translateX:15,translateY:-25,rotateZ:30}:{translateX:0,translateY:0,rotateZ:0};$(e).velocity(c,{duration:50});this.isOver=b}};c.setBoard=function(b){this._dragBlockObserver&&this._dragBlockObserver.destroy();this.board=b;this.svgGroup||this._generateView();var c=b.svg,e=c.firstChild;e?c.insertBefore(this.svgGroup,e):c.appendChild(this.svgGroup);this._dragBlockObserver=b.observe(this,"updateDragBlock",["dragBlock"]);this.svgGroup.attr({filter:"url(#entryTrashcanFilter_"+b.suffix+")"});this.setPosition()}})(Entry.FieldTrashcan.prototype);Entry.Queue=function(){this.tail=this.head=null};function Node(c){this.data=c;this.next=null}(function(c){c.enqueue=function(b){b=new Node(b);null===this.head?this.head=b:this.tail.next=b;this.tail=b};c.dequeue=function(){var b;null!==this.head&&(b=this.head.data,this.head=this.head.next);return b};c.clear=function(){for(;this.dequeue(););};c.toString=function(){for(var b=this.head,c=[];b;)c.push(b.data),b=b.next;return c.toString()}})(Entry.Queue.prototype);Entry.TextCodingUtil={};
(function(c){this._funcParams;this._funcParamQ;this._currentObject;c.initQueue=function(){this._funcParamQ=new Entry.Queue;this._funcNameQ=new Entry.Queue};c.clearQueue=function(){this._funcParamQ.clear();this._funcNameQ.clear()};c.indent=function(b){var c="\t";b=b.split("\n");b.pop();c+=b.join("\n\t");return c="\t"+c.trim()};c.isNumeric=function(b){b=String(Math.abs(b));return b.match(/^-?\d+$|^-\d+$/)||b.match(/^-?\d+\.\d+$/)?!0:!1};c.isBinaryOperator=function(b){return"=="==b||">"==b||"<"==b||
">="==b||"<="==b||"+"==b||"-"==b||"*"==b||"/"==b?!0:!1};c.binaryOperatorConvert=function(b){switch(b){case "==":b="EQUAL";break;case ">":b="GREATER";break;case "<":b="LESS";break;case ">=":b="GREATER_OR_EQUAL";break;case "<=":b="LESS_OR_EQUAL";break;case "+":b="PLUS";break;case "-":b="MINUS";break;case "*":b="MULTIFLY";break;case "/":b="DIVIDE"}return b};c.logicalExpressionConvert=function(b){switch(b){case "&&":b=null;break;case "||":b=null}return b};c.dropdownDynamicNameToIdConvertor=function(b,
c,e){if(Entry.getMainWS()&&Entry.getMainWS().vimBoard){var d=Entry.getMainWS().vimBoard;if(d)var g=d._currentScene}if("scenes"==c){var h=Entry.scene.getScenes(),k;for(k in h)if(e=h[k],b==e.name)return e.id}else if("spritesWithMouse"==c||"spritesWithSelf"==c||"collision"==c||"clone"==c){var h=Entry.container.getAllObjects(),l;for(l in h)if(e=h[l],e.scene.id==g.id&&b==e.name)return e.id}else if("variables"==c){var m=Entry.variableContainer.variables_;for(h in m)if(g=m[h],g.name_==b)if(e){if(e.id==g.object_)return g.id_}else return g.id_}else if("lists"==
c)for(h in m=Entry.variableContainer.lists_,m){if(g=m[h],g.name_==b)if(e){if(e.id==g.object_)return g.id_}else return g.id_}else if("messages"==c)for(h in e=Entry.variableContainer.messages_,e){if(m=e[h],m.name==b)return m.id}else if("pictures"==c)for(m in e=d._currentObject,h=e.pictures,h){if(e=h[m],e.name==b)return e.id}else if("sounds"==c)for(m in e=d._currentObject,h=e.sounds,h)if(e=h[m],e.name==b)return e.id;return b};c.dropdownDynamicIdToNameConvertor=function(b,c){var d;if("variables"==c){var f=
Entry.variableContainer.variables_,g;for(g in f){var h=f[g];if(h.id_==b){d=h.object_?"self."+h.name_:h.name_;break}}}else if("lists"==c)for(g in h=Entry.variableContainer.lists_,h){if(f=h[g],f.id_==b){d=f.object_?"self."+f.name_:f.name_;break}}else if("messages"==c)for(g in h=Entry.variableContainer.messages_,h){if(f=h[g],f.id==b){d=f.name;break}}else if("pictures"==c)for(f in g=Entry.container.getAllObjects(),g){var k=g[f],k=k.pictures;for(h in k)if(c=k[h],c.id==b)return d=c.name}else if("sounds"==
c)for(f in g=Entry.container.getAllObjects(),g)for(h in k=g[f],k=k.sounds,k){if(c=k[h],c.id==b)return d=c.name}else if("scenes"==c)for(k in f=Entry.scene.getScenes(),f)if(h=f[k],h.id==b){d=h.name;break}return d};c.getDynamicIdByNumber=function(b,c){var d=b;if(Entry.getMainWS()&&Entry.getMainWS().vimBoard)d=Entry.getMainWS().vimBoard;else return d;var f=d._currentObject;if("number"==typeof b)if(d="None","pictures"==c.menuName){if(0<b){c=Entry.container.getAllObjects();for(var g in c){var h=c[g];if(h.id==
f.id&&(h=h.pictures[b-1])){d=h.name;break}}}}else{if("sounds"==c.menuName&&0<b)for(g in c=Entry.container.getAllObjects(),c)if(h=c[g],h.id==f.id&&(h=h.sounds[b-1])){d=h.name;break}}else d=Entry.TextCodingUtil.dropdownDynamicNameToIdConvertor(b,c.menuName);return d};c.isLocalType=function(b,c){if("variables"==c){c=Entry.variableContainer.variables_;for(var d in c){var f=c[d];if(f.id_==b){if(f.object_)return!0;break}}}else if("lists"==c)for(d in c=Entry.variableContainer.lists_,c)if(f=c[d],f.id_==b){if(f.object_)return!0;
break}return!1};c.binaryOperatorValueConvertor=function(b){switch(b){case '"EQUAL"':b="==";break;case '"GREATER"':b=">";break;case '"LESS"':b="<";break;case '"GREATER_OR_EQUAL"':b=">=";break;case '"LESS_OR_EQUAL"':b="<=";break;case '"\uadf8\ub9ac\uace0"':b="&&";break;case '"\ub610\ub294"':b="||";break;case '"PLUS"':b="+";break;case '"MINUS"':b="-";break;case '"MULTI"':b="*";break;case '"DIVIDE"':b="/"}return b};c.variableListFilter=function(b,c,e){if("None"==e)return e;var d=e;b=b.data.type;"change_variable"==
b||"set_variable"==b||"get_variable"==b?1==c&&(d=eval(e)):"length_of_list"==b||"is_included_in_list"==b?2==c&&(d=eval(e)):"value_of_index_from_list"==b?2==c?d=eval(e):4==c&&this.isNumeric(e)&&(d=e-1):"remove_value_from_list"==b?2==c?d=eval(e):1==c&&this.isNumeric(e)&&(d=e-1):"insert_value_to_list"==b?2==c?d=eval(e):3==c&&this.isNumeric(e)&&(d=e-1):"change_value_list_index"==b?1==c?d=eval(e):2==c&&this.isNumeric(e)&&(d=e-1):"add_value_to_list"==b&&2==c&&(d=eval(e));return d};c.isGlobalVariableExisted=
function(b){var c=Entry.variableContainer.variables_,e;for(e in c){var f=c[e];if(null===f.object_&&f.name_==b)return!0}return!1};c.updateGlobalVariable=function(b,c){var d=Entry.variableContainer.variables_,f;for(f in d){var g=d[f];if(null===g.object_&&g.name_==b){d=g.toJSON();d.name=b;d.value=c;g.syncModel_(d);Entry.variableContainer.updateList();break}}};c.createGlobalVariable=function(b,c){this.isGlobalVariableExisted(b)||(Entry.variableContainer.addVariable({name:b,value:c,variableType:"variable"}),
Entry.variableContainer.updateList())};c.isLocalVariableExisted=function(b,c){var d=Entry.variableContainer.variables_,f;for(f in d){var g=d[f];if(g.object_===c.id&&g.name_==b)return!0}return!1};c.updateLocalVariable=function(b,c,e){var d=Entry.variableContainer.variables_,g;for(g in d){var h=d[g];if(h.object_===e.id&&h.name_==b){e=h.toJSON();e.name=b;e.value=c;h.syncModel_(e);Entry.variableContainer.updateList();break}}};c.createLocalVariable=function(b,c,e){this.isLocalVariableExisted(b,e)||(Entry.variableContainer.addVariable({name:b,
value:c,object:e.id,variableType:"variable"}),Entry.variableContainer.updateList())};c.isLocalVariable=function(b){var c=Entry.playground.object,e=Entry.variableContainer.variables_,f;for(f in e){var g=e[f];if(g.object_==c.id&&g.id_==b)return!0}return!1};c.isGlobalListExisted=function(b){var c=Entry.variableContainer.lists_,e;for(e in c){var f=c[e];if(null===f.object_&&f.name_==b)return!0}return!1};c.updateGlobalList=function(b,c){var d=Entry.variableContainer.lists_,f;for(f in d){var g=d[f];if(null===
g.object_&&g.name_==b){list={x:g.x_,y:g.y_,id:g.id_,visible:g.visible_,name:b,isCloud:g.isCloud_,width:g.width_,height:g.height_,array:c};g.syncModel_(list);g.updateView();Entry.variableContainer.updateList();break}}};c.createGlobalList=function(b,c){this.isGlobalListExisted(b)||(Entry.variableContainer.addList({name:b,array:c,variableType:"list"}),Entry.variableContainer.updateList())};c.isLocalListExisted=function(b,c){if(!c)return!1;var d=Entry.variableContainer.lists_,f;for(f in d){var g=d[f];
if(g.object_===c.id&&g.name_==b)return!0}return!1};c.updateLocalList=function(b,c,e){var d=Entry.variableContainer.lists_,g;for(g in d){var h=d[g];if(h.object_===e.id&&h.name_==b){h.syncModel_({x:h.x_,y:h.y_,id:h.id_,visible:h.visible_,name:b,isCloud:h.isCloud_,width:h.width_,height:h.height_,array:c});h.updateView();Entry.variableContainer.updateList();break}}};c.createLocalList=function(b,c,e){this.isLocalListExisted(b,e)||(Entry.variableContainer.addList({name:b,array:c,object:e.id,variableType:"list"}),
Entry.variableContainer.updateList())};c.isLocalList=function(b){var c=Entry.playground.object,e=Entry.variableContainer.lists_,f;for(f in e){var g=e[f];if(g.object_==c.id&&g.id_==b)return!0}return!1};c.createMessage=function(b){Entry.isExist(b,"name",Entry.variableContainer.messages_)||(Entry.variableContainer.addMessage({name:b}),Entry.variableContainer.updateList())};c.isEventBlock=function(b){b=b.data.type;return"when_run_button_click"==b||"when_some_key_pressed"==b||"mouse_clicked"==b||"mouse_click_cancled"==
b||"when_object_click"==b||"when_object_click_canceled"==b||"when_message_cast"==b||"when_scene_start"==b||"when_clone_start"==b?!0:!1};c.isEntryEventBlockWithParam=function(b){b=b.data.type;return"when_some_key_pressed"==b||"when_message_cast"==b?!0:!1};c.isEventBlockByType=function(b){return"when_run_button_click"==b||"when_some_key_pressed"==b||"mouse_clicked"==b||"mouse_click_cancled"==b||"when_object_click"==b||"when_object_click_canceled"==b||"when_message_cast"==b||"when_scene_start"==b||"when_clone_start"==
b?!0:!1};c.makeDefinition=function(b){var c=/(%.)/mi;b=Entry.block[b.data.type].syntax.py[0].split(c);for(var e="",f=0;f<b.length;f++)var g=b[f],e=c.test(g)?e+"event":e+g;return e};c.entryEventFilter=function(b){var c=b.indexOf("("),e=b.indexOf(")"),f=b.substring(0,c);b=b.substring(c+1,e);if(b=b.replace(/\"/g,""))b=isNaN(b)?b.replace(/ /g,"_space_"):"num"+b,"None"==b&&(b="none");return f+"("+b+"):\n"};c.entryEventFuncFilter=function(b){var c=!1;b=b.split("\n");for(var e in b){var f=b[e],g=b[e].trim(),
h=g.indexOf(":"),k="";0<h&&(k=g.substring(0,h+1));k=k.split("(");k=k[0];"def when_press_key"==k||"def when_get_signal"==k?(f=f.replace(/def /,""),h=f.indexOf(":"),g=c="",0<h&&(c=f.substring(0,h),g=f.substring(h+1,f.length)),f=g?c.concat("\n").concat(g.trim()):c,b[e]=f,c=!0):c&&(f=b[e],f=f.replace(/\t/g,"    "),f=f.replace(/    /,""),b[e]=f)}return b.join("\n")};c.eventBlockSyntaxFilter=function(b){if("when_start"==b||"when_press_key"==b||"when_click_mouse_on"==b||"when_click_mouse_off"==b||"when_click_object_on"==
b||"when_click_object_off"==b||"when_get_signal"==b||"when_start_scene"==b||"when_make_clone"==b)return"def "+b};c.isEntryEventFunc=function(b){return"def when_start"==b||"def when_press_key"==b||"def when_click_mouse_on"==b||"def when_click_mouse_off"==b||"def when_click_object_on"==b||"def when_click_object_off"==b||"def when_get_signal"==b||"def when_start_scene"==b||"def when_make_clone"==b?!0:!1};c.isEntryEventFuncByFullText=function(b){var c=b.indexOf("(");b=b.substring(0,c);return"def when_start"==
b||"def when_press_key"==b||"def when_click_mouse_on"==b||"def when_click_mouse_off"==b||"def when_click_object_on"==b||"def when_click_object_off"==b||"def when_get_signal"==b||"def when_start_scene"==b||"def when_make_clone"==b||"def entry_event_start"==b||"def entry_event_key"==b||"def entry_event_mouse_down"==b||"def entry_event_mouse_up"==b||"def entry_event_object_down"==b||"def entry_event_object_up"==b||"def entry_event_signal"==b||"def entry_event_scene_start"==b||"def entry_event_clone_create"==
b?!0:!1};c.eventBlockSyntaxFilter=function(b){if("when_start"==b||"when_press_key"==b||"when_click_mouse_on"==b||"when_click_mouse_off"==b||"when_click_object_on"==b||"when_click_object_off"==b||"when_get_signal"==b||"when_start_scene"==b||"when_make_clone"==b||"entry_event_start"==b||"entry_event_key"==b||"entry_event_mouse_down"==b||"entry_event_mouse_up"==b||"entry_event_object_down"==b||"entry_event_object_up"==b||"entry_event_signal"==b||"entry_event_scene_start"==b||"entry_event_clone_create"==
b)return"def "+b};c.isEntryEventFuncName=function(b){return"when_start"==b||"when_press_key"==b||"when_click_mouse_on"==b||"when_click_mouse_off"==b||"when_click_object_on"==b||"when_click_object_off"==b||"when_get_signal"==b||"when_start_scene"==b||"when_make_clone"==b||"entry_event_start"==b||"entry_event_key"==b||"entry_event_mouse_down"==b||"entry_event_mouse_up"==b||"entry_event_object_down"==b||"entry_event_object_up"==b||"entry_event_signal"==b||"entry_event_scene_start"==b||"entry_event_clone_create"==
b?!0:!1};c.isEntryEventFuncByType=function(b){return"when_run_button_click"==b||"when_some_key_pressed"==b||"mouse_clicked"==b||"mouse_click_cancled"==b||"when_object_click"==b||"when_object_click_canceled"==b||"when_message_cast"==b||"when_scene_start"==b||"when_clone_start"==b?!0:!1};c.isEntryEventFuncNameWithParam=function(b){var c=b.lastIndexOf("_");return 0<c&&(b=b.substring(0,c),"when_press_key"==b||"when_get_signal"==b)?!0:!1};c.searchFuncDefParam=function(b){"function_field_label"==b.data.type&&
this._funcNameQ.enqueue(b.data.params[0]);return b&&b.data&&b.data.params&&b.data.params[1]?("function_field_string"!=b.data.type&&"function_field_boolean"!=b.data.type||this._funcParamQ.enqueue(b.data.params[0].data.type),this.searchFuncDefParam(b.data.params[1])):b};c.isEntryEventFuncTypeWithParam=function(b){return"when_some_key_pressed"==b.type||"when_message_cast"==b.type?!0:!1};c.isEntryEventDesignatedParamName=function(b){var c=!1;"key"==b?c=!0:"signal"==b&&(c=!0);return c};c.gatherFuncDefParam=
function(b){if(b&&b.data){if(b.data.params[0])if(b.data.params[0].data){var c=b.data.params[0].data.type;"function_field_string"!=b.data.type&&"function_field_boolean"!=b.data.type||this._funcParamQ.enqueue(c)}else"function_field_label"==b.data.type&&this._funcNameQ.enqueue(b.data.params[0]);if(b.data.params[1]){var e=this.searchFuncDefParam(b.data.params[1]);e.data.params[0].data&&(c=e.data.params[0].data.type,"function_field_string"!=e.data.type&&"function_field_boolean"!=e.data.type||this._funcParamQ.enqueue(c));
e.data.params[1]&&e.data.params[1].data.params[0].data&&(c=e.data.params[1].data.params[0].data.type,"function_field_string"!=e.data.params[1].data.type&&"function_field_boolean"!=e.data.params[1].data.type||this._funcParamQ.enqueue(c))}}return e};c.getLastParam=function(b){b&&b.data&&b.data.params[1]&&(b=this.getLastParam(b.data.params[1]));return b};c.isFuncContentsMatch=function(b,c,e,f,g){var d=!0;if(c.length!=b.length)return!1;for(var k=0;k<b.length&&d;k++){var d=!1,l=b[k],m=c[k];if(l&&!m){d=
!1;break}if(!l&&m){d=!1;break}if(l._schema&&l._schema.template)var q=l._schema.template.trim().split(" ")[0]==m.funcName?!0:!1;if(m.type==l.data.type||q){d=!0;g!=m.type&&(d=!1);var n=m.params,t=l.data.params,v=[];if(void 0==n||null==n)n=[];if(void 0==t||null==t)t=[];t.map(function(b,c){b&&v.push(b)});t=v;v=[];n.map(function(b,c){b&&v.push(b)});n=v;if(n.length==t.length){for(var d=!0,y=0;y<n.length&&d;y++)if(d=!1,"object"!==typeof n[y])d=n[y]==t[y]?!0:!1;else if(n[y].name){var x=f[n[y].name];x?t[y].data.type==
x&&(d=!0):n[y].params&&t[y].data.params&&n[y].params[0]==t[y].data.params[0]&&(d=!0)}else"True"==n[y].type||"False"==n[y].type?t[y].data?n[y].type==t[y].data.type&&(d=!0):n[y].type==t[y].type&&(d=!0):n[y].type&&n[y].params&&(d=this.isFuncContentsParamsMatch(t[y],n[y],e,f));if(d&&m.statements&&0!=m.statements.length)for(var r in m.statements)d=this.isFuncContentsMatch(l.data.statements[r]._data,m.statements[r],e,f)}else{d=!1;break}}else{d=!1;break}}return d};c.isFuncContentsParamsMatch=function(b,
c,e,f){var d=c.type,h=b.data.type;"text"==d?d="literal":"number"==d?d="literal":c.isParamFromFunc&&(d=f[d]);"text"==h?h="literal":"number"==h&&(h="literal");if(d==h)if(c=c.params,d=b.data.params,c||d)if(c.length==d.length){b=!0;for(var k in c){if(!b)break;b=!1;var h=c[k],l=d[k];if(h||l)if("object"!==typeof h)h==l&&(b=!0);else if(h.name){var m=f[h.name];m?l.data.type==m&&(b=!0):h.params[0]==l.data.params[0]&&(b=!0)}else"True"==h.type||"False"==h.type?l.data?h.type==l.data.type&&(b=!0):h.type==l.type&&
(b=!0):h.type&&h.params&&(b=this.isFuncContentsParamsMatch(l,h,e,f));else b=!0}}else b=!1;else b=!0;else b=!1;return b};c.isParamBlock=function(b){b=b.type;return"ai_boolean_distance"==b||"ai_distance_value"==b||"ai_boolean_object"==b||"ai_boolean_and"==b?!0:!1};c.hasBlockInfo=function(b,c){var d=!1,f;for(f in c){var g=c[f];if(f==b.type)for(var h in g){var k=g[h];if(k.start==b.start&&k.end==b.end){d=!0;break}}}return d};c.makeFuncParamBlock=function(b,c,e){var d=b.params,g;for(g in d){var h=d[g];
if(h&&"object"==typeof h)if(h.type&&h.params&&0!=h.params.length)this.makeFuncParamBlock(h,c,e);else if(h.type&&h.params&&0==h.params.length){var k=h.type;if(k=c[k])h={},h.type=k,h.params=[],b.params[g]=h}else h.name?(k=h.name,(k=c[k])?(h={},h.type=k,h.params=[],b.params[g]=h):"get_variable"!=h.type&&(h=h.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,h,e,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))):h.object&&h.property&&(h=
h.object.name+"."+h.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,h,e,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))}if((b=b.statements)&&b[0]&&0!=b[0].length){var d=b[0],l;for(l in d)this.makeFuncParamBlock(d[l],c,e)}if(b&&b[1]&&0!=b[1].length){l=b[1];for(var m in l)this.makeFuncParamBlock(l[m],c,e)}};c.updateBlockInfo=function(b,c){var d=c[b.type];if(d&&Array.isArray(d)&&0!=d.legnth)for(var f in d)if(c=d[f],c.start==
b.start&&c.end==b.end)break;else{var g={};g.start=b.start;g.end=b.end;d.push(g)}else c[b.type]=[],g={},g.start=b.start,g.end=b.end,c[b.type].push(g)};c.assembleRepeatWhileTrueBlock=function(b,c){if("repeat_while_true"==b.data.type){b=c.split(" ");var d=b.length-1,f=b[d];"until"==f?(b.splice(1,0,"not"),b.splice(d+1,1),c=b.join(" ")):"while"==f&&(b.splice(d,1),c=b.join(" "))}return c};c.isJudgementBlock=function(b){return"is_clicked"==b||"is_press_some_key"==b||"reach_something"==b||"boolean_basic_operator"==
b||"boolean_and"==b||"boolean_or"==b||"boolean_not"==b?!0:!1};c.isCalculationBlock=function(b){return"calc_basic"==b||"calc_rand"==b||"coordinate_mouse"==b||"coordinate_object"==b||"get_sound_volume"==b||"quotient_and_mod"==b||"calc_operation"==b||"get_project_timer_value"==b||"get_date"==b||"distance_something"==b||"get_sound_duration"==b||"length_of_string"==b||"combine_something"==b||"char_at"==b||"substring"==b||"index_of_string"==b||"replace_string"==b||"change_string_case"==b?!0:!1};c.isVariableDeclarationBlock=
function(b){return"set_variable"==b?!0:!1};c.isHWParamBlock=function(b){return"hamster_hand_found"==b||"hamster_value"==b||"arduino_get_port_number"==b||"arduino_get_number_sensor_value"==b||"arduino_get_digital_value"==b||"arduino_convert_scale"==b||"arduino_ext_get_analog_value"==b||"arduino_ext_get_analog_value_map"==b||"arduino_ext_get_ultrasonic_value"==b||"arduino_ext_get_digital"==b||"arduino_ext_tone_list"==b||"arduino_ext_octave_list"==b?!0:!1};c.isMaterialBlock=function(b){return"get_canvas_input_value"==
b||"get_variable"==b||"value_of_index_from_list"==b||"length_of_list"==b||"is_included_in_list"==b?!0:!1};c.jsAdjustSyntax=function(b,c){if("ai_boolean_distance"==b.data.type){var d=c.split(" ");b=d[0].split("_");b[1]=b[1].substring(1,b[1].length-1);b[1]=b[1].toLowerCase();b=b.join("_");c=d[1];c=this.bTojBinaryOperatorConvertor(c);d=d[2];b=b+" "+c+" "+d}else"ai_boolean_object"==b.data.type?(d=c.split(" "),b=d[0].split("_"),b[1]=b[1].substring(1,b[1].length-1),b[1]=b[1].toLowerCase(),b=b.join("_"),
c=d[1],d=d[2],b=b+" "+c+" "+d):"ai_distance_value"==b.data.type?(d=c.split(" "),b=d[0].split("_"),b[1]=b[1].substring(1,b[1].length-1),b[1]=b[1].toLowerCase(),b=b.join("_")):b=c;return b};c.bTojBinaryOperatorConvertor=function(b){var c;switch(b){case "'BIGGER'":c=">";break;case "'BIGGER_EQUAL'":c=">=";break;case "'EQUAL'":c="==";break;case "'SMALLER'":c="<";break;case "'SMALLER_EQUAL'":c="<="}return c};c.jTobBinaryOperatorConvertor=function(b){var c;switch(b){case ">":c="BIGGER";break;case ">=":c=
"BIGGER_EQUAL";break;case "==":c="EQUAL";break;case "<":c="SMALLER";break;case "<=":c="SMALLER_EQUAL"}return c};c.radarVariableConvertor=function(b){return b.split("_")[1].toUpperCase()};c.tTobDropdownValueConvertor=function(b){return"stone"==b?"OBSTACLE":"wall"==b?b.toUpperCase():"item"==b?b.toUpperCase():b};c.canConvertTextModeForOverlayMode=function(b){var c;Entry.getMainWS().oldMode==Entry.Workspace.MODE_OVERLAYBOARD&&b==Entry.Workspace.MODE_VIMBOARD&&(c=Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_EDITOR]);
return c};c.isNamesIncludeSpace=function(){var b=Entry.variableContainer;if(b){for(var c=b.variables_||[],e=0;e<c.length;e++)if(/ /.test(c[e].name_))return Lang.TextCoding[Entry.TextCodingError.ALERT_VARIABLE_EMPTY_TEXT];c=b.lists_||[];for(e=0;e<c.length;e++)if(/ /.test(c[e].name_))return Lang.TextCoding[Entry.TextCodingError.ALERT_LIST_EMPTY_TEXT];c=b.functions_||{};for(e in c)if(b=c[e].content._data[0]._data[0],"function_create"==b.data.type)if(2==b.params.length)if(b=b.params[0],"function_field_label"==
b.data.type)if(b=b.data.params,2==b.length)if(void 0==b[1]){if(/ /.test(b[0]))return Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_EMPTY_TEXT]}else{if("function_field_label"==b[1].data.type||this.hasFunctionFieldLabel(b[1]))return Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_FIELD_MULTI]}else return Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_DISORDER];else return Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_DISORDER];else return Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_DISORDER];
else return Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_DISORDER];return!1}};c.isNameIncludeSpace=function(b,c){return"variable"==c&&/ /.test(b)?Lang.TextCoding[Entry.TextCodingError.ALERT_VARIABLE_EMPTY_TEXT_ADD_CHANGE]:"list"==c&&/ /.test(b)?Lang.TextCoding[Entry.TextCodingError.ALERT_LIST_EMPTY_TEXT_ADD_CHANGE]:"function"==c&&/ /.test(b)?Lang.TextCoding[Entry.TextCodingError.ALERT_FUNCTION_NAME_EMPTY_TEXT_ADD_CHANGE]:!1};c.hasFunctionFieldLabel=function(b){if(b&&b.data){if("function_field_label"==
b.data.type)return!0;b=b.data.params;if(b[0]){var c=b[0].data.type;if("function_field_label"==c||b[0].data.params&&this.hasFunctionFieldLabel(b[0]))return!0}return b[1]&&(c=b[1].data.type,"function_field_label"==c||b[1].data.params&&this.hasFunctionFieldLabel(b[1]))?!0:!1}};c.makeExpressionStatementForEntryEvent=function(b,c){var d={},f={type:"CallExpression"},g={};g.name=b;g.type="Identifier";f.callee=g;arguments=[];g={type:"Literal"};g.value=c;arguments.push(g);f.arguments=arguments;d.expression=
f;d.type="ExpressionStatement";return d};c.setMathParams=function(b,c){var d;"pow"==b?(d="square",c[3]=d):"sqrt"==b?(d="root",c[3]=d):"sin"==b?(d="sin",c[3]=d):"cos"==b?(d="cos",c[3]=d):"tan"==b?(d="tan",c[3]=d):"asin"==b?(d="asin_radian",c[3]=d):"acos"==b?(d="acos_radian",c[3]=d):"atan"==b?(d="atan_radian",c[3]=d):"log"==b?(d="ln",c[3]=d):"log10"==b?(d="log",c[3]=d):"floor"==b?(d="floor",c[3]=d):"ceil"==b?(d="ceil",c[3]=d):"round"==b?(d="round",c[3]=d):"factorial"==b?(d="factorial",c[3]=d):"fabs"==
b&&(d="abs",c[3]=d);return d};c.isMathExpression=function(b){return"Entry.math_operation"==b.split("(")[0]?!0:!1};c.makeMathExpression=function(b){var c=b,e=b.split("(")[1].split(",");b=e[0];e=e[1];e=e.substring(2,e.length-2).trim();"square"==e?(mathProperty="pow",c="math."+mathProperty,c=c+"("+b+")"):"root"==e?(mathProperty="sqrt",c="math."+mathProperty,c=c+"("+b+")"):"sin"==e?(mathProperty="sin",c="math."+mathProperty,c=c+"("+b+")"):"cos"==e?(mathProperty="cos",c="math."+mathProperty,c=c+"("+b+
")"):"tan"==e?(mathProperty="tan",c="math."+mathProperty,c=c+"("+b+")"):"asin_radian"==e?(mathProperty="asin",c="math."+mathProperty,c=c+"("+b+")"):"acos_radian"==e?(mathProperty="acos",c="math."+mathProperty,c=c+"("+b+")"):"atan_radian"==e?(mathProperty="atan",c="math."+mathProperty,c=c+"("+b+")"):"ln"==e?(mathProperty="log",c="math."+mathProperty,c=c+"("+b+")"):"log"==e?(mathProperty="log10",c="math."+mathProperty,c=c+"("+b+")"):"floor"==e?(mathProperty="floor",c="math."+mathProperty,c=c+"("+b+
")"):"ceil"==e?(mathProperty="ceil",c="math."+mathProperty,c=c+"("+b+")"):"round"==e?(mathProperty="round",c="math."+mathProperty,c=c+"("+b+")"):"factorial"==e?(mathProperty="factorial",c="math."+mathProperty,c=c+"("+b+")"):"abs"==e&&(mathProperty="fabs",c="math."+mathProperty,c=c+"("+b+")");return c};c.generateVariablesDeclaration=function(){var b="",c=Entry.playground.object,e=Entry.variableContainer;if(e){for(var e=e.variables_||[],f=e.length-1;0<=f;f--){var g=e[f],h=g.name_,k=g.value_;if(g.object_)if(g.object_==
c.id)h="self."+h;else continue;"string"===typeof k&&(k='"()"'.replace("()",k));b+=h+" = "+k+"\n"}return b}};c.generateListsDeclaration=function(){var b="",c=Entry.playground.object,e=Entry.variableContainer;if(e){targets=e.lists_||[];for(e=targets.length-1;0<=e;e--){var f=targets[e],g=f.name_,h="",k=f.array_;if(f.object_)if(f.object_==c.id)g="self."+g;else continue;for(var l in k)f=k[l].data,isNaN(f)&&(f='"'+f+'"'),h+=f,l!=k.length-1&&(h+=", ");b+=g+" = ["+h+"]\n"}return b}};c.isVariableNumber=function(b,
c){var d=Entry.playground.object,f=Entry.variableContainer.variables_,g;for(g in f){var h=f[g];if("global"==c){if(null===h.object_&&h.id_==b&&Entry.Utils.isNumber(h.value_))return!0}else if("local"==c&&h.object_===d.id&&h.id_==b&&Entry.Utils.isNumber(h.value_))return!0}return!1};c.generateForStmtIndex=function(b,c){var d=Math.floor(b/3);c=["i","j","k"][b%3]+(c||"");return d?this.generateForStmtIndex(d-1,c):c};c.isExpressionLiteral=function(b,c){switch(b.type){case "CallExpression":if("MemberExpression"===
b.callee.type&&(b=b.callee.property.name,b=c["%2"][b]))return"basic_string_field"===Entry.block[b.key].skeleton;break;case "Literal":return!0}return!1}})(Entry.TextCodingUtil);Entry.Workspace=function(c){Entry.Model(this,!1);this.dSetMode=Entry.Utils.debounce(this.setMode,200);this.observe(this,"_handleChangeBoard",["selectedBoard"],!1);this.trashcan=new Entry.FieldTrashcan;this.readOnly=void 0===c.readOnly?!1:c.readOnly;this.blockViewMouseUpEvent=new Entry.Event(this);this.widgetUpdateEvent=new Entry.Event(this);this._blockViewMouseUpEvent=null;this.widgetUpdateEveryTime=!1;var b=c.blockMenu;b&&(this.blockMenu=new Entry.BlockMenu(b.dom,b.align,b.categoryData,b.scroll,
this.readOnly),this.blockMenu.workspace=this,this.blockMenu.observe(this,"_setSelectedBlockView",["selectedBlockView"],!1));if(b=c.board)b.workspace=this,b.readOnly=this.readOnly,this.board=new Entry.Board(b),this.board.observe(this,"_setSelectedBlockView",["selectedBlockView"],!1),this.set({selectedBoard:this.board});if(b=c.vimBoard)this.vimBoard=new Entry.Vim(b.dom),this.vimBoard.workspace=this;this.board&&this.vimBoard&&this.vimBoard.hide();Entry.GlobalSvg.createDom();this.mode=Entry.Workspace.MODE_BOARD;
this.attachKeyboardCapture();this.changeEvent=new Entry.Event(this);Entry.commander.setCurrentEditor("board",this.board);this.textType=void 0!==c.textType?c.textType:Entry.Vim.TEXT_TYPE_PY;this.mode=this.oldMode=Entry.Workspace.MODE_BOARD};Entry.Workspace.MODE_BOARD=0;Entry.Workspace.MODE_VIMBOARD=1;Entry.Workspace.MODE_OVERLAYBOARD=2;
(function(c){c.schema={selectedBlockView:null,selectedBoard:null};c.getBoard=function(){return this.board};c.getSelectedBoard=function(){return this.selectedBoard};c.getBlockMenu=function(){return this.blockMenu};c.getVimBoard=function(){return this.vimBoard};c.getMode=function(){return this.mode};c.setMode=function(b,c){Entry.disposeEvent.notify();Entry.Utils.isNumber(b)?this.mode=b:(this.mode=b.boardType,this.runType=b.runType,this.textType=b.textType);this.mode=Number(this.mode);if(this.oldMode!==
this.mode){var d=Entry.Vim,f=Entry.Workspace,g=this.blockMenu;switch(this.mode){case f.MODE_VIMBOARD:if(d=Entry.TextCodingUtil.isNamesIncludeSpace()){alert(d);b={};b.boardType=f.MODE_BOARD;b.textType=-1;Entry.getMainWS().setMode(b);break}this.board&&this.board.hide();this.overlayBoard&&this.overlayBoard.hide();this.set({selectedBoard:this.vimBoard});this.vimBoard.show();g.banClass("functionInit",!0);this.codeToText(this.board.code,b);this.board.clear();this.oldTextType=this.textType;break;case f.MODE_BOARD:try{this.board.show(),
g.unbanClass("functionInit",!0),this.set({selectedBoard:this.board}),this.textToCode(this.oldMode,this.oldTextType),this.overlayBoard&&this.overlayBoard.hide(),this.oldTextType=this.textType,this.vimBoard&&this.vimBoard.hide()}catch(h){this.board&&this.board.code&&this.board.code.clear(),this.board&&this.board.hide(),this.set({selectedBoard:this.vimBoard}),g.banClass("functionInit"),this.mode=f.MODE_VIMBOARD,this.oldTextType==d.TEXT_TYPE_JS?(b.boardType=f.MODE_VIMBOARD,b.textType=d.TEXT_TYPE_JS,b.runType=
d.MAZE_MODE,this.oldTextType=d.TEXT_TYPE_JS):this.oldTextType==d.TEXT_TYPE_PY&&(b.boardType=f.MODE_VIMBOARD,b.textType=d.TEXT_TYPE_PY,b.runType=d.WORKSPACE_MODE,this.oldTextType=d.TEXT_TYPE_PY),Entry.getMainWS().setMode(b)}Entry.commander.setCurrentEditor("board",this.board);break;case f.MODE_OVERLAYBOARD:this.oldMode==f.MODE_VIMBOARD?this.overlayModefrom=f.MODE_VIMBOARD:this.oldMode==f.MODE_BOARD&&(this.overlayModefrom=f.MODE_BOARD),this.overlayBoard||this.initOverlayBoard(),this.overlayBoard.show(),
this.set({selectedBoard:this.overlayBoard}),Entry.commander.setCurrentEditor("board",this.overlayBoard)}this.oldMode=this.mode;Entry.isTextMode=this.mode==f.MODE_VIMBOARD;g.align();Entry.dispatchEvent("workspaceChangeMode");this.changeEvent.notify(c);Entry.dispatchEvent("cancelBlockMenuDynamic")}};c.changeBoardCode=function(b,c){this._syncTextCode();var d=this.mode===Entry.Workspace.MODE_VIMBOARD;this.board.changeCode(b,d,c);d&&(b={},b.textType=this.textType,b.boardType=this.boardType,b.runType=this.runType,
this.codeToText(this.board.code,b))};c.changeOverlayBoardCode=function(b){this.overlayBoard&&this.overlayBoard.changeCode(b)};c.changeBlockMenuCode=function(b){this.blockMenu.changeCode(b)};c.textToCode=function(b,c){if(this.vimBoard&&b===Entry.Workspace.MODE_VIMBOARD){b=this.vimBoard.textToCode(c);var d=this.board.code;d.load(b);this.changeBoardCode(d);setTimeout(function(){d.view&&(d.view.reDraw(),this.board.alignThreads())}.bind(this),0)}};c.codeToText=function(b,c){if(this.vimBoard)return b=b||
this.board.code,c=c||{textType:this.textType,boardType:this.boardType,runType:this.runType},this.vimBoard.codeToText(b,c)};c.getCodeToText=function(b){if(this.vimBoard)return this.vimBoard.getCodeToText(b)};c._setSelectedBlockView=function(){var b=this.board.selectedBlockView||this.blockMenu.selectedBlockView||(this.overlayBoard?this.overlayBoard.selectedBlockView:null);this._unbindBlockViewMouseUpEvent();this.set({selectedBlockView:b});if(b){var c=this;this._blockViewMouseUpEvent=b.mouseUpEvent.attach(this,
function(){c.blockViewMouseUpEvent.notify(b)})}};c.initOverlayBoard=function(){this.overlayBoard=new Entry.Board({dom:this.board.view,workspace:this,isOverlay:!0});this.overlayBoard.changeCode(new Entry.Code([]));this.overlayBoard.workspace=this;this.overlayBoard.observe(this,"_setSelectedBlockView",["selectedBlockView"],!1)};c._keyboardControl=function(b,c){if(!Entry.Loader||Entry.Loader.isLoaded()){var d=b.keyCode||b.which,f=b.ctrlKey,g=b.shiftKey,h=b.altKey,k=Entry.playground,l=k&&k.object?k.object:
void 0;if(!Entry.Utils.isInInput(b)||c){c=this._isVimMode();var m=this.selectedBlockView,q=this.selectedBoard,n=q.readOnly;if(f)switch(d){case 86:!n&&q&&q instanceof Entry.Board&&Entry.clipboard&&Entry.do("addThread",Entry.clipboard).value.getFirstBlock().copyToClipboard();break;case 219:if(!l&&c){alert("\uc624\ube0c\uc81d\ud2b8\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc624\ube0c\uc81d\ud2b8\ub97c \ucd94\uac00\ud55c \ud6c4 \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");return}if(Entry.getMainWS().oldMode==
Entry.Workspace.MODE_OVERLAYBOARD)return;if(d=Entry.TextCodingUtil.isNamesIncludeSpace()){alert(d);return}this.dSetMode({boardType:Entry.Workspace.MODE_BOARD,textType:-1});b.preventDefault();break;case 221:if(!l&&this.oldMode===Entry.Workspace.MODE_BOARD){alert("\uc624\ube0c\uc81d\ud2b8\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc624\ube0c\uc81d\ud2b8\ub97c \ucd94\uac00\ud55c \ud6c4 \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");return}if(d=Entry.TextCodingUtil.canConvertTextModeForOverlayMode(Entry.Workspace.MODE_VIMBOARD)){alert(d);
return}if(d=Entry.TextCodingUtil.isNamesIncludeSpace()){alert(d);return}this.dSetMode({boardType:Entry.Workspace.MODE_VIMBOARD,textType:Entry.Vim.TEXT_TYPE_PY,runType:Entry.Vim.WORKSPACE_MODE});b.preventDefault();break;case 67:m&&!m.isInBlockMenu&&m.block.isDeletable()&&m.block.isCopyable()&&m.block.copyToClipboard();break;case 88:!n&&m&&!m.isInBlockMenu&&m.block.isDeletable()&&function(b){b.copyToClipboard();b.destroy(!0,!0);m.getBoard().setSelectedBlock(null)}(m.block)}else if(h){if(!l){alert("\uc624\ube0c\uc81d\ud2b8\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc624\ube0c\uc81d\ud2b8\ub97c \ucd94\uac00\ud55c \ud6c4 \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");
return}switch(d){case 49:k.changeViewMode("code");b.preventDefault();break;case 50:k.changeViewMode("picture");b.preventDefault();break;case 51:k.changeViewMode("sound");b.preventDefault();break;case 52:k.toggleOnVariableView();k.changeViewMode("variable");b.preventDefault();break;case 219:Entry.container&&(b.preventDefault(),Entry.container.selectNeighborObject("prev"));break;case 221:Entry.container&&(b.preventDefault(),Entry.container.selectNeighborObject("next"))}}else if(g)switch(d){case 9:c&&
(CodeMirror.commands.indentLess(this.vimBoard.codeMirror),b.preventDefault())}else switch(d){case 9:c&&(CodeMirror.commands.indentMore(this.vimBoard.codeMirror),b.preventDefault());break;case 8:case 46:!n&&m&&!m.isInBlockMenu&&m.block.isDeletable()&&(Entry.do("destroyBlock",m.block),this.board.set({selectedBlockView:null}),b.preventDefault())}setTimeout(function(){Entry.disposeEvent&&Entry.disposeEvent.notify(b)},0)}}};c._handleChangeBoard=function(){var b=this.selectedBoard;b&&b.constructor===Entry.Board&&
this.trashcan.setBoard(b)};c._syncTextCode=function(){if(!(this.mode!==Entry.Workspace.MODE_VIMBOARD||Entry.engine&&Entry.engine.isState("run"))){var b=this.vimBoard.textToCode(this.textType),c=this.board.code;c&&c.load(b)}};c.addVimBoard=function(b){this.vimBoard||(this.vimBoard=new Entry.Vim(b),this.vimBoard.workspace=this,this.vimBoard.hide())};c.getParserType=function(){return this.vimBoard._parserType};c.getBlockViewRenderMode=function(){switch(this.mode){case Entry.Workspace.MODE_BOARD:case Entry.Workspace.MODE_OVERLAYBOARD:return Entry.BlockView.RENDER_MODE_BLOCK;
case Entry.Workspace.MODE_VIMBOARD:return Entry.BlockView.RENDER_MODE_TEXT}};c._isVimMode=function(){return this.oldMode===Entry.Workspace.MODE_VIMBOARD};c.isVimMode=c._isVimMode;c.attachKeyboardCapture=function(){Entry.keyPressed&&(this._keyboardEvent&&this.detachKeyboardCapture(),this._keyboardEvent=Entry.keyPressed.attach(this,this._keyboardControl))};c.detachKeyboardCapture=function(){Entry.keyPressed&&this._keyboardEvent&&(Entry.keyPressed.detach(this._keyboardEvent),delete this._keyboardEvent)};
c._unbindBlockViewMouseUpEvent=function(){this._blockViewMouseUpEvent&&(this.selectedBlockView.mouseUpEvent.detach(this._blockViewMouseUpEvent),this._blockViewMouseUpEvent=null)};c.setWidgetUpdateEveryTime=function(b){this.widgetUpdateEveryTime=!!b}})(Entry.Workspace.prototype);Entry.BlockDriver=function(){};
(function(c){c.convert=function(){var b=new Date,c;for(c in Entry.block)"function"===typeof Entry.block[c]&&this._convertBlock(c);console.log((new Date).getTime()-b.getTime())};c._convertBlock=function(b){function c(b){var d={type:b.getAttribute("type"),index:{}};b=$(b).children();if(!b)return d;for(var e=0;e<b.length;e++){var f=b[e],g=f.tagName,h=$(f).children()[0],k=f.getAttribute("name");"value"===g?"block"==h.nodeName&&(d.params||(d.params=[]),d.params.push(c(h)),d.index[k]=d.params.length-1):
"field"===g&&(d.params||(d.params=[]),d.params.push(f.textContent),d.index[k]=d.params.length-1)}return d}var e=Blockly.Blocks[b],f=EntryStatic.blockInfo[b],g,h;if(f&&(g=f.class,h=f.isNotFor,f=f.xml))var f=$.parseXML(f),k=c(f.childNodes[0]);e=(new Entry.BlockMockup(e,k,b)).toJSON();e.class=g;e.isNotFor=h;_.isEmpty(e.paramsKeyMap)&&delete e.paramsKeyMap;_.isEmpty(e.statementsKeyMap)&&delete e.statementsKeyMap;e.func=Entry.block[b];-1<"NUMBER TRUE FALSE TEXT FUNCTION_PARAM_BOOLEAN FUNCTION_PARAM_STRING TRUE_UN".split(" ").indexOf(b.toUpperCase())&&
(e.isPrimitive=!0);Entry.block[b]=e}})(Entry.BlockDriver.prototype);Entry.BlockMockup=function(c,b,d){this.templates=[];this.params=[];this.statements=[];this.color="";this.output=this.isNext=this.isPrev=!1;this.fieldCount=0;this.events={};this.def=b||{};this.paramsKeyMap={};this.statementsKeyMap={};this.definition={params:[],type:this.def.type};this.simulate(c);this.def=this.definition};
(function(c){c.simulate=function(b){b.sensorList&&(this.sensorList=b.sensorList);b.portList&&(this.portList=b.portList);b.init.call(this);b.whenAdd&&(this.events.blockViewAdd||(this.events.blockViewAdd=[]),this.events.blockViewAdd.push(b.whenAdd));b.whenRemove&&(this.events.blockViewDestroy||(this.events.blockViewDestroy=[]),this.events.blockViewDestroy.push(b.whenRemove))};c.toJSON=function(){function b(c){if(c&&(c=c.params))for(var d=0;d<c.length;d++){var e=c[d];e&&(delete e.index,b(e))}}var c=
"";this.output?c="Boolean"===this.output?"basic_boolean_field":"basic_string_field":!this.isPrev&&this.isNext?c="basic_event":1==this.statements.length?c="basic_loop":2==this.statements.length?c="basic_double_loop":this.isPrev&&this.isNext?c="basic":this.isPrev&&!this.isNext&&(c="basic_without_next");b(this.def);var e=/dummy_/mi,f;for(f in this.paramsKeyMap)e.test(f)&&delete this.paramsKeyMap[f];for(f in this.statementsKeyMap)e.test(f)&&delete this.statementsKeyMap[f];return{color:this.color,skeleton:c,
statements:this.statements,template:this.templates.filter(function(b){return"string"===typeof b}).join(" "),params:this.params,events:this.events,def:this.def,paramsKeyMap:this.paramsKeyMap,statementsKeyMap:this.statementsKeyMap}};c.appendDummyInput=function(){return this};c.appendValueInput=function(b){this.def&&this.def.index&&(void 0!==this.def.index[b]?this.definition.params.push(this.def.params[this.def.index[b]]):this.definition.params.push(null));this.params.push({type:"Block",accept:"string"});
this._addToParamsKeyMap(b);this.templates.push(this.getFieldCount());return this};c.appendStatementInput=function(b){this._addToStatementsKeyMap(b);this.statements.push({accept:"basic"})};c.setCheck=function(b){var c=this.params;"Boolean"===b&&(c[c.length-1].accept="boolean")};c.appendField=function(b,c){if(!b)return this;"string"===typeof b&&0<b.length?c?(b={type:"Text",text:b,color:c},this.params.push(b),this._addToParamsKeyMap(),this.templates.push(this.getFieldCount()),this.def&&this.def.index&&
void 0!==this.def.index[c]?this.definition.params.push(this.def.params[this.def.index[c]]):this.definition.params.push(void 0)):this.templates.push(b):b.constructor==Blockly.FieldIcon?("start"===b.type?this.params.push({type:"Indicator",img:b.src_,size:17,position:{x:0,y:-2}}):this.params.push({type:"Indicator",img:b.src_,size:12}),this._addToParamsKeyMap(),this.templates.push(this.getFieldCount()),this.definition&&this.definition.params.push(null)):b.constructor==Blockly.FieldDropdown?(this.params.push({type:"Dropdown",
options:b.menuGenerator_,value:b.menuGenerator_[0][1],fontSize:11}),this._addToParamsKeyMap(c),this.templates.push(this.getFieldCount()),this.def&&this.def.index&&void 0!==this.def.index[c]?this.definition.params.push(this.def.params[this.def.index[c]]):this.definition.params.push(void 0)):b.constructor==Blockly.FieldDropdownDynamic?(this.params.push({type:"DropdownDynamic",value:null,menuName:b.menuName_,fontSize:11}),this.templates.push(this.getFieldCount()),this.def&&this.def.index&&void 0!==this.def.index[c]?
this.definition.params.push(this.def.params[this.def.index[c]]):this.definition.params.push(void 0),this._addToParamsKeyMap(c)):b.constructor==Blockly.FieldTextInput?(this.params.push({type:"TextInput",value:10}),this.templates.push(this.getFieldCount()),this._addToParamsKeyMap(c)):b.constructor==Blockly.FieldAngle?(this.params.push({type:"Angle"}),this.templates.push(this.getFieldCount()),this.def&&this.def.index&&void 0!==this.def.index[c]?this.definition.params.push(this.def.params[this.def.index[c]]):
this.definition.params.push(null),this._addToParamsKeyMap(c)):b.constructor==Blockly.FieldKeydownInput?(this.params.push({type:"Keyboard",value:81}),this.templates.push(this.getFieldCount()),void 0!==this.def.index[c]?this.definition.params.push(this.def.params[this.def.index[c]]):this.definition.params.push(void 0),this._addToParamsKeyMap(c)):b.constructor==Blockly.FieldColour?(this.params.push({type:"Color"}),this.templates.push(this.getFieldCount()),this._addToParamsKeyMap(c)):console.log("else",
b);return this};c.setColour=function(b){this.color=b};c.setInputsInline=function(){};c.setOutput=function(b,c){b&&(this.output=c)};c.setPreviousStatement=function(b){this.isPrev=b};c.setNextStatement=function(b){this.isNext=b};c.setEditable=function(b){};c.getFieldCount=function(){this.fieldCount++;return"%"+this.fieldCount};c._addToParamsKeyMap=function(b){b=b?b:"dummy_"+Entry.Utils.generateId();var c=this.paramsKeyMap;c[b]=Object.keys(c).length};c._addToStatementsKeyMap=function(b){b=b?b:"dummy_"+
Entry.Utils.generateId();var c=this.statementsKeyMap;c[b]=Object.keys(c).length}})(Entry.BlockMockup.prototype);Entry.Playground=function(){this.enableArduino=this.isTextBGMode_=!1;this.viewMode_="default";Entry.addEventListener("textEdited",this.injectText);Entry.addEventListener("hwChanged",this.updateHW)};
(function(c){c.setMode=function(b){console.log("playground setMode",b);this.mainWorkspace.setMode(b)};c.generateView=function(b,c){this.view_=b;this.view_.addClass("entryPlayground");c&&"workspace"!=c?"phone"==c&&(this.view_.addClass("entryPlaygroundPhone"),b=Entry.createElement("div","entryCategoryTab"),b.addClass("entryPlaygroundTabPhone"),Entry.view_.insertBefore(b,this.view_),this.generateTabView(b),this.tabView_=b,b=Entry.createElement("div","entryCurtain"),b.addClass("entryPlaygroundCurtainPhone"),
b.addClass("entryRemove"),b.innerHTML=Lang.Workspace.cannot_edit_click_to_stop,b.bindOnClick(function(){Entry.engine.toggleStop()}),this.view_.appendChild(b),this.curtainView_=b,Entry.pictureEditable&&(b=Entry.createElement("div","entryPicture"),b.addClass("entryPlaygroundPicturePhone"),b.addClass("entryRemove"),this.view_.appendChild(b),this.generatePictureView(b),this.pictureView_=b),b=Entry.createElement("div","entryText"),b.addClass("entryRemove"),this.view_.appendChild(b),this.generateTextView(b),
this.textView_=b,Entry.soundEditable&&(b=Entry.createElement("div","entrySound"),b.addClass("entryPlaygroundSoundWorkspacePhone"),b.addClass("entryRemove"),this.view_.appendChild(b),this.generateSoundView(b),this.soundView_=b),b=Entry.createElement("div","entryDefault"),this.view_.appendChild(b),this.generateDefaultView(b),this.defaultView_=b,b=Entry.createElement("div","entryCode"),b.addClass("entryPlaygroundCodePhone"),this.view_.appendChild(b),this.generateCodeView(b),this.codeView_=this.codeView_=
b,Entry.addEventListener("run",function(b){Entry.playground.curtainView_.removeClass("entryRemove")}),Entry.addEventListener("stop",function(b){Entry.playground.curtainView_.addClass("entryRemove")})):(this.view_.addClass("entryPlaygroundWorkspace"),b=Entry.createElement("div","entryCategoryTab"),b.addClass("entryPlaygroundTabWorkspace"),this.view_.appendChild(b),this.generateTabView(b),this.tabView_=b,b=Entry.createElement("div","entryCurtain"),b.addClass("entryPlaygroundCurtainWorkspace"),b.addClass("entryRemove"),
c=Lang.Workspace.cannot_edit_click_to_stop.split("."),b.innerHTML=c[0]+".<br/>"+c[1],b.addEventListener("click",function(){Entry.engine.toggleStop()}),this.view_.appendChild(b),this.curtainView_=b,b=Entry.createElement("div","entryPicture"),b.addClass("entryPlaygroundPictureWorkspace"),b.addClass("entryRemove"),this.view_.appendChild(b),this.generatePictureView(b),this.pictureView_=b,b=Entry.createElement("div","entryText"),b.addClass("entryPlaygroundTextWorkspace"),b.addClass("entryRemove"),this.view_.appendChild(b),
this.generateTextView(b),this.textView_=b,b=Entry.createElement("div","entrySound"),b.addClass("entryPlaygroundSoundWorkspace"),b.addClass("entryRemove"),this.view_.appendChild(b),this.generateSoundView(b),this.soundView_=b,b=Entry.createElement("div","entryDefault"),b.addClass("entryPlaygroundDefaultWorkspace"),this.view_.appendChild(b),this.generateDefaultView(b),this.defaultView_=b,b=Entry.createElement("div","entryCode"),b.addClass("entryPlaygroundCodeWorkspace"),b.addClass("entryRemove"),this.view_.appendChild(b),
this.generateCodeView(b),this.codeView_=b,c=Entry.createElement("div"),c.addClass("entryPlaygroundResizeWorkspace","entryRemove"),this.resizeHandle_=c,this.view_.appendChild(c),this.initializeResizeHandle(c),this.codeView_=b,Entry.addEventListener("run",function(b){Entry.playground.curtainView_.removeClass("entryRemove")}),Entry.addEventListener("stop",function(b){Entry.playground.curtainView_.addClass("entryRemove")}));this.applyTabOption()};c.generateDefaultView=function(b){return b};c.generateTabView=
function(b){var c=this,e=Entry.createElement("ul");e.addClass("entryTabListWorkspace");this.tabList_=e;b.appendChild(e);this.tabViewElements={};b=Entry.createElement("li","entryCodeTab");b.innerHTML=Lang.Workspace.tab_code;b.addClass("entryTabListItemWorkspace entryTabSelected");e.appendChild(b);b.bindOnClick(function(b){Entry.do("playgroundChangeViewMode","code",c.selectedViewMode)});this._codeTab=this.tabViewElements.code=b;b=Entry.createElement("li","entryPictureTab");b.innerHTML=Lang.Workspace.tab_picture;
b.addClass("entryTabListItemWorkspace");e.appendChild(b);b.bindOnClick(function(b){Entry.do("playgroundChangeViewMode","picture",c.selectedViewMode)});this.pictureTab=this.tabViewElements.picture=b;b=Entry.createElement("li","entryTextboxTab");b.innerHTML=Lang.Workspace.tab_text;b.addClass("entryTabListItemWorkspace");e.appendChild(b);b.bindOnClick(function(b){Entry.do("playgroundChangeViewMode","text",c.selectedViewMode)});this.tabViewElements.text=b;b.addClass("entryRemove");this.textboxTab=b;b=
Entry.createElement("li","entrySoundTab");b.innerHTML=Lang.Workspace.tab_sound;b.addClass("entryTabListItemWorkspace");e.appendChild(b);b.bindOnClick(function(b){Entry.do("playgroundChangeViewMode","sound",c.selectedViewMode)});this.soundTab=this.tabViewElements.sound=b;b=Entry.createElement("li","entryVariableTab");b.innerHTML=Lang.Workspace.tab_attribute;b.addClass("entryTabListItemWorkspace entryVariableTabWorkspace");e.appendChild(b);b.bindOnClick(function(b){Entry.do("playgroundChangeViewMode",
"variable",c.selectedViewMode)});this.variableTab=this.tabViewElements.variable=b};c.generateCodeView=function(b){var c=this.createVariableView();b.appendChild(c);this.variableView_=c;b=Entry.Dom(b);c=Entry.Dom("div",{parent:b,id:"entryWorkspaceBoard",class:"entryWorkspaceBoard"});b={blockMenu:{dom:Entry.Dom("div",{parent:b,id:"entryWorkspaceBlockMenu",class:"entryWorkspaceBlockMenu"}),align:"LEFT",categoryData:EntryStatic.getAllBlocks(),scroll:!0},board:{dom:c},readOnly:Entry.readOnly};Entry.textCodingEnable&&
(b.vimBoard={dom:c});this.mainWorkspace=new Entry.Workspace(b);this.blockMenu=this.mainWorkspace.blockMenu;this.board=this.mainWorkspace.board;this.blockMenu.banClass("checker");this.vimBoard=this.mainWorkspace.vimBoard;Entry.hw&&this.updateHW()};c.generatePictureView=function(b){if("workspace"==Entry.type){var c=Entry.createElement("div","entryAddPicture");c.addClass("entryPlaygroundAddPicture");c.bindOnClick(function(b){Entry.do("playgroundClickAddPicture")});var e=Entry.createElement("div","entryAddPictureInner");
e.addClass("entryPlaygroundAddPictureInner");e.innerHTML=Lang.Workspace.picture_add;c.appendChild(e);b.appendChild(c);this._pictureAddButton=e;c=Entry.createElement("ul","entryPictureList");c.addClass("entryPlaygroundPictureList");$&&$(c).sortable({start:function(b,c){c.item.data("start_pos",c.item.index())},stop:function(b,c){b=c.item.data("start_pos");c=c.item.index();Entry.playground.movePicture(b,c)},axis:"y"});b.appendChild(c);this.pictureListView_=c;c=Entry.createElement("div","entryPainter");
c.addClass("entryPlaygroundPainter");b.appendChild(c);this.painter=new Entry.Painter2(c)}else"phone"==Entry.type&&(c=Entry.createElement("div","entryAddPicture"),c.addClass("entryPlaygroundAddPicturePhone"),c.bindOnClick(function(b){Entry.dispatchEvent("openPictureManager")}),e=Entry.createElement("div","entryAddPictureInner"),e.addClass("entryPlaygroundAddPictureInnerPhone"),e.innerHTML=Lang.Workspace.picture_add,c.appendChild(e),b.appendChild(c),c=Entry.createElement("ul","entryPictureList"),c.addClass("entryPlaygroundPictureListPhone"),
$&&$(c).sortable({start:function(b,c){c.item.data("start_pos",c.item.index())},stop:function(b,c){b=c.item.data("start_pos");c=c.item.index();Entry.playground.movePicture(b,c)},axis:"y"}),b.appendChild(c),this.pictureListView_=c)};c.generateTextView=function(b){var c=Entry.createElement("div");b.appendChild(c);var e=Entry.createElement("div");e.addClass("textProperties");c.appendChild(e);b=Entry.createElement("div");b.addClass("entryTextFontSelect");e.appendChild(b);var f=Entry.createElement("select",
"entryPainterAttrFontName");f.addClass("entryPlaygroundPainterAttrFontName","entryTextFontSelecter");f.size="1";f.onchange=function(b){b=b.target.value;if("Nanum Pen Script"==b||"Jeju Hallasan"==b){var c=t.value;Entry.playground.object.entity.getLineBreak()&&(c=v.value);null!=/[\u4E00-\u9FFF]/.exec(c)&&(b="KoPub Batang",f.value=b,alert(Lang.Menus.not_supported_text))}Entry.playground.object.entity.setFontType(b)};for(var g=0;g<Entry.fonts.length;g++){var h=Entry.fonts[g],k=Entry.createElement("option");
k.value=h.family;k.innerHTML=h.name;f.appendChild(k)}this.fontName_=f;b.appendChild(f);b=Entry.createElement("ul");b.addClass("entryPlayground_text_buttons");e.appendChild(b);g=Entry.createElement("li");g.addClass("entryPlaygroundTextAlignLeft");g.bindOnClick(function(b){Entry.playground.setFontAlign(Entry.TEXT_ALIGN_LEFT)});b.appendChild(g);this.alignLeftBtn=g;g=Entry.createElement("li");g.addClass("entryPlaygroundTextAlignCenter");g.bindOnClick(function(b){Entry.playground.setFontAlign(Entry.TEXT_ALIGN_CENTER)});
b.appendChild(g);this.alignCenterBtn=g;g=Entry.createElement("li");g.addClass("entryPlaygroundTextAlignRight");g.bindOnClick(function(b){Entry.playground.setFontAlign(Entry.TEXT_ALIGN_RIGHT)});b.appendChild(g);this.alignRightBtn=g;g=Entry.createElement("li");b.appendChild(g);e=Entry.createElement("a");g.appendChild(e);e.bindOnClick(function(){Entry.playground.object.entity.toggleFontBold()?l.src=Entry.mediaFilePath+"text_button_bold_true.png":l.src=Entry.mediaFilePath+"text_button_bold_false.png"});
var l=Entry.createElement("img","entryPlaygroundText_boldImage");e.appendChild(l);l.src=Entry.mediaFilePath+"text_button_bold_false.png";g=Entry.createElement("li");b.appendChild(g);e=Entry.createElement("a");g.appendChild(e);e.bindOnClick(function(){var b=!Entry.playground.object.entity.getUnderLine()||!1;m.src=Entry.mediaFilePath+"text_button_underline_"+b+".png";Entry.playground.object.entity.setUnderLine(b)});var m=Entry.createElement("img","entryPlaygroundText_underlineImage");e.appendChild(m);
m.src=Entry.mediaFilePath+"text_button_underline_false.png";g=Entry.createElement("li");b.appendChild(g);e=Entry.createElement("a");g.appendChild(e);e.bindOnClick(function(){Entry.playground.object.entity.toggleFontItalic()?q.src=Entry.mediaFilePath+"text_button_italic_true.png":q.src=Entry.mediaFilePath+"/text_button_italic_false.png"});var q=Entry.createElement("img","entryPlaygroundText_italicImage");e.appendChild(q);q.src=Entry.mediaFilePath+"text_button_italic_false.png";g=Entry.createElement("li");
b.appendChild(g);e=Entry.createElement("a");g.appendChild(e);e.bindOnClick(function(){var b=!Entry.playground.object.entity.getStrike()||!1;Entry.playground.object.entity.setStrike(b);n.src=Entry.mediaFilePath+"text_button_strike_"+b+".png"});var n=Entry.createElement("img","entryPlaygroundText_strikeImage");e.appendChild(n);n.src=Entry.mediaFilePath+"text_button_strike_false.png";e=Entry.createElement("li");b.appendChild(e);g=Entry.createElement("a");e.appendChild(g);g.bindOnClick(function(){Entry.playground.toggleColourChooser("foreground")});
e=Entry.createElement("img");g.appendChild(e);e.src=Entry.mediaFilePath+"text_button_color_false.png";e=Entry.createElement("li");b.appendChild(e);b=Entry.createElement("a");e.appendChild(b);b.bindOnClick(function(){Entry.playground.toggleColourChooser("background")});e=Entry.createElement("img");b.appendChild(e);e.src=Entry.mediaFilePath+"text_button_background_false.png";e=Entry.createElement("div");e.addClass("entryPlayground_fgColorDiv");h=Entry.createElement("div");h.addClass("entryPlayground_bgColorDiv");
g.appendChild(e);b.appendChild(h);e=Entry.createElement("div");e.addClass("entryPlaygroundTextColoursWrapper");this.coloursWrapper=e;g.appendChild(e);h=Entry.getColourCodes();for(g=0;g<h.length;g++)k=Entry.createElement("div"),k.addClass("modal_colour"),k.setAttribute("colour",h[g]),k.style.backgroundColor=h[g],0===g&&k.addClass("modalColourTrans"),k.bindOnClick(function(b){Entry.playground.setTextColour(b.target.getAttribute("colour"))}),e.appendChild(k);e.style.display="none";e=Entry.createElement("div");
e.addClass("entryPlaygroundTextBackgroundsWrapper");this.backgroundsWrapper=e;b.appendChild(e);for(g=0;g<h.length;g++)k=Entry.createElement("div"),k.addClass("modal_colour"),k.setAttribute("colour",h[g]),k.style.backgroundColor=h[g],0===g&&k.addClass("modalColourTrans"),k.bindOnClick(function(b){Entry.playground.setBackgroundColour(b.target.getAttribute("colour"))}),e.appendChild(k);e.style.display="none";var t=Entry.createElement("input");t.addClass("entryPlayground_textBox");b=function(){var b=
Entry.getElementsByClassName("entryPlaygroundPainterAttrFontName")[0];"Nanum Pen Script"!=b.value&&"Jeju Hallasan"!=b.value||null==/[\u4E00-\u9FFF]/.exec(this.value)||(b.value="KoPub Batang",Entry.playground.object.entity.setFontType("KoPub Batang"),alert(Lang.Menus.not_supported_text));Entry.playground.object.setText(this.value);Entry.playground.object.entity.setText(this.value)};t.onkeyup=b;t.onchange=b;t.onblur=function(){Entry.dispatchEvent("textEdited")};this.textEditInput=t;c.appendChild(t);
var v=Entry.createElement("textarea");v.addClass("entryPlayground_textArea");v.style.display="none";v.onkeyup=b;v.onchange=b;v.onblur=function(){Entry.dispatchEvent("textEdited")};this.textEditArea=v;c.appendChild(v);b=Entry.createElement("div");b.addClass("entryPlaygroundFontSizeWrapper");c.appendChild(b);this.fontSizeWrapper=b;var y=Entry.createElement("div");y.addClass("entryPlaygroundFontSizeSlider");b.appendChild(y);var x=Entry.createElement("div");x.addClass("entryPlaygroundFontSizeIndicator");
y.appendChild(x);this.fontSizeIndiciator=x;var r=Entry.createElement("div");r.addClass("entryPlaygroundFontSizeKnob");y.appendChild(r);this.fontSizeKnob=r;g=Entry.createElement("div");g.addClass("entryPlaygroundFontSizeLabel");g.innerHTML="\uae00\uc790 \ud06c\uae30";b.appendChild(g);var A=!1,C=0;r.onmousedown=function(b){A=!0;C=$(y).offset().left};r.addEventListener("touchstart",function(b){A=!0;C=$(y).offset().left});document.addEventListener("mousemove",function(b){A&&(b=b.pageX-C,b=Math.max(b,
5),b=Math.min(b,88),r.style.left=b+"px",b/=.88,x.style.width=b+"%",Entry.playground.object.entity.setFontSize(b))});document.addEventListener("touchmove",function(b){A&&(b=b.touches[0].pageX-C,b=Math.max(b,5),b=Math.min(b,88),r.style.left=b+"px",b/=.88,x.style.width=b+"%",Entry.playground.object.entity.setFontSize(b))});document.addEventListener("mouseup",function(b){A=!1});document.addEventListener("touchend",function(b){A=!1});b=Entry.createElement("div");b.addClass("entryPlaygroundLinebreakWrapper");
c.appendChild(b);c=Entry.createElement("hr");c.addClass("entryPlaygroundLinebreakHorizontal");b.appendChild(c);c=Entry.createElement("div");c.addClass("entryPlaygroundLinebreakButtons");b.appendChild(c);g=Entry.createElement("img");g.bindOnClick(function(){Entry.playground.toggleLineBreak(!1);z.innerHTML=Lang.Menus.linebreak_off_desc_1;D.innerHTML=Lang.Menus.linebreak_off_desc_2;B.innerHTML=Lang.Menus.linebreak_off_desc_3});g.src=Entry.mediaFilePath+"text-linebreak-off-true.png";c.appendChild(g);
this.linebreakOffImage=g;g=Entry.createElement("img");g.bindOnClick(function(){Entry.playground.toggleLineBreak(!0);z.innerHTML=Lang.Menus.linebreak_on_desc_1;D.innerHTML=Lang.Menus.linebreak_on_desc_2;B.innerHTML=Lang.Menus.linebreak_on_desc_3});g.src=Entry.mediaFilePath+"text-linebreak-on-false.png";c.appendChild(g);this.linebreakOnImage=g;c=Entry.createElement("div");c.addClass("entryPlaygroundLinebreakDescription");b.appendChild(c);var z=Entry.createElement("p");z.innerHTML=Lang.Menus.linebreak_off_desc_1;
c.appendChild(z);b=Entry.createElement("ul");c.appendChild(b);var D=Entry.createElement("li");D.innerHTML=Lang.Menus.linebreak_off_desc_2;b.appendChild(D);var B=Entry.createElement("li");B.innerHTML=Lang.Menus.linebreak_off_desc_3;b.appendChild(B)};c.generateSoundView=function(b){if("workspace"==Entry.type){var c=Entry.createElement("div","entryAddSound");c.addClass("entryPlaygroundAddSound");c.bindOnClick(function(b){Entry.do("playgroundClickAddSound")});var e=Entry.createElement("div","entryAddSoundInner");
e.addClass("entryPlaygroundAddSoundInner");e.innerHTML=Lang.Workspace.sound_add;c.appendChild(e);b.appendChild(c);c=Entry.createElement("ul","entrySoundList");c.addClass("entryPlaygroundSoundList");$&&$(c).sortable({start:function(b,c){c.item.data("start_pos",c.item.index())},stop:function(b,c){b=c.item.data("start_pos");c=c.item.index();Entry.playground.moveSound(b,c)},axis:"y"});b.appendChild(c);this.soundListView_=c;this._soundAddButton=e}else"phone"==Entry.type&&(c=Entry.createElement("div","entryAddSound"),
c.addClass("entryPlaygroundAddSoundPhone"),c.bindOnClick(function(b){Entry.dispatchEvent("openSoundManager")}),e=Entry.createElement("div","entryAddSoundInner"),e.addClass("entryPlaygroundAddSoundInnerPhone"),e.innerHTML=Lang.Workspace.sound_add,c.appendChild(e),b.appendChild(c),c=Entry.createElement("ul","entrySoundList"),c.addClass("entryPlaygroundSoundListPhone"),$&&$(c).sortable({start:function(b,c){c.item.data("start_pos",c.item.index())},stop:function(b,c){b=c.item.data("start_pos");c=c.item.index();
Entry.playground.moveSound(b,c)},axis:"y"}),b.appendChild(c),this.soundListView_=c)};c.injectObject=function(b){if(!b)this.changeViewMode("code"),this.object=null;else if(b!==this.object){this.object&&this.object.toggleInformation(!1);this.object=b;this.setMenu(b.objectType);this.injectCode();"sprite"==b.objectType&&Entry.pictureEditable?(this.tabViewElements.text&&this.tabViewElements.text.addClass("entryRemove"),this.tabViewElements.picture&&this.tabViewElements.picture.removeClass("entryRemove")):
"textBox"==b.objectType&&(this.tabViewElements.picture&&this.tabViewElements.picture.addClass("entryRemove"),this.tabViewElements.text&&this.tabViewElements.text.removeClass("entryRemove"));var c=this.viewMode_;"default"==c?this.changeViewMode("code"):"variable"==c?this.changeViewMode("variable"):"picture"!=c&&"text"!=c||"textBox"!=b.objectType?"text"!=c&&"picture"!=c||"sprite"!=b.objectType?"sound"==c&&this.changeViewMode("sound"):this.changeViewMode("picture"):this.changeViewMode("text");this.reloadPlayground()}};
c.injectCode=function(){var b=this.object.script,c=this.mainWorkspace,e=Entry.getMainWS();Entry.textCodingEnable&&e&&!e.vimBoard._parser._onError&&(e.vimBoard._changedObject?(e.vimBoard._currentObject=e.vimBoard._changedObject,e.vimBoard._currentScene=e.vimBoard._changedObject.scene):Entry.playground&&(e.vimBoard._currentObject=Entry.playground.object,e.vimBoard._currentScene=Entry.playground.object.scene),Entry.playground&&Entry.textCodingEnable&&(e.vimBoard._changedObject=Entry.playground.object,
e.vimBoard._currentScene=Entry.playground.object.scene));c.changeBoardCode(b,function(){c.getBoard().adjustThreadsPosition()})};c.injectPicture=function(){var b=this.pictureListView_;if(b){for(;b.hasChildNodes();)b.removeChild(b.lastChild);if(this.object){for(var c=this.object.pictures,e=0,f=c.length;e<f;e++){var g=c[e];!g.view&&Entry.playground.generatePictureElement(g);(g=c[e].view)||console.log(g);g.orderHolder.innerHTML=e+1;b.appendChild(g)}this.selectPicture(this.object.selectedPicture)}else Entry.dispatchEvent("pictureClear")}};
c.addPicture=function(b,c){b=Entry.cloneSimpleObject(b);!0!==c&&delete b.id;delete b.view;b=JSON.parse(JSON.stringify(b));b.id||(b.id=Entry.generateHash());b.name=Entry.getOrderedName(b.name,this.object.pictures);this.generatePictureElement(b);Entry.do("objectAddPicture",this.object.id,b);this.injectPicture();this.selectPicture(b)};c.setPicture=function(b){var c=Entry.container.getPictureElement(b.id,b.objectId),e=$(c);if(c){b.view=c;c.picture=b;c=e.find("#t_"+b.id)[0];if(b.fileurl)c.style.backgroundImage=
'url("'+b.fileurl+'")';else{var f=b.filename;c.style.backgroundImage='url("'+Entry.defaultPath+"/uploads/"+f.substring(0,2)+"/"+f.substring(2,4)+"/thumb/"+f+'.png")'}e.find("#s_"+b.id)[0].innerHTML=b.dimension.width+" X "+b.dimension.height}Entry.container.setPicture(b)};c.downloadPicture=function(b){b=Entry.playground.object.getPicture(b);b.fileurl?window.open(b.fileurl):window.open("/api/sprite/download/image/"+encodeURIComponent(b.filename)+"/"+encodeURIComponent(b.name)+".png")};c.clonePicture=
function(b){b=Entry.playground.object.getPicture(b);this.addPicture(b,!0)};c.selectPicture=function(b){for(var c=this.object.pictures,e=0,f=c.length;e<f;e++){var g=c[e];g.id===b.id?g.view.addClass("entryPictureSelected"):g.view.removeClass("entryPictureSelected")}var h;b&&b.id&&(h=Entry.container.selectPicture(b.id,b.objectId));this.object.id===h&&Entry.dispatchEvent("pictureSelected",b)};c.movePicture=function(b,c){this.object.pictures.splice(c,0,this.object.pictures.splice(b,1)[0]);this.injectPicture();
Entry.stage.sortZorder()};c.injectText=function(){if(Entry.playground.object){Entry.playground.textEditInput.value=Entry.playground.object.entity.getText();Entry.playground.textEditArea.value=Entry.playground.object.entity.getText();Entry.playground.fontName_.value=Entry.playground.object.entity.getFontName();if(Entry.playground.object.entity.font){var b=-1<Entry.playground.object.entity.font.indexOf("bold")||!1;$("#entryPlaygroundText_boldImage").attr("src",Entry.mediaFilePath+"text_button_bold_"+
b+".png");b=-1<Entry.playground.object.entity.font.indexOf("italic")||!1;$("#entryPlaygroundText_italicImage").attr("src",Entry.mediaFilePath+"text_button_italic_"+b+".png")}b=Entry.playground.object.entity.getUnderLine()||!1;$("#entryPlaygroundText_underlineImage").attr("src",Entry.mediaFilePath+"text_button_underline_"+b+".png");b=Entry.playground.object.entity.getStrike()||!1;$("#entryPlaygroundText_strikeImage").attr("src",Entry.mediaFilePath+"text_button_strike_"+b+".png");$(".entryPlayground_fgColorDiv").css("backgroundColor",
Entry.playground.object.entity.colour);$(".entryPlayground_bgColorDiv").css("backgroundColor",Entry.playground.object.entity.bgColour);Entry.playground.toggleLineBreak(Entry.playground.object.entity.getLineBreak());Entry.playground.object.entity.getLineBreak()&&($(".entryPlaygroundLinebreakDescription > p").html(Lang.Menus.linebreak_on_desc_1),$(".entryPlaygroundLinebreakDescription > ul > li").eq(0).html(Lang.Menus.linebreak_on_desc_2),$(".entryPlaygroundLinebreakDescription > ul > li").eq(1).html(Lang.Menus.linebreak_on_desc_3));
Entry.playground.setFontAlign(Entry.playground.object.entity.getTextAlign());b=Entry.playground.object.entity.getFontSize();Entry.playground.fontSizeIndiciator.style.width=b+"%";Entry.playground.fontSizeKnob.style.left=.88*b+"px"}};c.injectSound=function(){var b=this.soundListView_;if(b){for(;b.hasChildNodes();)b.removeChild(b.lastChild);if(this.object)for(var c=this.object.sounds,e=0,f=c.length;e<f;e++){var g=c[e];!g.view&&Entry.playground.generateSoundElement(g);g=g.view;g.orderHolder.innerHTML=
e+1;b.appendChild(g)}}};c.moveSound=function(b,c){this.object.sounds.splice(c,0,this.object.sounds.splice(b,1)[0]);this.updateListViewOrder("sound");Entry.stage.sortZorder()};c.addSound=function(b,c,e){b=Entry.cloneSimpleObject(b);delete b.view;!0!==e&&delete b.id;b=JSON.parse(JSON.stringify(b));b.id||(b.id=Entry.generateHash());b.name=Entry.getOrderedName(b.name,this.object.sounds);this.generateSoundElement(b);Entry.do("objectAddSound",this.object.id,b);this.injectSound()};c.changeViewMode=function(b){for(var c in this.tabViewElements)this.tabViewElements[c].removeClass("entryTabSelected");
"default"!=b&&this.tabViewElements[b].addClass("entryTabSelected");if("variable"==b)Entry.playground.toggleOnVariableView(),this.tabViewElements.code.removeClass("entryTabSelected"),this.tabViewElements[b].addClass("entryTabSelected");else{var e=this.view_.children;for(c=0;c<e.length;c++){var f=e[c];-1<f.id.toUpperCase().indexOf(b.toUpperCase())?f.removeClass("entryRemove"):f.addClass("entryRemove")}Entry.pictureEditable&&("picture"==b?(this.painter.show(),this.pictureView_.object&&this.pictureView_.object==
this.object||(this.pictureView_.object=this.object,this.injectPicture())):this.painter.hide());if("sound"==b&&(!this.soundView_.object||this.soundView_.object!=this.object))this.soundView_.object=this.object,this.injectSound();else if("text"==b&&"textBox"==this.object.objectType||this.textView_.object!=this.object)this.textView_.object=this.object,this.injectText();"code"==b&&(this.resizeHandle_&&this.resizeHandle_.removeClass("entryRemove"),this.blockMenu.reDraw());Entry.engine.isState("run")&&this.curtainView_.removeClass("entryRemove");
this.selectedViewMode=this.viewMode_=b;this.toggleOffVariableView()}};c.createVariableView=function(){var b=Entry.createElement("div");Entry.type&&"workspace"!=Entry.type?"phone"==Entry.type&&b.addClass("entryVariablePanelPhone"):b.addClass("entryVariablePanelWorkspace");this.variableViewWrapper_=b;Entry.variableContainer.createDom(b);return b};c.toggleOnVariableView=function(){Entry.playground.changeViewMode("code");this.hideBlockMenu();Entry.variableContainer.updateList();this.variableView_.removeClass("entryRemove");
this.resizeHandle_.removeClass("entryRemove");this.selectedViewMode=this.viewMode_="variable"};c.toggleOffVariableView=function(){this.showBlockMenu();this.variableView_.addClass("entryRemove")};c.editBlock=function(){var b=Entry.playground;Entry.stateManager&&Entry.stateManager.addCommand("edit block",b,b.restoreBlock,b.object,b.object.getScriptText())};c.mouseupBlock=function(){if(Entry.reporter){var b=Entry.playground,c=b.object;Entry.reporter.report(new Entry.State("edit block mouseup",b,b.restoreBlock,
c,c.getScriptText()))}};c.restoreBlock=function(b,c){Entry.container.selectObject(b.id);Entry.stateManager&&Entry.stateManager.addCommand("restore block",this,this.restoreBlock,this.object,this.object.getScriptText());Blockly.Xml.textToDom(c)};c.setMenu=function(b){if(this.currentObjectType!=b){var c=this.blockMenu;c.unbanClass(this.currentObjectType);c.banClass(b);c.setMenu();c.selectMenu(0,!0);this.currentObjectType=b}};c.hideTabs=function(){var b=["picture","text","sound","variable"],c;for(c in b)this.hideTab([b[c]])};
c.hideTab=function(b){this.tabViewElements[b]&&(this.tabViewElements[b].addClass("hideTab"),this.tabViewElements[b].removeClass("showTab"))};c.showTabs=function(){var b=["picture","text","sound","variable"],c;for(c in b)this.showTab(b[c])};c.showTab=function(b){this.tabViewElements[b]&&(this.tabViewElements[b].addClass("showTab"),this.tabViewElements[b].removeClass("hideTab"))};c.initializeResizeHandle=function(b){$(b).bind("mousedown touchstart",function(b){Entry.playground.resizing=!0;Entry.documentMousemove&&
(Entry.playground.resizeEvent=Entry.documentMousemove.attach(this,function(b){Entry.playground.resizing&&Entry.resizeElement({menuWidth:b.clientX-Entry.interfaceState.canvasWidth})}))});$(document).bind("mouseup touchend",function(b){if(b=Entry.playground.resizeEvent)Entry.playground.resizing=!1,Entry.documentMousemove.detach(b),delete Entry.playground.resizeEvent})};c.reloadPlayground=function(){var b=this.mainWorkspace;b&&(b.getBlockMenu().reDraw(),b.getBoard().reDraw())};c.flushPlayground=function(){this.object=
null;if(Entry.playground&&Entry.playground.view_){this.injectPicture();this.injectSound();var b=Entry.playground.mainWorkspace.getBoard();b.clear();b.changeCode(null)}};c.refreshPlayground=function(){Entry.playground&&Entry.playground.view_&&("picture"===this.getViewMode()&&this.injectPicture(),"sound"===this.getViewMode()&&this.injectSound())};c.updateListViewOrder=function(b){b="picture"==b?this.pictureListView_.childNodes:this.soundListView_.childNodes;for(var c=0,e=b.length;c<e;c++)b[c].orderHolder.innerHTML=
c+1};c.generatePictureElement=function(b){function c(){if(""===this.value.trim())Entry.deAttachEventListener(this,"blur",c),alert("\uc774\ub984\uc744 \uc785\ub825\ud558\uc5ec \uc8fc\uc138\uc694."),this.focus(),Entry.attachEventListener(this,"blur",c);else{for(var b=$(".entryPlaygroundPictureName"),d=0;d<b.length;d++)if(b.eq(d).val()==h.value&&b[d]!=this){Entry.deAttachEventListener(this,"blur",c);alert("\uc774\ub984\uc774 \uc911\ubcf5 \ub418\uc5c8\uc2b5\ub2c8\ub2e4.");this.focus();Entry.attachEventListener(this,
"blur",c);return}b=this.value;this.picture.name=b;if(d=Entry.playground){if(d.object){var e=d.object.getPicture(this.picture.id);e&&(e.name=b)}(e=d.painter)&&e.file&&(e.file.name=b);d.reloadPlayground()}Entry.dispatchEvent("pictureNameChanged",this.picture)}}var e=Entry.createElement("li",b.id);b.view=e;e.addClass("entryPlaygroundPictureElement");e.picture=b;e.bindOnClick(function(b){Entry.playground.selectPicture(this.picture)});Entry.Utils.disableContextmenu(b.view);Entry.ContextMenu.onContextmenu($(b.view),
function(){Entry.ContextMenu.show([{text:Lang.Workspace.context_rename,callback:function(){h.focus()}},{text:Lang.Workspace.context_duplicate,callback:function(){Entry.playground.clonePicture(b.id)}},{text:Lang.Workspace.context_remove,callback:function(){Entry.playground.object.removePicture(b.id)?(Entry.removeElement(e),Entry.toast.success(Lang.Workspace.shape_remove_ok,b.name+" "+Lang.Workspace.shape_remove_ok_msg)):Entry.toast.alert(Lang.Workspace.shape_remove_fail,Lang.Workspace.shape_remove_fail_msg)}},
{divider:!0},{text:Lang.Workspace.context_download,callback:function(){Entry.playground.downloadPicture(b.id)}}],"workspace-contextmenu")});var f=Entry.createElement("div");f.addClass("entryPlaygroundPictureOrder");e.orderHolder=f;e.appendChild(f);f=Entry.createElement("div","t_"+b.id);f.addClass("entryPlaygroundPictureThumbnail");if(b.fileurl)f.style.backgroundImage='url("'+b.fileurl+'")';else{var g=b.filename;f.style.backgroundImage='url("'+Entry.defaultPath+"/uploads/"+g.substring(0,2)+"/"+g.substring(2,
4)+"/thumb/"+g+'.png")'}e.appendChild(f);var h=Entry.createElement("input");h.addClass("entryPlaygroundPictureName");h.addClass("entryEllipsis");h.picture=b;h.value=b.name;Entry.attachEventListener(h,"blur",c);h.onkeypress=function(b){13==b.keyCode&&this.blur()};e.appendChild(h);f=Entry.createElement("div","s_"+b.id);f.addClass("entryPlaygroundPictureSize");f.innerHTML=b.dimension.width+" X "+b.dimension.height;e.appendChild(f)};c.generateSoundElement=function(b){var c=Entry.createElement("sound",
b.id);b.view=c;c.addClass("entryPlaygroundSoundElement");c.sound=b;Entry.Utils.disableContextmenu(b.view);Entry.ContextMenu.onContextmenu($(b.view),function(){Entry.ContextMenu.show([{text:Lang.Workspace.context_rename,callback:function(){k.focus()}},{text:Lang.Workspace.context_duplicate,callback:function(){Entry.playground.addSound(b,!0)}},{text:Lang.Workspace.context_remove,callback:function(){Entry.do("objectRemoveSound",Entry.playground.object.id,b)?(Entry.removeElement(c),Entry.toast.success(Lang.Workspace.sound_remove_ok,
b.name+" "+Lang.Workspace.sound_remove_ok_msg)):Entry.toast.alert(Lang.Workspace.sound_remove_fail,"");Entry.removeElement(c)}}],"workspace-contextmenu")});var e=Entry.createElement("div");e.addClass("entryPlaygroundSoundOrder");c.orderHolder=e;c.appendChild(e);var f=Entry.createElement("div");f.addClass("entryPlaygroundSoundThumbnail");f.addClass("entryPlaygroundSoundPlay");var g=!1,h;f.addEventListener("click",function(){g?(g=!1,f.removeClass("entryPlaygroundSoundStop"),f.addClass("entryPlaygroundSoundPlay"),
h.stop()):(g=!0,f.removeClass("entryPlaygroundSoundPlay"),f.addClass("entryPlaygroundSoundStop"),h=createjs.Sound.play(b.id),h.addEventListener("complete",function(b){f.removeClass("entryPlaygroundSoundStop");f.addClass("entryPlaygroundSoundPlay");g=!1}),h.addEventListener("loop",function(b){}),h.addEventListener("failed",function(b){}))});c.appendChild(f);var k=Entry.createElement("input");k.addClass("entryPlaygroundSoundName");k.sound=b;k.value=b.name;var l=document.getElementsByClassName("entryPlaygroundSoundName");
k.onblur=function(){if(""===this.value)alert("\uc774\ub984\uc744 \uc785\ub825\ud558\uc5ec \uc8fc\uc138\uc694."),this.focus();else{for(var b=0,c=0;c<l.length;c++)if(l[c].value==k.value&&(b+=1,1<b)){alert("\uc774\ub984\uc774 \uc911\ubcf5 \ub418\uc5c8\uc2b5\ub2c8\ub2e4.");this.focus();return}this.sound.name=this.value;Entry.playground.reloadPlayground()}};k.onkeypress=function(b){13==b.keyCode&&this.blur()};c.appendChild(k);e=Entry.createElement("div");e.addClass("entryPlaygroundSoundLength");e.innerHTML=
b.duration+" \ucd08";c.appendChild(e)};c.toggleColourChooser=function(b){"foreground"===b?"none"===this.coloursWrapper.style.display?(this.coloursWrapper.style.display="block",this.backgroundsWrapper.style.display="none"):this.coloursWrapper.style.display="none":"background"===b&&("none"===this.backgroundsWrapper.style.display?(this.backgroundsWrapper.style.display="block",this.coloursWrapper.style.display="none"):this.backgroundsWrapper.style.display="none")};c.setTextColour=function(b){Entry.playground.object.entity.setColour(b);
Entry.playground.toggleColourChooser("foreground");$(".entryPlayground_fgColorDiv").css("backgroundColor",b)};c.setBackgroundColour=function(b){Entry.playground.object.entity.setBGColour(b);Entry.playground.toggleColourChooser("background");$(".entryPlayground_bgColorDiv").css("backgroundColor",b)};c.isTextBGMode=function(){return this.isTextBGMode_};c.checkVariables=function(){Entry.forEBS||(Entry.variableContainer.lists_.length?this.blockMenu.unbanClass("listNotExist"):this.blockMenu.banClass("listNotExist"),
Entry.variableContainer.variables_.length?this.blockMenu.unbanClass("variableNotExist"):this.blockMenu.banClass("variableNotExist"))};c.getViewMode=function(){return this.viewMode_};c.updateHW=function(){var b=Entry.playground.mainWorkspace.blockMenu;if(b){var c=Entry.hw;c&&c.connected?(b.banClass("arduinoDisconnected",!0),c.banHW(),c.hwModule?(b.banClass("arduinoConnect",!0),b.unbanClass("arduinoConnected",!0),b.unbanClass(c.hwModule.name)):(b.banClass("arduinoConnected",!0),b.unbanClass("arduinoConnect",
!0))):(b.banClass("arduinoConnected",!0),b.banClass("arduinoConnect",!0),b.unbanClass("arduinoDisconnected",!0),Entry.hw.banHW());b.reDraw()}};c.toggleLineBreak=function(b){this.object&&"textBox"==this.object.objectType&&(b?(Entry.playground.object.entity.setLineBreak(!0),$(".entryPlayground_textArea").css("display","block"),$(".entryPlayground_textBox").css("display","none"),this.linebreakOffImage.src=Entry.mediaFilePath+"text-linebreak-off-false.png",this.linebreakOnImage.src=Entry.mediaFilePath+
"text-linebreak-on-true.png",this.fontSizeWrapper.removeClass("entryHide")):(Entry.playground.object.entity.setLineBreak(!1),$(".entryPlayground_textArea").css("display","none"),$(".entryPlayground_textBox").css("display","block"),this.linebreakOffImage.src=Entry.mediaFilePath+"text-linebreak-off-true.png",this.linebreakOnImage.src=Entry.mediaFilePath+"text-linebreak-on-false.png",this.fontSizeWrapper.addClass("entryHide")))};c.setFontAlign=function(b){if("textBox"==this.object.objectType){this.alignLeftBtn.removeClass("toggle");
this.alignCenterBtn.removeClass("toggle");this.alignRightBtn.removeClass("toggle");switch(b){case Entry.TEXT_ALIGN_LEFT:this.alignLeftBtn.addClass("toggle");break;case Entry.TEXT_ALIGN_CENTER:this.alignCenterBtn.addClass("toggle");break;case Entry.TEXT_ALIGN_RIGHT:this.alignRightBtn.addClass("toggle")}this.object.entity.setTextAlign(b)}};c.hideBlockMenu=function(){this.mainWorkspace.getBlockMenu().hide()};c.showBlockMenu=function(){this.mainWorkspace.getBlockMenu().show()};c.getDom=function(b){if(1<=
b.length)switch(b.shift()){case "tabViewElements":return this.tabViewElements[b.shift()];case "blockMenu":return this.blockMenu.getDom(b);case "board":return this.board.getDom(b);case "pictureAddButton":return this._pictureAddButton;case "soundAddButton":return this._soundAddButton}};c.applyTabOption=function(){this.textboxTab.addClass("entryRemove");this.pictureTab.addClass("entryRemove");this.soundTab.addClass("entryRemove");this.variableTab.addClass("entryRemove");Entry.pictureEditable&&(this.pictureTab.removeClass("entryRemove"),
this.textboxTab.removeClass("entryRemove"));Entry.soundEditable&&this.soundTab.removeClass("entryRemove");Entry.hasVariableManager&&this.variableTab.removeClass("entryRemove")}})(Entry.Playground.prototype);Entry.Popup=function(){Entry.assert(!window.popup,"Popup exist");this.body_=Entry.createElement("div");this.body_.addClass("entryPopup");this.body_.bindOnClick(function(c){c.target==this&&this.popup.remove()});this.body_.popup=this;document.body.appendChild(this.body_);this.window_=Entry.createElement("div");this.window_.addClass("entryPopupWindow");"tablet"===Entry.device&&this.window_.addClass("tablet");this.window_.bindOnClick(function(){});Entry.addEventListener("windowResized",this.resize);window.popup=
this;this.resize();this.body_.appendChild(this.window_)};Entry.Popup.prototype.remove=function(){for(;this.window_.hasChildNodes();)"workspace"==Entry.type?Entry.view_.insertBefore(this.window_.firstChild,Entry.container.view_):Entry.view_.insertBefore(this.window_.lastChild,Entry.view_.firstChild);$("body").css("overflow","auto");Entry.removeElement(this.body_);window.popup=null;Entry.removeEventListener("windowResized",this.resize);Entry.engine.popup=null;Entry.windowResized.notify()};
Entry.Popup.prototype.resize=function(c){c=window.popup.window_;var b=.9*window.innerWidth,d=.9*window.innerHeight-35;9*b<=16*d?d=b/16*9+35:(b=16*d/9,d+=35);c.style.width=String(b)+"px";c.style.height=String(d)+"px";Entry.stage&&Entry.stage.updateBoundRect()};Entry.popupHelper=function(c){this.popupList={};this.nextPopupList=[];this.nowContent;c&&(window.popupHelper=null);Entry.assert(!window.popupHelper,"Popup exist");var b=["confirm","spinner"],d=["entryPopupHelperTopSpan","entryPopupHelperBottomSpan","entryPopupHelperLeftSpan","entryPopupHelperRightSpan"];this.body_=Entry.Dom("div",{classes:["entryPopup","hiddenPopup","popupHelper"]});var e=this;this.body_.bindOnClick(function(c){if(!(e.nowContent&&-1<b.indexOf(e.nowContent.prop("type")))){var f=$(c.target);
d.forEach(function(b){f.hasClass(b)&&e.hide()});c.target==e&&e.hide()}});window.popupHelper=this;this.body_.prop("popup",this);Entry.Dom("div",{class:"entryPopupHelperTopSpan",parent:this.body_});c=Entry.Dom("div",{class:"entryPopupHelperMiddleSpan",parent:this.body_});Entry.Dom("div",{class:"entryPopupHelperBottomSpan",parent:this.body_});Entry.Dom("div",{class:"entryPopupHelperLeftSpan",parent:c});this.window_=Entry.Dom("div",{class:"entryPopupHelperWindow",parent:c});Entry.Dom("div",{class:"entryPopupHelperRightSpan",
parent:c});$("body").append(this.body_)};Entry.popupHelper.prototype.clearPopup=function(){for(var c=this.popupWrapper_.children.length-1;2<c;c--)this.popupWrapper_.removeChild(this.popupWrapper_.children[c])};
Entry.popupHelper.prototype.addPopup=function(c,b){var d=Entry.Dom("div"),e=Entry.Dom("div",{class:"entryPopupHelperCloseButton"});e.bindOnClick(function(){b.closeEvent?b.closeEvent(this):this.hide()}.bind(this));var f=Entry.Dom("div",{class:"entryPopupHelperWrapper"});f.append(e);b.title&&(e=Entry.Dom("div",{class:"entryPopupHelperTitle"}),f.append(e),e.text(b.title));d.addClass(c);d.append(f);d.popupWrapper_=f;d.prop("type",b.type);"function"===typeof b.setPopupLayout&&b.setPopupLayout(d);d._obj=
b;this.popupList[c]=d};Entry.popupHelper.prototype.hasPopup=function(c){return!!this.popupList[c]};Entry.popupHelper.prototype.setPopup=function(c){};Entry.popupHelper.prototype.remove=function(c){0<this.window_.children().length&&this.window_.children().remove();delete this.popupList[c];this.nowContent=void 0;this.body_.addClass("hiddenPopup");0<this.nextPopupList.length&&this.show(this.nextPopupList.shift())};Entry.popupHelper.prototype.resize=function(c){};
Entry.popupHelper.prototype.show=function(c,b){function d(b){e.window_.append(e.popupList[b]);e.nowContent=e.popupList[b];e.body_.removeClass("hiddenPopup")}var e=this;b?0<this.window_.children().length?this.nextPopupList.push(c):(this.window_.children().detach(),d(c)):(this.window_.children().detach(),d(c));if(this.nowContent&&this.nowContent._obj&&this.nowContent._obj.onShow)this.nowContent._obj.onShow()};
Entry.popupHelper.prototype.hide=function(){this.nowContent=void 0;this.body_.addClass("hiddenPopup");this.window_.children().detach();0<this.nextPopupList.length&&this.show(this.nextPopupList.shift())};Entry.PopupList=function(c){this.view=c};(function(c){c.getView=function(){return this.view};c.resize=function(){}})(Entry.PopupList.prototype);Entry.getStartProject=function(c){return{category:"\uae30\ud0c0",scenes:[{name:Lang.Blocks.SCENE+" 1",id:"7dwq"}],variables:[{name:"\ucd08\uc2dc\uacc4",id:"brih",visible:!1,value:"0",variableType:"timer",x:150,y:-70,array:[],object:null,isCloud:!1},{name:"\ub300\ub2f5",id:"1vu8",visible:!1,value:"0",variableType:"answer",x:150,y:-100,array:[],object:null,isCloud:!1}],objects:[{id:"7y0y",name:"\uc5d4\ud2b8\ub9ac\ubd07",script:[[{type:"when_run_button_click",x:40,y:50},{type:"repeat_basic",statements:[[{type:"move_direction"}]]}]],
selectedPictureId:"vx80",objectType:"sprite",rotateMethod:"free",scene:"7dwq",sprite:{sounds:[{duration:1.3,ext:".mp3",id:"8el5",fileurl:c+"media/bark.mp3",name:"\uac15\uc544\uc9c0 \uc9d6\ub294\uc18c\ub9ac"}],pictures:[{id:"vx80",fileurl:c+"media/entrybot1.png",name:Lang.Blocks.walking_entryBot+"1",scale:100,dimension:{width:284,height:350}},{id:"4t48",fileurl:c+"media/entrybot2.png",name:Lang.Blocks.walking_entryBot+"2",scale:100,dimension:{width:284,height:350}}]},entity:{x:0,y:0,regX:142,regY:175,
scaleX:.3154574132492113,scaleY:.3154574132492113,rotation:0,direction:90,width:284,height:350,visible:!0},lock:!1,active:!0}],speed:60}};Entry.Reporter=function(c){this.projectId=this.userId=null;this.isRealTime=c;this.activities=[]};Entry.Reporter.prototype.start=function(c,b,d){this.isRealTime&&(-1<window.location.href.indexOf("localhost")?this.io=io("localhost:7000"):this.io=io("play04.play-entry.com:7000"),this.io.emit("activity",{message:"start",userId:b,projectId:c,time:d}));this.userId=b;this.projectId=c};
Entry.Reporter.prototype.report=function(c){if(!this.isRealTime||this.io){var b=[],d;for(d in c.params){var e=c.params[d];"object"!==typeof e?b.push(e):e.id&&b.push(e.id)}c={message:c.message,userId:this.userId,projectId:this.projectId,time:c.time,params:b};this.isRealTime?this.io.emit("activity",c):this.activities.push(c)}};Entry.Scene=function(){var c=this;this.scenes_=[];this.selectedScene=null;this.maxCount=20;$(window).on("resize",function(b){c.resize()});c.disposeEvent=Entry.disposeEvent.attach(this,function(b){var c=document.activeElement;b&&c&&c!==b.target&&$(c).hasClass("entrySceneFieldWorkspace")&&c.blur()})};
Entry.Scene.prototype.generateView=function(c,b){var d=this;this.view_=c;this.view_.addClass("entryScene");b&&"workspace"!=b||(this.view_.addClass("entrySceneWorkspace"),$(this.view_).on("mousedown",function(b){var c=$(this).offset(),e=$(window),h=b.pageX-c.left+e.scrollLeft();b=b.pageY-c.top+e.scrollTop();b=40-b;c=-40/55;e=$(d.selectedScene.view).find(".entrySceneRemoveButtonCoverWorkspace").offset().left;!(h<e||h>e+55)&&b>40+c*(h-e)&&(h=d.getNextScene())&&(h=$(h.view),$(document).trigger("mouseup"),
h.trigger("mousedown"))}),c=Entry.createElement("ul"),c.addClass("entrySceneListWorkspace"),Entry.sceneEditable&&$&&$(c).sortable({start:function(b,c){c.item.data("start_pos",c.item.index());$(c.item[0]).clone(!0)},stop:function(b,c){b=c.item.data("start_pos");c=c.item.index();Entry.scene.moveScene(b,c)},axis:"x",tolerance:"pointer"}),this.view_.appendChild(c),this.listView_=c,Entry.sceneEditable&&(c=Entry.createElement("span"),c.addClass("entrySceneElementWorkspace"),c.addClass("entrySceneAddButtonWorkspace"),
c.bindOnClick(function(b){Entry.engine.isState("run")||Entry.scene.addScene()}),this.view_.appendChild(c),this.addButton_=c))};
Entry.Scene.prototype.generateElement=function(c){var b=this,d=Entry.createElement("li",c.id);document.createDocumentFragment("div").appendChild(d);d.addClass("entrySceneElementWorkspace entrySceneButtonWorkspace minValue");$(d).on("mousedown",function(b){Entry.engine.isState("run")?b.preventDefault():Entry.scene.selectScene(c)});var e=Entry.createElement("input");e.addClass("entrySceneFieldWorkspace");e.value=c.name;Entry.sceneEditable||(e.disabled="disabled");var f=Entry.createElement("span");f.addClass("entrySceneLeftWorkspace");
d.appendChild(f);f=Entry.createElement("span");f.addClass("entrySceneInputCover");d.appendChild(f);c.inputWrapper=f;e.onkeyup=function(d){d=d.keyCode;Entry.isArrowOrBackspace(d)||(c.name=this.value,13==d&&this.blur(),10<this.value.length&&(this.value=this.value.substring(0,10),c.name=this.value,this.blur()),setTimeout(function(){b.resize()},0))};e.onblur=function(d){e.value=this.value;c.name=this.value;b.resize()};f.appendChild(e);f=Entry.createElement("span");f.addClass("entrySceneRemoveButtonCoverWorkspace");
d.appendChild(f);if(Entry.sceneEditable){var g=Entry.createElement("button");g.addClass("entrySceneRemoveButtonWorkspace");g.scene=c;g.bindOnClick(function(b){b.stopPropagation();Entry.engine.isState("run")||confirm(Lang.Workspace.will_you_delete_scene)&&Entry.scene.removeScene(this.scene)});f.appendChild(g)}Entry.Utils.disableContextmenu(d);Entry.ContextMenu.onContextmenu($(d),function(b){var d=[{text:Lang.Workspace.duplicate_scene,enable:Entry.engine.isState("stop")&&!this.isMax(),callback:function(){Entry.scene.cloneScene(c)}}];
Entry.ContextMenu.show(d,"workspace-contextmenu",b)}.bind(this));return c.view=d};Entry.Scene.prototype.updateView=function(){if(!Entry.type||"workspace"==Entry.type){for(var c=this.listView_,b=$(c).children().length;b<this.getScenes().length;b++)c.appendChild(this.getScenes()[b].view);this.addButton_&&(this.getScenes(),this.isMax()?this.addButton_.addClass("entryRemove"):this.addButton_.removeClass("entryRemove"))}this.resize()};
Entry.Scene.prototype.addScenes=function(c){if((this.scenes_=c)&&0!==c.length)for(var b=0,d=c.length;b<d;b++)this.generateElement(c[b]);else this.scenes_=[],this.scenes_.push(this.createScene());this.selectScene(this.getScenes()[0])};
Entry.Scene.prototype.addScene=function(c,b){void 0===c&&(c=this.createScene());c.view||this.generateElement(c);b||"number"==typeof b?this.getScenes().splice(b,0,c):this.getScenes().push(c);Entry.stage.objectContainers.push(Entry.stage.createObjectContainer(c));this.selectScene(c);this.updateView();Entry.creationChangedEvent&&Entry.creationChangedEvent.notify();return c};
Entry.Scene.prototype.removeScene=function(c){if(1>=this.getScenes().length)Entry.toast.alert(Lang.Msgs.runtime_error,Lang.Workspace.Scene_delete_error,!1);else{var b=this.getScenes().indexOf(this.getSceneById(c.id));this.getScenes().splice(b,1);for(var b=Entry.container.getSceneObjects(c),d=0;d<b.length;d++)Entry.container.removeObject(b[d]);Entry.stage.removeObjectContainer(c);$(c.view).remove();this.selectScene()}};
Entry.Scene.prototype.selectScene=function(c){c=c||this.getScenes()[0];if(!this.selectedScene||this.selectedScene.id!=c.id){Entry.engine.isState("run")&&Entry.container.resetSceneDuringRun();var b=this.selectedScene;b&&(b.view.removeClass("selectedScene"),b=document.activeElement,$(b).hasClass("entrySceneFieldWorkspace")&&b.blur());this.selectedScene=c;c.view.addClass("selectedScene");Entry.container.setCurrentObjects();Entry.stage.objectContainers&&0!==Entry.stage.objectContainers.length&&Entry.stage.selectObjectContainer(c);
if((b=Entry.container.getCurrentObjects()[0])&&"minimize"!=Entry.type)Entry.container.selectObject(b.id),Entry.playground.refreshPlayground();else{if(Entry.isTextMode){if((b=Entry.getMainWS())&&b.vimBoard){var d=b.vimBoard._currentObject,e=b.vimBoard._currentScene,f=b.vimBoard._parser;try{c.id!=e.id&&b._syncTextCode()}catch(g){}if(f._onError){Entry.container.selectObject(d.id,!0);return}}b&&b.vimBoard&&b.vimBoard.clearText()}Entry.stage.selectObject(null);Entry.playground.flushPlayground();Entry.variableContainer.updateList()}Entry.container.listView_||
Entry.stage.sortZorder();Entry.container.updateListView();this.updateView();Entry.requestUpdate=!0}};Entry.Scene.prototype.toJSON=function(){for(var c=[],b=this.getScenes().length,d=0;d<b;d++){var e=this.getScenes()[d],f=e.view,g=e.inputWrapper;delete e.view;delete e.inputWrapper;c.push(JSON.parse(JSON.stringify(e)));e.view=f;e.inputWrapper=g}return c};
Entry.Scene.prototype.moveScene=function(c,b){this.getScenes().splice(b,0,this.getScenes().splice(c,1)[0]);Entry.container.updateObjectsOrder();Entry.stage.sortZorder();$(".entrySceneElementWorkspace").removeAttr("style")};Entry.Scene.prototype.getSceneById=function(c){for(var b=this.getScenes(),d=0;d<b.length;d++)if(b[d].id==c)return b[d];return!1};Entry.Scene.prototype.getScenes=function(){return this.scenes_};Entry.Scene.prototype.takeStartSceneSnapshot=function(){this.sceneBeforeRun=this.selectedScene};
Entry.Scene.prototype.loadStartSceneSnapshot=function(){this.selectScene(this.sceneBeforeRun);this.sceneBeforeRun=null};Entry.Scene.prototype.createScene=function(){var c={name:Lang.Blocks.SCENE+" "+(this.getScenes().length+1),id:Entry.generateHash()};this.generateElement(c);return c};
Entry.Scene.prototype.cloneScene=function(c){if(this.isMax())Entry.toast.alert(Lang.Msgs.runtime_error,Lang.Workspace.Scene_add_error,!1);else{var b={name:(Lang.Workspace.cloned_scene+c.name).substring(0,10),id:Entry.generateHash()};this.generateElement(b);this.addScene(b);c=Entry.container.getSceneObjects(c);try{this.isSceneCloning=!0;for(var d=c.length-1;0<=d;d--)Entry.container.addCloneObject(c[d],b.id);this._focusSceneNameField(b);this.isSceneCloning=!1}catch(e){}}};
Entry.Scene.prototype.resize=function(){var c=this.getScenes(),b=this.selectedScene,d=c[0];if(0!==c.length&&d){var e=$(d.view).offset().left;parseFloat($(b.view).css("margin-left"));var d=Math.floor($(this.view_).width()-e-5),f=e+15,e=0,g;for(g in c){var h=c[g],k=h.view;k.addClass("minValue");var k=$(k),l=parseFloat(Entry.computeInputWidth(h.name)),m=10*l/9;h===this.selectedScene&&(e=m-l);$(h.inputWrapper).width(m+"px");f+=k.width()+-40}if(f>d)for(g in h=c.length-1,d=d-Math.round($(b.view).width())-
30.5*h-e,d=Math.floor(d/h),c)h=c[g],b.id!=h.id?(h.view.removeClass("minValue"),$(h.inputWrapper).width(d)):h.view.addClass("minValue")}};Entry.Scene.prototype.getNextScene=function(){var c=this.getScenes();return c[c.indexOf(this.selectedScene)+1]};Entry.Scene.prototype.isMax=function(){return this.scenes_.length>=this.maxCount};Entry.Scene.prototype.clear=function(){this.scenes_.map(function(c){Entry.stage.removeObjectContainer(c)});$(this.listView_).html("");this.scenes_=[];this.selectedScene=null};
Entry.Scene.prototype._focusSceneNameField=function(c){(c=$(c.view).find("input"))&&c.focus&&c.focus()};Entry.Script=function(c){this.entity=c};p=Entry.Script.prototype;
p.init=function(c,b,d){Entry.assert("BLOCK"==c.tagName.toUpperCase(),c.tagName);this.type=c.getAttribute("type");this.id=Number(c.getAttribute("id"));c.getElementsByTagName("mutation").length&&c.getElementsByTagName("mutation")[0].hasAttribute("hashid")&&(this.hashId=c.childNodes[0].getAttribute("hashid"));"REPEAT"==this.type.substr(0,6).toUpperCase()&&(this.isRepeat=!0);b instanceof Entry.Script&&(this.previousScript=b,b.parentScript&&(this.parentScript=b.parentScript));d instanceof Entry.Script&&
(this.parentScript=d);c=c.childNodes;for(b=0;b<c.length;b++)if(d=c[b],"NEXT"==d.tagName.toUpperCase())this.nextScript=new Entry.Script(this.entity),this.register&&(this.nextScript.register=this.register),this.nextScript.init(c[b].childNodes[0],this);else if("VALUE"==d.tagName.toUpperCase()){this.values||(this.values={});var e=new Entry.Script(this.entity);this.register&&(e.register=this.register);e.init(d.childNodes[0]);this.values[d.getAttribute("name")]=e}else"FIELD"==d.tagName.toUpperCase()?(this.fields||
(this.fields={}),this.fields[d.getAttribute("name")]=d.textContent):"STATEMENT"==d.tagName.toUpperCase()&&(this.statements||(this.statements={}),e=new Entry.Script(this.entity),this.register&&(e.register=this.register),e.init(d.childNodes[0],null,this),e.key=d.getAttribute("name"),this.statements[d.getAttribute("name")]=e)};
p.clone=function(c,b){var d=new Entry.Script(c);d.id=this.id;d.type=this.type;d.isRepeat=this.isRepeat;if(this.parentScript&&!this.previousScript&&2!=b){d.parentScript=this.parentScript.clone(c);for(var e=d.parentScript.statements[this.key]=d;e.nextScript;)e=e.nextScript,e.parentScript=d.parentScript}this.nextScript&&1!=b&&(d.nextScript=this.nextScript.clone(c,0),d.nextScript.previousScript=this);this.previousScript&&0!==b&&(d.previousScript=this.previousScript.clone(c,1),d.previousScript.previousScript=
this);if(this.fields){d.fields={};for(var f in this.fields)d.fields[f]=this.fields[f]}if(this.values)for(f in d.values={},this.values)d.values[f]=this.values[f].clone(c);if(this.statements)for(f in d.statements={},this.statements)for(d.statements[f]=this.statements[f].clone(c,2),e=d.statements[f],e.parentScript=d;e.nextScript;)e=e.nextScript,e.parentScript=d;return d};p.getStatement=function(c){return this.statements[c]};p.compute=function(){};p.getValue=function(c){return this.values[c].run()};
p.getNumberValue=function(c){return Number(this.values[c].run())};p.getStringValue=function(c){return String(this.values[c].run())};p.getBooleanValue=function(c){return this.values[c].run()?!0:!1};p.getField=function(c){return this.fields[c]};p.getStringField=function(c){return String(this.fields[c])};p.getNumberField=function(c){return Number(this.fields[c])};p.callReturn=function(){return this.nextScript?this.nextScript:this.parentScript?this.parentScript:null};
p.run=function(){return Entry.block[this.type](this.entity,this)};Entry.Stage=function(){this.variables={};this.background=new createjs.Shape;this.background.graphics.beginFill("#ffffff").drawRect(-480,-240,960,480);this.objectContainers=[];this.selectedObjectContainer=null;this.variableContainer=new createjs.Container;this.dialogContainer=new createjs.Container;this.selectedObject=null;this.isObjectClick=!1;this._entitySelectable=!0};
Entry.Stage.prototype.initStage=function(c){this.canvas=new createjs.Stage(c.id);this.canvas.x=320;this.canvas.y=180;this.canvas.scaleX=this.canvas.scaleY=2/1.5;createjs.Touch.enable(this.canvas);this.canvas.enableMouseOver(10);this.canvas.mouseMoveOutside=!0;this.canvas.addChild(this.background);this.canvas.addChild(this.variableContainer);this.canvas.addChild(this.dialogContainer);this.inputField=null;this.initCoordinator();this.initHandle();this.mouseCoordinate={x:0,y:0};if(Entry.isPhone())c.ontouchstart=
function(b){Entry.dispatchEvent("canvasClick",b);Entry.stage.isClick=!0},c.ontouchend=function(b){Entry.stage.isClick=!1;Entry.dispatchEvent("canvasClickCanceled",b)};else{var b=function(b){Entry.dispatchEvent("canvasClick",b);Entry.stage.isClick=!0};c.onmousedown=b;c.ontouchstart=b;b=function(b){Entry.stage.isClick=!1;Entry.dispatchEvent("canvasClickCanceled",b)};c.onmouseup=b;c.ontouchend=b;$(document).click(function(b){Entry.stage.focused="entryCanvas"===b.target.id?!0:!1})}Entry.addEventListener("canvasClick",
function(b){Entry.stage.isObjectClick=!1});Entry.windowResized.attach(this,function(){Entry.stage.updateBoundRect()});$(window).scroll(function(){Entry.stage.updateBoundRect()});b=function(b){b.preventDefault();var c=Entry.stage.getBoundRect(),d;-1<Entry.getBrowserType().indexOf("IE")?(d=480*((b.pageX-c.left-document.documentElement.scrollLeft)/c.width-.5),b=-270*((b.pageY-c.top-document.documentElement.scrollTop)/c.height-.5)):b.changedTouches?(d=480*((b.changedTouches[0].pageX-c.left-document.body.scrollLeft)/
c.width-.5),b=-270*((b.changedTouches[0].pageY-c.top-document.body.scrollTop)/c.height-.5)):(d=480*((b.pageX-c.left-document.body.scrollLeft)/c.width-.5),b=-270*((b.pageY-c.top-document.body.scrollTop)/c.height-.5));Entry.stage.mouseCoordinate={x:d.toFixed(1),y:b.toFixed(1)};Entry.dispatchEvent("stageMouseMove")};c.onmousemove=b;c.ontouchmove=b;c.onmouseout=function(b){Entry.dispatchEvent("stageMouseOut")};Entry.addEventListener("updateObject",function(b){Entry.engine.isState("stop")&&Entry.stage.updateObject()});
Entry.addEventListener("canvasInputComplete",function(b){try{var c=Entry.stage.inputField.value();Entry.stage.hideInputField();if(c){var d=Entry.container;d.setInputValue(c);d.inputValue.complete=!0}}catch(g){}});this.initWall();this.render()};Entry.Stage.prototype.render=function(){Entry.stage.timer&&clearTimeout(Entry.stage.timer);var c=(new Date).getTime();Entry.stage.update();c=(new Date).getTime()-c;Entry.stage.timer=setTimeout(Entry.stage.render,16-c%16+16*Math.floor(c/16))};
Entry.Stage.prototype.update=function(){"invisible"!==Entry.type&&(Entry.requestUpdate?(Entry.engine.isState("stop")&&this.objectUpdated?(this.canvas.update(),this.objectUpdated=!1):this.canvas.update(),this.inputField&&!this.inputField._isHidden&&this.inputField.render(),Entry.requestUpdateTwice?Entry.requestUpdateTwice=!1:Entry.requestUpdate=!1):Entry.requestUpdate=!1)};
Entry.Stage.prototype.loadObject=function(c){var b=c.entity.object;this.getObjectContainerByScene(c.scene).addChild(b);Entry.requestUpdate=!0};Entry.Stage.prototype.loadEntity=function(c){Entry.stage.getObjectContainerByScene(c.parent.scene).addChild(c.object);this.sortZorder();Entry.requestUpdate=!0};Entry.Stage.prototype.unloadEntity=function(c){Entry.stage.getObjectContainerByScene(c.parent.scene).removeChild(c.object);Entry.requestUpdate=!0};
Entry.Stage.prototype.loadVariable=function(c){var b=c.view_;this.variables[c.id]=b;this.variableContainer.addChild(b);Entry.requestUpdate=!0};Entry.Stage.prototype.removeVariable=function(c){this.variableContainer.removeChild(c.view_);Entry.requestUpdate=!0};Entry.Stage.prototype.loadDialog=function(c){this.dialogContainer.addChild(c.object)};Entry.Stage.prototype.unloadDialog=function(c){this.dialogContainer.removeChild(c.object)};
Entry.Stage.prototype.sortZorder=function(){for(var c=Entry.container.getCurrentObjects(),b=this.selectedObjectContainer,d=0,e=c.length-1;0<=e;e--){for(var f=c[e],g=f.entity,f=f.clonedEntities,h=0,k=f.length;h<k;h++)f[h].shape&&b.setChildIndex(f[h].shape,d++),b.setChildIndex(f[h].object,d++);g.shape&&b.setChildIndex(g.shape,d++);b.setChildIndex(g.object,d++)}Entry.requestUpdate=!0};
Entry.Stage.prototype.initCoordinator=function(){var c=new createjs.Container,b=new createjs.Bitmap(Entry.mediaFilePath+"workspace_coordinate.png");b.scaleX=.5;b.scaleY=.5;b.x=-240;b.y=-135;c.addChild(b);this.canvas.addChild(c);c.visible=!1;this.coordinator=c};Entry.Stage.prototype.toggleCoordinator=function(){this.coordinator.visible=!this.coordinator.visible;Entry.requestUpdate=!0};Entry.Stage.prototype.selectObject=function(c){this.selectedObject=c?c:null;this.updateObject()};
Entry.Stage.prototype.initHandle=function(){this.handle=new EaselHandle(this.canvas);this.handle.setChangeListener(this,this.updateHandle);this.handle.setEditStartListener(this,this.startEdit);this.handle.setEditEndListener(this,this.endEdit)};
Entry.Stage.prototype.updateObject=function(){if("invisible"!==Entry.type&&(Entry.requestUpdate=!0,this.handle.setDraggable(!0),!this.editEntity)){var c=this.selectedObject;if(c){"textBox"==c.objectType?this.handle.toggleCenter(!1):this.handle.toggleCenter(!0);"free"==c.getRotateMethod()?this.handle.toggleRotation(!0):this.handle.toggleRotation(!1);this.handle.toggleDirection(!0);c.getLock()?(this.handle.toggleRotation(!1),this.handle.toggleDirection(!1),this.handle.toggleResize(!1),this.handle.toggleCenter(!1),
this.handle.setDraggable(!1)):this.handle.toggleResize(!0);this.handle.setVisible(!0);var b=c.entity;this.handle.setWidth(b.getScaleX()*b.getWidth());this.handle.setHeight(b.getScaleY()*b.getHeight());var d,e;if("textBox"==b.type)if(b.getLineBreak())d=b.regX*b.scaleX,e=-b.regY*b.scaleY;else{var f=b.getTextAlign();e=-b.regY*b.scaleY;switch(f){case Entry.TEXT_ALIGN_LEFT:d=-b.getWidth()/2*b.scaleX;break;case Entry.TEXT_ALIGN_CENTER:d=b.regX*b.scaleX;break;case Entry.TEXT_ALIGN_RIGHT:d=b.getWidth()/2*
b.scaleX}}else d=(b.regX-b.width/2)*b.scaleX,e=(b.height/2-b.regY)*b.scaleY;f=b.getRotation()/180*Math.PI;this.handle.setX(b.getX()-d*Math.cos(f)-e*Math.sin(f));this.handle.setY(-b.getY()-d*Math.sin(f)+e*Math.cos(f));this.handle.setRegX((b.regX-b.width/2)*b.scaleX);this.handle.setRegY((b.regY-b.height/2)*b.scaleY);this.handle.setRotation(b.getRotation());this.handle.setDirection(b.getDirection());this.objectUpdated=!0;this.handle.setVisible(c.entity.getVisible());c.entity.getVisible()&&this.handle.render()}else this.handle.setVisible(!1)}};
Entry.Stage.prototype.updateHandle=function(){this.editEntity=!0;var c=this.handle,b=this.selectedObject.entity;if(b.lineBreak)b.setHeight(c.height/b.getScaleY()),b.setWidth(c.width/b.getScaleX());else{if(0!==b.width){var d=Math.abs(c.width/b.width);b.flip&&(d*=-1);b.setScaleX(d)}0!==b.height&&b.setScaleY(c.height/b.height)}d=c.rotation/180*Math.PI;if("textBox"==b.type){var e;if(b.getLineBreak())b.setX(c.x),b.setY(-c.y);else switch(b.getTextAlign()){case Entry.TEXT_ALIGN_LEFT:b.setX(c.x-c.width/2*
Math.cos(d));b.setY(-c.y+c.width/2*Math.sin(d));break;case Entry.TEXT_ALIGN_CENTER:b.setX(c.x);b.setY(-c.y);break;case Entry.TEXT_ALIGN_RIGHT:b.setX(c.x+c.width/2*Math.cos(d)),b.setY(-c.y-c.width/2*Math.sin(d))}}else e=b.width/2+c.regX/b.scaleX,b.setX(c.x+c.regX*Math.cos(d)-c.regY*Math.sin(d)),b.setRegX(e),e=b.height/2+c.regY/b.scaleY,b.setY(-c.y-c.regX*Math.sin(d)-c.regY*Math.cos(d)),b.setRegY(e);b.setDirection(c.direction);b.setRotation(c.rotation);this.selectedObject.entity.doCommand();this.editEntity=
!1};Entry.Stage.prototype.startEdit=function(){this.selectedObject.entity.initCommand()};Entry.Stage.prototype.endEdit=function(){this.selectedObject.entity.checkCommand()};
Entry.Stage.prototype.initWall=function(){var c=new createjs.Container,b=new Image;b.src=Entry.mediaFilePath+"media/bound.png";c.up=new createjs.Bitmap;c.up.scaleX=16;c.up.y=-165;c.up.x=-240;c.up.image=b;c.addChild(c.up);c.down=new createjs.Bitmap;c.down.scaleX=16;c.down.y=135;c.down.x=-240;c.down.image=b;c.addChild(c.down);c.right=new createjs.Bitmap;c.right.scaleY=9;c.right.y=-135;c.right.x=240;c.right.image=b;c.addChild(c.right);c.left=new createjs.Bitmap;c.left.scaleY=9;c.left.y=-135;c.left.x=
-270;c.left.image=b;c.addChild(c.left);this.canvas.addChild(c);this.wall=c};
Entry.Stage.prototype.showInputField=function(c){c=1/1.5;this.inputField||(this.inputField=new CanvasInput({canvas:document.getElementById("entryCanvas"),fontSize:30*c,fontFamily:"NanumGothic",fontColor:"#212121",width:556*c,height:26*c,padding:8*c,borderWidth:1*c,borderColor:"#000",borderRadius:3*c,boxShadow:"none",innerShadow:"0px 0px 5px rgba(0, 0, 0, 0.5)",x:202*c,y:450*c,topPosition:!0,onsubmit:function(){Entry.dispatchEvent("canvasInputComplete")}}));c=new createjs.Container;var b=new Image;
b.src=Entry.mediaFilePath+"confirm_button.png";var d=new createjs.Bitmap;d.scaleX=.23;d.scaleY=.23;d.x=160;d.y=89;d.cursor="pointer";d.image=b;c.addChild(d);c.on("mousedown",function(b){Entry.dispatchEvent("canvasInputComplete")});this.inputSubmitButton||(this.inputField.value(""),this.canvas.addChild(c),this.inputSubmitButton=c);this.inputField.show();Entry.requestUpdateTwice=!0};
Entry.Stage.prototype.hideInputField=function(){this.inputField&&this.inputField.value()&&this.inputField.value("");this.inputSubmitButton&&(this.canvas.removeChild(this.inputSubmitButton),this.inputSubmitButton=null);this.inputField&&this.inputField.hide();Entry.requestUpdate=!0};
Entry.Stage.prototype.initObjectContainers=function(){var c=Entry.scene.scenes_;if(c&&0!==c.length){for(var b=0;b<c.length;b++)this.objectContainers[b]=this.createObjectContainer(c[b]);this.selectedObjectContainer=this.objectContainers[0]}else c=this.createObjectContainer(Entry.scene.selectedScene),this.objectContainers.push(c),this.selectedObjectContainer=c;"invisible"!==Entry.type&&this.canvas.addChild(this.selectedObjectContainer);this.selectObjectContainer(Entry.scene.selectedScene)};
Entry.Stage.prototype.selectObjectContainer=function(c){if(this.canvas){for(var b=this.objectContainers,d=0;d<b.length;d++)this.canvas.removeChild(b[d]);this.selectedObjectContainer=this.getObjectContainerByScene(c);this.canvas.addChildAt(this.selectedObjectContainer,2)}};
Entry.Stage.prototype.reAttachToCanvas=function(){for(var c=[this.selectedObjectContainer,this.variableContainer,this.coordinator,this.handle,this.dialogContainer],b=0;b<c.length;b++)this.canvas.removeChild(c[b]),this.canvas.addChild(c[b]);console.log(this.canvas.getChildIndex(this.selectedObjectContainer))};Entry.Stage.prototype.createObjectContainer=function(c){var b=new createjs.Container;b.scene=c;return b};
Entry.Stage.prototype.removeObjectContainer=function(c){var b=this.objectContainers;c=this.getObjectContainerByScene(c);this.canvas&&this.canvas.removeChild(c);b.splice(this.objectContainers.indexOf(c),1)};Entry.Stage.prototype.getObjectContainerByScene=function(c){for(var b=this.objectContainers,d=0;d<b.length;d++)if(b[d].scene.id==c.id)return b[d]};
Entry.Stage.prototype.moveSprite=function(c){if(this.selectedObject&&Entry.stage.focused&&!this.selectedObject.getLock()){var b=5;c.shiftKey&&(b=1);var d=this.selectedObject.entity;switch(c.keyCode){case 38:d.setY(d.getY()+b);break;case 40:d.setY(d.getY()-b);break;case 37:d.setX(d.getX()-b);break;case 39:d.setX(d.getX()+b)}this.updateObject()}};Entry.Stage.prototype.getBoundRect=function(c){return this._boundRect?this._boundRect:this.updateBoundRect()};
Entry.Stage.prototype.updateBoundRect=function(c){return this._boundRect=this.canvas.canvas.getBoundingClientRect()};Entry.Stage.prototype.getDom=function(c){if("canvas"===c.shift())return this.canvas.canvas};Entry.Stage.prototype.setEntitySelectable=function(c){this._entitySelectable=c};Entry.Stage.prototype.isEntitySelectable=function(){return Entry.engine.isState("stop")&&this._entitySelectable};Entry.StampEntity=function(c,b){this.parent=c;this.type=c.objectType;this.isStamp=this.isClone=!0;this.width=b.getWidth();this.height=b.getHeight();"sprite"==this.type&&(this.object=b.object.clone(!0),this.object.filters=null,b.effect&&(this.effect=Entry.cloneSimpleObject(b.effect),this.applyFilter()));this.object.entity=this};
(function(c,b){c.applyFilter=b.applyFilter;c.removeClone=b.removeClone;c.getWidth=b.getWidth;c.getHeight=b.getHeight;c.getInitialEffectValue=b.getInitialEffectValue})(Entry.StampEntity.prototype,Entry.EntityObject.prototype);Entry.JsAstGenerator=function(){};(function(c){c.generate=function(b){return arcon.parse(b)}})(Entry.JsAstGenerator.prototype);Entry.PyAstGenerator=function(){};
(function(c){c.generate=function(b){var c=filbert.parse,e={locations:!0,ranges:!0};try{return c(b,e)}catch(h){b=h.message.split("'");c=Entry.TextCodingError.TITLE_SYNTAX;console.log("msgTokens",b);if("Unexpected token"==b[0].trim())var e=Entry.TextCodingError.MESSAGE_SYNTAX_UNEXPECTED_TOKEN,f=Entry.TextCodingError.SUBJECT_SYNTAX_TOKEN;else"Unexpected character"==b[0].trim()?(e=Entry.TextCodingError.MESSAGE_SYNTAX_UNEXPECTED_CHARACTER,f=Entry.TextCodingError.SUBJECT_SYNTAX_CHARACTER):"Unexpected indent"==
b[0].trim()?(e=Entry.TextCodingError.MESSAGE_SYNTAX_UNEXPECTED_CHARACTER,f=Entry.TextCodingError.SUBJECT_SYNTAX_INDENT):(e=Entry.TextCodingError.MESSAGE_SYNTAX_DEFAULT,f=Entry.TextCodingError.SUBJECT_SYNTAX_DEFAULT);if(b[1])var g=b[1];h.title=Lang.TextCoding[c];h.message=Lang.TextCoding[e];h.keyword=g?g:"";h.subject=Lang.TextCoding[f];throw h;}}})(Entry.PyAstGenerator.prototype);Entry.Map=function(){this._map={repo:{}}};(function(c){c.getKey=function(b){return b};c.put=function(b,c){b=this.getKey(b);this._map.repo[b]=c};c.contains=function(b){b=this.getKey(b);return this._map.repo[b]?!0:!1};c.get=function(b){b=this.getKey(b);return this._map.repo[b]?this._map.repo[b]:null};c.remove=function(b){var c=this.getKey(b);this.contains(b)&&(this._map.repo[c]=void 0)};c.clear=function(){this._map.repo={}};c.toString=function(){return this._map.repo}})(Entry.Map.prototype);Entry.TextCodingError={};
(function(c){c.TITLE_SYNTAX="title_syntax";c.TITLE_CONVERTING="title_converting";c.MESSAGE_SYNTAX_DEFAULT="message_syntax_default";c.MESSAGE_SYNTAX_UNEXPECTED_TOKEN="message_syntax_unexpected_token";c.MESSAGE_SYNTAX_UNEXPECTED_CHARACTER="message_syntax_unexpected_character";c.MESSAGE_SYNTAX_UNEXPECTED_INDENT="message_syntax_unexpected_indent";c.MESSAGE_CONV_DEFAULT="message_conv_default";c.MESSAGE_CONV_NO_SUPPORT="message_conv_no_support";c.MESSAGE_CONV_NO_VARIABLE="message_conv_no_variable";c.MESSAGE_CONV_NO_LIST=
"message_conv_no_list";c.MESSAGE_CONV_NO_OBJECT="message_conv_no_object";c.MESSAGE_CONV_NO_FUNCTION="message_conv_no_function";c.MESSAGE_CONV_NO_ENTRY_EVENT_FUNCTION="message_conv_no_entry_event_function";c.SUBJECT_SYNTAX_DEFAULT="subject_syntax_default";c.SUBJECT_SYNTAX_TOKEN="subject_syntax_token";c.SUBJECT_SYNTAX_CHARACTER="subject_syntax_character";c.SUBJECT_SYNTAX_INDENT="subject_syntax_indent";c.SUBJECT_CONV_DEFAULT="subject_conv_default";c.SUBJECT_CONV_GENERAL="subject_conv_general";c.SUBJECT_CONV_VARIABLE=
"subject_conv_variable";c.SUBJECT_CONV_LIST="subject_conv_list";c.SUBJECT_CONV_OBJECT="subject_conv_object";c.SUBJECT_CONV_FUNCTION="subject_conv_function";c.ALERT_VARIABLE_EMPTY_TEXT_ADD_CHANGE="alert_variable_empty_text_add_change";c.ALERT_LIST_EMPTY_TEXT_ADD_CHANGE="alert_list_empty_text_add_change";c.ALERT_FUNCTION_NAME_EMPTY_TEXT_ADD_CHANGE="alert_function_name_empty_text_add_change";c.ALERT_VARIABLE_EMPTY_TEXT="alert_variable_empty_text";c.ALERT_LIST_EMPTY_TEXT="alert_list_empty_text";c.ALERT_FUNCTION_NAME_EMPTY_TEXT=
"alert_function_name_empty_text";c.ALERT_FUNCTION_NAME_FIELD_MULTI="alert_function_name_field_multi";c.ALERT_FUNCTION_NAME_DISORDER="alert_function_name_disorder";c.ALERT_FUNCTION_EDITOR="alert_function_editor";c.ALERT_FUNCTION_NO_SUPPORT="alert_function_no_support";c.ALERT_LIST_NO_SUPPORT="alert_list_no_support";c.ALERT_VARIABLE_NO_SUPPORT="alert_variable_no_support";c.ALERT_SIGNAL_NO_SUPPORT="alert_signal_no_support";c.ALERT_LEGACY_NO_SUPPORT="alert_legacy_no_support";c.ALERT_NO_SAVE_ON_ERROR="alert_no_save_on_error";
var b={};c.error=function(c,e,f,g,h){console.log("error control",c,e,f,g);c=this.getErrorInfo(c,e,f,g,h);b.title=c.title;b.message=c.message;b.line=g;throw b;};c.getErrorInfo=function(b,c,f,g,h){var d={};d.title=Lang.TextCoding[b];c=Lang.TextCoding[c];d.message="["+(h?Lang.TextCoding[h]:Lang.TextCoding[this.SUBJECT_CONV_GENERAL])+"] "+(f?"'"+f+"' ":"")+" : "+c+" (line "+g+")";return d}})(Entry.TextCodingError);Entry.PyHint=function(c){this.syntax=c;this.scope={};this.lastHW=null;this.scope._global=[];this.scope._list=[];for(var b in c)c[b].syntax&&0>b.indexOf("%")&&0>c[b].key.indexOf("function_field")?this.scope._global.push(b):"if"===b.substr(0,2)?this.scope._global.push(b):"while"===b.substr(0,5)&&this.scope._global.push(b);this.addScope("Entry");this.addScope("random");this.addScope("math");this.addScope("%2","_list");this._blockMenu=Entry.playground.mainWorkspace.blockMenu;CodeMirror.registerHelper("hint",
"python",this.pythonHint.bind(this));c=function(b){Entry.hw.hwModule?(b=Entry.hw.hwModule.name,b=b[0].toUpperCase()+b.slice(1),"ArduinoExt"===b&&(b="Arduino"),this.addScope(b),this.lastHW=b):(this.removeScope(this.lastHW),this.lastHW=null)}.bind(this);Entry.addEventListener("hwChanged",c);Entry.hw.hwModule&&c()};
(function(c){c.pythonHint=function(b){var c=b.getCursor(),e=b.getLineTokens(c.line);b=e.pop();for(var f=[],g=[];b&&c.ch<=b.start;)b=e.pop();if(!b)return null;var h,k=b.start,l=this.hintFunc,m=this.syntax;switch(b.type){case "builtin":h=e[e.length-2]&&"def"===e[e.length-2].string?null:b.string;case "def":!h&&(f=e[e.length-2])&&(h="def "+b.string,k=f.start);case "keyword":h||(h=b.string);case "variable":h||(h=b.string);f=this.fuzzySearch(this.getScope("_global"),h);f=f.map(function(b){var c=m,d=b.split("#")[0],
d=d.split("\n").join(" "),d=d.replace(/%\d+/gi,""),d=d.replace(/\$\d+/gi,""),e;-1<b.indexOf(".")&&(b=b.split("."),c=m[b[0]],e=b.shift(),b=b.join("."));c[b].key&&g.push(c[b].key);return{displayText:d,hint:l,syntax:c[b],localKey:e}});break;case "property":var q=e[e.length-2];if(q){h=this.getScope(q.string);h.length?h=this.fuzzySearch(h,b.string):Entry.variableContainer.getListByName(q.string)?(h=this.fuzzySearch(this.getScope("%2"),b.string),q.string="%2"):h=[];var f=h.map(function(b){var c=b.split("#")[0],
c=c.split("\n")[0];return{displayText:c,hint:l,syntax:m[q.string][b]}}),n=this.syntax[q.string],g=h.map(function(b){return n[b].key})}}g.length?this._blockMenu._setDynamic(g):this._blockMenu._cancelDynamic();return{list:f,from:CodeMirror.Pos(c.line,k),to:CodeMirror.Pos(c.line,b.end)}};c.addScope=function(b){if(this.syntax[b]&&!this.scope[b]){var c=this.syntax[b],e=Object.keys(c),e=e.filter(function(b){return 0>b.indexOf("#")&&!Entry.block[c[b].key].deprecated});this.scope[b]=e;this.scope._global.unshift(b);
e=e.map(function(c){return b+"."+c});this.scope._global=this.scope._global.concat(e)}};c.removeScope=function(b){if(this.scope[b]){var c=this.syntax[b],e=Object.keys(c),e=e.filter(function(b){return 0>b.indexOf("#")&&!Entry.block[c[b].key].deprecated}),e=e.map(function(c){return b+"."+c});for(this.scope._global.splice(this.scope._global.indexOf(b),1);e.length;){var f=e.pop();this.scope._global.splice(this.scope._global.indexOf(f),1)}delete this.scope[b]}};c.getScope=function(b){return this.scope[b]?
this.scope[b]:[]};c.fuzzySearch=function(b,c,e){e=e||{};e.escapeLetter="#";b=Entry.Utils.fuzzy.filter(c,b,e).slice(0,20);return b=b.map(function(b){return b.original})};c.hintFunc=function(b,c,e){var d;d=e.syntax;var g=c.from.ch;d.syntax?(d=d.syntax,e.localKey&&(d=e.localKey+"."+d),d=d.split("."),1<d.length&&d.shift(),d=d.join("."),-1<d.indexOf("%")?(g+=d.indexOf("%"),d=d.replace(/%\d+/gi,"")):g+=d.length,d=d.replace(/\$\d+/gi,"")):(d=e.displayText+".",g+=d.length);-1<d.indexOf("\n")&&(d=d.split("\n").join("\n"+
"\t".repeat(c.from.ch)));if(-1<d.indexOf(":")){for(var h=b.getCursor(),h=b.getLineTokens(h.line),k=h.shift();h.length&&"keyword"!==k.type;)k=h.shift();g-=c.from.ch-k.start;c.from.ch=k.start}b.replaceRange(d,c.from,c.to);b.setCursor({line:c.from.line,ch:g});Entry.helper.renderBlock(e.syntax.key)}})(Entry.PyHint.prototype);Entry.BlockToJsParser=function(c,b){this._type="BlockToJsParser";this.syntax=c;this._parentParser=b;this._iterVariableCount=0;this._iterVariableChunk=["i","j","k"]};
(function(c){c.Code=function(b,c){this._parseMode=c;if(b instanceof Entry.Block)return this.Block(b);c="";b=b._data;for(var d=0;d<b.length;d++)c+=this.Thread(b[d]);return c.trim()};c.Thread=function(b){if(b instanceof Entry.Block)return this.Block(b);var c="";b=b.getBlocks();for(var e=0;e<b.length;e++){var f=b[e];e!=b.length-1?(f=this.Block(f),this._parseMode==Entry.Parser.PARSE_GENERAL?c+=f+"\n":this._parseMode==Entry.Parser.PARSE_SYNTAX&&(c=f+"\n")):(f=this.Block(f),this._parseMode==Entry.Parser.PARSE_GENERAL?
c+=f:this._parseMode==Entry.Parser.PARSE_SYNTAX&&(c=f))}return c+"\n"};c.Block=function(b){var c=b._schema.syntax.js?b._schema.syntax.js:b._schema.syntax;return c?b=this[c[0]](b):""};c.Program=function(b){return""};c.Scope=function(b){var c=!1,e="",f=/(%.)/mi;if(b._schema.syntax.js)var g=b._schema.syntax.js.concat(),c=!0;else g=b._schema.syntax.concat();g.shift();for(var g=g[0].split(f),h=b._schema.params,k=b.data.params,l=0;l<g.length;l++){var m=g[l];0!==m.length&&"Scope"!==m&&("Judge"===m?c=!0:
f.test(m)?(m=m.split("%")[1],m=parseInt(m)-1,h[m]&&"Image"!=h[m].type&&("Block"==h[m].type?(m=this.Block(k[m]),e+=m):e+=this[h[m].type](k[m],h[m]))):e+=m)}"#"==e.charAt(e.length-1)&&(c=!0,e=e.substring(0,e.length-1),e=e.trim());c||(e+="();");return e=Entry.TextCodingUtil.jsAdjustSyntax(b,e)};c.BasicFunction=function(b){b=this.Thread(b.statements[0]);return"function promise() {\n"+this.indent(b).trim()+"}"};c.BasicIteration=function(b){var c=b.params[0],e=this.publishIterateVariable();b=this.Thread(b.statements[0]);
this.unpublishIterateVariable();return"for (var "+e+" = 0; "+e+" < "+c+"; "+e+"++) {\n"+this.indent(b)+"}"};c.BasicIf=function(b){var c;if(2==b.data.statements.length){c=this.Thread(b.statements[0]);var e=this.Thread(b.statements[1]),f=b._schema.syntax.concat(),f=(b=b.data.params[0])&&"True"==b.data.type?f[1]:void 0===b?f[1]:this.Block(b);c="if ("+f+") {\n"+this.indent(c)+"}\nelse {\n"+this.indent(e)+"}\n"}else c=this.Thread(b.statements[0]),f=b._schema.syntax.concat(),f=(b=b.data.params[0])&&"True"==
b.data.type?f[1]:void 0===b?f[1]:this.Block(b),c="if ("+f+") {\n"+this.indent(c)+"}\n";return c};c.BasicWhile=function(b){var c=this.Thread(b.statements[0]);return"while ("+b._schema.syntax.concat()[1]+") {\n"+this.indent(c)+"}\n"};c.indent=function(b){var c="";b=b.split("\n");for(var e in b){var f=b[e];0!=f.length&&(c+="\t"+f+"\n")}return c};c.publishIterateVariable=function(){var b="",c=this._iterVariableCount;do b=this._iterVariableChunk[c%3]+b,c=parseInt(c/3)-1,0===c&&(b=this._iterVariableChunk[0]+
b);while(0<c);this._iterVariableCount++;return b};c.unpublishIterateVariable=function(){this._iterVariableCount&&this._iterVariableCount--};c.Dropdown=function(b){"OBSTACLE"==b?b="stone":"ITEM"==b?b=b.toLowerCase():"WALL"==b&&(b=b.toLowerCase());return"'"+b+"'"};c.TextInput=function(b){return b};c.DropdownDynamic=function(b,c){return b="null"==b?"none":Entry.TextCodingUtil.dropdownDynamicValueConvertor(b,c)};c.searchSyntax=function(b){b instanceof Entry.BlockView&&(b=b.block);return this._parentParser.parse(b,
Entry.Parser.PARSE_SYNTAX)};c.getAssistScope=function(){if(this._assist)return this._assist;var b={},c;for(c in this.syntax.Scope)b[c+"();\n"]=this.syntax.Scope[c];return this._assist=b}})(Entry.BlockToJsParser.prototype);Entry.KeyboardCode={};
(function(c){c.map={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pausebreak:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,windows:91,rightclick:93,numpad0:96,numpad1:97,numpad2:98,numpad3:99,numpad4:100,numpad5:101,numpad6:102,numpad7:103,numpad8:104,
numpad9:105,"numpad*":106,"numpad+":107,"numpad-":109,"numpad.":110,"numpad/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,mycomputer:182,mycalculator:183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222}})(Entry.KeyboardCode);Entry.BlockToPyParser=function(c){this._type="BlockToPyParser";this._funcParamMap=new Entry.Map;this._funcDefMap={};this._listDeclaration=this._variableDeclaration=null;this._forIdCharIndex=0};
(function(c){c.Code=function(b,c){this._parseMode=c;if(b){if(b instanceof Entry.Thread)return this.Thread(b);if(b instanceof Entry.Block)return this.Block(b);c="";b=b.getThreads();for(var d=0;d<b.length;d++)this._forIdCharIndex=0,c+=this.Thread(b[d])+"\n";return c=c.trim()}};c.Thread=function(b){if(b instanceof Entry.Block)return this.Block(b);var c="";b=b.getBlocks();for(var e=!1,f="",g="",h=0;h<b.length;h++){var k=b[h];this._parseMode==Entry.Parser.PARSE_GENERAL?0==h?(e=Entry.TextCodingUtil.isEventBlock(k))?
f=this.Block(k)+"\n":g+=this.Block(k)+"\n":0!=h&&(k=this.Block(k)+"\n",g+=k):this._parseMode==Entry.Parser.PARSE_SYNTAX&&(c=(e=Entry.TextCodingUtil.isEventBlock(k))?"":this.Block(k)+"\n")}this._parseMode==Entry.Parser.PARSE_GENERAL&&(e&&(g=Entry.TextCodingUtil.indent(g)),c=f+g+"\n");return c=c.trim()+"\n"};c.Block=function(b,c){c="";var d,f,g;if(d=this.searchSyntax(b))f=d.syntax;if(this.isFunc(b)){if(this._hasRootFunc||(this._rootFuncId=b.data.type,this._funcDefMap[b.data.type]=this.makeFuncDef(b,
this._hasRootFunc),this._hasRootFunc=!1),this.isRegisteredFunc(b)&&(f=this.makeFuncSyntax(b)),this._parseMode==Entry.Parser.PARSE_SYNTAX)return f}else this.isFuncStmtParam(b)&&(c+=b.data.type);if(!f||null==f)return c;var h=/(%.)/mi,k=/(\$.)/mi;f=f.split(h);for(var l=b._schema.params,m=b.data.params,q=0;q<f.length;q++)if(g=f[q],0!==g.length)if("% "==g)c+=g;else if(h.test(g)){g=g.split("%")[1];var n=Number(g)-1;if(l[n]&&"Indicator"!=l[n].type)if("Block"==l[n].type){g=this.Block(m[n]).trim();if(d.textParams&&
d.textParams[n])var t=d.textParams[n];if(n=this._funcParamMap.get(g))g=n;else{var n=g.split("_"),v=n[0];2==n.length&&("stringParam"==v?g="string_param":"booleanParam"==v&&(g="boolean_param"))}t&&"index"==t.paramType&&(Entry.Utils.isNumber(g)?--g:(n=g.split("+")," 1)"==n[n.length-1]?(delete n[n.length-1],g=n.join("+"),g=g.substring(1,g.length-2)):g+=" - 1"));t&&"integer"==t.paramType&&Entry.Utils.isNumber(g)&&0!==g%1&&(c=c.replace("randint","uniform"));c+=g}else g=d.textParams?d.textParams:[],g=this["Field"+
l[n].type](m[n],g[n]),c+=g,d&&"repeat_while_true"==d.key&&(c=Entry.TextCodingUtil.assembleRepeatWhileTrueBlock(b,c))}else if(k.test(g))for(g=g.split(k),v=0;v<g.length;v++)n=g[v],0!==n.length&&(k.test(n)?(n=Number(n.split("$")[1])-1,c+=Entry.TextCodingUtil.indent(this.Thread(b.statements[n]))):c+=n);else d&&"repeat_basic"==d.key&&0==q&&(g=g.split(" "),g[1]=Entry.TextCodingUtil.generateForStmtIndex(this._forIdCharIndex++),g=g.join(" ")),c+=g;return c};c.searchSyntax=function(b){var c;b instanceof Entry.BlockView?
(c=b.block._schema,applliedParams=b.block.data.params):b instanceof Entry.Block?(c=b._schema,applliedParams=b.params):c=b;if(c&&c.syntax)for(b=c.syntax.py.concat();b.length;){c=!1;var e=b.shift();if("string"===typeof e)return{syntax:e,template:e};if(e.params)for(var f=0;f<e.params.length;f++)if(e.params[f]&&e.params[f]!==applliedParams[f]){c=!0;break}e.template||(e.template=e.syntax);if(!c)return e}return null};c.FieldAngle=function(b,c){c&&c.converter&&(b=c.converter(b));return b};c.FieldColor=function(b,
c){c&&c.converter&&(b=c.converter(null,b));return b};c.FieldDropdown=function(b,c){if("object"==typeof b)return"None".replace(/\"/gm,"");if(c&&c.converter&&c.options){var d=c.options,f;for(f in d){var g=d[f][0],h=d[f][1];if(b==h)return c.converter(g,h)}b=c.converter(b,b)}return b};c.FieldDropdownDynamic=function(b,c){if("object"==typeof b)return"None".replace(/\"/gm,"");if(c&&c.converter&&c.options){var d=c.options,f;for(f in d){var g=d[f][0],h=d[f][1];if(b==h)return(b=Entry.TextCodingUtil.dropdownDynamicIdToNameConvertor(h,
c.menuName))&&(g=b),c.converter(g,h)}b=(h=Entry.TextCodingUtil.dropdownDynamicIdToNameConvertor(b,c.menuName))?c.converter(h,h):c.converter(b,b);/None/.test(b)&&(b=b.replace(/\"/gm,""))}return b};c.FieldImage=function(b,c){c&&c.converter&&(b=c.converter(null,b));return b};c.FieldIndicator=function(b,c){return b};c.FieldKeyboard=function(b,c){if(/None/.test(b))return b.replace(/\"/gm,"");var d=Entry.KeyboardCode.map,f;for(f in d)if(d[f]==b){b=f;break}c&&c.converter&&(b=c.converter(b,null));return b=
b.toLowerCase()};c.FieldOutput=function(b,c){return b};c.FieldText=function(b,c){c&&c.converter&&(b=c.converter(null,b));return b};c.FieldTextInput=function(b,c){if("number"!=typeof b){b=b.replace("\t","    ");var d=b.split(/ /);b.length==d.length-1&&(b='"()"'.replace("()",b))}c&&c.converter&&(b=c.converter(null,b));return b};c.FieldNumber=function(b,c){c&&c.converter&&(b=c.converter(null,b));return b};c.isFunc=function(b){return b&&b.data&&b.data.type?"func"==b.data.type.split("_")[0]?!0:!1:!1};
c.isRegisteredFunc=function(b){b=b.data.type.split("_");return Entry.variableContainer.functions_[b[1]]?!0:!1};c.isFuncStmtParam=function(b){if(!b||!b.data||!b.data.type)return!1;b=b.data.type.split("_")[0];return"stringParam"==b||"booleanParam"==b?!0:!1};c.makeFuncSyntax=function(b){if(b&&b._schema)if(b._schema.template)var c=b._schema.template.trim();else if(b._schema.params)var e=b._schema.params;else b&&!b._schema&&this._hasRootFunc&&(b=Entry.block[this._rootFuncId],e=b.block.params,c=b.block.template);
b=/(%.)/mi;if(c)var f=c.trim().split(b);var g=c="",h;for(h in f){var k=f[h].trim();if(b.test(k)){if(k=k.split("%")[1],1!=k){var k=k-1,l=k-1;e&&e[l]&&"Indicator"==e[l].type||(g+="%".concat(k).concat(", "))}}else k=k.split(" "),c+=k.join("__")}l=g.lastIndexOf(",");g=g.substring(0,l);return c.trim().concat("(").concat(g.trim()).concat(")")};c.makeFuncDef=function(b,c){if(this.isRegisteredFunc(b)){var d="";if(b=this.getFuncInfo(b)){var d=d+b.name,f="";if(b.params&&0!=b.params.length){for(var g in b.params)f+=
b.params[g],g!=b.params.length-1&&(f=f.concat(", "));f=f.trim()}d=d.concat("(").concat(f).concat(")");if(c)return d;this._hasRootFunc=!0;d=("def "+d).concat(":\n");if(b.statements&&b.statements.length){c="";for(var h in b.statements)g=b.statements[h],c=this.getFuncInfo(g)?c+this.makeFuncDef(g,!0).concat("\n"):c+this.Block(g).concat("\n");d+=Entry.TextCodingUtil.indent(c).concat("\n")}return d.trim()}}};c.getFuncInfo=function(b){var c={},e=b.data.type.split("_")[1];if(e){var f=Entry.variableContainer.functions_[e];
if(!f)return null}else return null;var e=f.block.template,g=e.search(/(%.)/),e=e.substring(0,g).trim().split(" ").join("__");Entry.TextCodingUtil.initQueue();Entry.TextCodingUtil.gatherFuncDefParam(f.content._data[0]._data[0].data.params[0]);var h=[];if(!this._hasRootFunc)for(;m=Entry.TextCodingUtil._funcParamQ.dequeue();)h.push(m);Entry.TextCodingUtil.clearQueue();var k=[];if(this._hasRootFunc){var l=b.data.params;for(q in l){var m=l[q];if(m){g=this.Block(m);if(paramType=this._funcParamMap.get(g))g=
paramType;k.push(g)}}}else for(g in h){b=h[g];var q=b.search("_"),q=b.substring(0,q);"stringParam"==q?l="param"+(parseInt(g)+1):"booleanParam"==q&&(l="param"+(parseInt(g)+1));l&&(k.push(l),this._funcParamMap.put(b,l))}f=f.content._data[0]._data;q=[];for(l=1;l<f.length;l++)q.push(f[l]);e&&(c.name=e);0!=k.length&&(c.params=k);0!=q.length&&(c.statements=q);return c}})(Entry.BlockToPyParser.prototype);Entry.JsToBlockParser=function(c,b){this._type="JsToBlockParser";this.syntax=c;this.scopeChain=[];this.scope=null;this._blockCount=0;this._blockInfo={};this._parentParser=b};
(function(c){c.Program=function(b){var c=[],e=[];e.push({type:this.syntax.Program});for(var f in b){var g=b[f];if("Program"!=g.type)return;this.initScope(g);var g=this.BlockStatement(g),h;for(h in g)e.push(g[h]);this.unloadScope();0!=e.length&&c.push(e)}return c};c.Identifier=function(b){return b.name};c.Literal=function(b,c){return!0===b.value?{type:"True"}:!1===b.value?{type:"False"}:"ai_distance_value"==c?b.value:"ai_boolean_object"==c?b.value:{type:"text",params:[b.value]}};c.ExpressionStatement=
function(b){b=b.expression;return this[b.type](b)};c.ForStatement=function(b){var c=b.init,e=b.test,f=b.update,g=b.body;if(this.syntax.ForStatement)throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};var g=this[g.type](g),c=c.declarations[0].init.value,h=e.operator,e=e.right.value,k=0;"++"!=f.operator&&(f=c,c=e,e=f);switch(h){case "<":k=e-c;break;case "<=":k=e+1-c;break;case ">":k=c-e;break;case ">=":k=c+1-e}return this.BasicIteration(b,k,g)};c.BlockStatement=
function(b){var c=[];b=b.body;for(var e=0;e<b.length;e++){var f=b[e],g=this[f.type](f);Entry.TextCodingUtil.hasBlockInfo(f,this._blockInfo)||this._blockCount++;Entry.TextCodingUtil.updateBlockInfo(f,this._blockInfo);if(g){if(void 0===g.type)throw{title:"\ube14\ub85d\ubcc0\ud658 \uc624\ub958",message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube14\ub85d\uc785\ub2c8\ub2e4.",node:f,blockCount:this._blockCount};Entry.TextCodingUtil.isParamBlock(g)||g&&c.push(g)}}return c};c.EmptyStatement=function(b){throw{message:"empty\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.DebuggerStatement=function(b){throw{message:"debugger\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.WithStatement=function(b){throw{message:"with\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ReturnStaement=function(b){throw{message:"return\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.LabeledStatement=function(b){throw{message:"label\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.BreakStatement=function(b){throw{message:"break\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ContinueStatement=function(b){throw{message:"continue\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.IfStatement=function(b){if(this.syntax.BasicIf)return this.BasicIf(b);throw{message:"if\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.SwitchStatement=
function(b){throw{message:"switch\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.SwitchCase=function(b){throw{message:"switch ~ case\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ThrowStatement=function(b){throw{message:"throw\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.TryStatement=function(b){throw{message:"try\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.CatchClause=function(b){throw{message:"catch\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.WhileStatement=function(b){var c=b.body,e=this.syntax.WhileStatement,c=this[c.type](c);if(e)throw{message:"while\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};return this.BasicWhile(b,c)};c.DoWhileStatement=function(b){throw{message:"do ~ while\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b};};c.ForInStatement=function(b){throw{message:"for ~ in\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.FunctionDeclaration=function(b){if(this.syntax.FunctionDeclaration)throw{message:"function\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};return null};c.VariableDeclaration=function(b){throw{message:"var\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};
c.ThisExpression=function(b){return this.scope.this};c.ArrayExpression=function(b){throw{message:"array\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.ObjectExpression=function(b){throw{message:"object\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.Property=function(b){throw{message:"init, get, set\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.FunctionExpression=
function(b){throw{message:"function\uc740 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.UnaryExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub839\uc5b4 \uc785\ub2c8\ub2e4.",node:b};};c.UnaryOperator=function(){return"- + ! ~ typeof void delete".split(" ")};c.updateOperator=function(){return["++","--"]};c.BinaryOperator=function(){return"== != === !== < <= > >= << >> >>> + - * / % , ^ & in instanceof".split(" ")};
c.AssignmentExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub839\uc5b4 \uc785\ub2c8\ub2e4.",node:b};};c.AssignmentOperator=function(){return"= += -= *= /= %= <<= >>= >>>= ,= ^= &=".split(" ")};c.BinaryExpression=function(b){var c,e={};c=String(b.operator);var f=b.left.name;switch(c){case "==":var g="object_up"==f||"object_right"==f||"object_down"==f?"ai_boolean_object":"radar_up"==f||"radar_right"==f||"radar_down"==f?"ai_boolean_distance":
null;break;case "<":g="ai_boolean_distance";break;case "<=":g="ai_boolean_distance";break;case ">":g="ai_boolean_distance";break;case ">=":g="ai_boolean_distance"}if(g){f=[];c=b.left;if("Literal"==c.type||"Identifier"==c.type){arguments=[];arguments.push(c);c=Entry.block[g].params;for(var h in c){var k=c[h].type;"Indicator"==k?(k={raw:null,type:"Literal",value:null},h<arguments.length&&arguments.splice(h,0,k)):"Text"==k&&(k={raw:"",type:"Literal",value:""},h<arguments.length&&arguments.splice(h,0,
k))}for(var l in arguments)c=arguments[l],k=this[c.type](c),(k=Entry.TextCodingUtil.radarVariableConvertor(k))&&null!=k&&f.push(k)}else k=this[c.type](c),(k=Entry.TextCodingUtil.radarVariableConvertor(k))&&f.push(k);if(c=String(b.operator))(k=c=Entry.TextCodingUtil.jTobBinaryOperatorConvertor(c))&&f.push(k),e.operator=c;c=b.right;if("Literal"==c.type||"Identifier"==c.type){arguments=[];arguments.push(c);c=Entry.block[g].params;for(h in c)k=c[h].type,"Indicator"==k?(k={raw:null,type:"Literal",value:null},
h<arguments.length&&arguments.splice(h,0,k)):"Text"==k&&(k={raw:"",type:"Literal",value:""},h<arguments.length&&arguments.splice(h,0,k));for(l in arguments)if(c=arguments[l],k=this[c.type](c),"string"==typeof k&&(h=k.split("_"),"radar"==h[0]&&(c={type:"ai_distance_value",params:[]},c.params.push(h[1].toUpperCase()),k=c)),k&&null!=k&&("ai_boolean_object"==g&&(k=k.params[0],f.splice(1,1)),k=Entry.TextCodingUtil.tTobDropdownValueConvertor(k),f.push(k),f[2]&&"text"!=f[2].type&&"ai_distance_value"!=f[2].type))throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",
node:b.test};}else k=this[c.type](c),"ai_boolean_object"==g&&(k=k.params[0],f.splice(1,1)),k&&f.push(k);e.type=g;e.params=f}else throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b.test};return e};c.LogicalExpression=function(b){var c={},e=String(b.operator);switch(e){case "&&":var f="ai_boolean_and";break;default:f="ai_boolean_and"}var g=[],e=b.left;if("Literal"==e.type||"Identifier"==e.type){arguments=[];arguments.push(e);var e=Entry.block[f].params,
h;for(h in e){var k=e[h].type;"Indicator"==k?(k={raw:null,type:"Literal",value:null},h<arguments.length&&arguments.splice(h,0,k)):"Text"==k&&(k={raw:"",type:"Literal",value:""},h<arguments.length&&arguments.splice(h,0,k))}for(var l in arguments)e=arguments[l],(e=this[e.type](e))&&null!=e&&g.push(e)}else(e=this[e.type](e))&&g.push(e);if(e=String(b.operator))e=Entry.TextCodingUtil.logicalExpressionConvert(e),g.push(e);e=b.right;if("Literal"==e.type||"Identifier"==e.type){arguments=[];arguments.push(e);
e=Entry.block[f].params;for(h in e)k=e[h].type,"Indicator"==k?(k={raw:null,type:"Literal",value:null},h<arguments.length&&arguments.splice(h,0,k)):"Text"==k&&(k={raw:"",type:"Literal",value:""},h<arguments.length&&arguments.splice(h,0,k));for(l in arguments)e=arguments[l],(e=this[e.type](e))&&null!=e&&g.push(e);if("True"!=g[0].type&&"ai_boolean_distance"!=g[0].type&&"ai_boolean_object"!=g[0].type&&"ai_boolean_and"!=g[0].type&&"ai_distance_value"!=g[0].type)throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub801\uc5b4 \uc785\ub2c8\ub2e4.",
node:b};if("True"!=g[2].type&&"ai_boolean_distance"!=g[2].type&&"ai_boolean_object"!=g[2].type&&"ai_boolean_and"!=g[2].type&&"ai_distance_value"!=g[2].type)throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub801\uc5b4 \uc785\ub2c8\ub2e4.",node:b};}else(e=this[e.type](e))&&g.push(e);c.type=f;c.params=g;return c};c.LogicalOperator=function(){return["||","&&"]};c.MemberExpression=function(b){var c=b.object,e=b.property,c=this[c.type](c),e=this[e.type](e,c);if(Object(c)!==c||Object.getPrototypeOf(c)!==
Object.prototype)throw{message:c+"\uc740(\ub294) \uc798\ubabb\ub41c \uba64\ubc84 \ubcc0\uc218\uc785\ub2c8\ub2e4.",node:b};c=e;if(!c)throw{message:e+"\uc774(\uac00) \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.",node:b};return c};c.ConditionalExpression=function(b){throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.UpdateExpression=function(b){throw{message:b.operator+"\uc740(\ub294) \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uba85\ub801\uc5b4 \uc785\ub2c8\ub2e4.",
node:b};};c.CallExpression=function(b){for(var c=b.callee,e=b.arguments,f=[],g=this[c.type](c),g=this.syntax.Scope[g],h=Entry.block[g].params,k=0;k<e.length;k++){var l=e[k],l=this[l.type](l,g),m=h[k].type;"Dropdown"==m?f.push(l):"Block"===m?f.push("string"==typeof l?{type:"text",params:[l]}:"number"==typeof l?{type:"number",params:[l]}:l):f.push(l);if(l.type!==m&&this._parentParser){var l=Lang.Msgs.warn,m=this._parentParser.getLineNumber(b.start,b.end).from.line+1,q=Lang.TextCoding.warn_unnecessary_arguments,
q=q.replace("&(calleeName)",c.name).replace("&(lineNumber)",m);Entry.toast.warning(l,q)}}return{type:g,params:f}};c.NewExpression=function(b){throw{message:"new\ub294 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.SequenceExpression=function(b){throw{message:"SequenceExpression \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};};c.initScope=function(b){if(null===this.scope){var c=function(){};c.prototype=this.syntax.Scope}else c=
function(){},c.prototype=this.scope;this.scope=new c;this.scopeChain.push(this.scope);return this.scanDefinition(b)};c.unloadScope=function(){this.scopeChain.pop();this.scope=this.scopeChain.length?this.scopeChain[this.scopeChain.length-1]:null};c.scanDefinition=function(b){b=b.body;for(var c=[],e=0;e<b.length;e++){var f=b[e];"FunctionDeclaration"===f.type&&(this.scope[f.id.name]=this.scope.promise,this.syntax.BasicFunction&&(f=f.body,c.push([{type:this.syntax.BasicFunction,statements:[this[f.type](f)]}])))}return c};
c.BasicFunction=function(b,c){return null};c.BasicIteration=function(b,c,e){if(10<c)throw{message:"\ubc18\ubcf5 \uc22b\uc790\uac12\uc774 10\uc744 \ub118\uc73c\uba74 \uc548\ub429\ub2c8\ub2e4.",node:b.test};var d=this.syntax.BasicIteration;if(!d)throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b};return{params:[c],type:d,statements:[e]}};c.BasicWhile=function(b,c){var d=b.test.raw;if(this.syntax.BasicWhile[d])return{type:this.syntax.BasicWhile[d],statements:[c]};
throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b.test};};c.BasicIf=function(b){var c={params:[],statements:[]},e,f=[],g=[],h=[],k=b.consequent;if(k)var l=this[k.type](k);if(k=b.alternate)var m=this[k.type](k);try{var q=b.test.operator?"==="===b.test.operator?"==":b.test.operator:null,n=b.test.left&&b.test.right?b.test.left.name+b.test.right.value:null;if("frontwall"==n&&"=="==q)e=this.syntax.BasicIf["front == 'wall'"];else if("fronthump"==n&&"=="==
q)e=this.syntax.BasicIf["front == 'hump'"];else if("frontstone"==n&&"=="==q)e=this.syntax.BasicIf["front == 'stone'"];else if("frontbee"==n&&"=="==q)e=this.syntax.BasicIf["front == 'bee'"];else if(b.test.value||b.test.left&&b.test.right){e="ai_if_else";var t=this[b.test.type](b.test,this.syntax.Scope);h.push(t)}else throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b.test};e?(l&&0!=l.length&&c.statements.push(l),m&&0!=m.length&&c.statements.push(m),
e&&(c.type=e),h&&0!=h.length&&(c.params=h)):(l&&0!=l.length&&(f=l),m&&0!=m.length&&(g=m),e&&(c.type=e),h&&0!=h.length&&(c.params=h),c.statements=[f,g]);return c}catch(v){throw{message:"\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ud45c\ud604\uc2dd \uc785\ub2c8\ub2e4.",node:b.test};}};c.searchSyntax=function(b){return null}})(Entry.JsToBlockParser.prototype);Entry.PyToBlockParser=function(c){this._type="PyToBlockParser";this.blockSyntax=c;this._funcMap=new Entry.Map};
(function(c){c.Program=function(b){try{this.codeInit();for(var c in b){if("Program"!=b[c].type)return;this.threadInit();this._threadCount++;var e=b[c].body;this._isEntryEventExisted=!1;for(c in e){var f=e[c],g=this[f.type](f);this.isLastBlock&&Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,void 0,this._blockCount);if(g&&g.type){var h=this.searchSyntax(Entry.block[g.type]);if(h)var k=h.blockType;if("event"==k)this._isEntryEventExisted=
!0;else if("last"==k)this.isLastBlock=!0;else if("variable"==k&&!this._isEntryEventExisted)continue;if(Entry.TextCodingUtil.isEntryEventFuncByType(g.type)){if(this._thread.push(g),g.contents)for(var l in g.contents)this.extractContents(g.contents[l],this._thread)}else this._thread.push(g)}}0!=this._thread.length&&this._code.push(this._thread)}return this._code}catch(m){throw b={},b.title=m.title,b.message=m.message,b.line=m.line,b;}};c.ExpressionStatement=function(b){var c={};b=b.expression;this._blockCount++;
b.callee&&Entry.TextCodingUtil.isEntryEventFuncName(b.callee.name)&&this._blockCount--;b.type&&(b=this[b.type](b),b.type&&b.params?(c.type=b.type,c.params=b.params):b.type?c.type=b.type:c=b,b.funcName&&(c.funcName=b.funcName));!c.type&&c.name&&Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,c.name,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return c};c.CallExpression=function(b){var c={},e=[],f,g=b.callee,h=this[g.type](g),
arguments=b.arguments,k=0;if("Identifier"==g.type){c.callee=h;var l=Entry.TextCodingUtil.eventBlockSyntaxFilter(h.name);if(arguments&&0!=arguments.length)for(var m in arguments){var q=arguments[m];if("Identifier"==q.type)var n=q.name;else"Literal"==q.type?n=q.value:"MemberExpression"==q.type&&(n=q.object.name+"."+q.property.name);var t=l+"#"+n,v=this.getBlockSyntax(t);v&&(f=v.key)}if(!f){if(arguments&&0!=arguments.length){var y="";for(m in arguments)q=arguments[m],"Identifier"==q.type?y+=q.name:"Literal"==
q.type?y+=q.value:"MemberExpression"==q.type&&(y+=q.object.name+"."+q.property.name),m!=arguments.length-1&&(y+=",")}t=l+"("+y+")";if(v=this.getBlockSyntax(t))f=v.key}!f&&(t=l,v=this.getBlockSyntax(t))&&(f=v.key);if(!f){var x=h.name;if(-1!=h.name.search("__getParam"))return c;if(h.name&&0!=arguments.length&&"Literal"==arguments[0].type&&!this._funcMap.get(x)){var r=h.name;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,r,this._blockCount,
Entry.TextCodingError.SUBJECT_CONV_GENERAL)}}g&&"when_get_signal"==g.name&&(n=b.arguments[0])&&n.value&&"None"!=n.value&&Entry.TextCodingUtil.createMessage(n.value)}else{q=h.object;l=null;h.property&&"call"==h.property.name&&0==h.property.userCode&&h.object&&h.object.statements&&(c.statements=q.statements);h.object&&(h.object.name?l=String(h.object.name).concat(".").concat(String(h.property.name)):h.object.object&&(l=String(h.object.object.name).concat(".").concat(String(h.object.property.name)).concat(".").concat(String(h.property.name))));
c.callee=l;arguments&&0!=arguments.length&&(q=arguments[0],"Identifier"==q.type?n=q.name:"Literal"==q.type?n=q.value:"MemberExpression"==q.type&&(n=q.object.name+"."+q.property.name),t=l+"#"+n,v=this.getBlockSyntax(t))&&(f=v.key,v.replaceBlockType&&(f=v.replaceBlockType));if(!f){if(arguments&&0!=arguments.length)for(m in y="",arguments)q=arguments[m],"Identifier"==q.type?y+=q.name:"Literal"==q.type?y+=q.value:"MemberExpression"==q.type&&(y+=q.object.name+"."+q.property.name),m!=arguments.length-1&&
(y+=",");t=l+"("+String(y)+")";if(v=this.getBlockSyntax(t))f=v.key,v.replaceBlockType&&(f=v.replaceBlockType)}!f&&(t=l,v=this.getBlockSyntax(t))&&(f=v.key,v.replaceBlockType&&(f=v.replaceBlockType));if(g.object)if("Math"===g.object.name)if("pow"===g.property.name){if(t="(%2 ** 2)",v=this.getBlockSyntax(t))f=v.key}else{if("floor"===g.property.name){t="(%2 // %4)";if(v=this.getBlockSyntax(t)){f=v.key;var A=Entry.block[f],x=A.params,A=A.def.params}if(b.arguments&&b.arguments[0])return n=b.arguments[0],
n.left&&(u=this[n.left.type](n.left,x[1],A[1],v.textParams[1]),e[1]=u),n.right&&(u=this[n.right.type](n.right,x[3],A[3],v.textParams[3]),e[3]=u),c.type=f,c.params=e,c}}else"Entry"==g.object.name&&("send_signal"==g.property.name?(n=b.arguments[0])&&n.value&&Entry.TextCodingUtil.createMessage(n.value):"send_signal_wait"==g.property.name&&(n=b.arguments[0])&&n.value&&Entry.TextCodingUtil.createMessage(n.value));if(g.property)if("range"==g.property.name){if(t="%1#number",v=this.getBlockSyntax(t))f=v.key}else if("add"==
g.property.name){t="(%1 %2 %3)#calc_basic";if(v=this.getBlockSyntax(t))f=v.key;x={raw:"PLUS",type:"Literal",value:"PLUS"};2==arguments.length&&arguments.splice(1,0,x);c.operator="PLUS"}else if("multiply"==g.property.name){t="(%1 %2 %3)#calc_basic";if(v=this.getBlockSyntax(t))f=v.key;x={raw:"MULTI",type:"Literal",value:"MULTI"};2==arguments.length&&arguments.splice(1,0,x);c.operator="MULTI"}else if("in"==g.property.name){if(t="%4 in %2",v=this.getBlockSyntax(t))f=v.key}else if("len"==g.property.name){t=
"len";if(b.arguments&&b.arguments[0])if(q=b.arguments[0],"Literal"==q.type)t="len#length_of_string";else if("Identifier"==q.type){if(this.isFuncParam(q.name)||Entry.TextCodingUtil.isGlobalVariableExisted(q.name)||Entry.TextCodingUtil.isLocalVariableExisted(q.name,this._currentObject))t="len#length_of_string"}else if("MemberExpression"==q.type){if(Entry.TextCodingUtil.isGlobalListExisted(q.object.name)||Entry.TextCodingUtil.isLocalListExisted(q.object.name)||Entry.TextCodingUtil.isGlobalVariableExisted(q.property.name)||
Entry.TextCodingUtil.isLocalVariableExisted(q.property.name,this._currentObject))t="len#length_of_string"}else t="len#length_of_string";if(v=this.getBlockSyntax(t))f=v.key}else if("append"==g.property.name){if(t="%2.append",v=this.getBlockSyntax(t))f=v.key}else if("insert"==g.property.name){if(t="%2.insert",v=this.getBlockSyntax(t))f=v.key}else if("pop"==g.property.name){if(t="%2.pop",v=this.getBlockSyntax(t))f=v.key}else if("subscriptIndex"==g.property.name){if(b.arguments&&b.arguments[0])if(q=b.arguments[0],
Entry.TextCodingUtil.isExpressionLiteral(q,this.blockSyntax)){if(t="%2[%4]#char_at",v=this.getBlockSyntax(t))f=v.key}else""!=q.type&&(t="%2[%4]",v=this.getBlockSyntax(t))&&(f=v.key)}else if("_pySlice"==g.property.name){if(t="%2[%4:%6]",v=this.getBlockSyntax(t))f=v.key}else if("find"==g.property.name){if(t="%2.find",v=this.getBlockSyntax(t))f=v.key}else if("replace"==g.property.name){if(t="%2.replace",v=this.getBlockSyntax(t))f=v.key}else if("upper"==g.property.name){if(t="%2.upper",v=this.getBlockSyntax(t))f=
v.key}else if("lower"==g.property.name){if(t="%2.lower",v=this.getBlockSyntax(t))f=v.key}else"randint"==g.property.name&&(b.arguments&&b.arguments[0]&&(q=b.arguments[0],"Literal"==q.type&&(x=q.value,Entry.Utils.isNumber(x)&&0!==x%1&&(t="random.uniform(%2, %4)",v=this.getBlockSyntax(t))))&&(f=v.key),b.arguments&&b.arguments[1]&&(q=b.arguments[1],"Literal"==q.type&&(x=q.value,Entry.Utils.isNumber(x)&&0!==x%1&&(t="random.uniform(%2, %4)",v=this.getBlockSyntax(t))))&&(f=v.key));!f&&h.object&&h.object.name&&
(r=g.property&&g.property.name?h.object.name+"."+g.property.name:h.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL))}if(f){var A=Entry.block[f],x=A.params,A=A.def.params,C;for(C in x)h=x[C].type,"Indicator"==h?e[C]=null:"Text"==h&&(e[C]=null);h=this.getParamIndex(t);if(g&&g.property)if("append"==g.property.name){if(g.object)if(g.object.object){if("self"==g.object.object.name){var z=
g.object.property.name;if(!Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject))return Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST),c}}else if(z=g.object.name,!Entry.TextCodingUtil.isGlobalListExisted(z)&&!Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject))return Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,
z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST),c;z=this.ParamDropdownDynamic(z,x[1],A[1]);e[h[0]]=z;k++}else if("pop"==g.property.name){if(g.object)if(g.object.object){if("self"==g.object.object.name&&(z=g.object.property.name,!Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject)))return Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST),c}else if(z=g.object.name,
!Entry.TextCodingUtil.isGlobalListExisted(z))return Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST),c;z=this.ParamDropdownDynamic(z,x[1],A[1]);e[h[0]]=z;k++}else if("insert"==g.property.name){if(g.object)if(g.object.object){if("self"==g.object.object.name&&(z=g.object.property.name,!Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject)))return Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST),c}else if(z=g.object.name,!Entry.TextCodingUtil.isGlobalListExisted(z))return Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST),c;z=this.ParamDropdownDynamic(z,x[1],A[1]);e[h[0]]=z;k++}k=0+k;if(v.textParams)var D=v.textParams;c.arguments=[];for(var B in arguments)if(z=!1,n=arguments[B]){n.calleeName=
l;D||(D=[]);var u=this[n.type](n,x[h[k]],A[h[k]],D[h[k]]);u&&u.data&&(u=u.data);u&&this.isFuncParam(u.name)&&(n={},n.type=u.name,n.params=[],n.isParamFromFunc=!0,u=n);u&&((y=v.keyOption)||0===y?u.object&&u.property.name?(n=u.object.name+"."+u.property.name,y==n&&(z=!0)):"text"!=u.type&&"number"!=u.type||!u.params||0==u.params.length||(n=u.params[0],y==n&&(z=!0)):u.object&&u.property.name&&"self"!=u.object.name&&(n=u.object.name+"."+u.property.name,u={},u.value=n,u=this.Literal(u,x[h[k]],A[h[k]],D[h[k]])));
z||(z=h[k++],void 0!==z&&(e[z]=u,c.arguments.push(u),u&&(u.object&&u.object.object?"self"==u.object.object.name?(z=u.object.property.name,"char_at"==u.type?Entry.TextCodingUtil.isLocalVariableExisted(z,this._currentObject)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)):Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):(z=u.object.object.name,Entry.TextCodingUtil.isGlobalListExisted(z,this._currentObject)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):u.object?g.property&&"in"==g.property.name?"self"==u.object.name?(z=u.property.name,Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject)||
(r=u.object.name+"."+u.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):(r=z=u.object.name,u.object.listType&&"global"==u.object.listType&&(Entry.TextCodingUtil.isGlobalListExisted(z)||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):g.property&&
"len"==g.property.name?"self"==u.object.name?(z=u.property.name,"len#length_of_string"==t?Entry.TextCodingUtil.isLocalVariableExisted(z,this._currentObject)||this.isFuncParam(z)||(r=u.object.name+"."+u.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)):"len"!=t||Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):(z=u.object.name,u.object.listType&&"global"==u.listType?Entry.TextCodingUtil.isGlobalListExisted(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):!u.variableType||"global"!=u.variableType||Entry.TextCodingUtil.isGlobalVariableExisted(z)||this.isFuncParam(z)||(r=z,
Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))):"__pythonRuntime.ops.subscriptIndex"==u.property.callee?u.object.type||(z=u.object.name,Entry.TextCodingUtil.isGlobalListExisted(z)||this.isFuncParam(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):
"self"==u.object.name?(z=u.property.name,u.property&&"local"==u.property.listType?Entry.TextCodingUtil.isLocalListExisted(z,this._currentObject)||(r=u.object.name+"."+u.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):u.property&&"local"==u.property.variableType&&!Entry.TextCodingUtil.isLocalVariableExisted(z,this._currentObject)&&(r=u.object.name+"."+u.property.name,
Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))):"Hamster"!=u.object.name&&(r=z=u.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_OBJECT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_OBJECT)):u.name&&(g.property&&"in"==g.property.name?(z=u.name,u.listType&&"global"==u.listType?Entry.TextCodingUtil.isGlobalListExisted(z)||
(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):!u.variableType||"global"!=u.variableType||Entry.TextCodingUtil.isGlobalVariableExisted(z)||this.isFuncParam(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))):g.property&&"len"==g.property.name?
(z=u.name,"len#length_of_string"==t?u.listType&&"global"==u.listType?Entry.TextCodingUtil.isGlobalListExisted(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):!u.variableType||"global"!=u.variableType||Entry.TextCodingUtil.isGlobalVariableExisted(z)||this.isFuncParam(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,
r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)):"len"==t&&(u.listType&&"global"==u.listType?Entry.TextCodingUtil.isGlobalListExisted(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):!u.variableType||"global"!=u.variableType||Entry.TextCodingUtil.isGlobalVariableExisted(z)||this.isFuncParam(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)))):(z=u.name,this.isFuncParam(z)||("global"==u.variableType?Entry.TextCodingUtil.isGlobalVariableExisted(z)||this.isFuncParam(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)):"global"!=u.listType||Entry.TextCodingUtil.isGlobalListExisted(z)||(r=z,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))))))))}if(g.object&&g.property)if("range"==g.property.name){if(!(2<e.length))if(2==e.length)for(C in e){if(u=e[C],r={},B=[,"MINUS"],"object"!=typeof u||"text"!=u.type&&"number"!=u.type||(e[C]=u.params[0]),1==C){if("string"!=typeof e[0]&&"number"!=typeof e[0]||"string"!=typeof e[1]&&"number"!=typeof e[1]){if("string"==typeof e[0]||"number"==typeof e[0])c={},u=[],u.push(e[0]),c.type="text",
c.params=u,e[0]=c;if("string"==typeof e[1]||"number"==typeof e[1])c={},u=[],u.push(e[1]),c.type=f,c.params=u,e[1]=c;B[0]=e[1];B[2]=e[0];r.type="calc_basic";r.params=B;return c=r}e=parseInt(e[1])-parseInt(e[0]);Entry.Utils.isNumber(e)?(u=[],u.push(e)):(u=[],u.push(10));e=u}}else if(1==e.length)if("object"!=typeof u)u=e[0],e.splice(0,1,u);else if(u=e[0],f=u.type,e=u.params,u.isParamFromFunc)var E=!0}else if("add"==g.property.name)for(C in e){if((u=e[C])&&u.type)if("text"==u.type||"number"==u.type){if(u.params&&
0!=u.params.length&&(C=u.params[0],"number"!=typeof C))break}else if("get_variable"==u.type){if(z=u.params[0],!Entry.TextCodingUtil.isVariableNumber(z,u.variableType))break}else if("combine_something"==u.type)break}else"len"==g.property.name?"len"==t&&(C=e[1],C=this.ParamDropdownDynamic(C.name,x[1],A[1]),e[1]=C):"in"==g.property.name?(C=e[1],C=this.ParamDropdownDynamic(C.name,x[1],A[1]),e[1]=C):"pop"==g.property.name?e[0].type?"number"==e[0].type||"text"==e[0].type?Entry.Utils.isNumber(e[0].params[0])&&
(e[0].params[0]+=1):"get_variable"==e[0].type?(r={type:"calc_basic"},u=[],u[0]=e[0],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[0]=r):"calc_basic"==e[0].type?e[0].params&&"MINUS"==e[0].params[1]&&e[0].params[2]&&e[0].params[2].params&&"1"==e[0].params[2].params[0]?e[0]=e[0].params[0]:(r={type:"calc_basic"},u=[],u[0]=e[0],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[0]=r):(r={type:"calc_basic"},u=[],u[0]=e[0],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[0]=r):this.isFuncParam(e[0].name)?
(r={type:"calc_basic"},u=[],u[0]=e[0],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[0]=r):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT):"insert"==g.property.name?e[2].type?"number"==e[2].type||"text"==e[2].type?Entry.Utils.isNumber(e[2].params&&e[2].params[0])&&(e[2].params[0]+=1):"get_variable"==e[2].type?(r={type:"calc_basic"},u=[],u[0]=e[2],u[1]="PLUS",u[2]=
{type:"number",params:[1]},r.params=u,e[2]=r):"calc_basic"==e[2].type?e[2].params&&"MINUS"==e[2].params[1]&&e[2].params[2]&&e[2].params[2].params&&"1"==e[2].params[2].params[0]?e[2]=e[2].params[0]:(r={type:"calc_basic"},u=[],u[0]=e[2],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[2]=r):(r={type:"calc_basic"},u=[],u[0]=e[2],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[2]=r):this.isFuncParam(e[2].name)?(r={type:"calc_basic"},u=[],u[0]=e[2],u[1]="PLUS",u[2]={type:"number",params:[1]},
r.params=u,e[2]=r):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT):"subscriptIndex"==g.property.name?e[3].type?"number"==e[3].type||"text"==e[3].type?Entry.Utils.isNumber(e[3].params[0])&&(e[3].params[0]+=1):"get_variable"==e[3].type?(r={type:"calc_basic"},u=[],u[0]=e[3],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[3]=r):"calc_basic"==e[3].type&&(e[3].params&&"MINUS"==
e[3].params[1]&&e[3].params[2]&&e[3].params[2].params&&"1"==e[3].params[2].params[0]?e[3]=e[3].params[0]:(r={type:"calc_basic"},u=[],u[0]=e[3],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[3]=r)):this.isFuncParam(e[3].name)?(r={type:"calc_basic"},u=[],u[0]=e[3],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[3]=r):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT):
"_pySlice"==g.property.name?g.object&&(u=this[g.object.type](g.object),B=[],B[1]=u,e[1].type?"number"==e[1].type||"text"==e[1].type?Entry.Utils.isNumber(e[1].params[0])&&(e[1].params[0]+=1):"get_variable"==e[1].type?(r={type:"calc_basic"},u=[],u[0]=e[1],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[1]=r):"calc_basic"==e[1].type&&(e[1].params&&"MINUS"==e[1].params[1]&&e[1].params[2]&&e[1].params[2].params&&"1"==e[1].params[2].params[0]?e[1]=e[1].params[0]:(r={type:"calc_basic"},u=[],u[0]=
e[1],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[1]=r)):this.isFuncParam(e[1].name)?(r={type:"calc_basic"},u=[],u[0]=e[1],u[1]="PLUS",u[2]={type:"number",params:[1]},r.params=u,e[1]=r):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT),B[3]=e[1],B[5]=e[3],e=B):"find"==g.property.name?g.object&&(u=this[g.object.type](g.object),B=[],B[1]=u,B[3]=e[1],e=B):"replace"==
g.property.name?g.object&&(u=this[g.object.type](g.object),B=[],B[1]=u,B[3]=e[1],B[5]=e[3],e=B):"upper"==g.property.name?g.object&&(u=this[g.object.type](g.object),B=[],B[1]=u,B[3]=e[1],e=B):"lower"==g.property.name&&g.object&&(u=this[g.object.type](g.object),B=[],B[1]=u,B[3]=e[1],e=B);if(g.object&&g.property&&"Hamster"==g.object.name)if("wheels"==g.property.name){if(l=g.object.name+"."+g.property.name,!e[1]&&(v=this.getBlockSyntax(l+"#SAME")))f=v.key}else"wheels_by"==g.property.name&&(l=g.object.name+
"."+g.property.name,!e[1]&&(v=this.getBlockSyntax(l+"#SAME")))&&(f=v.key);if(v.params&&0!=v.params.length)for(C in v.params)(u=v.params[C])&&(e[C]=u);f&&(c.type=f);e&&(c.params=e);E&&(c.isParamFromFunc=!0)}else{f=[];for(B in arguments)if(n=arguments[B])if(x=this[n.type](n),"ThisExpression"!=n.type){if(!x.type&&x.isCallParam)Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT);else if(!x.type&&
!x.isCallParam&&"__pythonRuntime.utils.createParamsObj"!=x.callee)if(x.object&&"self"==x.object.name){if(x.property.variableType||x.property.listType)break;x.property.variableType||(r=x.object.name+"."+x.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE));x.property.listType||(r=x.object.name+"."+x.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))}else if(!this.isFuncParam(x.name)){if(x.variableType||x.listType)break;x.variableType||(r=x.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE));x.listType||(r=x.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,
r,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))}"__pythonRuntime.utils.createParamsObj"==x.callee?f=x.arguments:f.push(x)}c.arguments=f}if(c.arguments&&c.arguments[0]&&"__pythonRuntime.utils.createParamsObj"==c.arguments[0].callee)return c;if(c.callee){g=c.callee.name;if(c.arguments)for(m in e=[],arguments=c.arguments,arguments)n=arguments[m],e.push(n);m=g;(f=this._funcMap.get(m))?(c={},c.type=f,e&&0!=e.length&&(c.params=e)):m==this._currentFuncKey?Entry.TextCodingUtil.isEntryEventFuncName(c.callee.name)||
(c.type=m,c.params=e,c.funcName=g,this._hasReculsiveFunc=!0):0!=c.callee.isCallParam||Entry.TextCodingUtil.isEntryEventFuncName(c.callee.name)||(z=c.callee.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_FUNCTION,z,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_FUNCTION))}return c};c.Identifier=function(b,c,e){c={};e=b.name;c.name=e;if(!0===b.userCode||!1===b.userCode)c.userCode=b.userCode;if(this.isFuncParam(e))return c.isCallParam=
!1,c;if(Entry.TextCodingUtil.isGlobalVariableExisted(e)){c.variableType="global";var d="%1#get_variable"}Entry.TextCodingUtil.isLocalVariableExisted(e,this._currentObject)&&(c.variableType="local",d="%1#get_variable");Entry.TextCodingUtil.isGlobalListExisted(e)&&(c.listType="global");Entry.TextCodingUtil.isLocalListExisted(e,this._currentObject)&&(c.listType="local");if(!d)return c.isCallParam=!1,c;if(b=this.getBlockSyntax(d))var g=b.key;if(g){d=Entry.block[g];b=d.params;var d=d.def.params,h=[],k,
l;for(l in b)"Text"!=b[l].type&&(k=this["Param"+b[l].type](e,b[l],d[l]));k&&h.push(k);c.type=g;0!=h.length&&(c.params=h,c.variableType="global")}return c};c.VariableDeclaration=function(b){var c={declarations:[]},e,f;b=b.declarations;for(var g in b){var h=b[g];(h=this[h.type](h))&&h.isFuncParam&&this._funcParams.push(h.name);h&&c.declarations.push(h);h&&h.type&&(e=h.type);h&&h.params&&(f=h.params)}e&&(c.type=e);f&&(c.params=f);return c};c.VariableDeclarator=function(b){var c={},e,f;this._blockCount++;
(b.id.name&&-1!=b.id.name.search("__")||b.init&&b.init.callee&&b.init.callee.name&&-1!=b.init.callee.name.search("__"))&&this._blockCount--;var g=b.id,h=b.init;if(!g.name||-1==g.name.search("__params")&&-1==g.name.search("__formalsIndex")&&-1==g.name.search("__args")){if(h.callee&&h.callee.name&&-1!=h.callee.name.search("__getParam"))return c.isFuncParam=!0,c.name=g.name,c;if(h.object&&h.object.name&&-1!=h.object.name.search("__filbertTmp")){var k;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,k,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT)}if(h.callee&&h.callee.object&&h.callee.property){if(h.callee.object.object&&h.callee.object.object.name)var l=h.callee.object.object.name;if(h.callee.object.property&&h.callee.object.property.name)var m=h.callee.object.property.name;if(h.callee.property.name)var q=h.callee.property.name;l&&m&&q&&(n=l.concat(".").concat(m).concat(".").concat(q))}"__pythonRuntime.objects.list"==n?(q=g.name,m=
[],Entry.TextCodingUtil.isGlobalListExisted(q)?this._funcLoop||Entry.TextCodingUtil.updateGlobalList(q,m):this._funcLoop||Entry.TextCodingUtil.createGlobalList(q,m)):(q=g.name,k=0,!k&&0!=k||-1!=q.search("__filbert")||(Entry.TextCodingUtil.isGlobalVariableExisted(q)?this._funcLoop||Entry.TextCodingUtil.updateGlobalVariable(q,k):this._funcLoop?Entry.TextCodingUtil.createGlobalVariable(q,0):Entry.TextCodingUtil.createGlobalVariable(q,k)));m=this[g.type](g);l=this[h.type](h);if("Identifier"==h.type||
"MemberExpression"==h.type)l.property&&"__pythonRuntime.ops.subscriptIndex"==l.property.callee?l.object&&l.object.object?"self"!=l.object.object.name?(q=l.object.object.name,Entry.TextCodingUtil.isGlobalListExisted(q)||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,q,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):l.object.property&&(q=l.object.property.name,Entry.TextCodingUtil.isLocalListExisted(l.object.property.name,this._currentObject)||
Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,q,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):l.object&&(q=l.object.name,"get_variable"==l.object.type&&(Entry.TextCodingUtil.isGlobalListExisted(q)||Entry.TextCodingUtil.isGlobalVariableExisted(q)||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,q,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):l.object?
"self"!=l.object.name?(k=l.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_OBJECT,k,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_OBJECT)):l.property.name&&(q=l.property.name,Entry.TextCodingUtil.isLocalVariableExisted(q,this._currentObject)||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,q,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)):(q=l.name,
Entry.TextCodingUtil.isGlobalVariableExisted(q)||(k=q,this.isFuncParam(q)||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,k,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)));var n;if("__pythonRuntime.objects.list"==n){c.id=m;c.init=l;q=g.name;m=[];arguments=l.arguments;for(e in arguments){var t=arguments[e],h={};t.type?(l=t.params[0],"string"===typeof l&&'"()"'.replace("()",l),h.data=String(t.params[0])):t.name&&(k=t.name,
Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,k,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE));Entry.Utils.isNumber(h)&&(h=parseFloat(h));m.push(h)}Entry.TextCodingUtil.isGlobalListExisted(q)?this._funcLoop||Entry.TextCodingUtil.updateGlobalList(q,m):this._funcLoop||Entry.TextCodingUtil.createGlobalList(q,m)}else q=g.name,"Literal"==h.type?k=h.value:"Identifier"==h.type?k=h.name:"UnaryExpression"==h.type?(k=l.params[0],
"string"!=typeof k&&"number"!=typeof k&&(k=0)):k=0,Entry.Utils.isNumber(k)&&(k=parseFloat(k)),!k&&0!=k||-1!=q.search("__filbert")||(Entry.TextCodingUtil.isGlobalVariableExisted(q)?this._funcLoop||Entry.TextCodingUtil.updateGlobalVariable(q,k):this._funcLoop?Entry.TextCodingUtil.createGlobalVariable(q,0):Entry.TextCodingUtil.createGlobalVariable(q,k)),c.id=m,c.init=l,"Literal"==h.type?e=this.getBlockSyntax("%1 = %2"):(e=l.params&&l.params[0]&&l.params[0].name&&m.name==l.params[0].name&&"PLUS"==l.operator||
"MINUS"==l.operator?"%1 += %2":"combine_something"==l.type&&l.params&&l.params[1]&&l.params[1].name&&m.name==l.params[1].name&&"PLUS"==l.operator||"MINUS"==l.operator?"%1 += %2":"%1 = %2",e=this.getBlockSyntax(e)),e&&(f=e.key),e=f,g=Entry.block[f],f=g.params,g=g.def.params,m.name&&(t=this.ParamDropdownDynamic(m.name,f[0],g[0])),f=[],"Literal"==h.type?(m.params&&m.params[0]?f.push(m.params[0]):f.push(t),l.params[0]=l.params[0],f.push(l)):l.params&&l.params[0]&&m.name==l.params[0].name&&"PLUS"==l.operator||
"MINUS"==l.operator?(m.params&&m.params[0]?f.push(m.params[0]):f.push(t),"MINUS"==l.operator&&0!=l.params[2].params[0]&&(l.params[2].params[0]="-"+l.params[2].params[0]),f.push(l.params[2])):"combine_something"==l.type&&l.params&&l.params[1]&&m.name==l.params[1].name&&"PLUS"==l.operator||"MINUS"==l.operator?(m.params&&m.params[0]?f.push(m.params[0]):f.push(t),"MINUS"==l.operator&&0!=l.params[3].params[0]&&(l.params[3].params[0]="-"+l.params[3].params[0]),f.push(l.params[3])):(m.params&&m.params[0]?
f.push(m.params[0]):f.push(t),f.push(l)),c.type=e,c.params=f;return c}};c.AssignmentExpression=function(b){var c={},e={},f=[],g,h=b.left;if(h.type)var k=this[h.type](h);c.left=k;operator=String(b.operator);var l=b.right;if(l.type)var m=this[l.type](l);c.right=m;switch(operator){case "=":if(m&&m.callee&&m.callee.object)var q=m.callee.object.object.name.concat(".").concat(m.callee.object.property.name).concat(".").concat(m.callee.property.name);if(h.name)var n=h.name;else h.object&&h.object.name&&(n=
h.object.name.concat(h.property.name));if(l.arguments&&0!=l.arguments.length&&l.arguments[0].name)var t=l.arguments[0].name;else l.arguments&&0!=l.arguments.length&&l.arguments[0].object?t=l.arguments[0].object.name.concat(l.arguments[0].property.name):l.left&&l.left.name?t=l.left.name:l.left&&l.left.object&&(t=l.left.object.name.concat(l.left.property.name));if(k&&k.property&&"__pythonRuntime.ops.subscriptIndex"==k.property.callee)var v="%1[%2] = %3",h=this.getBlockSyntax(v),y;else v=n&&t&&n==t?
"%1 += %2":"%1 = %2",h=this.getBlockSyntax(v);h&&(y=h.key);e.type=y;break;case "+=":v="%1 += %2";if(h=this.getBlockSyntax(v))y=h.key;e.type=y;break;case "-=":v="%1 += %2";if(h=this.getBlockSyntax(v))y=h.key;e.type=y;break;case "*=":v="%1 += %2";if(h=this.getBlockSyntax(v))y=h.key;e.type=y;break;case "/=":v="%1 += %2";if(h=this.getBlockSyntax(v))y=h.key;e.type=y;break;case "%=":var x=operator;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,
x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "<<=":x=operator;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case ">>=":x=operator;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "|=":x=operator;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "^=":x=operator;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "&=":x=operator;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);
break;default:x=operator,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL)}if(operator)var r=Entry.TextCodingUtil.logicalExpressionConvert(operator);c.operator=r;k&&k.property&&"__pythonRuntime.ops.subscriptIndex"==k.property.callee?k.object&&k.object.object?"self"!=k.object.object.name&&(x=k.object.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_OBJECT,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_OBJECT)):k.object&&!Entry.TextCodingUtil.isGlobalListExisted(k.object.name)&&(x=k.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):k.object&&"self"!=k.object.name&&(r=k.object.name,Entry.TextCodingUtil.isGlobalListExisted(r)||(x=r,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)));if("Identifier"==l.type||"MemberExpression"==l.type)m&&m.property&&"__pythonRuntime.ops.subscriptIndex"==m.property.callee?m.object&&m.object.object?"self"!=m.object.object.name?(r=m.object.object.name,Entry.TextCodingUtil.isGlobalListExisted(r)||(x=m.object.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,
Entry.TextCodingError.SUBJECT_CONV_LIST))):!m.object.property||Entry.TextCodingUtil.isLocalListExisted(m.object.property.name,this._currentObject)||Entry.TextCodingUtil.isLocalVariableExisted(m.object.property.name,this._currentObject)||(Entry.TextCodingUtil.isLocalListExisted(m.object.property.name,this._currentObject)||(x=m.object.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)),
Entry.TextCodingUtil.isLocalVariableExisted(m.object.property.name,this._currentObject)||(x=m.object.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))):!m.object||Entry.TextCodingUtil.isGlobalListExisted(m.object.name)||Entry.TextCodingUtil.isGlobalVariableExisted(m.object.name)||(Entry.TextCodingUtil.isGlobalListExisted(m.object.name)||(x=m.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)),Entry.TextCodingUtil.isGlobalVariableExisted(m.object.name)||(x=m.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))):m.object?"self"!=m.object.name?(x=m.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,
x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):!m.property||Entry.TextCodingUtil.isLocalVariableExisted(m.property.name,this._currentObject)||Entry.TextCodingUtil.isLocalListExisted(m.property.name,this._currentObject)||(Entry.TextCodingUtil.isLocalVariableExisted(m.property.name,this._currentObject)||(x=m.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)),
Entry.TextCodingUtil.isLocalListExisted(m.property.name,this._currentObject)||(x=m.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))):(Entry.TextCodingUtil.isGlobalVariableExisted(m.name),Entry.TextCodingUtil.isGlobalVariableExisted(m.name)||(Entry.TextCodingUtil.isGlobalVariableExisted(m.name)||(x=m.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)),Entry.TextCodingUtil.isGlobalListExisted(m.name)||(x=m.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST))));r=Entry.block[y];l=r.params;y=r.def.params;if("%1[%2] = %3"==v)k&&k.params||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,
x,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE),f.push(k.params[1]),k&&k.property&&(g=k.property.arguments[0],f.push(g),g=k.property.arguments[1],"number"==g.type||"text"==g.type?f.push(g):"get_variable"==g.type?(k={type:"calc_basic"},q=[],q[0]=g,q[1]="PLUS",q[2]={type:"number",params:[1]},k.params=q,f.push(k)):"calc_basic"==g.type?"MINUS"==g.params[1]&&"1"==g.params[2].params[0]?f.push(g.params[0]):(k={type:"calc_basic"},q=[],q[0]=g,q[1]="PLUS",q[2]={type:"number",params:[1]},k.params=
q,f.push(k)):(k={type:"calc_basic"},q=[],q[0]=g,q[1]="PLUS",q[2]={type:"number",params:[1]},k.params=q,f.push(k))),m&&f.push(m),4==f.length&&f.splice(1,1),e.params=f;else if("%1 = %2"==v)if(k&&k.object&&k.property){if("self"==k.object.name)if("__pythonRuntime.objects.list"==q){r=k.property.name;k=[];arguments=m.arguments;for(g in arguments)m=arguments[g],q={},Entry.Utils.isNumber(m.params[0])&&(m.params[0]=parseFloat(m.params[0])),q.data=String(m.params[0]),k.push(q);Entry.TextCodingUtil.isLocalListExisted(r,
this._currentObject)?this._funcLoop||Entry.TextCodingUtil.updateLocalList(r,k,this._currentObject):this._funcLoop||Entry.TextCodingUtil.createLocalList(r,k,this._currentObject)}else{r=k.property.name;g="number"==m.type||"text"==m.type?m.params[0]:0;Entry.Utils.isNumber(g)&&(g=parseFloat(g));if(g||0==g)Entry.TextCodingUtil.isLocalVariableExisted(r,this._currentObject)?this._funcLoop||Entry.TextCodingUtil.updateLocalVariable(r,g,this._currentObject):this._funcLoop?Entry.TextCodingUtil.createLocalVariable(r,
0,this._currentObject):Entry.TextCodingUtil.createLocalVariable(r,g,this._currentObject);r=this.ParamDropdownDynamic(r,l[0],y[0]);f.push(r);f.push(m)}}else if("__pythonRuntime.objects.list"==q){r=k.name;k=[];arguments=m.arguments;for(g in arguments)m=arguments[g],q={},q.data=String(m.params[0]),k.push(q);Entry.TextCodingUtil.isGlobalListExisted(r)?this._funcLoop||Entry.TextCodingUtil.updateGlobalList(r,k):this._funcLoop||Entry.TextCodingUtil.createGlobalList(r,k)}else{r=k.name;if((g="number"==m.type||
"text"==m.type?m.params[0]:0)||0==g)Entry.TextCodingUtil.isGlobalVariableExisted(r)?this._funcLoop||Entry.TextCodingUtil.updateGlobalVariable(r,g):this._funcLoop?Entry.TextCodingUtil.createGlobalVariable(r,0):Entry.TextCodingUtil.createGlobalVariable(r,g);r=this.ParamDropdownDynamic(r,l[0],y[0]);f.push(r);m.callee&&delete m.callee;f.push(m)}else if("%1 += %2"==v)if(k&&k.object&&k.property){if("self"==k.object.name){r=k.property.name;if(!Entry.TextCodingUtil.isLocalVariableExisted(r,this._currentObject))return c;
r=this.ParamDropdownDynamic(r,l[0],y[0]);f.push(r);if("="==operator)if("PLUS"==m.operator)"combine_something"==m.type?f.push(m.params[3]):f.push(m.params[2]);else if("MINUS"==m.operator){if("calc_basic"!=m.type||"text"!=m.params[2].type&&"number"!=m.params[2].type)return e={type:"set_variable",params:[]},e.params.push(k.params[0]),e.params.push(m),e;m.params[2].params[0]=-m.params[2].params[0];f.push(m.params[2])}else{if("MULTI"==m.operator||"DIVIDE"==m.operator)return e={type:"set_variable",params:[]},
e.params.push(k.params[0]),e.params.push(m),e;f.push(m)}else if("+="==operator)f.push(m);else if("-="==operator)if("text"==m.type||"number"==m.type)m.params[0]=-m.params[0],f.push(m);else return e={type:"set_variable",params:[]},e.params.push(k.params[0]),c={type:"calc_basic",params:[]},c.params.push(k),c.params.push("MINUS"),c.params.push(m),e.params.push(c),e;else{if("*="==operator)return e={type:"set_variable",params:[]},e.params.push(k.params[0]),e.params.push(m),e;if("/="==operator)return e=
{type:"set_variable",params:[]},e.params.push(k.params[0]),c={type:"calc_basic",params:[]},c.params.push(k),c.params.push("DIVIDE"),c.params.push(m),e.params.push(c),e;f.push(m)}}}else{r=k.name;if(!Entry.TextCodingUtil.isGlobalVariableExisted(r))return c;r=this.ParamDropdownDynamic(r,l[0],y[0]);f.push(r);if("="==operator)if("PLUS"==m.operator)"combine_something"==m.type?f.push(m.params[3]):f.push(m.params[2]);else if("MINUS"==m.operator){if("calc_basic"!=m.type||"text"!=m.params[2].type&&"number"!=
m.params[2].type)return e={type:"set_variable",params:[]},e.params.push(k.params[0]),e.params.push(m),e;m.params[2].params[0]=-m.params[2].params[0];f.push(m.params[2])}else{if("MULTI"==m.operator||"DIVIDE"==m.operator)return e={type:"set_variable",params:[]},e.params.push(k.params[0]),e.params.push(m),e;f.push(m)}else if("+="==operator)f.push(m);else if("-="==operator)if("text"==m.type||"number"==m.type)m.params[0]=-m.params[0],f.push(m);else return e={type:"set_variable",params:[]},e.params.push(k.params[0]),
c={type:"calc_basic",params:[]},c.params.push(k),c.params.push("MINUS"),c.params.push(m),e.params.push(c),e;else{if("*="==operator)return e={type:"set_variable",params:[]},e.params.push(k.params[0]),e.params.push(m),e;if("/="==operator)return e={type:"set_variable",params:[]},e.params.push(k.params[0]),c={type:"calc_basic",params:[]},c.params.push(k),c.params.push("DIVIDE"),c.params.push(m),e.params.push(c),e;f.push(m)}}e.params=f;c.type=e.type;c.params=e.params;return c};c.Literal=function(b,c,e,
f){var d,h=b.value;h&&"string"===typeof h&&(h=h.replace(/\t/gm,"    "));c||(c={type:"Block"},e||(e="number"==typeof h?{type:"number"}:{type:"text"}));if("Indicator"==c.type)return null;if("Text"==c.type)return"";1==h||0==h||h?d=c=this["Param"+c.type](h,c,e,f):b.left&&b.operator&&b.right&&(c=[],e=this[b.left.type](b.left),c.push(e),c.push(b.operator),b=this[b.right.type](b.right),c.push(b),d=c);return d};c.ParamBlock=function(b,c,e){c={};var d=b,g=[];if(!0===b)return c.type="True",c;if(!1===b)return c.type=
"False",c;paramDefMetaType=e?e.type:"text";var h=Entry.block[paramDefMetaType];e=h.params;var k=h.def.params,h=this.searchSyntax(h).textParams;if(e&&0!=e.length)for(var l in e)d=h&&h[l]?this["Param"+e[l].type](b,e[l],k[l],h[l]):this["Param"+e[l].type](b,e[l],k[l]);else d=b;g.push(d);c.type=paramDefMetaType;c.params=g;return c};c.ParamAngle=function(b,c,e){return/None/.test(b)?"None":b};c.ParamTextInput=function(b,c,e){return/None/.test(b)?"None":b};c.ParamColor=function(b,c,e,f){var d;if(/None/.test(b))return"None";
f&&f.codeMap&&(c=eval(f.codeMap),b=b.toLowerCase(),d=c[b]);d||(d=b);return d};c.ParamDropdown=function(b,c,e,f){if(/None/.test(b))return"None";c=c.options;for(var d in c)if(e=c[d],b==e[1]){b=e[1];break}if(Entry.Utils.isNumber(b))return b;if(f&&f.codeMap){if((d=f.codeMap)&&eval(d)){"string"===typeof b&&(b=b.toLowerCase());var h=eval(d)[b]}h&&(b=h)}f&&"operator"==f.paramType&&(b=b.toUpperCase());return b};c.ParamDropdownDynamic=function(b,c,e,f,g){f&&(b=Entry.TextCodingUtil.getDynamicIdByNumber(b,f,
this._currentObject));b&&isNaN(b)&&2<b.split(".").length&&"self"==b.split(".")[0]&&(b=b.split(".")[1],g=this._currentObject);b=Entry.TextCodingUtil.dropdownDynamicNameToIdConvertor(b,c.menuName,g);f&&f.codeMap&&((c=f.codeMap)&&eval(c)&&isNaN(b)&&(b=b.toLowerCase()),(c=eval(c)[b])&&(b=c));return b};c.ParamKeyboard=function(b,c,e){c=b;if(/None/.test(b))return"None";(b=isNaN(b)?Entry.KeyboardCode.map[b.toLowerCase()]:Entry.KeyboardCode.map[b])&&(c=b.toString());return c};c.Indicator=function(b,c,e){};
c.MemberExpression=function(b){var c={},e;e=b.object;var f=b.property,g=this[e.type](e);c.object=g;var h=this[f.type](f);c.property=h;if("call"!=h.name||0!=h.userCode)if("__pythonRuntime.ops.subscriptIndex"==h.callee){if(g.object)if("self"==g.object.name){var k=g.property.name;if(!g.type||"number"!=g.type&&"text"!=g.type&&"value_of_index_from_list"!=g.type){if(Entry.TextCodingUtil.isLocalListExisted(k,this._currentObject)&&(l="%2[%4]"),Entry.TextCodingUtil.isLocalVariableExisted(k,this._currentObject)&&
(l="%2[%4]#char_at"),this.isFuncParam(k)&&(l="%2[%4]#char_at"),!Entry.TextCodingUtil.isLocalListExisted(k,this._currentObject)&&!Entry.TextCodingUtil.isLocalVariableExisted(k,this._currentObject)&&!this.isFuncParam(k))return c}else var l="%2[%4]#char_at"}else if(k=g.object.name,!g.type||"number"!=g.type&&"text"!=g.type&&"get_canvas_input_value"!=g.type&&"value_of_index_from_list"!=g.type){if(Entry.TextCodingUtil.isGlobalListExisted(k)&&(l="%2[%4]"),Entry.TextCodingUtil.isGlobalVariableExisted(k)&&
(l="%2[%4]#char_at"),this.isFuncParam(k)&&(l="%2[%4]#char_at"),!Entry.TextCodingUtil.isGlobalListExisted(k)&&!Entry.TextCodingUtil.isGlobalVariableExisted(k)&&!this.isFuncParam(k))return c.type=h.type,c.params=h.params,c}else l="%2[%4]#char_at";else if(k=g.name,!g.type||"number"!=g.type&&"text"!=g.type&&"get_canvas_input_value"!=g.type&&"value_of_index_from_list"!=g.type){if(Entry.TextCodingUtil.isGlobalListExisted(k)&&(l="%2[%4]"),Entry.TextCodingUtil.isGlobalVariableExisted(k)&&(l="%2[%4]#char_at"),
this.isFuncParam(k)&&(l="%2[%4]#char_at"),!Entry.TextCodingUtil.isGlobalListExisted(k)&&!Entry.TextCodingUtil.isGlobalVariableExisted(k)&&!this.isFuncParam(k))return c.type=h.type,c.params=h.params,c}else l="%2[%4]#char_at";if(!l)return;arguments=h.arguments;e=this.getBlockSyntax(l);var m;e&&(m=e.key);e=m;var q=Entry.block[m];m=q.params;q=q.def.params;h=g.object&&"self"==g.object.name?this.ParamDropdownDynamic(k,m[1],q[1],null,this._currentObject):this.ParamDropdownDynamic(k,m[1],q[1]);f=[];"%2[%4]"==
l?f[1]=h:"%2[%4]#char_at"==l&&(f[1]=g.object&&"self"==g.object.name?g.property:g);arguments&&arguments[1]&&(arguments[1].type?"number"==arguments[1].type||"text"==arguments[1].type?f[3]=arguments[1]:"get_variable"==arguments[1].type?(l={type:"calc_basic"},g=[],g[0]=arguments[1],g[1]="PLUS",g[2]={type:"number",params:[1]},l.params=g,f[3]=l):"calc_basic"==arguments[1].type?arguments[1].params&&"MINUS"==arguments[1].params[1]&&arguments[1].params[2]&&arguments[1].params[2].params&&"1"==arguments[1].params[2].params[0]?
f[3]=arguments[1].params[0]:(l={type:"calc_basic"},g=[],g[0]=arguments[1],g[1]="PLUS",g[2]={type:"number",params:[1]},l.params=g,f[3]=l):(l={type:"calc_basic"},g=[],g[0]=arguments[1],g[1]="PLUS",g[2]={type:"number",params:[1]},l.params=g,f[3]=l):this.isFuncParam(arguments[1].name)?(l={type:"calc_basic"},g=[],g[0]=arguments[1],g[1]="PLUS",g[2]={type:"number",params:[1]},l.params=g,f[3]=l):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,
void 0,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT));c.type=e;c.params=f}else if(f=[],"self"==g.name){if(e=this.getBlockSyntax("%1#get_variable"))m=e.key;e=m;q=Entry.block[m];m=q.params;q=q.def.params;k=h.name;if(!Entry.TextCodingUtil.isLocalVariableExisted(k,this._currentObject))return c;l=this.ParamDropdownDynamic(k,m[0],q[0],null,this._currentObject);f.push(l);c.type=e;0!=f.length&&(c.params=f,c.variableType="local")}return c};c.WhileStatement=function(b){this._blockCount++;var c=
{statements:[]},e=b.test;if(e.type)if("Literal"==e.type)if(!0===e.value){var f=this.getBlockSyntax("while True:\n$1"),g;f&&(g=f.key)}else{var h=e.value;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL)}else if("Identifier"==e.type){if(f=this.getBlockSyntax("while %1 %2\n$1"))g=f.key;this.isFuncParam(e.name)||(h=e.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL))}else if(f=this.getBlockSyntax("while %1 %2:\n$1"))g=f.key;g||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);f=[];if("Literal"==e.type){arguments=[];arguments.push(e);var e=Entry.block[g].params,h=Entry.block[g].def.params,k;for(k in e){var l=e[k].type;"Indicator"==
l?(l={raw:null,type:"Literal",value:null},k<arguments.length&&arguments.splice(k,0,l)):"Text"==l&&(l={raw:"",type:"Literal",value:""},k<arguments.length&&arguments.splice(k,0,l))}for(var m in arguments)k=arguments[m],(k=this[k.type](k,e[m],h[m],!0))&&null!=k&&f.push(k)}else(k=this[e.type](e))&&null!=k&&("UnaryExpression"==e.type&&"!"==e.operator?"boolean_not"==k.type&&(k=k.params[1],f.push(k),f.push("until")):(f.push(k),f.push("while")));m=b.body;m=this[m.type](m);c.type=g;c.statements.push(m.data);
c.params=f;return c};c.BlockStatement=function(b){var c={statements:[],data:[]},e=[],f=[],g=[];b=b.body;b[1]&&b[1].consequent&&b[1].consequent.body&&b[1].consequent.body[0]&&"ForStatement"==b[1].consequent.body[0].type&&this._blockCount++;for(var h in b){var k=b[h];(k=this[k.type](k))&&null==k||g.push(k)}c.data=g;for(var l in g)if(g[1]&&"repeat_basic"==g[1].type)if(0==l&&g[l]){if(g[l].declarations){b=g[0].declarations;for(l in b)k=b[l],(k=k.init)&&e.push(k);c.params=e}}else{if(1==l){c.type=g[l].type;
f=[];if((b=g[l].statements[0])&&0!=b.length)for(h in b)if(k=b[h])if(k.type)Entry.TextCodingUtil.isJudgementBlock(k.type)||Entry.TextCodingUtil.isCalculationBlock(k.type)||Entry.TextCodingUtil.isMaterialBlock(k.type)||f.push(k);else{if(k.callee)var m=k.callee.name;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,m,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL)}c.statements.push(f)}}else if(g){if(0==l)if(g[l]&&g[l].declarations)for(l in b=
g[l].declarations,b)k=b[l],(k=k.init)&&e.push(k);else{if((k=g[l])&&k.type){if(Entry.TextCodingUtil.isJudgementBlock(k.type))continue;else if(Entry.TextCodingUtil.isCalculationBlock(k.type))continue;else if(Entry.TextCodingUtil.isMaterialBlock(k.type))continue;f.push(k)}}else if(f=[],(b=g)&&0!=b.length)for(h in b)(k=b[h])&&k.type&&!Entry.TextCodingUtil.isJudgementBlock(k.type)&&(Entry.TextCodingUtil.isCalculationBlock(k.type)||Entry.TextCodingUtil.isMaterialBlock(k.type)||f.push(k));c.params=e;c.statements=
f}return c};c.IfStatement=function(b){var c={statements:[]},e,f=[],g=b.consequent,h=b.alternate,k=b.test;"instanceof"!==k.operator&&this._blockCount++;e=null!=h?"if_else":"_if";c.type=e;if("Literal"==k.type||"Identifier"==k.type){arguments=[];arguments.push(k);var l=Entry.block[e].params;e=Entry.block[e].def.params;for(var m in l){var q=l[m].type;"Indicator"==q?(q={raw:null,type:"Literal",value:null},m<arguments.length&&arguments.splice(m,0,q)):"Text"==q&&(q={raw:"",type:"Literal",value:""},m<arguments.length&&
arguments.splice(m,0,q))}for(var n in arguments)m=arguments[n],(m=this[m.type](m,l[n],e[n],!0))&&null!=m&&(f.push(m),m.type||this.isFuncParam(m.name)||Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,m.name,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL))}else(m=this[k.type](k))&&null!=m&&f.push(m);f&&0!=f.length&&(c.params=f);if(null!=g){f=[];g=this[g.type](g).data;for(n in g)if(l=g[n])l.init&&l.type?(c.type=l.type,(l=l.statements)&&
(f=l)):!l.init&&l.type&&f.push(l);0!=f.length&&(c.statements[0]=f)}if(null!=h){"instanceof"!==k.operator&&this._blockCount++;k=[];h=this[h.type](h).data;for(n in h)(g=h[n])&&g.type&&k.push(g);0!=k.length&&(c.statements[1]=k)}return c};c.ForStatement=function(b){var c={statements:[]},e=this.getBlockSyntax("for i in range"),f;e&&(f=e.key);c.type=f;if(e=b.init)var g=this[e.type](e);c.init=g;if(g=b.body.body)for(var h in g)0!=h&&(e=g[h],e=this[e.type](e),c.statements.push(e));if(h=b.test)var k=this[h.type](h);
c.test=k;if(b=b.update)var l=this[b.type](b);c.update=l;return c};c.ForInStatement=function(b){return null};c.BreakStatement=function(b){this._blockCount++;b={};var c=this.getBlockSyntax("break"),e;c&&(e=c.key);b.type=e;return b};c.UnaryExpression=function(b){var c,e,f={};if(b.prefix){var g=b.operator,h=b.argument;switch(g){case "-":break;case "+":break;case "!":e="boolean_not";break;case "~":Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,
g,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "typeof":Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,g,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "void":Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,g,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "delete":Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,g,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;default:Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,g,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL)}var k=[];if("+"==g||"-"==g)0<=h.value&&(h.value=g+h.value),e=this[h.type](h),f.data=e,f.params=e,c=f.params;else if("!"==g){if("Literal"==h.type||"Identifier"==h.type){arguments=[];arguments.push(h);c=Entry.block[e].params;
var g=Entry.block[e].def.params,l;for(l in c)h=c[l].type,"Indicator"==h?(h={raw:null,type:"Literal",value:null},l<arguments.length&&arguments.splice(l,0,h)):"Text"==h&&(h={raw:"",type:"Literal",value:""},l<arguments.length&&arguments.splice(l,0,h));for(var m in arguments)h=arguments[m],(l=this[h.type](h,c[m],g[m],!0))&&null!=l&&(k.push(l),k.splice(0,0,""),k.splice(2,0,""))}else if(l=this[h.type](h))k.push(l),k.splice(0,0,""),k.splice(2,0,"");f.type=e;f.params=k;c=f}}return c};c.LogicalExpression=
function(b){var c={},e=String(b.operator);switch(e){case "&&":var f="(%1 and %3)";break;case "||":f="(%1 or %3)";break;default:f="(%1 and %3)"}var f=this.getBlockSyntax(f),g;f&&(g=f.key);f=[];e=b.left;if("Literal"==e.type||"Identifier"==e.type){arguments=[];arguments.push(e);var e=Entry.block[g].params,h=Entry.block[g].def.params,k;for(k in e){var l=e[k].type;"Indicator"==l?(l={raw:null,type:"Literal",value:null},k<arguments.length&&arguments.splice(k,0,l)):"Text"==l&&(l={raw:"",type:"Literal",value:""},
k<arguments.length&&arguments.splice(k,0,l))}for(var m in arguments){var q=arguments[m];(q=this[q.type](q,e[m],h[m],!0))&&null!=q&&f.push(q)}}else(q=this[e.type](e))&&f.push(q);q.type||!q.name||this.isFuncParam(q.name)||(e=q.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,e,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL));if(e=String(b.operator))q=e=Entry.TextCodingUtil.logicalExpressionConvert(e),f.push(q);e=b.right;
if("Literal"==e.type||"Identifier"==e.type){arguments=[];arguments.push(e);e=Entry.block[g].params;h=Entry.block[g].def.params;for(k in e)l=e[k].type,"Indicator"==l?(l={raw:null,type:"Literal",value:null},k<arguments.length&&arguments.splice(k,0,l)):"Text"==l&&(l={raw:"",type:"Literal",value:""},k<arguments.length&&arguments.splice(k,0,l));for(m in arguments)q=arguments[m],(q=this[q.type](q,e[m],h[m],!0))&&null!=q&&f.push(q)}else(q=this[e.type](e))&&f.push(q);!q.type&&q.name&&(e=q.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,e,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL));c.type=g;c.params=f;return c};c.BinaryExpression=function(b){var c={},e={},f=String(b.operator);switch(f){case "==":var g="(%1 %2 %3)#boolean_basic_operator";break;case "!=":g="not (%2)";break;case "===":g="(%1 %2 %3)#boolean_basic_operator";break;case "!==":var h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,
Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "<":g="(%1 %2 %3)#boolean_basic_operator";break;case "<=":g="(%1 %2 %3)#boolean_basic_operator";break;case ">":g="(%1 %2 %3)#boolean_basic_operator";break;case ">=":g="(%1 %2 %3)#boolean_basic_operator";break;case "<<":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case ">>":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case ">>>":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "+":g="(%1 %2 %3)#calc_basic";break;case "-":g="(%1 %2 %3)#calc_basic";break;case "*":g="(%1 %2 %3)#calc_basic";break;case "/":g="(%1 %2 %3)#calc_basic";break;case "%":g="(%2 % %4)";break;
case "|":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "^":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "|":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,
h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "&":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "in":h=f;Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);break;case "instanceof":break;default:h=f,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL)}var k=this.getBlockSyntax(g),l;k&&(l=k.key);if(l){c=[];f=b.left;if("Literal"==f.type||"Identifier"==f.type){arguments=[];arguments.push(f);var f=Entry.block[l].params,m=Entry.block[l].def.params,q;for(q in f){var n=f[q].type;"Indicator"==n?(n={raw:null,type:"Literal",value:null},q<arguments.length&&arguments.splice(q,0,n)):"Text"==n&&(n={raw:"",type:"Literal",value:""},q<arguments.length&&
arguments.splice(q,0,n))}for(var t in arguments)n=arguments[t],(n=this[n.type](n,f[t],m[t],!0))&&"object"==typeof n&&n.name&&0>n.name.indexOf("__filbert")&&!this.isFuncParam(n.name)&&!Entry.TextCodingUtil.isGlobalVariableExisted(n.name)&&(h=n.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)),n&&c.push(n)}else"MemberExpression"==f.type?(n=this[f.type](f))&&n.type?c.push(n):
n&&n.object&&n.property&&("__pythonRuntime.ops.subscriptIndex"==n.property.callee?n.object&&n.object.object?"self"!=n.object.object.name?(h=n.object.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):n.object.property&&!Entry.TextCodingUtil.isLocalListExisted(n.object.property.name,this._currentObject)&&(h=n.object.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_LIST,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):n.object&&!Entry.TextCodingUtil.isGlobalListExisted(n.object.name)&&"get_canvas_input_value"!=n.object.type&&(h=n.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):n.object&&n.object.name&&0>n.object.name.indexOf("__filbert")&&("self"!=n.object.name?(h=n.object.name+
"."+n.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_OBJECT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_OBJECT)):n.property&&!Entry.TextCodingUtil.isLocalVariableExisted(n.property.name,this._currentObject)&&(h=n.object.name+"."+n.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))),
n.object.name&&0>n.object.name.indexOf("__filbert")&&(f={type:"text"},m=[],m.push(n.object.name+"."+n.property.name),f.params=m,c.push(f))):(n=this[f.type](f))?c.push(n):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_DEFAULT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_DEFAULT);if("boolean_not"==l)return c.splice(0,0,""),c.splice(2,0,""),e.type=l,e.params=c,e;if(f=String(b.operator))"%"!=f&&(k=k.textParams[1],(n=k.converter?k.converter(null,
f):f)&&c.push(n)),e.operator=f;k=b.right;if("Literal"==k.type||"Identifier"==k.type){arguments=[];arguments.push(k);f=Entry.block[l].params;m=Entry.block[l].def.params;for(q in f)n=f[q].type,"Indicator"==n?(n={raw:null,type:"Literal",value:null},q<arguments.length&&arguments.splice(q,0,n)):"Text"==n&&(n={raw:"",type:"Literal",value:""},q<arguments.length&&arguments.splice(q,0,n));for(t in arguments)n=arguments[t],(n=this[n.type](n,f[t],m[t],!0))&&"object"==typeof n&&(n.name&&0>n.name.indexOf("__filbert")&&
!n.type&&n.isCallParam&&!this.isFuncParam(n.name)&&!Entry.TextCodingUtil.isGlobalVariableExisted(n.name)&&(h=n.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE)),c.push(n))}else"MemberExpression"==k.type?(n=this[k.type](k))&&n.type?c.push(n):n.object&&n.property&&("__pythonRuntime.ops.subscriptIndex"==n.property.callee?n.object.object?"self"!=n.object.object.name?(h=
n.object.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_OBJECT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_OBJECT)):n.object.property&&!Entry.TextCodingUtil.isLocalListExisted(n.object.property.name,this._currentObject)&&(h=n.object.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):n.object.name&&
!Entry.TextCodingUtil.isGlobalListExisted(n.object.name)&&(h=n.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_LIST,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_LIST)):n.object&&0>n.object.name.indexOf("__filbert")&&("self"!=n.object.name?(h=n.object.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_OBJECT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_OBJECT)):
n.property&&!Entry.TextCodingUtil.isLocalVariableExisted(n.property.name,this._currentObject)&&(h=n.object.name+"."+n.property.name,Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_VARIABLE,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_VARIABLE))),0>n.object.name.indexOf("__filbert")&&(f={type:"text"},m=[],m.push(n.object.name+"."+n.property.name),f.params=m,c.push(f))):(n=this[k.type](k))?c.push(n):Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,h,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);"(%2 % %4)"==g&&(tempParams=[],tempParams[1]=c[0],tempParams[3]=c[1],tempParams[5]="MOD",c=tempParams);e.type=l;e.params=c}else return c;return e};c.UpdateExpression=function(b){var c={},e=b.argument;if(e)var f=this[e.type](e);c.argument=f;c.operator=b.operator;c.prefix=b.prefix;return c};c.FunctionDeclaration=function(b){var c={},e=b.body,f=b.id;if(-1!=f.name.search("__getParam"))return c;
this._funcLoop=!0;this._blockCount++;if("Identifier"==f.type)var g=this[f.type](f);g&&Entry.TextCodingUtil.isEntryEventFuncName(g.name)&&this._rootFuncKey&&Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_ENTRY_EVENT_FUNCTION,"def "+g.name,this._blockCount,Entry.TextCodingError.SUBJECT_CONV_FUNCTION);b=[];var c=[],g=g.name,h=e.body&&1!=e.body.length?e.body.length-5:0;if(h||0==h)this._currentFuncKey=g+h,this._rootFuncKey||(this._rootFuncKey=this._currentFuncKey);
var e=this[e.type](e).data,k;for(k in e)e[k].declarations&&(h=e[k].declarations,0<h.length&&b.push(h[0].name));for(k in e)if(e[k].argument&&(h=e[k].argument.statements)&&0<h.length){var c=[],l;for(l in h){var m=h[l];m&&c.push(m)}}if(Entry.TextCodingUtil.isEntryEventFuncName(f.name)){if(0!=b.length){var q=b[0],q=q.replace(/_space_/g," "),q=q.replace(/num/g,"");"none"==q&&(q="None");var n=q}b=Entry.TextCodingUtil.makeExpressionStatementForEntryEvent(f.name,n);q=this.ExpressionStatement(b);q.contents=
[];for(var t in c){var v=c[t];l={};l.type=v.type;v.params&&(l.params=v.params);v.statements&&(l.statements=v.statements);v.contents&&(l.contents=v.contents);q.contents.push(l)}return q}var y,x;t={};var e=Entry.variableContainer.functions_,r;for(r in e){k=e[r];Entry.TextCodingUtil.initQueue();Entry.TextCodingUtil.gatherFuncDefParam(k.content._data[0]._data[0].data.params[0]);h=[];f={};for(t={};n=Entry.TextCodingUtil._funcParamQ.dequeue();)h.push(n);for(var A in h)n=h[A],f[n]=A,t[b[A]]=n;for(n=[];nameToken=
Entry.TextCodingUtil._funcNameQ.dequeue();)n.push(nameToken);Entry.TextCodingUtil.clearQueue();blockFuncName=n.join("__").trim();if(g==blockFuncName){if(b.length==Object.keys(f).length){y=!0;n=k.content._data[0]._data;x=[];for(k=1;k<n.length;k++)x.push(n[k]);x=Entry.TextCodingUtil.isFuncContentsMatch(x,c,f,t,this._currentFuncKey)}else x=y=!1;if(y&&x){v=r;break}else if(y&&!x){v=r;break}}}if(!y||!x){if(y&&!x){b=Entry.variableContainer.functions_[v];r=b.content._data[0];r._data.splice(1,r._data.length-
1);for(l in c)A=c[l],Entry.TextCodingUtil.makeFuncParamBlock(A,t,this._blockCount),A=new Entry.Block(A,r),r._data.push(A);Entry.variableContainer.saveFunction(b)}else{y=new Entry.Func;y.generateBlock(!0);v=y.id;A=[];for(k=1;k<=b.length+1;k++)A.push("%"+k);y.block.template=g+" "+A.join(" ");r=y.content._data[0];A=r._data[0].data.params[0];k=A.data.params;y.description="";x=g.split("!@#$");if(1<x.length){for(f=1;f<x.length;f++)e=x[f],h=new Entry.Block({type:"function_field_label"},r),h.data.params=
[],h.data.params.push(e),n=Entry.TextCodingUtil.getLastParam(A),n.data.params[1]=h,y.description+=e.concat(" ");y.description+=" "}else k[0]=g,y.description=g+" ";Entry.TextCodingUtil.initQueue();if(0<b.length)for(x=new Entry.Block({type:"function_field_string"},r),x.data.params=[],f=Entry.Func.requestParamBlock("string"),n=new Entry.Block({type:f},r),x.data.params.push(n),n=Entry.TextCodingUtil.getLastParam(A),n.data.params[1]=x,y.paramMap[f]=Number(0),t={},t[b[0]]=f,A=1;A<b.length;A++)x=new Entry.Block({type:"function_field_string"},
r),x.data.params=[],f=Entry.Func.requestParamBlock("string"),n=new Entry.Block({type:f},r),x.data.params.push(n),e=Entry.TextCodingUtil.searchFuncDefParam(k[1]),0==e.data.params.length?e.data.params[0]=n:1==e.data.params.length&&(e.data.params[1]=x),y.paramMap[f]=Number(A),t[b[A]]=f;for(l in c)A=c[l],Entry.TextCodingUtil.makeFuncParamBlock(A,t,this._blockCount),A=new Entry.Block(A,r),r._data.push(A);Entry.Func.generateWsBlock(y);Entry.variableContainer.saveFunction(y)}Entry.variableContainer.updateList()}c=
g;l="func".concat("_").concat(v);this._funcMap.put(c,l);if(v=Entry.variableContainer.functions_[v])if(v=v.content._data[0]._data,this._hasReculsiveFunc&&v)for(q in v)this.convertReculsiveFuncType(v[q]);this._rootFuncKey=this._hasReculsiveFunc=this._funcLoop=!1;return null};c.FunctionExpression=function(b){var c={};b=b.body;b=this[b.type](b);c.statements=b.data&&0!=b.data.length?b.data:b.statements;return c};c.ReturnStatement=function(b){var c={};if(b=b.argument)var e=this[b.type](b);e&&(c.argument=
e);return c};c.ThisExpression=function(b){var c={};if(b=b.userCode)c.userCode=b;return c};c.NewExpression=function(b){var c={},e=b.callee,e=this[e.type](e),arguments=b.arguments,f=[],g;for(g in arguments){var h=arguments[g],h=this[h.type](h);f.push(h)}c.callee=e;c.arguments=f;return c};c.codeInit=function(){this.threadInit();this._currentObject=Entry.getMainWS().vimBoard._currentObject;this._funcMap.clear();this._code=[];this._blockCount=this._threadCount=0};c.threadInit=function(){this._thread=[];
this._funcParams=[];this._rootFuncKey=this._isEntryEventExisted=this._hasReculsiveFunc=this.isLastBlock=this._funcLoop=!1};c.isFuncParam=function(b){var c=!1;if(0==this._funcParams.length)return!1;for(var e in this._funcParams)if(this._funcParams[e]==b){c=!0;break}return c};c.convertReculsiveFuncType=function(b){if(b&&(b&&b.data&&(funcType=this._funcMap.get(b.data.type))&&(b.data.type=funcType),b&&b.data&&b.data.statements)){if(b.data.statements[0]){var c=b.data.statements[0]._data,e;for(e in c){var f=
c[e];this.convertReculsiveFuncType(f)}}if(b.data.statements[1])for(e in b=b.data.statements[1]._data,b)f=b[e],this.convertReculsiveFuncType(f)}};c.convertReculsiveFuncTypeGeneral=function(b,c){for(var d in b){var f=b[d];f.type==this._currentFuncKey&&(f.type=c);if(f.statements)for(var g in f.statements)this.convertReculsiveFuncTypeGeneral(f.statements[g],c)}};c.getBlockSyntax=function(b){if(!b)return null;b=b.split(".");var c=[];c.push(b.shift());b=b.join(".");""!=b&&c.push(b);b=c;for(c=this.blockSyntax;b.length;){var e=
b.shift(),c=c[e];if(!c)return null}return c?c:null};c.getParamIndex=function(b){var c={},e=/(%.)/mi;b=this.getBlockSyntax(b).syntax.split(e);var f=0,g;for(g in b){var h=b[g];e.test(h)&&(h=h.split("%")[1],c[f++]=Number(h)-1)}return c};c.extractContents=function(b,c){var d=this.searchSyntax(Entry.block[b.type]);if(d)var f=d.blockType;if("param"!=f){if("event"==f)this._isEntryEventExisted=!0;else if("last"==f)this.isLastBlock=!0;else if("variable"==f&&!this._isEntryEventExisted)return;c.push(b);if(b.contents)for(var g in b.contents)b=
b.contents[g],this.extractContents(b,c);if(b.statements&&b.statements[0])for(var h in b.statements[0])if(c=b.statements[0][h],c.contents)for(var k in c.contents)this.extractContents(c.contents[k],b.statements[0])}};c.RegExp=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"RegExp",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.Function=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"Function",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.EmptyStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"EmptyStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.DebuggerStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,
"DebuggerStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.WithStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"WithStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.LabeledStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"LabeledStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);
return b};c.ContinueStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"ContinueStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.SwitchStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"SwitchStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.SwitchCase=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"SwitchCase",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.ThrowStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"ThrowStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.TryStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"TryStatement",
this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.CatchClause=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"CatchClause",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.DoWhileStatement=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"DoWhileStatement",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);
return b};c.ArrayExpression=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"ArrayExpression",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.ObjectExpression=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"ObjectExpression",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.Property=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,
Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"Property",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.ConditionalExpression=function(b){return b};c.SequenceExpression=function(b){Entry.TextCodingError.error(Entry.TextCodingError.TITLE_CONVERTING,Entry.TextCodingError.MESSAGE_CONV_NO_SUPPORT,"SequenceExpression",this._blockCount,Entry.TextCodingError.SUBJECT_CONV_GENERAL);return b};c.searchSyntax=function(b){var c;b instanceof Entry.BlockView?(c=b.block._schema,applliedParams=
b.block.data.params):b instanceof Entry.Block?(c=b._schema,applliedParams=b.params):c=b;if(c&&c.syntax)for(b=c.syntax.py.concat();b.length;){c=!1;var e=b.shift();if("string"===typeof e)return{syntax:e,template:e};if(e.params)for(var f=0;f<e.params.length;f++)if(e.params[f]&&e.params[f]!==applliedParams[f]){c=!0;break}e.template||(e.template=e.syntax);if(!c)return e}return null}})(Entry.PyToBlockParser.prototype);Entry.Console=function(){Entry.propertyPanel&&(this.createView(),Entry.propertyPanel.addMode("console",this),Entry.console=this,this._isEditing=!1,this._inputData=null)};
(function(c){c.createView=function(){this.view=new Entry.Dom("div",{id:"entryConsole"});this.codeMirror=CodeMirror(this.view[0],{lineNumbers:!1,lineWrapping:!0,value:"",mode:{},theme:"default",styleActiveLine:!1,lint:!1});this._doc=this.codeMirror.getDoc();this.codeMirror.on("beforeChange",function(b,c){this._isEditing?"+delete"===c.origin&&0===c.to.ch&&c.cancel():c.cancel()}.bind(this));this.codeMirror.on("keyup",function(b,c){this._isEditing&&13===c.keyCode&&this.endInput()}.bind(this));this.codeMirror.on("cursorActivity",
function(b,c){b.execCommand("goDocEnd")});Entry.addEventListener("stop",this.clear.bind(this));this.clear()};c.getView=function(){return this.view};c.clear=function(){this.setEditing(!0);this.codeMirror.setValue("Entry Console \n");this.codeMirror.execCommand("goDocEnd");this.setEditing(!1)};c.print=function(b,c){if(this.visible){this.setEditing(!0);this.codeMirror.execCommand("goDocEnd");var d=this._doc.getCursor();this._doc.replaceRange(b+"\n",{line:d.line,ch:0});this._doc.addLineClass(d.line,"text",
c);"speak"===c&&this.setEditing(!1);this.codeMirror.execCommand("goDocEnd");"ask"===c&&(this._doc.addLineClass(d.line+1,"text","answer"),this.codeMirror.focus())}};c.endInput=function(){var b=this._doc.getCursor(),c=this.codeMirror.lineInfo(b.line);"answer"===c.textClass?(this._inputData=c.text,this._doc.replaceRange("\n",{line:b.line,ch:c.text.length})):this._inputData=this._doc.getLine(b.line-1);Entry.container.setInputValue(this._inputData);this.setEditing(!1)};c.stopInput=function(b){this.setEditing(!1)};
c.setEditing=function(b){this._isEditing!==b&&(this._isEditing=b)}})(Entry.Console.prototype);Entry.Parser=function(c,b,d,e){this._mode=c;this.syntax={};this.codeMirror=d;this._lang=e;this._type=b;this.availableCode=[];this._syntax_cache={};this._pyThreadCount=1;this._pyBlockCount={};Entry.Parser.PARSE_GENERAL=1;Entry.Parser.PARSE_SYNTAX=2;Entry.Parser.PARSE_VARIABLE=3;Entry.Parser.PARSE_BLOCK=4;this._onRunError=this._onError=!1;this._console=new Entry.Console};
(function(c){c.setParser=function(b,c,e){if(this._mode!==b||this._type!==c)switch(this._mode=b,this._type=c,this._cm=e,this.syntax=this.mappingSyntax(b),c){case Entry.Vim.PARSER_TYPE_JS_TO_BLOCK:this._execParser=new Entry.JsToBlockParser(this.syntax,this);this._execParserType=Entry.Vim.PARSER_TYPE_JS_TO_BLOCK;break;case Entry.Vim.PARSER_TYPE_PY_TO_BLOCK:this._execParser=new Entry.PyToBlockParser(this.syntax);this._execParserType=Entry.Vim.PARSER_TYPE_PY_TO_BLOCK;break;case Entry.Vim.PARSER_TYPE_BLOCK_TO_JS:this._execParser=
new Entry.BlockToJsParser(this.syntax,this);this._execParserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_JS;break;case Entry.Vim.PARSER_TYPE_BLOCK_TO_PY:this._execParser=new Entry.BlockToPyParser(this.syntax),e&&e.setOption("mode",{name:"python",globalVars:!0}),this._execParserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_PY}};c.parse=function(b,c){var d="";switch(this._type){case Entry.Vim.PARSER_TYPE_JS_TO_BLOCK:try{var f=[];f.push(b);var g=[],h;for(h in f){var k=f[h],k=k.trim(),l=acorn.parse(k);g.push(l)}d=this._execParser.Program(g)}catch(r){if(this.codeMirror){r instanceof
SyntaxError?(d={from:{line:r.loc.line-1,ch:0},to:{line:r.loc.line-1,ch:r.loc.column}},r.message="\ubb38\ubc95(Syntax) \uc624\ub958\uc785\ub2c8\ub2e4.",r.type=1):(d=this.getLineNumber(r.node.start,r.node.end),d.message=r.message,d.severity="converting error",r.type=2);this.codeMirror.markText(d.from,d.to,{className:"CodeMirror-lint-mark-error",__annotation:d,clearOnEnter:!0});var d=r.title?r.title:"\ubb38\ubc95 \uc624\ub958",m;2==r.type&&r.message?m=r.message:2!=r.type||r.message?1==r.type&&(m="\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ubb38\ubc95\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."):
m="\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ucf54\ub4dc\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.";Entry.toast.alert(d,m);d={};d.boardType=Entry.Workspace.MODE_BOARD;d.textType=Entry.Vim.TEXT_TYPE_JS;d.runType=Entry.Vim.MAZE_MODE;Ntry.dispatchEvent("textError",d);throw r;}d=[]}break;case Entry.Vim.PARSER_TYPE_PY_TO_BLOCK:try{this._pyBlockCount={};this._pyThreadCount=1;var q=new Entry.PyAstGenerator,f=this.makeThreads(b),g=[],n=0;for(h=0;h<f.length;h++)if(k=f[h],0!==k.length&&(k=k.replace(/\t/gm,"    "),
l=q.generate(k)))this._pyThreadCount=n++,this._pyBlockCount[n]=k.split("\n").length-1,0!==l.body.length&&g.push(l);d=this._execParser.Program(g);this._onError=!1}catch(r){if(this._onError=!0,d=[],this.codeMirror){if(r instanceof SyntaxError){var t=this.findSyntaxError(r,n),d={from:{line:t.from.line-1,ch:t.from.ch},to:{line:t.to.line-1,ch:t.to.ch}};r.type="syntax"}else t=this.findConvError(r),d={from:{line:t.from.line-1,ch:t.from.ch},to:{line:t.to.line-1,ch:t.to.ch}},r.type="converting";this._marker=
this.codeMirror.markText(d.from,d.to,{className:"CodeMirror-lint-mark-error",__annotation:d,clearOnEnter:!0,inclusiveLeft:!0,inclusiveRigth:!0,clearWhenEmpty:!1});if("syntax"==r.type)var v=r.title,y=this.makeSyntaxErrorDisplay(r.subject,r.keyword,r.message,t.from.line);else"converting"==r.type&&(v=r.title,y=r.message);Entry.toast.alert(v,y);throw r;}}break;case Entry.Vim.PARSER_TYPE_BLOCK_TO_JS:d=m=this._execParser.Code(b,c);break;case Entry.Vim.PARSER_TYPE_BLOCK_TO_PY:Entry.getMainWS().blockMenu.renderText();
d="";if(c===Entry.Parser.PARSE_BLOCK&&"func_"===b.type.substr(0,5))var x=Object.keys(this._execParser._funcDefMap);m=this._execParser.Code(b,c);this._pyHinter||(this._pyHinter=new Entry.PyHint(this.syntax));this._hasDeclaration||this.initDeclaration();if(c==Entry.Parser.PARSE_GENERAL){this.py_variableDeclaration&&(d+=this.py_variableDeclaration);this.py_listDeclaration&&(d+=this.py_listDeclaration);if(this.py_variableDeclaration||this.py_listDeclaration)d+="\n";v=this._execParser._funcDefMap;y="";
for(t in v)y+=v[t]+"\n\n";d+=y}else c===Entry.Parser.PARSE_BLOCK&&x&&0>x.indexOf(b.type)&&(d+=this._execParser._funcDefMap[b.type]+"\n\n");m&&(d+=m.trim());d=d.replace(/\t/g,"    ");this._hasDeclaration&&this.removeDeclaration()}return d};c.getLineNumber=function(b,c){var d=this.codeMirror.getValue(),f={from:{},to:{}};b=d.substring(0,b).split(/\n/gi);f.from.line=b.length-1;f.from.ch=b[b.length-1].length;c=d.substring(0,c).split(/\n/gi);f.to.line=c.length-1;f.to.ch=c[c.length-1].length;return f};c.mappingSyntax=
function(b){if(this._syntax_cache[b])return this._syntax_cache[b];for(var c=Object.keys(Entry.block),e={},f=0;f<c.length;f++){var g=c[f],h=Entry.block[g];if(b===Entry.Vim.MAZE_MODE){if(-1<this.availableCode.indexOf(g)){var k=h.syntax;if(k&&!h.syntax.py)for(var h=e,l=0;l<k.length;l++){var m=k[l];if(l===k.length-2&&"function"===typeof k[l+1]){h[m]=k[l+1];break}h[m]||(h[m]={});l===k.length-1?h[m]=g:h=h[m]}}}else b===Entry.Vim.WORKSPACE_MODE&&(m=g,g=null,h.syntax&&h.syntax.py&&(g=h.syntax.py),g&&g.map(function(b){var c,
d;if("string"===typeof b){var f={};c=f;d=b;f.key=m;f.syntax=b;f.template=b}else c=b,d=b.syntax,b.key=m,b.template||(c.template=b.syntax);d=d.split("(");d=d[1]&&-1<d[1].indexOf("%")?0!==d[0].length?d[0]:d.join("("):d.join("(");d=d.replace("():","");d=d.replace("()","");b.keyOption&&(d+="#"+b.keyOption);d=d.split(".");b=[];b.push(d.shift());d=d.join(".");""!=d&&b.push(d);d=b;b=e;for(f=0;f<d.length;f++){var g=d[f];if(f===d.length-1){b[g]=c;break}b[g]||(b[g]={});b=b[g]}}))}return this._syntax_cache[b]=
e};c.setAvailableCode=function(b,c){var d=[],f;b instanceof Entry.Code?f=b.getBlockList():b.forEach(function(b,c){f.concat(b)});f.forEach(function(b){d.push(b.type)});f=[];c instanceof Entry.Code?f=c.getBlockList():c.forEach(function(b,c){f.concat(b)});f.forEach(function(b){-1===d.indexOf(b.type)&&d.push(b.type)});this.availableCode=this.availableCode.concat(d)};c.findSyntaxError=function(b,c){c={from:{},to:{}};var d=b.loc.line;b=this.codeMirror.getValue().split("\n");var f=0,g;for(g in this._pyBlockCount)var h=
parseInt(this._pyBlockCount[g]),f=f+h;g=d+f+3;g>b.length&&(g=b.length);b=b[g-1];c.from.line=g;c.from.ch=0;c.to.line=g;c.to.ch=b.length;return c};c.findConvError=function(b){var c={from:{},to:{}};b=b.line-1;for(var e=this.codeMirror.getValue().split("\n"),f=0,g,h,k=3;k<e.length;k++)if(g=e[k],0===g.trim().length&&f++,b+f+3==k){h=k+1;break}h>e.length&&(h=e.length);c.from.line=h;c.from.ch=0;c.to.line=h;c.to.ch=g.length;return c};c.makeThreads=function(b){b=b.split("\n");for(var c=[],e="",f=!1,g=3;g<b.length;g++){var h=
b[g]+"\n",h=h.replace(/\t/gm,"    ");Entry.TextCodingUtil.isEntryEventFuncByFullText(h)?(h=this.entryEventParamConverter(h),0!==e.length&&c.push(e),e="",e+=h,f=!0):(Entry.TextCodingUtil.isEntryEventFuncByFullText(h.trim())&&(h=this.entryEventParamConverter(h)),1!=h.length||f?1!=h.length&&" "!=h.charAt(0)&&f&&(c.push(e),e="",f=!1):(c.push(e),e=""),e+=h)}c.push(e);return c};c.entryEventParamConverter=function(b){var c=b.indexOf("("),e=b.indexOf(")"),f=b.substring(0,c);b=b.substring(c+1,e);if(b=b.replace(/\"/g,
""))b=Entry.Utils.isNumber(b)?"num"+b:Entry.Utils.isNumber(b.charAt(0))?"num"+b:b.replace(/ /g,"_space_"),"None"==b&&(b="none");return f+"("+b+"):\n"};c.makeSyntaxErrorDisplay=function(b,c,e,f){return"["+b+"] "+(c?"'"+c+"' ":"")+" : "+e+" (line "+f+")"};c.initDeclaration=function(){this.py_variableDeclaration=Entry.TextCodingUtil.generateVariablesDeclaration();this.py_listDeclaration=Entry.TextCodingUtil.generateListsDeclaration();this._hasDeclaration=!0};c.removeDeclaration=function(){this.py_listDeclaration=
this.py_variableDeclaration=null}})(Entry.Parser.prototype);Entry.CodeMap={};
(function(c){c.Entry={start_neighbor_scene:[{"\ub2e4\uc74c":"next","\uc774\uc804":"pre"}],stop_object:[{thisOnly:"self",thisThread:"this",otherThread:"others",self:"thisOnly","this":"thisThread",others:"otherThread","\ubaa8\ub4e0":"all","\uc790\uc2e0":"thisOnly","\uc774":"thisThread","\uc790\uc2e0\uc758 \ub2e4\ub978":"otherThread"}],change_to_next_shape:[{prev:"pre",pre:"prev","\ub2e4\uc74c":"next","\uc774\uc804":"prev"}],add_effect_amount:[{"\uc0c9\uae54":"color","\ubc1d\uae30":"brightness","\ud22c\uba85\ub3c4":"transparency"}],
change_effect_amount:[{"\uc0c9\uae54":"color","\ubc1d\uae30":"brightness","\ud22c\uba85\ub3c4":"transparency"}],change_object_index:[{front:"FRONT",forward:"FORWARD",backward:"BACKWARD",back:"BACK","\ub9e8 \uc55e":"FRONT","\uc55e":"FORWARD","\ub4a4":"BACKWARD","\ub9e8 \ub4a4":"BACK"}],set_color:[{red:"#FF0000",orange:"#FF9966",yellow:"#FFFF66",green:"#009900",blue:"#3333FF",navy:"#000099",purple:"#993399",black:"#000000",white:"#FFFFFF",brown:"#990000"}],reach_something:[null,{mouse:"mouse_pointer",
wall:"edge",wall_up:"edge_up",wall_down:"edge_down",wall_right:"edge_right",wall_left:"edge_left",mouse_pointer:"mouse",edge:"wall",edge_up:"wall_up",edge_down:"wall_down",edge_right:"wall_right",edge_left:"wall_left","\ub9c8\uc6b0\uc2a4\ud3ec\uc778\ud130":"mouse"},null],create_clone:[{"\uc790\uc2e0":"self",self:"self"}],locate:[{mouse:"mouse_pointer",mouse_pointer:"mouse","\ub9c8\uc6b0\uc2a4\ud3ec\uc778\ud130":"mouse"}],locate_object_time:[null,{mouse:"mouse_pointer",mouse_pointer:"mouse","\ub9c8\uc6b0\uc2a4\ud3ec\uc778\ud130":"mouse"}],
see_angle_object:[{mouse:"mouse_pointer",mouse_pointer:"mouse","\ub9c8\uc6b0\uc2a4\ud3ec\uc778\ud130":"mouse"}],coordinate_mouse:[null,{X:"x",Y:"y"},null],coordinate_object:[null,{"\uc790\uc2e0":"self",self:"self"},null,{"\ud06c\uae30":"size","\ubc29\ud5a5":"rotation","\uc774\ub3d9 \ubc29\ud5a5":"direction","\ubaa8\uc591 \ubc88\ud638":"picture_index","\ubaa8\uc591 \uc774\ub984":"picture_name",picture_index:"shape_number",picture_name:"shape_name",shape_number:"picture_index",shape_name:"picture_name"}],
choose_project_timer_action:[null,{start:"START",stop:"STOP",reset:"RESET"}],set_visible_project_timer:[null,{show:"SHOW",hide:"HIDE"}],get_date:[null,{year:"YEAR",month:"MONTH",day:"DAY",hour:"HOUR",minute:"MINUTE",second:"SECOND"}],distance_something:[null,{mouse:"mouse_pointer",mouse_pointer:"mouse","\ub9c8\uc6b0\uc2a4\ud3ec\uc778\ud130":"mouse"}],set_visible_answer:[{show:"SHOW",hide:"HIDE"}]};c.Arduino={arduino_ext_analog_list:[{a0:"0",a1:"1",a2:"2",a3:"3",a4:"4",a5:"5"}],arduino_get_digital_toggle:[{on:"high",
off:"low",high:"on",low:"off"}]};c.Hamster={hamster_play_note_for:[{4:"hamster.note_c",5:"hamster.note_c_sharp",6:"hamster.note_d",7:"hamster.note_e_flat",8:"hamster.note_e",9:"hamster.note_f",10:"hamster.note_f_sharp",11:"hamster.note_g",12:"hamster.note_g_sharp",13:"hamster.note_a",14:"hamster.note_b_flat",15:"hamster.note_b","hamster.note_c":4,"hamster.note_c_sharp":5,"hamster.note_d_flat":5,"hamster.note_d":6,"hamster.note_e_flat":7,"hamster.note_d_sharp":7,"hamster.note_e":8,"hamster.note_f":9,
"hamster.note_f_sharp":10,"hamster.note_g_flat":10,"hamster.note_g":11,"hamster.note_g_sharp":12,"hamster.note_a_flat":12,"hamster.note_a":13,"hamster.note_b_flat":14,"hamster.note_a_sharp":14,"hamster.note_b":15},null,null]}})(Entry.CodeMap);Entry.PyBlockAssembler=function(c){this.blockSyntax=c;this._blockStatmentIndex=0;this._blockStatments=[]};
(function(c){c.Program=function(b){var c=[],e;for(e in b){if("Program"!=b[e].type)return;var f=[],g=b[e].body;console.log("nodes",g);for(e in g){var h=g[e],h=this[h.type](h);console.log("checkitout",h);h=this._assembler[h.type](h);f.push(h)}console.log("thread",f);c.push(f)}return c};c.ExpressionStatement=function(b){console.log("ExpressionStatement component",b);var c={};b=b.expression;"Literal"==b.type?(b=this[b.type]({type:"Block",accept:"booleanMagnet"},b),c.type=b.type,result=c,console.log("ExpressionStatement type literal",
result)):(b=this[b.type](b),c.type=b.type,c.params=b.params,result=c,console.log("ExpressionStatement type not literal",result));console.log("ExpressionStatement result",result);return result};c.AssignmentExpression=function(b){console.log("AssignmentExpression component",b);var c=[],e;e=b.left;e.type?("Literal"==e.type?(e=this[e.type](paramsMeta[0],e),console.log("AssignmentExpression left Literal param",e)):e=this[e.type](e),e&&c.push(e),console.log("AssignmentExpression left param",e)):(e=b.left,
this[e.type](e));operator=String(b.operator);console.log("AssignmentExpression operator",operator);operator&&(e=operator=Entry.TextCodingUtil.logicalExpressionConvert(operator),c.push(e));e=b.right;e.type?("Literal"==e.type?(e=this[e.type](paramsMeta[2],e),console.log("AssignmentExpression right Literal param",e)):e=this[e.type](e),e&&c.push(e),console.log("AssignmentExpression right param",e)):(e=b.right,this[e.type](e));console.log("AssignmentExpression params",c);console.log("AssignmentExpression result",
result);return result};c.CallExpression=function(b){console.log("CallExpression component",b);var c;c={};var e=b.callee,e=this[e.type](e);console.log("CallExpression calleeData",e,"calleeData typeof",typeof e);var f="object"!=typeof e.object?String(e.object).concat(".").concat(String(e.property)):String(e.object.object).concat(".").concat(String(e.object.property)).concat(".").concat(String(e.property));console.log("CallExpression syntax",f);e=this.getBlockType(f);console.log("CallExpression type1",
e);e||"__pythonRuntime.functions.range"==f&&(e="repeat_basic");console.log("CallExpression type2",e);f=Entry.block[e].params;console.log("CallExpression paramsMeta",f);var arguments=b.arguments,g=[],h;for(h in arguments){var k=arguments[h];console.log("CallExpression argument",k);if("Literal"==k.type){var l=f[h];"Indicator"==l.type?(k=null,g.push(k),h--):(console.log("CallExpression argument index",k.type,h),k=this[k.type](l,k,e,h),g.push(k));h==arguments.length-1&&(console.log("CallExpression in1"),
h<f.length&&(console.log("CallExpression in2"),g.push(null)));console.log("CallExpression i",h)}}console.log("CallExpression params",g);c.type=e;c.params=g;console.log("CallExpression result",c);return c};c.Literal=function(b,c,e,f){console.log("Literal paramMeta component particularIndex blockType",b,c,e,f);c=c.value;b=e?this["Param"+b.type](b,c,e,f):this["Param"+b.type](b,c);console.log("Literal result",b);return b};c.ParamColor=function(b,c){console.log("ParamColor paramMeta value",b,c);console.log("ParamColor result",
c);return c};c.ParamDropdown=function(b,c){console.log("ParamDropdown paramMeta value",b,c);console.log("ParamDropdownDynamic result",c);return c};c.ParamDropdownDynamic=function(b,c){console.log("ParamDropdownDynamic paramMeta value",b,c);var d;if("mouse"==c)return"mouse";b=b.options;for(var f in b)if(console.log("options",b),c==b[f][0]){console.log("options[i][0]",b[f][0]);d=b[f][1];break}console.log("ParamDropdownDynamic result",d);return d};c.ParamKeyboard=function(b,c){console.log("ParamKeyboard paramMeta value",
b,c);b=Entry.KeyboardCodeMap.prototype.keyCharToCode[c];console.log("ParamKeyboard result",b);return b};c.ParamBlock=function(b,c,e,f){console.log("ParamBlock paramMeta value blockType",b,c,e,f);var d={},h=[];e=Entry.TextCodingUtil.particularParam(e);if(null!=e){var k=e[f];if(k){k=e[f];console.log("ParamBlock particularType",k);f=k;d.type=f;e=Entry.block[f].params;console.log("ParamBlock particular block paramsMeta",b);var l,m;for(m in e){b=e[m];b=b.options;for(var q in b)k=b[q],c==k[0]&&(l=k[1])}h.push(l);
d.params=h}else switch(f=typeof c,f){case "number":d.type="number";h.push(c);d.params=h;break;case "boolean":1==c?d.type="True":0==c&&(d.type="False");break;default:d.type="text",h.push(c),d.params=h}}else switch(f=typeof c,f){case "number":d.type="number";h.push(c);d.params=h;break;case "boolean":1==c?d.type="True":0==c&&(d.type="False");break;default:d.type="text",h.push(c),d.params=h}console.log("ParamBlock valueType",f);console.log("ParamBlock result",d);return d};c.Indicator=function(b,c,e){};
c.MemberExpression=function(b){console.log("MemberExpression component",b);var c={},e=b.object;b=b.property;e=this[e.type](e);b=this[b.type](b);console.log("MemberExpression objectData",e);console.log("MemberExpression structure",b);c.object=e;c.property=b;console.log("MemberExpression result",c);return c};c.Identifier=function(b){console.log("Identifiler component",b);b=b.name;console.log("Identifiler result",b);return b};c.WhileStatement=function(b){console.log("WhileStatement component",b);var c=
{},e=b.test,f;1==e.value&&(f=this.getBlockType("while True:\n$1"));console.log("WhileStatement type",f);var g=Entry.block[f].params;console.log("WhileStatement paramsMeta",g);var h=[];e&&(e.type="Literal",g=g[0],e="Indicator"==g.type?null:this[e.type](g,e),h.push(e));e=[];b=b.body.body;for(var k in b)g=b[k],g=this[g.type](g),e.push(g);c.type=f;c.params=h;c.statements=[];c.statements.push(e);console.log("WhileStatement result",c);return c};c.BlockStatement=function(b){console.log("BlockStatement component",
b);this._blockStatmentIndex=0;this._blockStatments=[];var c={};b=b.body;for(var e in b){var f=b[e];console.log("BlockStatement body",f,"i",e);f=this[f.type](f);console.log("BlockStatement bodyData",f,"i",e);if(f.declarations){console.log("BlockStatement statements type params bodyData",e,f);var f=f.declarations,g;for(g in f){var h=f[g];h.init.type&&(c.type=h.init.type);h.init.params&&(console.log("BlockStatement params",h.init.params),c.params=h.init.params);console.log("BlockStatement structure",
c,"j",g)}}else 0==this._blockStatmentIndex&&this._blockStatments.push(f)}c.statements=[this._blockStatments];console.log("BlockStatement result",c);this._blockStatmentIndex++;return c};c.IfStatement=function(b){console.log("IfStatement component",b);var c={},e=[],f=[],g=[],h=[],k=b.test,l=b.alternate,m=b.consequent;b=this.getBlockType(null==l?"if %1:\n$1":"if %1:\n$1\nelse:\n$2");if(null!=k){var q=Entry.block[b].params;console.log("IfStatement paramsMeta",q);e=[];k.type="Literal";q=q[0];k="Indicator"==
q.type?null:this[k.type](q,k);e.push(k)}if(null!=m)for(var n in m.body)if(k=m.body[n])k=this[k.type](k),console.log("IfStatement consequent bodyData",k),f.push(k);if(null!=l)for(n in l.body)if(k=l.body[n])k=this[k.type](k),console.log("IfStatement alternate bodyData",k),g.push(k);0!=f.length&&h.push(f);0!=g.length&&h.push(g);c.type=b;0!=e.length&&(c.params=e);0!=h.length&&(c.statements=h);console.log("IfStatement result",c);return c};c.VariableDeclaration=function(b){console.log("VariableDeclaration component",
b);var c={},e=[];b=b.declarations;for(var f in b){var g=b[f],g=this[g.type](g);console.log("VariableDeclaration declarationData",g);e.push(g)}c.declarations=e;console.log("VariableDeclaration result",c);return c};c.VariableDeclarator=function(b){console.log("VariableDeclarator component",b);var c={},e=b.id,f=this[e.type](e);console.log("VariableDeclarator idData",f);b=b.init;b=this[b.type](b);console.log("VariableDeclarator initData",b);c.id=e;c.init=b;console.log("VariableDeclarator result",c);return c};
c.BreakStatement=function(b){console.log("BreakStatement component",b);b={};var c=this.getBlockType("break");b.type=c;console.log("BreakStatement result",b);return b};c.UnaryExpression=function(b){console.log("UnaryExpression component",b);var c=[];b.prefix&&(b=b.operator.concat(b.argument.value),c.push(b));result.params=c;console.log("UnaryExpression result",result);return result};c.LogicalExpression=function(b){console.log("LogicalExpression component",b);var c={},e=String(b.operator);switch(e){case "&&":var f=
"%1 and %3";break;case "||":f="%1 or %3";break;default:f="%1 and %3"}var f=this.getBlockType(f),g=Entry.block[f].params;console.log("LogicalExpression paramsMeta",g);var h=[],e=b.left;e.type?("Literal"==e.type?(e=this[e.type](g[0],e),console.log("LogicalExpression left Literal param",e)):e=this[e.type](e),e&&h.push(e),console.log("LogicalExpression left param",e)):(e=b.left,this[e.type](e));e=String(b.operator);console.log("LogicalExpression operator",e);e&&(e=Entry.TextCodingUtil.logicalExpressionConvert(e),
h.push(e));e=b.right;e.type?("Literal"==e.type?(e=this[e.type](g[2],e),console.log("LogicalExpression right Literal param",e)):e=this[e.type](e),e&&h.push(e),console.log("LogicalExpression right param",e)):(e=b.right,this[e.type](e));c.type=f;c.params=h;console.log("LogicalExpression result",c);return c};c.BinaryExpression=function(b){console.log("BinaryExpression component",b);var c={params:[]},e=String(b.operator);console.log("BinaryExpression operator",e);if(e)var f="(%1 %2 %3)";console.log("BinaryExpression syntax",
f);f=this.getBlockType(f);console.log("BinaryExpression type",f);var g=Entry.block[f].params;console.log("BinaryExpression paramsMeta",g);var h=[],e=b.left;e.type?("Literal"==e.type?(e=this[e.type](g[0],e),console.log("BinaryExpression left Literal param",e)):e=this[e.type](e),e&&h.push(e),console.log("BinaryExpression left param",e)):(e=b.left,this[e.type](e));if(e=String(b.operator))console.log("BinaryExpression operator",e),(e=Entry.TextCodingUtil.binaryOperatorConvert(e))&&h.push(e);e=b.right;
e.type?("Literal"==e.type?(e=this[e.type](g[2],e),console.log("BinaryExpression right Literal param",e)):e=this[e.type](e),e&&h.push(e),console.log("BinaryExpression right param",e)):(e=b.right,this[e.type](e));console.log("BinaryExpression params",h);c.type=f;c.params=h;console.log("BinaryExpression result",c);return c};c.getBlockType=function(b){return this.blockSyntax[b]};c.FunctionDeclaration=function(b){console.log("FunctionDeclaration component",b);console.log("FunctionDeclaration result",void 0);
return b};c.RegExp=function(b){console.log("RegExp",b);console.log("RegExp result",void 0);return b};c.Function=function(b){console.log("Function",b);console.log("Function result",void 0);return b};c.EmptyStatement=function(b){console.log("EmptyStatement",b);console.log("EmptyStatement result",void 0);return b};c.DebuggerStatement=function(b){console.log("DebuggerStatement",b);console.log("DebuggerStatement result",void 0);return b};c.WithStatement=function(b){console.log("WithStatement",b);console.log("WithStatement result",
void 0);return b};c.ReturnStaement=function(b){console.log("ReturnStaement",b);console.log("ReturnStaement result",void 0);return b};c.LabeledStatement=function(b){console.log("LabeledStatement",b);console.log("LabeledStatement result",void 0);return b};c.BreakStatement=function(b){console.log("BreakStatement",b);console.log("BreakStatement result",void 0);return b};c.ContinueStatement=function(b){console.log("ContinueStatement",b);console.log("ContinueStatement result",void 0);return b};c.SwitchStatement=
function(b){console.log("SwitchStatement",b);console.log("SwitchStatement result",void 0);return b};c.SwitchCase=function(b){console.log("SwitchCase",b);console.log("SwitchCase result",void 0);return b};c.ThrowStatement=function(b){console.log("ThrowStatement",b);console.log("ThrowStatement result",void 0);return b};c.TryStatement=function(b){console.log("TryStatement",b);console.log("TryStatement result",void 0);return b};c.CatchClause=function(b){console.log("CatchClause",b);console.log("CatchClause result",
void 0);return b};c.DoWhileStatement=function(b){console.log("DoWhileStatement",b);console.log("DoWhileStatement result",void 0);return b};c.ForInStatement=function(b){console.log("ForInStatement",b);console.log("ForInStatement result",void 0);return b};c.FunctionDeclaration=function(b){console.log("FunctionDeclaration",b);console.log("FunctionDeclaration result",void 0);return b};c.ThisExpression=function(b){console.log("ThisExpression",b);console.log("ThisExpression result",void 0);return b};c.ArrayExpression=
function(b){console.log("ArrayExpression",b);console.log("ArrayExpression result",void 0);return b};c.ObjectExpression=function(b){console.log("ObjectExpression",b);console.log("ObjectExpression result",void 0);return b};c.Property=function(b){console.log("Property",b);console.log("Property result",void 0);return b};c.FunctionExpression=function(b){console.log("FunctionExpression",b);console.log("FunctionExpression result",void 0);return b};c.UpdateExpression=function(b){console.log("UpdateExpression",
b);console.log("UpdateExpression result",void 0);return b};c.ConditionalExpression=function(b){console.log("ConditionalExpression",b);console.log("ConditionalExpression result",void 0);return b};c.NewExpression=function(b){console.log("NewExpression",b);console.log("NewExpression result",void 0);return b};c.SequenceExpression=function(b){console.log("SequenceExpression",b);console.log("SequenceExpression result",void 0);return b}})(Entry.PyBlockAssembler.prototype);Entry.PyToBlockParserTemp=function(c){this._assembler=new Entry.PyBlockAssembler(c)};
(function(c){c.Program=function(b){var c=[],e;for(e in b){if("Program"!=b[e].type)return;var f=[],g=b[e].body;console.log("nodes",g);for(e in g){var h=g[e],h=this[h.type](h);console.log("checkitout",h);h=this._assembler[h.type](h);f.push(h)}console.log("thread",f);c.push(f)}return c};c.Identifier=function(b){console.log("Identifier",b);return{type:b.type,name:b.name}};c.FunctionDeclaration=function(b){console.log("FunctionDeclaration",b);var c=this[b.id.type](b.id);return{type:b.type,id:c}};c.Literal=
function(b){console.log("Literal",b);console.log("typeof node at Literal",typeof b.value);var c;"string"===typeof b.value?c=b.value:"boolean"===typeof b.value?c=b.value:"number"===typeof b.value?c=b.value:"RegExp"===typeof b.value?(c=this[typeof b.value](b),c=c.regex.pattern):c=null;console.log("value",c);return{type:b.type,value:c}};c.RegExp=function(b){console.log("RegExp",b);return{regex:b.regex}};c.Function=function(b){console.log("Function",b);var c=this[b.id](b),e=[],f;for(f in b.params)e.push(b.params[f]);
b=this[b.body](b);return{id:c,params:e,body:b}};c.ExpressionStatement=function(b){var c=this[b.expression.type](b.expression);return{type:b.type,expression:c}};c.BlockStatement=function(b){console.log("BlockStatement",b);var c=[],e;for(e in b.body){var f=b.body[e];console.log("BlockStatement statement",f);f=this[f.type](f);console.log("BlockStatement body",f);c.push(f)}console.log("bodies",c);return{type:b.type,body:c}};c.EmptyStatement=function(b){console.log("EmptyStatement",b);return{type:b.type}};
c.DebuggerStatement=function(b){console.log("DebuggerStatement",b);return{type:b.type}};c.WithStatement=function(b){console.log("WithStatement",b);var c=this[b.object.type](b.object),e=this[b.body.type](b.body);return{type:b.type,object:c,body:e}};c.ReturnStaement=function(b){console.log("ReturnStaement",b);var c;c=null===b.argument?null:this[b.argument.type](b.argument);return{type:b.type,argument:c}};c.LabeledStatement=function(b){console.log("LabeledStatement",b);var c=this[b.label.type](b.label),
e=this[b.body.type](b.body);return{type:b.type,label:c,body:e}};c.BreakStatement=function(b){console.log("BreakStatement",b);var c;console.log("node.label",b.label);b.label&&null!==b.label?(console.log("node.label2",b.label),c=this[b.label.type](b.label)):(console.log("node.lable1",b.label),c=null);console.log("label",c);return{type:b.type,label:c}};c.ContinueStatement=function(b){console.log("ContinueStatement",b);var c;c=null===b.label?null:this[b.label.type](b.label);return{type:b.type,label:c}};
c.IfStatement=function(b){console.log("IfStatement",b);var c=this[b.test.type](b.test),e={body:[]};if(null===b.alternate)e=null;else for(var f in b.alternate.body){var g=b.alternate.body[f],h=this[g.type](g);e.body.push(h)}h={body:[]};for(f in b.consequent.body)g=b.consequent.body[f],g=this[g.type](g),h.body.push(g);console.log("alternate",e);console.log("consequent",h);return{type:b.type,test:c,consequent:h,alternate:e}};c.SwitchStatement=function(b){console.log("SwitchStatement",b);var c=this[b.discriminant.type](b.discriminant),
e=[],f;for(f in b.cases){var g=b.cases[f],g=this[g.type](g);e.push(g)}return{type:b.type,discriminant:c,cases:e}};c.SwitchCase=function(b){console.log("SwitchCase",b);var c;c=null===b.test?null:this[b.test.type](b.test);for(var e in b.consequent)b=this[statment.type](statment),(void 0).push(b);return{test:c,consequent:void 0}};c.ThrowStatement=function(b){console.log("ThrowStatement",b);var c=this[b.argument.type](b.argument);return{type:b.type,argument:c}};c.TryStatement=function(b){console.log("TryStatement",
b);var c=this[b.block.type](b.block),e;e=null===b.handler?null:this[b.handler.type](b.handler);var f;f=null===b.finalizer?null:this[b.finalizer.type](b.finalizer);return{type:b.type,block:c,handler:e,finalizer:f}};c.CatchClause=function(b){console.log("CatchClause",b);var c=b.param;b=this[b.body.type](b.body);return{param:c,body:b}};c.WhileStatement=function(b){console.log("WhileStatement",b);var c=this[b.test.type](b.test),e=this[b.body.type](b.body);console.log("WhileStatement test",c);console.log("WhileStatement body",
e);return{type:b.type,test:c,body:e}};c.DoWhileStatement=function(b){console.log("DoWhileStatement",b);var c;c=this[b.init.type](b.init);var e;e=null===b.test?null:this[b.test.type](b.test);var f;f=null===b.update?null:this[b.update.type](b.update);var g=this[b.body.type](b.body);return{type:b.type,init:c,test:e,update:f,body:g}};c.ForStatement=function(b){console.log("ForStatement",b);var c;if(null===b.init)c=null;else this[b.init.type](b.init);var e;e=null===b.test?null:this[b.test.type](b.test);
var f;f=null===b.update?null:this[b.update.type](b.update);var g=this[b.body.type](b.body);console.log("ForStatement body",g);return{type:b.type,init:c,test:e,update:f,body:g}};c.ForInStatement=function(b){console.log("ForInStatement",b);var c;c=this[b.left.type](b.left);var e=this[b.right.type](b.right),f=this[b.body.type](b.body);return{type:b.type,left:c,right:e,body:f}};c.FunctionDeclaration=function(b){console.log("FunctionDeclaration",b);return{id:this[b.id.type](b.id)}};c.VariableDeclaration=
function(b){console.log("VariableDeclaration",b);var c=[],e;for(e in b.declarations){var f=b.declarations[e],f=this[f.type](f);console.log("declaration",f);c.push(f)}console.log("VariableDeclaration declarations",c);return{type:b.type,declarations:c,kind:"var"}};c.VariableDeclarator=function(b){console.log("VariableDeclarator",b);var c=this[b.id.type](b.id),e;e=null===b.init?null:this[b.init.type](b.init);console.log("id",c);console.log("init",e);return{type:b.type,id:c,init:e}};c.ThisExpression=
function(b){console.log("ThisExpression",b);return{type:b.type}};c.ArrayExpression=function(b){console.log("ArrayExpression",b);var c;if(null===b.elements)c=null;else for(var e in b.elements){var f=b.elements[e],f=this[f.type](f);c.push(f)}return{type:b.type,elements:c}};c.ObjectExpression=function(b){console.log("ObjectExpression",b);for(var c in b.properties){var e=b.properties[c],e=this[e.type](e);(void 0).push(e)}return{type:b.type,properties:void 0}};c.Property=function(b){console.log("Property",
b);var c=this[b.key.type](b.key),e=this[b.value.type](b.value);return{type:b.type,key:c,value:e,kind:b.kind}};c.FunctionExpression=function(b){console.log("FunctionExpression",b);return{type:b.type}};c.UnaryExpression=function(b){console.log("UnaryExpression",b);var c;switch(b.operator){case "-":c=b.operator;break;case "+":c=b.operator;break;case "!":c=b.operator;break;case "~":c=b.operator;break;case "typeof":c=b.operator;break;case "void":c=b.operator;break;case "delete":c=b.operator;break;default:c=
null}var e=b.prefix,f=this[b.argument.type](b.argument);return{type:b.type,operator:c,prefix:e,argument:f}};c.UpdateExpression=function(b){console.log("UpdateExpression",b);var c;switch(b.operator){case "++":c=b.operator;break;case "--":c=b.operator;break;default:c=null}var e=this[b.argument.type](b.argument);return{type:b.type,operator:c,prefix:b.prefix,argument:e}};c.BinaryExpression=function(b){console.log("BinaryExpression",b);var c;switch(b.operator){case "==":c=b.operator;break;case "!=":c=
b.operator;break;case "===":c=b.operator;break;case "!==":c=b.operator;break;case "<":c=b.operator;break;case "<=":c=b.operator;break;case ">":c=b.operator;break;case ">=":c=b.operator;break;case "<<":c=b.operator;break;case ">>":c=b.operator;break;case ">>>":c=b.operator;break;case "+":c=b.operator;break;case "-":c=b.operator;break;case "*":c=b.operator;break;case "/":c=b.operator;break;case "%":c=b.operator;break;case "|":c=b.operator;break;case "^":c=b.operator;break;case "|":c=b.operator;break;
case "&":c=b.operator;break;case "in":c=b.operator;break;case "instanceof":c=b.operator;break;default:c=null}var e=this[b.left.type](b.left),f=this[b.right.type](b.right);return{type:b.type,operator:c,left:e,right:f}};c.AssignmentExpression=function(b){console.log("AssignmentExpression",b);var c;switch(b.operator){case "=":c=b.operator;break;case "+=":c=b.operator;break;case "-=":c=b.operator;break;case "*=":c=b.operator;break;case "/=":c=b.operator;break;case "%=":c=b.operator;break;case "<<=":c=
b.operator;break;case ">>=":c=b.operator;break;case "|=":c=b.operator;break;case "^=":c=b.operator;break;case "&=":c=b.operator;break;default:c=null}var e;e=b.left;var f=this[b.right.type](b.right);return{type:b.type,operator:c,left:e,right:f}};c.LogicalExpression=function(b){console.log("LogicalExpression",b);var c;switch(b.operator){case "||":c=b.operator;break;case "&&":c=b.operator;break;default:c=null}var e=this[b.left.type](b.left),f=this[b.right.type](b.right);return{type:b.type,operator:c,
left:e,right:f}};c.MemberExpression=function(b){console.log("MemberExpression",b);var c=this[b.object.type](b.object),e=this[b.property.type](b.property),f=b.computed;console.log("object",c);console.log("property",e);return{type:b.type,object:c,property:e,computed:f}};c.ConditionalExpression=function(b){console.log("ConditionalExpression",b);var c=this[b.callee.type](b.callee),e;for(e in b.arguments){var f=b.arguments[e],f=this[f.type](f);(void 0).push(f)}return{type:b.type,callee:c,arguments:void 0}};
c.CallExpression=function(b){console.log("CallExpression",b);var c=this[b.callee.type](b.callee),e=[],f;for(f in b.arguments){var g=b.arguments[f],g=this[g.type](g);e.push(g)}console.log("callee",c);console.log("arguments",e);return{type:b.type,callee:c,arguments:e}};c.NewExpression=function(b){console.log("NewExpression",b);return{type:b.type}};c.SequenceExpression=function(b){console.log("SequenceExpression",b);for(var c in b.expressions){var e=b.expressions[c],e=this[e.type](e);(void 0).push(e)}return{type:b.type,
expressions:void 0}}})(Entry.PyToBlockParserTemp.prototype);Entry.Toast=function(){this.toasts_=[];var c=document.getElementById("entryToastContainer");c&&document.body.removeChild(c);this.body_=Entry.createElement("div","entryToastContainer");this.body_.addClass("entryToastContainer");document.body.appendChild(this.body_)};
Entry.Toast.prototype.warning=function(c,b,d){var e=Entry.createElement("div","entryToast");e.addClass("entryToast");e.addClass("entryToastWarning");e.bindOnClick(function(){Entry.toast.body_.removeChild(this)});var f=Entry.createElement("div","entryToast");f.addClass("entryToastTitle");f.innerHTML=c;e.appendChild(f);c=Entry.createElement("p","entryToast");c.addClass("entryToastMessage");c.innerHTML=b;e.appendChild(c);this.toasts_.push(e);this.body_.appendChild(e);d||window.setTimeout(function(){e.style.opacity=
1;var b=setInterval(function(){.05>e.style.opacity&&(clearInterval(b),e.style.display="none",Entry.removeElement(e));e.style.opacity*=.9},20)},1E3)};
Entry.Toast.prototype.success=function(c,b,d){var e=Entry.createElement("div","entryToast");e.addClass("entryToast");e.addClass("entryToastSuccess");e.bindOnClick(function(){Entry.toast.body_.removeChild(this)});var f=Entry.createElement("div","entryToast");f.addClass("entryToastTitle");f.innerHTML=c;e.appendChild(f);c=Entry.createElement("p","entryToast");c.addClass("entryToastMessage");c.innerHTML=b;e.appendChild(c);this.toasts_.push(e);this.body_.appendChild(e);d||window.setTimeout(function(){e.style.opacity=
1;var b=setInterval(function(){.05>e.style.opacity&&(clearInterval(b),e.style.display="none",Entry.removeElement(e));e.style.opacity*=.9},20)},1E3)};
Entry.Toast.prototype.alert=function(c,b,d){var e=Entry.createElement("div","entryToast"),f;e.addClass("entryToast");e.addClass("entryToastAlert");e.bindOnClick(function(){Entry.toast.body_.removeChild(this);f&&clearInterval(f)});var g=Entry.createElement("div","entryToast");g.addClass("entryToastTitle");g.innerHTML=c;e.appendChild(g);c=Entry.createElement("p","entryToast");c.addClass("entryToastMessage");c.innerHTML=b;e.appendChild(c);this.toasts_.push(e);this.body_.appendChild(e);d||window.setTimeout(function(){e.style.opacity=
1;f=setInterval(function(){.05>e.style.opacity&&(clearInterval(f),e.style.display="none",e.parentElement&&Entry.toast.body_.removeChild(e));e.style.opacity*=.9},20)},5E3)};Entry.TvCast=function(c){this.generateView(c)};p=Entry.TvCast.prototype;p.init=function(c){this.tvCastHash=c};p.generateView=function(c){var b=Entry.createElement("div");b.addClass("entryContainerMovieWorkspace");b.addClass("entryRemove");this.movieContainer=b;b=Entry.createElement("iframe");b.setAttribute("id","tvCastIframe");b.setAttribute("allowfullscreen","");b.setAttribute("frameborder",0);b.setAttribute("src",c);this.movieFrame=b;this.movieContainer.appendChild(this.movieFrame)};p.getView=function(){return this.movieContainer};
p.resize=function(){document.getElementById("entryContainerWorkspaceId");var c=document.getElementById("tvCastIframe");w=this.movieContainer.offsetWidth;c.width=w+"px";c.height=9*w/16+"px"};Entry.ContextMenu={};
(function(c){c.visible=!1;c._hideEvent=null;c.createDom=function(){this.dom=Entry.Dom("ul",{id:"entry-contextmenu",parent:$("body")});this.dom.bind("mousedown touchstart",function(b){b.stopPropagation()});Entry.Utils.disableContextmenu(this.dom)};c.show=function(b,c,e){this._hideEvent=Entry.documentMousedown.attach(this,function(){this.hide()});this.dom||this.createDom();if(0!==b.length){var d=this;void 0!==c&&(this._className=c,this.dom.addClass(c));var g=this.dom;g.empty();for(var h=0,k=b.length;h<
k;h++){var l=b[h],m=l.text,q=!1!==l.enable,n=Entry.Dom("li",{parent:g});l.divider?c="divider":(c=q?"menuAble":"menuDisable",Entry.Dom("span",{parent:n}).text(m),q&&l.callback&&function(b,c){b.mousedown(function(b){b.preventDefault();d.hide();c(b)})}(n,l.callback));n.addClass(c)}g.removeClass("entryRemove");this.visible=!0;this.position(e||Entry.mouseCoordinate)}};c.position=function(b){var c=this.dom;c.css({left:0,top:0});var e=c.width(),f=c.height(),g=$(window),h=g.width(),g=g.height();b.x+e>h&&
(b.x-=e+3);b.y+f>g&&(b.y-=f);c.css({left:b.x,top:b.y})};c.hide=function(){this.visible=!1;this.dom.empty();this.dom.addClass("entryRemove");this._className&&(this.dom.removeClass(this._className),delete this._className);this._hideEvent&&(Entry.documentMousedown.detach(this._hideEvent),this._hideEvent=null)};c.onContextmenu=function(b,c){b.on("touchstart mousemove mouseup contextmenu",function(b){switch(b.type){case "touchstart":b=Entry.Utils.convertMouseEvent(b);this.coordi={x:b.clientX,y:b.clientY};
this.longTouchEvent=setTimeout(function(){c(this.coordi);this.longTouchEvent=void 0}.bind(this),900);break;case "mousemove":if(!this.coordi)break;5<Math.sqrt(Math.pow(b.pageX-this.coordi.x,2)+Math.pow(b.pageY-this.coordi.y,2))&&this.longTouchEvent&&(clearTimeout(this.longTouchEvent),this.longTouchEvent=void 0);break;case "mouseup":this.longTouchEvent&&(clearTimeout(this.longTouchEvent),this.longTouchEvent=null);break;case "contextmenu":clearTimeout(this.longTouchEvent),this.longTouchEvent=void 0,
"contextmenu"===b.type&&c(this.coordi)}})}})(Entry.ContextMenu);Entry.Curtain={};
(function(){this._visible=!1;this._targetDom=this._doms=null;this._createDom=function(){var c={parent:$("body"),class:"entryCurtainElem entryRemove"};this._doms={top:Entry.Dom("div",c),right:Entry.Dom("div",c),bottom:Entry.Dom("div",c),left:Entry.Dom("div",c)};for(var b in this._doms)c=this._doms[b],c.addClass(b),c.bind("mousedown",function(b){b.stopPropagation()})};this.show=function(c){!this._doms&&this._createDom();c instanceof Array&&(c=Entry.getDom(c));this._targetDom=c=$(c);this.align();for(var b in this._doms)this._doms[b].removeClass("entryRemove");
this._visible=!0};this.align=function(){var c=this._targetDom;if(c){var b=$(window),d=b.width(),b=b.height(),e=this._doms;if(c.get(0)){var c=c.get(0).getBoundingClientRect(),f=Math.round(c.top),g=Math.round(c.right);e.top.css({height:f});e.right.css({top:f,left:g});e.bottom.css({top:c.bottom,right:d-g});e.left.css({top:f,right:d-g+c.width,bottom:b-c.bottom})}}};this.hide=function(){if(this._doms){for(var c in this._doms)this._doms[c].addClass("entryRemove");this._visible=!1;this._targetDom=null}};
this.isVisible=function(){return this._visible}}).call(Entry.Curtain);Entry.fuzzy={};
(function(c){var b={};c.fuzzy=b;b.simpleFilter=function(c,e){return e.filter(function(d){return b.test(c,d)})};b.test=function(c,e){return null!==b.match(c,e)};b.match=function(b,c,f){f=f||{};var d=0,e=[],k=c.length,l=0,m=0,q=f.pre||"",n=f.post||"",t=f.caseSensitive&&c||c.toLowerCase(),v;b=f.caseSensitive&&b||b.toLowerCase();for(var y=0;y<k;y++){v=c[y];if(t[y]===f.escapeLetter)break;t[y]===b[d]?(v=q+v+n,d+=1,m+=1+m):m=0;l+=m;e[e.length]=v}return d===b.length?{rendered:e.join(""),score:l}:null};b.filter=
function(c,e,f){f=f||{};return e.reduce(function(d,e,k,l){l=e;f.extract&&(l=f.extract(e));l=b.match(c,l,f);null!=l&&(d[d.length]={string:l.rendered,score:l.score,index:k,original:e});return d},[]).sort(function(b,c){var d=c.score-b.score;return d?d:b.index-c.index})}})(Entry.Utils);Entry.Loader={queueCount:0,totalCount:0,loaded:!1};Entry.Loader.addQueue=function(c){this.queueCount||Entry.dispatchEvent("loadStart");this.queueCount++;this.totalCount++};Entry.Loader.removeQueue=function(c){this.queueCount--;this.queueCount||(this.totalCount=0,this.handleLoad())};Entry.Loader.getLoadedPercent=function(){return 0===this.totalCount?1:this.queueCount/this.totalCount};Entry.Loader.isLoaded=function(){return!this.queueCount&&!this.totalCount};
Entry.Loader.handleLoad=function(){this.loaded||(this.loaded=!0,Entry.dispatchEvent("loadComplete"))};Entry.Restrictor=function(c){this._controller=c;this.startEvent=new Entry.Event(this);this.endEvent=new Entry.Event(this);this.currentTooltip=null};
(function(c){c.restrict=function(b){this._data=b;this.end();var c=b.content.concat().shift(),c=Entry.Command[c],e=c.dom;this.startEvent.notify();e instanceof Array&&(e=this.processDomQuery(e));b.tooltip||(b.tooltip={title:"\uc561\uc158",content:"\uc9c0\uc2dc \uc0ac\ud56d\uc744 \ub530\ub974\uc2dc\uc624"});if(c.restrict)this.currentTooltip=c.restrict(b,e,this.restrictEnd.bind(this),this);else if(this.currentTooltip=new Entry.Tooltip([{title:b.tooltip.title,content:b.tooltip.content,target:e}],{restrict:!0,
dimmed:!0,callBack:this.restrictEnd.bind(this)}),window.setTimeout(this.align.bind(this)),b.skip)return this.end()};c.end=function(){this.currentTooltip&&(this.currentTooltip.dispose(),this.currentTooltip=null)};c.restrictEnd=function(){this.endEvent.notify()};c.align=function(){this.currentTooltip&&this.currentTooltip.alignTooltips()};c.processDomQuery=function(b,c){c=c||this._data.content;c=c.concat();c.shift();b instanceof Array&&(b=b.map(function(b){return"&"===b[0]?c[Number(b.substr(1))][1]:
b}));return b};c.renderTooltip=function(){this.currentTooltip&&this.currentTooltip.render()};c.fadeOutTooltip=function(){this.currentTooltip&&this.currentTooltip.fadeOut()};c.fadeInTooltip=function(){this.currentTooltip&&this.currentTooltip.fadeIn()};c.isTooltipFaded=function(){return this.currentTooltip?this.currentTooltip.isFaded():!1};c.requestNextData=function(){if(this._controller)return this._controller.requestNextData()}})(Entry.Restrictor.prototype);Entry.Tooltip=function(c,b){this.init(c,b)};
(function(c){c.usedClasses="up down left right edge_up edge_down edge_left edge_right";c.init=function(b,c){this._rendered&&this.dispose();this.data=b instanceof Array?b:[b];this.opts=c||this.opts||{dimmed:!0,restirct:!1};this._rendered=!1;this._noDispose=!!this.opts.noDispose;this._faded=!1;this._tooltips=[];this._indicators=[];if(1<b.length||c.indicator)this.isIndicator=!0;!1!==c.render&&this.render();this._resizeEventFunc=Entry.Utils.debounce(function(){this.alignTooltips()}.bind(this),200);Entry.addEventListener("windowResized",
this._resizeEventFunc)};c.render=function(){if(!this._rendered){this.fadeIn();this._convertDoms();this.opts.dimmed&&this.renderBG();var b=this.data[0].targetDom;b&&"string"!==typeof b&&b.length&&(this.opts.restrict&&this.opts.dimmed&&Entry.Curtain.show(b.get(0)),this.renderTooltips(),this._rendered=!0,this.opts.restrict&&this.restrictAction())}};c._convertDoms=function(){this.data.map(function(b){var c=b.target;b.target instanceof Array&&(c=Entry.getDom(b.target));c=$(c);c.length&&(b.targetDom=c)})};
c.renderBG=function(){this.opts.restrict?this._bg=Entry.Dom("div",{classes:[],parent:$(document.body)}):(this._bg=Entry.Dom("div",{classes:["entryDimmed","entryTooltipBG"],parent:$(document.body)}),this._bg.bindOnClick(this.dispose.bind(this)))};c.renderTooltips=function(){this.data.map(this._renderTooltip.bind(this))};c.alignTooltips=function(){this._rendered&&(this.data.map(this._alignTooltip.bind(this)),this.opts.dimmed&&Entry.Curtain.align())};c._renderTooltip=function(b){if(b.content){var c=
Entry.Dom("div",{classes:["entryTooltipWrapper"],parent:$(document.body)}),e=Entry.Dom("div",{classes:["entryTooltip",b.direction,b.style],parent:c});this.isIndicator&&(b.indicator=this.renderIndicator());e.bind("mousedown",function(b){b.stopPropagation()});e.html(b.content);this._tooltips.push(c);b.wrapper=c;b.dom=e;this._alignTooltip(b)}};c._alignTooltip=function(b){var c;c=b.targetDom instanceof $?b.targetDom.get(0).getBoundingClientRect():b.targetDom.getBoundingClientRect();var e=b.dom[0].getBoundingClientRect(),
f=document.body.clientWidth,g=document.body.clientHeight;this.isIndicator&&b.indicator.css({left:c.left+c.width/2,top:c.top+c.height/2});450<e.width?b.dom.addClass("shrink"):b.dom.removeClass("shrink");var h=b.direction;if(!h){var k=c.left-e.width,l=f-c.left-c.width-e.width,h="left";k<l&&(k=l,h="right");l=c.top-e.height;k<l&&(k=l,h="up");l=g-c.top-c.height-e.height;k<l&&(h="down")}b.dom.removeClass(this.usedClasses).addClass(h);var k={top:c.top,left:c.left},m;switch(h){case "down":k.top+=c.height;
case "up":k.left+=c.width/2;k.left<e.width/2&&(m="edge_left");f-k.left<e.width/2&&(m="edge_right");break;case "right":k.left+=c.width;case "left":k.top+=c.height/2,k.top<e.height/2&&(m="edge_up"),g-k.top<e.height/2&&(m="edge_down")}m&&b.dom.addClass(m);b.wrapper.css(k)};c.renderIndicator=function(b,c){b=Entry.Dom("div",{classes:["entryTooltipIndicator"],parent:$(document.body)});b.html("<div></div><div></div><div></div>");this._indicators.push(b);return b};c.dispose=function(b){this._bg&&this._bg.remove();
this.opts.restrict&&(Entry.Utils.allowAction(),this.opts.dimmed&&Entry.Curtain.hide());for(;this._tooltips.length;)this._tooltips.pop().remove();for(;this._indicators.length;)this._indicators.pop().remove();this.opts.callBack&&this.opts.callBack.call(this,b);Entry.removeEventListener("windowResized",this._resizeEventFunc)};c.restrictAction=function(){var b=this.data.map(function(b){return b.targetDom});this._noDispose&&this.opts.callBack&&this.opts.callBack.call(this);Entry.Utils.restrictAction(b,
this.dispose.bind(this),this._noDispose)};c.fadeOut=function(){$(document.body).addClass("hideTooltip");this._faded=!0};c.fadeIn=function(){$(document.body).removeClass("hideTooltip");this._faded=!1};c.isFaded=function(){return this._faded}})(Entry.Tooltip.prototype);Entry.Variable=function(c){Entry.assert("string"==typeof c.name,"Variable name must be given");this.name_=c.name;this.id_=c.id?c.id:Entry.generateHash();this.type=c.variableType?c.variableType:"variable";this.object_=c.object||null;this.isCloud_=c.isCloud||!1;this._valueWidth=this._nameWidth=null;var b=Entry.parseNumber(c.value);this.value_="number"==typeof b?b:c.value?c.value:0;"slide"==this.type?(this.setMinValue(c.minValue),this.setMaxValue(c.maxValue)):"list"==this.type&&(this.array_=c.array?
c.array:[]);c.isClone||(this.visible_=c.visible||"boolean"==typeof c.visible?c.visible:!0,this.x_=c.x?c.x:null,this.y_=c.y?c.y:null,"list"==this.type&&(this.width_=c.width?c.width:100,this.height_=c.height?c.height:120,this.scrollPosition=0),this.BORDER=6,this.FONT="10pt NanumGothic");Entry.addEventListener("workspaceChangeMode",this.updateView.bind(this))};
Entry.Variable.prototype.generateView=function(c){var b=this.type;if("variable"==b||"timer"==b||"answer"==b)this.view_=new createjs.Container,this.rect_=new createjs.Shape,this.view_.addChild(this.rect_),this.view_.variable=this,this.wrapper_=new createjs.Shape,this.view_.addChild(this.wrapper_),this.textView_=new createjs.Text("asdf",this.FONT,"#000000"),this.textView_.textBaseline="alphabetic",this.textView_.x=4,this.textView_.y=1,this.view_.addChild(this.textView_),this.valueView_=new createjs.Text("asdf",
"10pt NanumGothic","#ffffff"),this.valueView_.textBaseline="alphabetic",b=Entry.variableContainer.variables_.length,this.getX()&&this.getY()?(this.setX(this.getX()),this.setY(this.getY())):(this.setX(-230+80*Math.floor(b/11)),this.setY(24*c+20-135-264*Math.floor(b/11))),this.view_.visible=this.visible_,this.view_.addChild(this.valueView_),this.view_.on("mousedown",function(b){"workspace"==Entry.type&&(this.offset={x:this.x-(.75*b.stageX-240),y:this.y-(.75*b.stageY-135)},this.cursor="move")}),this.view_.on("pressmove",
function(b){"workspace"==Entry.type&&(this.variable.setX(.75*b.stageX-240+this.offset.x),this.variable.setY(.75*b.stageY-135+this.offset.y),this.variable.updateView())});else if("slide"==b){var d=this;this.view_=new createjs.Container;this.rect_=new createjs.Shape;this.view_.addChild(this.rect_);this.view_.variable=this;this.wrapper_=new createjs.Shape;this.view_.addChild(this.wrapper_);this.textView_=new createjs.Text("name",this.FONT,"#000000");this.textView_.textBaseline="alphabetic";this.textView_.x=
4;this.textView_.y=1;this.view_.addChild(this.textView_);this.valueView_=new createjs.Text("value","10pt NanumGothic","#ffffff");this.valueView_.textBaseline="alphabetic";this.view_.on("mousedown",function(b){"workspace"==Entry.type&&(this.offset={x:this.x-(.75*b.stageX-240),y:this.y-(.75*b.stageY-135)})});this.view_.on("pressmove",function(b){"workspace"!=Entry.type||d.isAdjusting||(this.variable.setX(.75*b.stageX-240+this.offset.x),this.variable.setY(.75*b.stageY-135+this.offset.y),this.variable.updateView())});
this.view_.visible=this.visible_;this.view_.addChild(this.valueView_);b=this.textView_.getMeasuredWidth()+this.valueView_.getMeasuredWidth()+26;b=Math.max(b,90);this.maxWidth=b-20;this.slideBar_=new createjs.Shape;this.slideBar_.graphics.beginFill("#A0A1A1").s("#A0A1A1").ss(1).dr(10,10,this.maxWidth,1.5);this.view_.addChild(this.slideBar_);b=this.getSlidePosition(this.maxWidth);this.valueSetter_=new createjs.Shape;this.valueSetter_.graphics.beginFill("#1bafea").s("#A0A1A1").ss(1).dc(b,10.5,3);this.valueSetter_.cursor=
"pointer";this.valueSetter_.on("mousedown",function(b){Entry.engine.isState("run")&&(d.isAdjusting=!0,this.offsetX=-(this.x-.75*b.stageX+240))});this.valueSetter_.on("pressmove",function(b){if(Entry.engine.isState("run")){var c=this.offsetX;this.offsetX=-(this.x-.75*b.stageX+240);c!==this.offsetX&&(b=d.getX(),d.setSlideCommandX(b+10>this.offsetX?0:b+d.maxWidth+10>this.offsetX?this.offsetX-b:d.maxWidth+10))}});this.valueSetter_.on("pressup",function(b){d.isAdjusting=!1});this.view_.addChild(this.valueSetter_);
b=Entry.variableContainer.variables_.length;this.getX()&&this.getY()?(this.setX(this.getX()),this.setY(this.getY())):(this.setX(-230+80*Math.floor(b/11)),this.setY(24*c+20-135-264*Math.floor(b/11)))}else this.view_=new createjs.Container,this.rect_=new createjs.Shape,this.view_.addChild(this.rect_),this.view_.variable=this,this.titleView_=new createjs.Text("asdf",this.FONT,"#000"),this.titleView_.textBaseline="alphabetic",this.titleView_.textAlign="center",this.titleView_.width=this.width_-2*this.BORDER,
this.titleView_.y=this.BORDER+10,this.titleView_.x=this.width_/2,this.view_.addChild(this.titleView_),this.resizeHandle_=new createjs.Shape,this.resizeHandle_.graphics.f("#1bafea").ss(1,0,0).s("#1bafea").lt(0,-9).lt(-9,0).lt(0,0),this.view_.addChild(this.resizeHandle_),this.resizeHandle_.list=this,this.resizeHandle_.on("mouseover",function(b){this.cursor="nwse-resize"}),this.resizeHandle_.on("mousedown",function(b){this.list.isResizing=!0;this.offset={x:.75*b.stageX-this.list.getWidth(),y:.75*b.stageY-
this.list.getHeight()};this.parent.cursor="nwse-resize"}),this.resizeHandle_.on("pressmove",function(b){this.list.setWidth(.75*b.stageX-this.offset.x);this.list.setHeight(.75*b.stageY-this.offset.y);this.list.updateView()}),this.view_.on("mouseover",function(b){this.cursor="move"}),this.view_.on("mousedown",function(b){"workspace"!=Entry.type||this.variable.isResizing||(this.offset={x:this.x-(.75*b.stageX-240),y:this.y-(.75*b.stageY-135)},this.cursor="move")}),this.view_.on("pressup",function(b){this.cursor=
"initial";this.variable.isResizing=!1}),this.view_.on("pressmove",function(b){"workspace"!=Entry.type||this.variable.isResizing||(this.variable.setX(.75*b.stageX-240+this.offset.x),this.variable.setY(.75*b.stageY-135+this.offset.y),this.variable.updateView())}),this.elementView=new createjs.Container,b=new createjs.Text("asdf",this.FONT,"#000"),b.textBaseline="middle",b.y=5,this.elementView.addChild(b),this.elementView.indexView=b,b=new createjs.Shape,this.elementView.addChild(b),this.elementView.valueWrapper=
b,b=new createjs.Text("fdsa",this.FONT,"#eee"),b.x=24,b.y=6,b.textBaseline="middle",this.elementView.addChild(b),this.elementView.valueView=b,this.elementView.x=this.BORDER,this.scrollButton_=new createjs.Shape,this.scrollButton_.graphics.f("#aaa").rr(0,0,7,30,3.5),this.view_.addChild(this.scrollButton_),this.scrollButton_.y=23,this.scrollButton_.list=this,this.scrollButton_.on("mousedown",function(b){this.list.isResizing=!0;this.cursor="pointer";this.offsetY=!Entry.Utils.isNumber(this.offsetY)||
0>this.offsetY?b.rawY/2:this.offsetY}),this.scrollButton_.on("pressmove",function(b){void 0===this.moveAmount?(this.y=b.target.y,this.moveAmount=!0):this.y=b.rawY/2-this.offsetY+this.list.height_/100*23;23>this.y&&(this.y=23);this.y>this.list.getHeight()-40&&(this.y=this.list.getHeight()-40);this.list.updateView()}),this.scrollButton_.on("pressup",function(b){this.moveAmount=void 0}),this.getX()&&this.getY()?(this.setX(this.getX()),this.setY(this.getY())):(b=Entry.variableContainer.lists_.length,
this.setX(110*-Math.floor(b/6)+120),this.setY(24*c+20-135-145*Math.floor(b/6)));this.setVisible(this.isVisible());this.updateView();Entry.stage.loadVariable(this)};
Entry.Variable.prototype.updateView=function(){if(this.view_){if(this.isVisible())if("variable"==this.type){this.view_.x=this.getX();this.view_.y=this.getY();var c=this.textView_.text,b;b=this.object_?(b=Entry.container.getObject(this.object_))?b.name+":"+this.getName():this.getName():this.getName();c!==b&&(this.textView_.text=b,this._nameWidth=null);null===this._nameWidth&&(this._nameWidth=this.textView_.getMeasuredWidth());this.valueView_.x=this._nameWidth+14;this.valueView_.y=1;this.isNumber()?
this.valueView_.text=Number(this.getValue()).toFixed(2).replace(".00",""):this.valueView_.text=this.getValue();null===this._valueWidth&&(this._valueWidth=this.valueView_.getMeasuredWidth());this.rect_.graphics.clear().f("#ffffff").ss(1,2,0).s("#A0A1A1").rc(0,-14,this._nameWidth+this._valueWidth+26,20,4,4,4,4);this.wrapper_.graphics.clear().f("#1bafea").ss(1,2,0).s("#1bafea").rc(this._nameWidth+7,-11,this._valueWidth+15,14,7,7,7,7)}else if("slide"==this.type)this.view_.x=this.getX(),this.view_.y=this.getY(),
c=this.textView_.text,b=this.object_?(b=Entry.container.getObject(this.object_))?b.name+":"+this.getName():this.getName():this.getName(),c!==b&&(this.textView_.text=b,this._nameWidth=null),null===this._nameWidth&&(this._nameWidth=this.textView_.getMeasuredWidth()),this.valueView_.x=this._nameWidth+14,this.valueView_.y=1,this.valueView_.text=Number(this.getValue()).toFixed(2).replace(".00",""),null===this._valueWidth&&(this._valueWidth=this.valueView_.getMeasuredWidth()),c=this._nameWidth+this._valueWidth+
26,c=Math.max(c,90),this.rect_.graphics.clear().f("#ffffff").ss(1,2,0).s("#A0A1A1").rc(0,-14,c,33,4,4,4,4),this.wrapper_.graphics.clear().f("#1bafea").ss(1,2,0).s("#1bafea").rc(this._nameWidth+7,-11,this._valueWidth+15,14,7,7,7,7),c=this._nameWidth+this._valueWidth+26,c=Math.max(c,90),this.maxWidth=c-20,this.slideBar_.graphics.clear().beginFill("#A0A1A1").s("#A0A1A1").ss(1).dr(10,10,this.maxWidth,1.5),c=this.getSlidePosition(this.maxWidth),this.valueSetter_.graphics.clear().beginFill("#1bafea").s("#A0A1A1").ss(1).dc(c,
10.5,3);else if("list"==this.type){this.view_.x=this.getX();this.view_.y=this.getY();this.resizeHandle_.x=this.width_-2;this.resizeHandle_.y=this.height_-2;c=this.getName();this.object_&&(b=Entry.container.getObject(this.object_))&&(c=b.name+":"+c);this.titleView_.text=c;if(this.titleView_.getMeasuredWidth()>this.width_)for(c+="..";this.titleView_.getMeasuredWidth()>this.width_;)c=c.substr(0,c.length-3)+"..",this.titleView_.text=c;this.titleView_.x=this.width_/2;for(this.rect_.graphics.clear().f("#ffffff").ss(1,
2,0).s("#A0A1A1").rect(0,0,this.width_,this.height_);this.view_.children[4];)this.view_.removeChild(this.view_.children[4]);c=Math.floor((this.getHeight()-20)/20);c<this.array_.length?(this.scrollButton_.y>this.getHeight()-40&&(this.scrollButton_.y=this.getHeight()-40),this.elementView.valueWrapper.graphics.clear().f("#1bafea").rr(20,-2,this.getWidth()-20-10-2*this.BORDER,17,2),this.scrollButton_.visible=!0,this.scrollButton_.x=this.getWidth()-12,this.scrollPosition=Math.floor((this.scrollButton_.y-
23)/(this.getHeight()-23-40)*(this.array_.length-c))):(this.elementView.valueWrapper.graphics.clear().f("#1bafea").rr(20,-2,this.getWidth()-20-2*this.BORDER,17,2),this.scrollButton_.visible=!1,this.scrollPosition=0);for(b=this.scrollPosition;b<this.scrollPosition+c&&b<this.array_.length;b++){Entry.getMainWS()&&Entry.getMainWS().getMode()===Entry.Workspace.MODE_VIMBOARD?this.elementView.indexView.text=b:this.elementView.indexView.text=b+1;var d=String(this.array_[b].data),e=Math.floor((this.getWidth()-
50)/7),d=Entry.cutStringByLength(d,e),d=String(this.array_[b].data).length>d.length?d+"..":d;this.elementView.valueView.text=d;d=this.elementView.clone(!0);d.y=20*(b-this.scrollPosition)+23;this.view_.addChild(d)}}else"answer"==this.type?(this.view_.x=this.getX(),this.view_.y=this.getY(),this.textView_.text=this.getName(),this.valueView_.y=1,this.isNumber()?(c=Number(this.getValue()),parseInt(this.getValue(),10)==this.getValue()?this.valueView_.text=c:this.valueView_.text=c.toFixed(1).replace(".00",
"")):this.valueView_.text=this.getValue(),null===this._nameWidth&&(this._nameWidth=this.textView_.getMeasuredWidth()),null===this._valueWidth&&(this._valueWidth=this.valueView_.getMeasuredWidth()),this.valueView_.x=this._nameWidth+14,this.rect_.graphics.clear().f("#ffffff").ss(1,2,0).s("#A0A1A1").rc(0,-14,this._nameWidth+this._valueWidth+26,20,4,4,4,4),this.wrapper_.graphics.clear().f("#E457DC").ss(1,2,0).s("#E457DC").rc(this._nameWidth+7,-11,this._valueWidth+15,14,7,7,7,7)):(this.view_.x=this.getX(),
this.view_.y=this.getY(),this.textView_.text=this.getName(),null===this._nameWidth&&(this._nameWidth=this.textView_.getMeasuredWidth()),this.valueView_.x=this._nameWidth+14,this.valueView_.y=1,this.isNumber()?this.valueView_.text=this.getValue().toFixed(1).replace(".00",""):this.valueView_.text=this.getValue(),null===this._valueWidth&&(this._valueWidth=this.valueView_.getMeasuredWidth()),this.rect_.graphics.clear().f("#ffffff").ss(1,2,0).s("#A0A1A1").rc(0,-14,this._nameWidth+this._valueWidth+26,20,
4,4,4,4),this.wrapper_.graphics.clear().f("#ffbb14").ss(1,2,0).s("orange").rc(this._nameWidth+7,-11,this._valueWidth+15,14,7,7,7,7));Entry.requestUpdate=!0}};Entry.Variable.prototype.getName=function(){return this.name_};Entry.Variable.prototype.setName=function(c){Entry.assert("string"==typeof c,"Variable name must be string");this.name_=c;this._nameWidth=null;this.updateView();Entry.requestUpdateTwice=!0};Entry.Variable.prototype.getId=function(){return this.id_};
Entry.Variable.prototype.getValue=function(){return"slide"===this.type&&this.isNumber()?Number(this.value_):this.value_};Entry.Variable.prototype.isNumber=function(){return Entry.Utils.isNumber(this.value_)};
Entry.Variable.prototype.setValue=function(c){"slide"!=this.type?this.value_=c:(c=Number(c),this.value_=c<this.minValue_?this.minValue_:c>this.maxValue_?this.maxValue_:c);this.isCloud_&&Entry.variableContainer.updateCloudVariables();this._valueWidth=null;this.updateView();Entry.requestUpdateTwice=!0};Entry.Variable.prototype.isVisible=function(){return this.visible_};
Entry.Variable.prototype.setVisible=function(c){Entry.assert("boolean"==typeof c,"Variable visible state must be boolean");this.visible!==c&&(this.visible_=this.view_.visible=c,this.updateView())};Entry.Variable.prototype.setX=function(c){this.x_=c;this.updateView()};Entry.Variable.prototype.getX=function(){return this.x_};Entry.Variable.prototype.setY=function(c){this.y_=c;this.updateView()};Entry.Variable.prototype.getY=function(){return this.y_};
Entry.Variable.prototype.setWidth=function(c){this.width_=100>c?100:c;this.updateView()};Entry.Variable.prototype.getWidth=function(){return this.width_};Entry.Variable.prototype.isInList=function(c,b){this.getX();this.getY()};Entry.Variable.prototype.setHeight=function(c){this.height_=100>c?100:c;this.updateView()};Entry.Variable.prototype.getHeight=function(){return this.height_};Entry.Variable.prototype.takeSnapshot=function(){this.snapshot_=this.toJSON()};
Entry.Variable.prototype.loadSnapshot=function(){this.snapshot_&&this.syncModel_(this.snapshot_);delete this.snapshot_};Entry.Variable.prototype.syncModel_=function(c){this.setX(c.x);this.setY(c.y);this.setVisible(c.visible);this.isCloud_||this.setValue(c.value);this.setName(c.name);this.isCloud_=c.isCloud;"list"==this.type&&(this.isCloud_||(this.array_=c.array),this.setWidth(c.width),this.setHeight(c.height))};
Entry.Variable.prototype.toJSON=function(){var c={};c.name=this.name_;c.id=this.id_;c.visible=this.visible_;c.value=this.value_;c.variableType=this.type;"list"==this.type?(c.width=this.getWidth(),c.height=this.getHeight(),c.array=JSON.parse(JSON.stringify(this.array_))):"slide"==this.type&&(c.minValue=this.minValue_,c.maxValue=this.maxValue_);c.isCloud=this.isCloud_;c.object=this.object_;c.x=this.x_;c.y=this.y_;return c};Entry.Variable.prototype.remove=function(){Entry.stage.removeVariable(this)};
Entry.Variable.prototype.clone=function(){var c=this.toJSON();c.isClone=!0;return c=new Entry.Variable(c)};Entry.Variable.prototype.getType=function(){return this.type};Entry.Variable.prototype.setType=function(c){this.type=c};Entry.Variable.prototype.getSlidePosition=function(c){var b=this.minValue_;return Math.abs(this.value_-b)/Math.abs(this.maxValue_-b)*c+10};
Entry.Variable.prototype.setSlideCommandX=function(c){var b=this.valueSetter_.graphics.command;c=Math.max("undefined"==typeof c?10:c,10);c=Math.min(this.maxWidth+10,c);b.x=c;this.updateSlideValueByView()};
Entry.Variable.prototype.updateSlideValueByView=function(){var c=Math.max(this.valueSetter_.graphics.command.x-10,0)/this.maxWidth;0>c&&(c=0);1<c&&(c=1);var b=parseFloat(this.minValue_),d=parseFloat(this.maxValue_),c=(b+Number(Math.abs(d-b)*c)).toFixed(2),c=parseFloat(c);c<b?c=this.minValue_:c>d&&(c=this.maxValue_);this.isFloatPoint()||(c=Math.round(c));this.setValue(c)};Entry.Variable.prototype.getMinValue=function(){return this.minValue_};
Entry.Variable.prototype.setMinValue=function(c){this.minValue_=c=c||0;this.value_<c&&this.setValue(c);this.updateView();this.isMinFloat=Entry.isFloat(this.minValue_)};Entry.Variable.prototype.getMaxValue=function(){return this.maxValue_};Entry.Variable.prototype.setMaxValue=function(c){this.maxValue_=c=c||100;this.value_>c&&(this.value_=c);this.updateView();this.isMaxFloat=Entry.isFloat(this.maxValue_)};Entry.Variable.prototype.isFloatPoint=function(){return this.isMaxFloat||this.isMinFloat};Entry.VariableContainer=function(){this.variables_=[];this.messages_=[];this.lists_=[];this.functions_={};this.viewMode_="all";this.selected=null;this.variableAddPanel={isOpen:!1,info:{object:null,isCloud:!1}};this.listAddPanel={isOpen:!1,info:{object:null,isCloud:!1}};this.selectedVariable=null;this._variableRefs=[];this._messageRefs=[];this._functionRefs=[];Entry.addEventListener("workspaceChangeMode",this.updateList.bind(this))};
(function(c){c.createDom=function(b){var c=this;this.filterElements={};this.view_=b;var e=Entry.createElement("table");e.addClass("entryVariableSelectorWorkspace");this.view_.appendChild(e);var f=Entry.createElement("tr");e.appendChild(f);var g=this.createSelectButton("all");this.filterElements.all=g;g.setAttribute("rowspan","2");g.addClass("selected","allButton");f.appendChild(g);this.filterElements.variable=this.createSelectButton("variable",Entry.variableEnable);f.appendChild(this.filterElements.variable);
this.filterElements.message=this.createSelectButton("message",Entry.messageEnable);f.appendChild(this.filterElements.message);f=Entry.createElement("tr");this.filterElements.list=this.createSelectButton("list",Entry.listEnable);f.appendChild(this.filterElements.list);this.filterElements.func=this.createSelectButton("func",Entry.functionEnable);f.appendChild(this.filterElements.func);e.appendChild(f);e=Entry.createElement("ul");e.addClass("entryVariableListWorkspace");this.view_.appendChild(e);this.listView_=
e;e=Entry.createElement("li");e.addClass("entryVariableAddWorkspace entryVariableListElementWorkspace");e.innerHTML="+ "+Lang.Workspace.variable_add;var h=this;this.variableAddButton_=e;e.bindOnClick(function(b){Entry.do("variableContainerClickVariableAddButton")});this.generateVariableAddView();this.generateListAddView();this.generateVariableSplitterView();this.generateVariableSettingView();this.generateListSettingView();e=Entry.createElement("li");e.addClass("entryVariableAddWorkspace entryVariableListElementWorkspace");
e.innerHTML="+ "+Lang.Workspace.message_create;this.messageAddButton_=e;e.bindOnClick(function(b){c.addMessage({name:Lang.Workspace.message+" "+(c.messages_.length+1)})});e=Entry.createElement("li");e.addClass("entryVariableAddWorkspace entryVariableListElementWorkspace");e.innerHTML="+ "+Lang.Workspace.list_create;this.listAddButton_=e;e.bindOnClick(function(b){b=h.listAddPanel;var d=b.view.name.value.trim();b.isOpen?d&&0!==d.length?c.addList():(b.view.addClass("entryRemove"),b.isOpen=!1):(b.view.removeClass("entryRemove"),
b.view.name.focus(),b.isOpen=!0)});e=Entry.createElement("li");e.addClass("entryVariableAddWorkspace entryVariableListElementWorkspace");e.innerHTML="+ "+Lang.Workspace.function_add;this.functionAddButton_=e;e.bindOnClick(function(b){b=Entry.playground;var d=c._getBlockMenu();b.changeViewMode("code");"func"!=d.lastSelector&&d.selectMenu("func");c.createFunction()});return b};c.createSelectButton=function(b,c){void 0===c&&(c=!0);var d=Entry.createElement("td");d.addClass("entryVariableSelectButtonWorkspace",
b);d.innerHTML=Lang.Workspace[b];c?d.bindOnClick(function(c){Entry.do("variableContainerSelectFilter",b,this.viewMode_)}):d.addClass("disable");return d};c.selectFilter=function(b){for(var c=this.view_.getElementsByTagName("td"),e=0;e<c.length;e++)c[e].removeClass("selected"),c[e].hasClass(b)&&c[e].addClass("selected");this.viewMode_=b;this.select();this.updateList()};c.updateVariableAddView=function(b){b="variable"==(b?b:"variable")?this.variableAddPanel:this.listAddPanel;var c=b.info,e=b.view;b.view.addClass("entryRemove");
e.cloudCheck.removeClass("entryVariableAddChecked");e.localCheck.removeClass("entryVariableAddChecked");e.globalCheck.removeClass("entryVariableAddChecked");e.cloudWrapper.removeClass("entryVariableAddSpaceUnCheckedWorkspace");c.isCloud&&e.cloudCheck.addClass("entryVariableAddChecked");b.isOpen&&(e.removeClass("entryRemove"),e.name.focus());c.object?(e.localCheck.addClass("entryVariableAddChecked"),e.cloudWrapper.addClass("entryVariableAddSpaceUnCheckedWorkspace")):e.globalCheck.addClass("entryVariableAddChecked")};
c.select=function(b){b=this.selected==b?null:b;this.selected&&(this.selected.listElement.removeClass("selected"),this.selected.callerListElement&&(this.listView_.removeChild(this.selected.callerListElement),delete this.selected.callerListElement),this.selected=null);b&&(b.listElement.addClass("selected"),this.selected=b,b instanceof Entry.Variable?(this.renderVariableReference(b),b.object_&&Entry.container.selectObject(b.object_,!0)):b instanceof Entry.Func?this.renderFunctionReference(b):this.renderMessageReference(b))};
c.getMessage=function(b){return this.messages_.filter(function(c){return c.id===b})[0]};c.renderMessageReference=function(b){for(var c=this,e=this._messageRefs,f=b.id,g=[],h=0;h<e.length;h++)-1<e[h].block.params.indexOf(f)&&g.push(e[h]);e=Entry.createElement("ul");e.addClass("entryVariableListCallerListWorkspace");for(h in g){var f=g[h],k=Entry.createElement("li");k.addClass("entryVariableListCallerWorkspace");!f.object.thumbnailView_&&f.object.generateView();k.appendChild(f.object.thumbnailView_.cloneNode());
var l=Entry.createElement("div");l.addClass("entryVariableListCallerNameWorkspace");l.innerHTML=f.object.name+" : "+Lang.Blocks["START_"+f.block.type];k.appendChild(l);k.caller=f;k.message=b;k.bindOnClick(function(b){Entry.playground.object!=this.caller.object&&(Entry.container.selectObject(),Entry.container.selectObject(this.caller.object.id,!0),c.select(null),c.select(this.message));Entry.playground.toggleOnVariableView();Entry.playground.changeViewMode("variable")});e.appendChild(k)}0===g.length&&
(k=Entry.createElement("li"),k.addClass("entryVariableListCallerWorkspace entryVariableListCallerNoneWorkspace"),k.innerHTML=Lang.Workspace.no_use,e.appendChild(k));b.callerListElement=e;this.listView_.insertBefore(e,b.listElement);this.listView_.insertBefore(b.listElement,e)};c.renderVariableReference=function(b){for(var c=this,e=this._variableRefs,f=b.id_,g=[],h=0;h<e.length;h++)-1<e[h].block.params.indexOf(f)&&g.push(e[h]);e=Entry.createElement("ul");e.addClass("entryVariableListCallerListWorkspace");
for(h in g){var f=g[h],k=Entry.createElement("li");k.addClass("entryVariableListCallerWorkspace");!f.object.thumbnailView_&&f.object.generateView();k.appendChild(f.object.thumbnailView_.cloneNode());var l=Entry.createElement("div");l.addClass("entryVariableListCallerNameWorkspace");l.innerHTML=f.object.name+" : "+Lang.Blocks["VARIABLE_"+f.block.type];k.appendChild(l);k.caller=f;k.variable=b;k.bindOnClick(function(b){Entry.playground.object!=this.caller.object&&(Entry.container.selectObject(),Entry.container.selectObject(this.caller.object.id,
!0),c.select(null));b=this.caller;b=b.funcBlock||b.block;b.view.getBoard().activateBlock(b);Entry.playground.toggleOnVariableView();Entry.playground.changeViewMode("variable")});e.appendChild(k)}0===g.length&&(k=Entry.createElement("li"),k.addClass("entryVariableListCallerWorkspace entryVariableListCallerNoneWorkspace"),k.innerHTML=Lang.Workspace.no_use,e.appendChild(k));b.callerListElement=e;this.listView_.insertBefore(e,b.listElement);this.listView_.insertBefore(b.listElement,e)};c.renderFunctionReference=
function(b){for(var c=this,e=this._functionRefs,f=[],g=0;g<e.length;g++)f.push(e[g]);e=Entry.createElement("ul");e.addClass("entryVariableListCallerListWorkspace");for(g in f){var h=f[g],k=Entry.createElement("li");k.addClass("entryVariableListCallerWorkspace");!h.object.thumbnailView_&&h.object.generateView();k.appendChild(h.object.thumbnailView_.cloneNode());var l=Entry.createElement("div");l.addClass("entryVariableListCallerNameWorkspace");l.innerHTML=h.object.name;k.appendChild(l);k.caller=h;
k.bindOnClick(function(d){Entry.playground.object!=this.caller.object&&(Entry.container.selectObject(),Entry.container.selectObject(this.caller.object.id,!0),c.select(null),c.select(b));d=this.caller.block;Entry.playground.toggleOnVariableView();d.view.getBoard().activateBlock(d);Entry.playground.changeViewMode("variable")});e.appendChild(k)}0===f.length&&(k=Entry.createElement("li"),k.addClass("entryVariableListCallerWorkspace entryVariableListCallerNoneWorkspace"),k.innerHTML=Lang.Workspace.no_use,
e.appendChild(k));b.callerListElement=e;this.listView_.insertBefore(e,b.listElement);this.listView_.insertBefore(b.listElement,e)};c.updateList=function(){var b=Entry.playground;if(this.listView_&&(!b||"variable"===b.getViewMode())){this.variableSettingView.addClass("entryRemove");this.listSettingView.addClass("entryRemove");var c=this._isPythonMode();for(c?this.listView_.addClass("entryVariableContainerTextMode"):this.listView_.removeClass("entryVariableContainerTextMode");this.listView_.firstChild;)this.listView_.removeChild(this.listView_.lastChild);
var e=this.viewMode_,b=[];if("all"==e||"message"==e){"message"==e&&this.listView_.appendChild(this.messageAddButton_);for(var f in this.messages_){var g=this.messages_[f];b.push(g);!g.listElement&&this.createMessageView(g);var h=g.listElement;this.listView_.appendChild(h);g.callerListElement&&this.listView_.appendChild(g.callerListElement)}}if("all"==e||"variable"==e)if("variable"==e){h=this.variableAddPanel.info;h.object&&!Entry.playground.object&&(h.object=null);this.listView_.appendChild(this.variableAddButton_);
this.listView_.appendChild(this.variableAddPanel.view);this.variableSplitters.top.innerHTML=Lang.Workspace.Variable_used_at_all_objects;this.listView_.appendChild(this.variableSplitters.top);for(f in this.variables_)g=this.variables_[f],g.object_||(b.push(g),!g.listElement&&this.createVariableView(g),h=g.listElement,this.listView_.appendChild(h),g.callerListElement&&this.listView_.appendChild(g.callerListElement));this.variableSplitters.bottom.innerHTML=Lang.Workspace.Variable_used_at_special_object;
this.listView_.appendChild(this.variableSplitters.bottom);for(f in this.variables_)g=this.variables_[f],g.object_&&(b.push(g),!g.listElement&&this.createVariableView(g),h=g.listElement,this.listView_.appendChild(h),g.callerListElement&&this.listView_.appendChild(g.callerListElement));this.updateVariableAddView("variable")}else for(f in this.variables_)g=this.variables_[f],b.push(g),!g.listElement&&this.createVariableView(g),h=g.listElement,this.listView_.appendChild(h),g.callerListElement&&this.listView_.appendChild(g.callerListElement);
if("all"==e||"list"==e)if("list"==e){h=this.listAddPanel.info;h.object&&!Entry.playground.object&&(h.object=null);this.listView_.appendChild(this.listAddButton_);this.listView_.appendChild(this.listAddPanel.view);this.variableSplitters.top.innerHTML=Lang.Workspace.List_used_all_objects;this.listView_.appendChild(this.variableSplitters.top);this.updateVariableAddView("list");for(f in this.lists_)g=this.lists_[f],g.object_||(b.push(g),!g.listElement&&this.createListView(g),h=g.listElement,this.listView_.appendChild(h),
g.callerListElement&&this.listView_.appendChild(g.callerListElement));this.variableSplitters.bottom.innerHTML=Lang.Workspace.list_used_specific_objects;this.listView_.appendChild(this.variableSplitters.bottom);for(f in this.lists_)g=this.lists_[f],g.object_&&(b.push(g),!g.listElement&&this.createListView(g),h=g.listElement,this.listView_.appendChild(h),g.callerListElement&&this.listView_.appendChild(g.callerListElement));this.updateVariableAddView("variable")}else for(f in this.lists_)g=this.lists_[f],
b.push(g),!g.listElement&&this.createListView(g),h=g.listElement,this.listView_.appendChild(h),g.callerListElement&&this.listView_.appendChild(g.callerListElement);if("all"==e||"func"==e)for(f in"func"==e&&(e=Entry.Workspace.MODE_BOARD,Entry.getMainWS()&&(e=Entry.getMainWS().getMode()),e===Entry.Workspace.MODE_OVERLAYBOARD||c?this.functionAddButton_.addClass("disable"):this.functionAddButton_.removeClass("disable"),this.listView_.appendChild(this.functionAddButton_)),this.functions_)c=this.functions_[f],
b.push(c),!c.funcElement&&this.createFunctionView(c),h=c.listElement,this.listView_.appendChild(h),c.callerListElement&&this.listView_.appendChild(c.callerListElement);this.listView_.appendChild(this.variableSettingView);this.listView_.appendChild(this.listSettingView)}};c.setMessages=function(b){for(var c in b){var e=b[c];e.id||(e.id=Entry.generateHash());this.messages_.push(e)}Entry.playground.reloadPlayground()};c.setVariables=function(b){for(var c in b){var e=new Entry.Variable(b[c]),f=e.getType();
"variable"==f||"slide"==f?(e.generateView(this.variables_.length),this.variables_.push(e)):"list"==f?(e.generateView(this.lists_.length),this.lists_.push(e)):"timer"==f?this.generateTimer(e):"answer"==f&&this.generateAnswer(e)}Entry.isEmpty(Entry.engine.projectTimer)&&Entry.variableContainer.generateTimer();Entry.isEmpty(Entry.container.inputValue)&&Entry.variableContainer.generateAnswer();Entry.playground.reloadPlayground()};c.setFunctions=function(b){for(var c in b){var e=new Entry.Func(b[c]);e.generateBlock();
this.functions_[e.id]=e}};c.getFunction=function(b){return this.functions_[b]};c.getVariable=function(b,c){var d=Entry.findObjsByKey(this.variables_,"id_",b)[0];c&&c.isClone&&d.object_&&(d=Entry.findObjsByKey(c.variables,"id_",b)[0]);return d};c.getVariableByName=function(b){for(var c=0;c<this.variables_.length;c++){var e=this.variables_[c];if(e.getName()===b)return e}};c.getList=function(b,c){var d=Entry.findObjsByKey(this.lists_,"id_",b)[0];c&&c.isClone&&d.object_&&(d=Entry.findObjsByKey(c.lists,
"id_",b)[0]);return d};c.createFunction=function(){if(!Entry.Func.isEdit){var b=new Entry.Func;Entry.Func.edit(b)}};c.addFunction=function(b){};c.removeFunction=function(b){var c=b.id;b=this.functions_;b[c].destroy();delete b[c];c="func_"+c;Entry.container.removeFuncBlocks(c);for(var e in b)b[e].content.removeBlocksByType(c);this.updateList()};c.checkListPosition=function(b,c){var d=b.x_+b.width_,f=-b.y_,g=-b.y_+-b.height_;return c.x>b.x_&&c.x<d&&c.y<f&&c.y>g?!0:!1};c.getListById=function(b){var c=
this.lists_,e=[];if(0<c.length){for(var f=0;f<c.length;f++)this.checkListPosition(c[f],b)&&e.push(c[f]);return e}return!1};c.getListByName=function(b){var c=this.lists_,c=c.filter(function(c){return c.getName()===b});return c[0]};c.editFunction=function(b,c){};c.saveFunction=function(b){var c=Entry.getMainWS();if(c&&c.overlayModefrom==Entry.Workspace.MODE_VIMBOARD&&b&&b.description&&(c=b.description.substring(1,b.description.length-1),alert_msg=Entry.TextCodingUtil.isNameIncludeSpace(c,"function"))){alert(alert_msg);
Entry.Func.cancelEdit();return}this.functions_[b.id]||(this.functions_[b.id]=b,this.createFunctionView(b));b.listElement.nameField.innerHTML=b.description;this.updateList()};c.createFunctionView=function(b){var c=this;if(this.view_){var e=Entry.createElement("li");e.addClass("entryVariableListElementWorkspace entryFunctionElementWorkspace function");e.bindOnClick(function(d){d.stopPropagation();c.select(b)});var f=Entry.createElement("button");f.addClass("entryVariableListElementDeleteWorkspace");
f.bindOnClick(function(d){d.stopPropagation();confirm(Lang.Workspace.will_you_delete_function)&&(c.removeFunction(b),c.selected=null)});var g=Entry.createElement("button");g.addClass("entryVariableListElementEditWorkspace notForTextMode");var h=this._getBlockMenu();g.bindOnClick(function(c){c.stopPropagation();if(c=Entry.playground)c.changeViewMode("code"),"func"!=h.lastSelector&&h.selectMenu("func");Entry.Func.edit(b)});var k=Entry.createElement("div");k.addClass("entryVariableFunctionElementNameWorkspace");
k.innerHTML=b.description;e.nameField=k;e.appendChild(k);e.appendChild(g);e.appendChild(f);b.listElement=e}};c.checkAllVariableName=function(b,c){c=this[c];for(var d=0;d<c.length;d++)if(c[d].name_==b)return!0;return!1};c.addVariable=function(b){if(Entry.isTextMode){var c=this.variableAddPanel;if(alert_msg=Entry.TextCodingUtil.isNameIncludeSpace(c.view.name.value,"variable")){alert(alert_msg);this.variableAddPanel.view.addClass("entryRemove");this.resetVariableAddPanel("variable");return}}c=this.variableAddPanel;
if(!b){b=c.view.name.value.trim();b&&0!==b.length||(b=Lang.Workspace.variable);b.length>this._maxNameLength&&(b=this._truncName(b,"variable"));b=this.checkAllVariableName(b,"variables_")?Entry.getOrderedName(b,this.variables_,"name_"):b;var e=c.info;b={name:b,isCloud:e.isCloud,object:e.object,variableType:"variable"}}c.view.addClass("entryRemove");this.resetVariableAddPanel("variable");b instanceof Entry.Variable||(b=new Entry.Variable(b));b.generateView(this.variables_.length);this.createVariableView(b);
this.variables_.unshift(b);Entry.playground&&Entry.playground.blockMenu&&Entry.playground.blockMenu.deleteRendered("variable");Entry.playground.reloadPlayground();c.view.name.value="";this.updateList()};c.removeVariable=function(b){b instanceof Entry.Variable||(b=this.variables_.filter(function(c){return b.id===c.id_})[0]);var c=this.variables_.indexOf(b);b.toJSON();this.selected==b&&this.select(null);b.remove();this.variables_.splice(c,1);Entry.playground.reloadPlayground();this.updateList()};c.changeVariableName=
function(b,c){b.name_!=c&&(Entry.isTextMode&&(alert_msg=Entry.TextCodingUtil.isNameIncludeSpace(c,"variable"))?(alert(alert_msg),b.listElement.nameField.value=b.name_):Entry.isExist(c,"name_",this.variables_)?(b.listElement.nameField.value=b.name_,Entry.toast.alert(Lang.Workspace.variable_rename_failed,Lang.Workspace.variable_dup)):10<c.length?(b.listElement.nameField.value=b.name_,Entry.toast.alert(Lang.Workspace.variable_rename_failed,Lang.Workspace.variable_too_long)):(b.setName(c),Entry.playground.reloadPlayground(),
Entry.toast.success(Lang.Workspace.variable_rename,Lang.Workspace.variable_rename_ok)))};c.changeListName=function(b,c){b.name_!=c&&(Entry.isTextMode&&(alert_msg=Entry.TextCodingUtil.isNameIncludeSpace(c,"list"))?(alert(alert_msg),b.listElement.nameField.value=b.name_):Entry.isExist(c,"name_",this.lists_)?(b.listElement.nameField.value=b.name_,Entry.toast.alert(Lang.Workspace.list_rename_failed,Lang.Workspace.list_dup)):10<c.length?(b.listElement.nameField.value=b.name_,Entry.toast.alert(Lang.Workspace.list_rename_failed,
Lang.Workspace.list_too_long)):(b.name_=c,b.updateView(),Entry.playground.reloadPlayground(),Entry.toast.success(Lang.Workspace.list_rename,Lang.Workspace.list_rename_ok)))};c.removeList=function(b){var c=this.lists_.indexOf(b),e=b.toJSON();Entry.stateManager&&Entry.stateManager.addCommand("remove list",this,this.addList,e);this.selected==b&&this.select(null);b.remove();this.lists_.splice(c,1);Entry.playground.reloadPlayground();this.updateList();return new Entry.State(this,this.addList,e)};c.createVariableView=
function(b){var c=this,e=Entry.createElement("li"),f=Entry.createElement("div");f.addClass("entryVariableListElementWrapperWorkspace variable");e.appendChild(f);var g="entryVariableListElementWorkspace",g=b.object_?g+" entryVariableLocalElementWorkspace":b.isCloud_?g+" entryVariableCloudElementWorkspace":g+" entryVariableGlobalElementWorkspace";e.addClass(g);e.bindOnClick(function(d){c.select(b)});g=Entry.createElement("button");g.addClass("entryVariableListElementDeleteWorkspace notForTextMode");
g.bindOnClick(function(d){d.stopPropagation();c.removeVariable(b);c.selectedVariable=null;c.variableSettingView.addClass("entryRemove")});this._removeButton=e.removeButton=g;var h=Entry.createElement("button");h.addClass("entryVariableListElementEditWorkspace");h.bindOnClick(function(d){d.stopPropagation();l.removeAttribute("disabled");k.removeClass("entryRemove");this.addClass("entryRemove");c.updateSelectedVariable(b);l.focus()});e.editButton=h;var k=Entry.createElement("button");k.addClass("entryVariableListElementEditWorkspace entryRemove");
k.bindOnClick(function(b){b.stopPropagation();l.blur();l.setAttribute("disabled","disabled");h.removeClass("entryRemove");this.addClass("entryRemove");c.updateSelectedVariable(null,"variable")});e.editSaveButton=k;var l=Entry.createElement("input");l.addClass("entryVariableListElementNameWorkspace");l.setAttribute("disabled","disabled");l.value=b.name_;l.bindOnClick(function(b){b.stopPropagation()});l.onblur=function(d){(d=this.value.trim())&&0!==d.length?c.changeVariableName(b,this.value):(Entry.toast.alert(Lang.Msgs.warn,
Lang.Workspace.variable_can_not_space),this.value=b.getName())};l.onkeydown=function(b){13==b.keyCode&&this.blur()};e.nameField=l;f.appendChild(l);f.appendChild(h);f.appendChild(k);f.appendChild(g);b.listElement=e};c.addMessage=function(b){b.id||(b.id=Entry.generateHash());Entry.stateManager&&Entry.stateManager.addCommand("add message",this,this.removeMessage,b);this.createMessageView(b);this.messages_.unshift(b);Entry.playground&&Entry.playground.blockMenu&&Entry.playground.blockMenu.deleteRendered("start");
Entry.playground.reloadPlayground();this.updateList();b.listElement.nameField.focus();return new Entry.State(this,this.removeMessage,b)};c.removeMessage=function(b){this.selected==b&&this.select(null);Entry.stateManager&&Entry.stateManager.addCommand("remove message",this,this.addMessage,b);var c=this.messages_.indexOf(b);this.messages_.splice(c,1);this.updateList();Entry.playground.reloadPlayground();return new Entry.State(this,this.addMessage,b)};c.changeMessageName=function(b,c){b.name!=c&&(Entry.isExist(c,
"name",this.messages_)?(b.listElement.nameField.value=b.name,Entry.toast.alert(Lang.Workspace.message_rename_failed,Lang.Workspace.message_dup)):10<c.length?(b.listElement.nameField.value=b.name,Entry.toast.alert(Lang.Workspace.message_rename_failed,Lang.Workspace.message_too_long)):(b.name=c,Entry.playground&&Entry.playground.blockMenu&&Entry.playground.blockMenu.deleteRendered("start"),Entry.playground.reloadPlayground(),Entry.toast.success(Lang.Workspace.message_rename,Lang.Workspace.message_rename_ok)))};
c.createMessageView=function(b){var c=this,e=Entry.createElement("li");e.addClass("entryVariableListElementWorkspace entryMessageElementWorkspace");e.bindOnClick(function(d){c.select(b)});var f=Entry.createElement("button");f.addClass("entryVariableListElementDeleteWorkspace");f.bindOnClick(function(d){d.stopPropagation();c.removeMessage(b)});var g=Entry.createElement("button");g.addClass("entryVariableListElementEditWorkspace");g.bindOnClick(function(b){b.stopPropagation();k.removeAttribute("disabled");
k.focus();h.removeClass("entryRemove");this.addClass("entryRemove")});var h=Entry.createElement("button");h.addClass("entryVariableListElementEditWorkspace entryRemove");h.bindOnClick(function(b){b.stopPropagation();k.blur();g.removeClass("entryRemove");this.addClass("entryRemove")});var k=Entry.createElement("input");k.addClass("entryVariableListElementNameWorkspace");k.value=b.name;k.bindOnClick(function(b){b.stopPropagation()});k.onblur=function(d){(d=this.value.trim())&&0!==d.length?(c.changeMessageName(b,
this.value),g.removeClass("entryRemove"),h.addClass("entryRemove"),k.setAttribute("disabled","disabled")):(Entry.toast.alert(Lang.Msgs.warn,Lang.Msgs.sign_can_not_space),this.value=b.name)};k.onkeydown=function(b){13==b.keyCode&&this.blur()};e.nameField=k;e.appendChild(k);e.appendChild(g);e.appendChild(h);e.appendChild(f);b.listElement=e};c.addList=function(b){if(Entry.isTextMode){var c=this.listAddPanel;if(alert_msg=Entry.TextCodingUtil.isNameIncludeSpace(c.view.name.value,"list")){alert(alert_msg);
this.listAddPanel.view.addClass("entryRemove");this.resetVariableAddPanel("list");return}}if(!b){c=this.listAddPanel;b=c.view.name.value.trim();b&&0!==b.length||(b=Lang.Workspace.list);var e=c.info;b.length>this._maxNameLength&&(b=this._truncName(b,"list"));b=this.checkAllVariableName(b,"lists_")?Entry.getOrderedName(b,this.lists_,"name_"):b;b={name:b,isCloud:e.isCloud,object:e.object,variableType:"list"};c.view.addClass("entryRemove");this.resetVariableAddPanel("list")}b=new Entry.Variable(b);Entry.stateManager&&
Entry.stateManager.addCommand("add list",this,this.removeList,b);b.generateView(this.lists_.length);this.createListView(b);this.lists_.unshift(b);Entry.playground&&Entry.playground.blockMenu&&Entry.playground.blockMenu.deleteRendered("variable");Entry.playground.reloadPlayground();this.updateList();return new Entry.State(this,this.removelist,b)};c.createListView=function(b){var c=this,e=Entry.createElement("li"),f=Entry.createElement("div");f.addClass("entryVariableListElementWrapperWorkspace list");
e.appendChild(f);e.addClass("entryVariableListElementWorkspace");b.object_?e.addClass("entryListLocalElementWorkspace"):b.isCloud_?e.addClass("entryListCloudElementWorkspace"):e.addClass("entryListGlobalElementWorkspace");e.bindOnClick(function(d){c.select(b)});var g=Entry.createElement("button");g.addClass("entryVariableListElementDeleteWorkspace notForTextMode");g.bindOnClick(function(d){d.stopPropagation();c.removeList(b);c.selectedList=null;c.listSettingView.addClass("entryRemove")});var h=Entry.createElement("button");
h.addClass("entryVariableListElementEditWorkspace");h.bindOnClick(function(d){d.stopPropagation();l.removeAttribute("disabled");k.removeClass("entryRemove");this.addClass("entryRemove");c.updateSelectedVariable(b);l.focus()});e.editButton=h;var k=Entry.createElement("button");k.addClass("entryVariableListElementEditWorkspace entryRemove");k.bindOnClick(function(d){d.stopPropagation();l.blur();l.setAttribute("disabled","disabled");h.removeClass("entryRemove");this.addClass("entryRemove");c.select(b);
c.updateSelectedVariable(null,"list")});e.editSaveButton=k;var l=Entry.createElement("input");l.setAttribute("disabled","disabled");l.addClass("entryVariableListElementNameWorkspace");l.value=b.name_;l.bindOnClick(function(b){b.stopPropagation()});l.onblur=function(d){(d=this.value.trim())&&0!==d.length?c.changeListName(b,this.value):(Entry.toast.alert(Lang.Msgs.warn,Lang.Msgs.list_can_not_space),this.value=b.getName())};l.onkeydown=function(b){13==b.keyCode&&this.blur()};e.nameField=l;f.appendChild(l);
f.appendChild(h);f.appendChild(k);f.appendChild(g);b.listElement=e};c.mapVariable=function(b,c){for(var d=this.variables_.length,f=0;f<d;f++)b(this.variables_[f],c)};c.mapList=function(b,c){for(var d=this.lists_.length,f=0;f<d;f++)b(this.lists_[f],c)};c.getVariableJSON=function(){for(var b=[],c=0;c<this.variables_.length;c++)b.push(this.variables_[c].toJSON());for(c=0;c<this.lists_.length;c++)b.push(this.lists_[c].toJSON());Entry.engine.projectTimer&&b.push(Entry.engine.projectTimer.toJSON());c=Entry.container.inputValue;
Entry.isEmpty(c)||b.push(c.toJSON());return b};c.getMessageJSON=function(){for(var b=[],c=0;c<this.messages_.length;c++)b.push({id:this.messages_[c].id,name:this.messages_[c].name});return b};c.getFunctionJSON=function(){var b=[],c;for(c in this.functions_){var e=this.functions_[c],e={id:e.id,content:JSON.stringify(e.content.toJSON())};b.push(e)}return b};c.resetVariableAddPanel=function(b){b=b||"variable";var c="variable"==b?this.variableAddPanel:this.listAddPanel,e=c.info;e.isCloud=!1;e.object=
null;c.view.name.value="";c.isOpen=!1;this.updateVariableAddView(b)};c.generateVariableAddView=function(){var b=this,c=Entry.createElement("li");this.variableAddPanel.view=c;this.variableAddPanel.isOpen=!1;c.addClass("entryVariableAddSpaceWorkspace entryRemove");var e=Entry.createElement("div");e.addClass("entryVariableAddSpaceNameWrapperWorkspace");c.appendChild(e);var f=Entry.createElement("input");f.addClass("entryVariableAddSpaceInputWorkspace");f.setAttribute("placeholder",Lang.Workspace.Variable_placeholder_name);
f.variableContainer=this;f.onkeypress=function(c){13===c.keyCode&&(this.enterKeyDisabled?this.blur():b._addVariable())};f.onfocus=function(b){this.blurred=!1};f.onblur=function(b){""===this.value||this.blurred||(Entry.do("variableAddSetName",$(".entryVariableAddSpaceInputWorkspace").val()),this.blurred=!0)};this.variableAddPanel.view.name=f;e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableAddSpaceGlobalWrapperWorkspace");e.bindOnClick(function(c){b.variableAddPanel.info.object=
null;b.updateVariableAddView("variable")});c.appendChild(e);f=Entry.createElement("span");f.innerHTML=Lang.Workspace.Variable_use_all_objects;e.appendChild(f);f=Entry.createElement("span");f.addClass("entryVariableAddSpaceCheckWorkspace");this.variableAddPanel.view.globalCheck=f;this.variableAddPanel.info.object||f.addClass("entryVariableAddChecked");e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableAddSpaceLocalWrapperWorkspace");e.bindOnClick(function(c){Entry.playground.object&&
(c=b.variableAddPanel.info,c.object=Entry.playground.object.id,c.isCloud=!1,b.updateVariableAddView("variable"))});c.appendChild(e);f=Entry.createElement("span");f.innerHTML=Lang.Workspace.Variable_use_this_object;e.appendChild(f);f=Entry.createElement("span");f.addClass("entryVariableAddSpaceCheckWorkspace");this.variableAddPanel.view.localCheck=f;this.variableAddPanel.info.object&&f.addClass("entryVariableAddChecked");e.appendChild(f);e=Entry.createElement("div");c.cloudWrapper=e;e.addClass("entryVariableAddSpaceCloudWrapperWorkspace");
e.bindOnClick(function(c){c=b.variableAddPanel.info;c.object||(c.isCloud=!c.isCloud,b.updateVariableAddView("variable"))});c.appendChild(e);f=Entry.createElement("span");f.addClass("entryVariableAddSpaceCloudSpanWorkspace");f.innerHTML=Lang.Workspace.Variable_create_cloud;e.appendChild(f);f=Entry.createElement("span");this.variableAddPanel.view.cloudCheck=f;f.addClass("entryVariableAddSpaceCheckWorkspace entryVariableAddSpaceCloudCheckWorkspace");this.variableAddPanel.info.isCloud&&f.addClass("entryVariableAddChecked");
e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableAddSpaceButtonWrapperWorkspace");c.appendChild(e);c=Entry.createElement("span");c.addClass("entryVariableAddSpaceCancelWorkspace entryVariableAddSpaceButtonWorkspace");c.innerHTML=Lang.Buttons.cancel;c.bindOnClick(function(c){b.variableAddPanel.view.addClass("entryRemove");b.resetVariableAddPanel("variable")});e.appendChild(c);c=Entry.createElement("span");c.addClass("entryVariableAddSpaceConfirmWorkspace entryVariableAddSpaceButtonWorkspace");
c.innerHTML=Lang.Buttons.save;c.variableContainer=this;c.bindOnClick(function(c){b._addVariable()});e.appendChild(c);this.variableAddConfirmButton=c};c._addVariable=function(){$(".entryVariableAddSpaceInputWorkspace").blur();var b=this._makeVariableData(),b=new Entry.Variable(b);Entry.do("variableContainerAddVariable",b);this.updateSelectedVariable(this.variables_[0]);b=this.variables_[0].listElement;b.editButton.addClass("entryRemove");b.editSaveButton.removeClass("entryRemove");b.nameField.removeAttribute("disabled")};
c.generateListAddView=function(){var b=this,c=Entry.createElement("li");this.listAddPanel.view=c;this.listAddPanel.isOpen=!1;c.addClass("entryVariableAddSpaceWorkspace entryRemove");var e=Entry.createElement("div");e.addClass("entryVariableAddSpaceNameWrapperWorkspace entryListAddSpaceNameWrapperWorkspace");c.appendChild(e);var f=Entry.createElement("input");f.addClass("entryVariableAddSpaceInputWorkspace");f.setAttribute("placeholder",Lang.Workspace.list_name);this.listAddPanel.view.name=f;f.variableContainer=
this;f.onkeypress=function(c){13==c.keyCode&&(b.addList(),c=b.lists_[0],b.updateSelectedVariable(c),c=c.listElement,c.editButton.addClass("entryRemove"),c.editSaveButton.removeClass("entryRemove"),c.nameField.removeAttribute("disabled"))};e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableAddSpaceGlobalWrapperWorkspace");e.bindOnClick(function(c){b.listAddPanel.info.object=null;b.updateVariableAddView("list")});c.appendChild(e);f=Entry.createElement("span");f.innerHTML=Lang.Workspace.use_all_objects;
e.appendChild(f);f=Entry.createElement("span");f.addClass("entryVariableAddSpaceCheckWorkspace");this.listAddPanel.view.globalCheck=f;this.listAddPanel.info.object||f.addClass("entryVariableAddChecked");e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableAddSpaceLocalWrapperWorkspace");e.bindOnClick(function(c){Entry.playground.object&&(c=b.listAddPanel.info,c.object=Entry.playground.object.id,c.isCloud=!1,b.updateVariableAddView("list"))});c.appendChild(e);f=Entry.createElement("span");
f.innerHTML=Lang.Workspace.Variable_use_this_object;e.appendChild(f);f=Entry.createElement("span");f.addClass("entryVariableAddSpaceCheckWorkspace");this.listAddPanel.view.localCheck=f;this.variableAddPanel.info.object&&addVariableLocalCheck.addClass("entryVariableAddChecked");e.appendChild(f);e=Entry.createElement("div");c.cloudWrapper=e;e.addClass("entryVariableAddSpaceCloudWrapperWorkspace");e.bindOnClick(function(c){c=b.listAddPanel.info;c.object||(c.isCloud=!c.isCloud,b.updateVariableAddView("list"))});
c.appendChild(e);f=Entry.createElement("span");f.addClass("entryVariableAddSpaceCloudSpanWorkspace");f.innerHTML=Lang.Workspace.List_create_cloud;e.appendChild(f);f=Entry.createElement("span");this.listAddPanel.view.cloudCheck=f;f.addClass("entryVariableAddSpaceCheckWorkspace entryVariableAddSpaceCloudCheckWorkspace");this.listAddPanel.info.isCloud&&f.addClass("entryVariableAddChecked");e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableAddSpaceButtonWrapperWorkspace");c.appendChild(e);
c=Entry.createElement("span");c.addClass("entryVariableAddSpaceCancelWorkspace entryVariableAddSpaceButtonWorkspace");c.innerHTML=Lang.Buttons.cancel;c.bindOnClick(function(c){b.listAddPanel.view.addClass("entryRemove");b.resetVariableAddPanel("list")});e.appendChild(c);c=Entry.createElement("span");c.addClass("entryVariableAddSpaceConfirmWorkspace entryVariableAddSpaceButtonWorkspace");c.innerHTML=Lang.Buttons.save;c.variableContainer=this;c.bindOnClick(function(c){b.addList();c=b.lists_[0];b.updateSelectedVariable(c);
c=c.listElement;c.editButton.addClass("entryRemove");c.editSaveButton.removeClass("entryRemove");c.nameField.removeAttribute("disabled")});e.appendChild(c)};c.generateVariableSplitterView=function(){var b=Entry.createElement("li");b.addClass("entryVariableSplitterWorkspace");var c=Entry.createElement("li");c.addClass("entryVariableSplitterWorkspace");this.variableSplitters={top:b,bottom:c}};c.openVariableAddPanel=function(b){b=b?b:"variable";Entry.playground.toggleOnVariableView();Entry.playground.changeViewMode("variable");
"variable"==b?this.variableAddPanel.isOpen=!0:this.listAddPanel.isOpen=!0;this.selectFilter(b);this.updateVariableAddView(b)};c.getMenuXml=function(b){for(var c=[],e=0!==this.variables_.length,f=0!==this.lists_.length,g,h=0,k;k=b[h];h++){var l=k.tagName;l&&"BLOCK"==l.toUpperCase()?(g=k.getAttribute("bCategory"),!e&&"variable"==g||!f&&"list"==g||c.push(k)):!l||"SPLITTER"!=l.toUpperCase()&&"BTN"!=l.toUpperCase()||!e&&"variable"==g||(f||"list"!=g)&&c.push(k)}return c};c.addCloneLocalVariables=function(b){var c=
[],e=this;this.mapVariable(function(b,d){b.object_&&b.object_==d.objectId&&(b=b.toJSON(),b.originId=b.id,b.id=Entry.generateHash(),b.object=d.newObjectId,delete b.x,delete b.y,c.push(b),d.json.script=d.json.script.replace(new RegExp(b.originId,"g"),b.id))},b);c.map(function(b){e.addVariable(b)})};c.generateTimer=function(b){b||(b={},b.id=Entry.generateHash(),b.name=Lang.Workspace.Variable_Timer,b.value=0,b.variableType="timer",b.visible=!1,b.x=150,b.y=-70,b=new Entry.Variable(b));b.generateView();
b.tick=null;Entry.engine.projectTimer=b;Entry.addEventListener("stop",function(){Entry.engine.stopProjectTimer()}.bind(this))};c.generateAnswer=function(b){b||(b=new Entry.Variable({id:Entry.generateHash(),name:Lang.Blocks.VARIABLE_get_canvas_input_value,value:0,variableType:"answer",visible:!1,x:150,y:-100}));b.generateView();Entry.container.inputValue=b};c.generateVariableSettingView=function(){var b=this,c=Entry.createElement("div");c.bindOnClick(function(b){b.stopPropagation()});this.variableSettingView=
c;c.addClass("entryVariableSettingWorkspace");this.listView_.appendChild(c);c.addClass("entryRemove");var e=Entry.createElement("div");e.addClass("entryVariableSettingVisibleWrapperWorkspace");e.bindOnClick(function(c){c=b.selectedVariable;var d=b.variableSettingView.visibleCheck;c.setVisible(!c.isVisible());c.isVisible()?d.addClass("entryVariableSettingChecked"):d.removeClass("entryVariableSettingChecked")});c.appendChild(e);var f=Entry.createElement("span");f.innerHTML=Lang.Workspace.show_variable;
e.appendChild(f);f=Entry.createElement("span");f.addClass("entryVariableSettingCheckWorkspace");c.visibleCheck=f;e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableSettingInitValueWrapperWorkspace");c.appendChild(e);f=Entry.createElement("span");f.innerHTML=Lang.Workspace.default_value;e.appendChild(f);f=Entry.createElement("input");f.addClass("entryVariableSettingInitValueInputWorkspace");c.initValueInput=f;f.value=0;f.onkeyup=function(c){b.selectedVariable.setValue(this.value)};
f.onblur=function(c){b.selectedVariable.setValue(this.value)};c.initValueInput=f;e.appendChild(f);e=Entry.createElement("div");e.addClass("entryVariableSettingSplitterWorkspace");c.appendChild(e);e=Entry.createElement("div");e.addClass("entryVariableSettingSlideWrapperWorkspace");c.appendChild(e);f=Entry.createElement("span");f.innerHTML=Lang.Workspace.slide;e.appendChild(f);f=Entry.createElement("span");f.addClass("entryVariableSettingCheckWorkspace");c.slideCheck=f;e.appendChild(f);e.bindOnClick(function(c){var d;
c=b.selectedVariable;var e=b.variables_,f=c.getType();"variable"==f?(d=c.toJSON(),d.variableType="slide",d=new Entry.Variable(d),e.splice(e.indexOf(c),0,d),0>d.getValue()&&d.setValue(0),100<d.getValue()&&d.setValue(100),g.removeAttribute("disabled"),k.removeAttribute("disabled")):"slide"==f&&(d=c.toJSON(),d.variableType="variable",d=new Entry.Variable(d),e.splice(e.indexOf(c),0,d),g.setAttribute("disabled","disabled"),k.setAttribute("disabled","disabled"));b.createVariableView(d);b.removeVariable(c);
b.updateSelectedVariable(d);d.generateView()});e=Entry.createElement("div");c.minMaxWrapper=e;e.addClass("entryVariableSettingMinMaxWrapperWorkspace");c.appendChild(e);f=Entry.createElement("span");f.innerHTML=Lang.Workspace.min_value;e.appendChild(f);var g=Entry.createElement("input");g.addClass("entryVariableSettingMinValueInputWorkspace");f=b.selectedVariable;g.value=f&&"slide"==f.type?f.minValue_:0;g.onkeypress=function(b){13===b.keyCode&&this.blur()};g.onblur=function(c){Entry.Utils.isNumber(this.value)&&
(c=b.selectedVariable,c.setMinValue(this.value),b.updateVariableSettingView(c))};c.minValueInput=g;e.appendChild(g);var h=Entry.createElement("span");h.addClass("entryVariableSettingMaxValueSpanWorkspace");h.innerHTML=Lang.Workspace.max_value;e.appendChild(h);var k=Entry.createElement("input");k.addClass("entryVariableSettingMaxValueInputWorkspace");k.value=f&&"slide"==f.type?f.maxValue_:100;k.onkeypress=function(b){13===b.keyCode&&this.blur()};k.onblur=function(c){Entry.Utils.isNumber(this.value)&&
(c=b.selectedVariable,c.setMaxValue(this.value),b.updateVariableSettingView(c))};c.maxValueInput=k;e.appendChild(k)};c.updateVariableSettingView=function(b){var c=this.variableSettingView,e=c.visibleCheck,f=c.initValueInput,g=c.slideCheck,h=c.minValueInput,k=c.maxValueInput,l=c.minMaxWrapper;e.removeClass("entryVariableSettingChecked");b.isVisible()&&e.addClass("entryVariableSettingChecked");g.removeClass("entryVariableSettingChecked");"slide"==b.getType()?(g.addClass("entryVariableSettingChecked"),
h.removeAttribute("disabled"),k.removeAttribute("disabled"),h.value=b.getMinValue(),k.value=b.getMaxValue(),l.removeClass("entryVariableMinMaxDisabledWorkspace")):(l.addClass("entryVariableMinMaxDisabledWorkspace"),h.setAttribute("disabled","disabled"),k.setAttribute("disabled","disabled"));f.value=b.getValue();b.listElement.appendChild(c);c.removeClass("entryRemove")};c.generateListSettingView=function(){var b=this,c=Entry.createElement("div");c.bindOnClick(function(b){b.stopPropagation()});this.listSettingView=
c;c.addClass("entryListSettingWorkspace");this.listView_.appendChild(c);c.addClass("entryRemove");var e=Entry.createElement("div");e.addClass("entryListSettingVisibleWrapperWorkspace");e.bindOnClick(function(c){c=b.selectedList;var d=b.listSettingView.visibleCheck;c.setVisible(!c.isVisible());c.isVisible()?d.addClass("entryListSettingCheckedWorkspace"):d.removeClass("entryListSettingCheckedWorkspace")});c.appendChild(e);var f=Entry.createElement("span");f.innerHTML=Lang.Workspace.show_list_workspace;
e.appendChild(f);f=Entry.createElement("span");f.addClass("entryListSettingCheckWorkspace");c.visibleCheck=f;e.appendChild(f);f=Entry.createElement("div");f.addClass("entryListSettingLengthWrapperWorkspace");e=Entry.createElement("span");e.addClass("entryListSettingLengthSpanWorkspace");e.innerHTML=Lang.Workspace.number_of_list;f.appendChild(e);c.appendChild(f);e=Entry.createElement("div");e.addClass("entryListSettingLengthControllerWorkspace");f.appendChild(e);f=Entry.createElement("span");f.addClass("entryListSettingMinusWorkspace");
f.bindOnClick(function(c){b.selectedList.array_.pop();b.updateListSettingView(b.selectedList)});e.appendChild(f);f=Entry.createElement("input");f.addClass("entryListSettingLengthInputWorkspace");f.onblur=function(){b.setListLength(this.value)};f.onkeypress=function(b){13==b.keyCode&&this.blur()};c.lengthInput=f;e.appendChild(f);f=Entry.createElement("span");f.addClass("entryListSettingPlusWorkspace");f.bindOnClick(function(c){b.selectedList.array_.push({data:0});b.updateListSettingView(b.selectedList)});
e.appendChild(f);e=Entry.createElement("div");c.seperator=e;c.appendChild(e);e.addClass("entryListSettingSeperatorWorkspace");e=Entry.createElement("div");e.addClass("entryListSettingListValuesWorkspace");c.listValues=e;c.appendChild(e)};c.updateListSettingView=function(b){var c=this;b=b||this.selectedList;var e=this.listSettingView,f=e.listValues,g=e.visibleCheck,h=e.lengthInput,k=e.seperator;g.removeClass("entryListSettingCheckedWorkspace");b.isVisible()&&g.addClass("entryListSettingCheckedWorkspace");
h.value=b.array_.length;for(b.listElement.appendChild(e);f.firstChild;)f.removeChild(f.firstChild);var l=b.array_;0===l.length?k.addClass("entryRemove"):k.removeClass("entryRemove");var m=1;Entry.playground.mainWorkspace.mode===Entry.Workspace.MODE_VIMBOARD&&(m=0);for(g=0;g<l.length;g++)(function(d){var e=Entry.createElement("div");e.addClass("entryListSettingValueWrapperWorkspace");var g=Entry.createElement("span");g.addClass("entryListSettingValueNumberSpanWorkspace");g.innerHTML=d+m;e.appendChild(g);
g=Entry.createElement("input");g.value=l[d].data;g.onblur=function(){l[d].data=this.value;b.updateView()};g.onkeypress=function(b){13==b.keyCode&&this.blur()};g.addClass("entryListSettingEachInputWorkspace");e.appendChild(g);g=Entry.createElement("span");g.bindOnClick(function(){l.splice(d,1);c.updateListSettingView()});g.addClass("entryListSettingValueRemoveWorkspace");e.appendChild(g);f.appendChild(e)})(g);b.updateView();e.removeClass("entryRemove")};c.setListLength=function(b){b=Number(b);var c=
this.selectedList.array_;if(Entry.Utils.isNumber(b)){var e=c.length;if(e<b)for(b-=e,e=0;e<b;e++)c.push({data:0});else e>b&&(c.length=b)}this.updateListSettingView()};c.updateViews=function(){var b=this.lists_;this.variables_.map(function(b){b.updateView()});b.map(function(b){b.updateView()})};c.updateSelectedVariable=function(b,c){b?"variable"==b.type?(this.selectedVariable=b,this.updateVariableSettingView(b)):"slide"==b.type?(this.selectedVariable=b,this.updateVariableSettingView(b)):"list"==b.type&&
(this.selectedList=b,this.updateListSettingView(b)):(this.selectedVariable=null,"variable"==(c||"variable")?this.variableSettingView.addClass("entryRemove"):this.listSettingView.addClass("entryRemove"))};c.removeLocalVariables=function(b){var c=[],e=this;this.mapVariable(function(b,d){b.object_&&b.object_==d&&c.push(b)},b);c.map(function(b){e.removeVariable(b)})};c.updateCloudVariables=function(){var b=Entry.projectId;if(Entry.cloudSavable&&b){var c=Entry.variableContainer,b=c.variables_.filter(function(b){return b.isCloud_}),
b=b.map(function(b){return b.toJSON()}),c=c.lists_.filter(function(b){return b.isCloud_}),c=c.map(function(b){return b.toJSON()});$.ajax({url:"/api/project/variable/"+Entry.projectId,type:"PUT",data:{variables:b,lists:c}}).done(function(){})}};c.addRef=function(b,c){if(this.view_&&Entry.playground.mainWorkspace&&Entry.getMainWS().getMode()===Entry.Workspace.MODE_BOARD){var d={object:c.getCode().object,block:c};c.funcBlock&&(d.funcBlock=c.funcBlock,delete c.funcBlock);this[b].push(d);if("_functionRefs"==
b){b=c.type.substr(5);for(var f=Entry.variableContainer.functions_[b].content.getBlockList(),g=0;g<f.length;g++){c=f[g];var h=c.events;-1<c.type.indexOf("func_")&&c.type.substr(5)==b||(h&&h.viewAdd&&h.viewAdd.forEach(function(b){c.getCode().object=d.object;b&&(c.funcBlock=d.block,b(c))}),h&&h.dataAdd&&h.dataAdd.forEach(function(b){c.getCode().object=d.object;b&&(c.funcBlock=d.block,b(c))}))}}return d}};c.removeRef=function(b,c){if(Entry.playground.mainWorkspace&&Entry.getMainWS().getMode()===Entry.Workspace.MODE_BOARD){for(var d=
this[b],f=0;f<d.length;f++)if(d[f].block==c){d.splice(f,1);break}if("_functionRefs"==b&&(b=c.type.substr(5),f=Entry.variableContainer.functions_[b]))for(d=f.content.getBlockList(),f=0;f<d.length;f++){c=d[f];var g=c.events;-1<c.type.indexOf("func_")&&c.type.substr(5)==b||(g&&g.viewDestroy&&g.viewDestroy.forEach(function(b){b&&b(c)}),g&&g.dataDestroy&&g.dataDestroy.forEach(function(b){b&&b(c)}))}}};c._getBlockMenu=function(){return Entry.playground.mainWorkspace.getBlockMenu()};c._truncName=function(b,
c){b=b.substring(0,this._maxNameLength);Entry.toast.warning(Lang.Workspace[c+"_name_auto_edited_title"],Lang.Workspace[c+"_name_auto_edited_content"]);return b};c._maxNameLength=10;c.clear=function(){this.variables_.map(function(b){b.remove()});this.variables_=[];this.lists_.map(function(b){b.remove()});this.lists_=[];this.messages_=[];for(var b in this.functions_)this.functions_[b].destroy(),delete this.functions_[b];Entry.playground.reloadPlayground();this.updateList()};c._isPythonMode=function(){var b=
Entry.getMainWS();return b&&b.isVimMode()};c.getDom=function(b){if(1<=b.length)switch(b.shift()){case "filter":return this.filterElements[b.shift()];case "variableAddButton":return this.variableAddButton_;case "variableAddConfirmButton":return this.variableAddConfirmButton;case "variableAddInput":return this.variableAddPanel.view.name}};c.clickVariableAddButton=function(b,c){var d=this.variableAddPanel,f=d.view.name.value.trim();d.isOpen&&!b?f&&0!==f.length?(b=this._makeVariableData(),b=new Entry.Variable(b),
Entry.do("variableContainerAddVariable",b)):(d.view.addClass("entryRemove"),d.isOpen=!1):(d.view.removeClass("entryRemove"),document.activeElement===d.view.name||c||d.view.name.focus(),d.isOpen=!0)};c._makeVariableData=function(){var b=this.variableAddPanel,c=b.view.name.value.trim();c&&0!==c.length||(c=Lang.Workspace.variable);c.length>this._maxNameLength&&(c=this._truncName(c,"variable"));c=this.checkAllVariableName(c,"variables_")?Entry.getOrderedName(c,this.variables_,"name_"):c;b=b.info;return{name:c,
isCloud:b.isCloud,object:b.object,variableType:"variable"}}})(Entry.VariableContainer.prototype);Entry.block.run={skeleton:"basic",color:"#3BBD70",contents:["this is","basic block"],func:function(){}};Entry.block.mutant={skeleton:"basic",event:"start",color:"#3BBD70",template:"test mutant block",params:[],func:function(){},changeEvent:new Entry.Event};
Entry.block.jr_start={skeleton:"pebble_event",event:"start",color:"#3BBD70",template:"%1",params:[{type:"Indicator",img:"/img/assets/ntry/bitmap/jr/block_play_image.png",highlightColor:"#3BBD70",position:{x:0,y:0},size:22}],func:function(){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;for(b in c)this._unit=c[b];Ntry.unitComp=Ntry.entityManager.getComponent(this._unit.id,Ntry.STATIC.UNIT)}};
Entry.block.jr_repeat={skeleton:"pebble_loop",color:"#127CDB",template:"%1 \ubc18\ubcf5",params:[{type:"Text",text:Lang.Menus.repeat_0},{type:"Dropdown",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:3,fontSize:14,roundValue:3},{type:"Text",text:Lang.Menus.repeat_1}],statements:[],func:function(){if(void 0===this.repeatCount)return this.repeatCount=this.block.params[0],Entry.STATIC.CONTINUE;if(0<this.repeatCount){this.repeatCount--;var c=this.block.statements[0];if(0===
c.getBlocks().length)return;this.executor.stepInto(c);return Entry.STATIC.CONTINUE}delete this.repeatCount}};
Entry.block.jr_item={skeleton:"pebble_basic",color:"#F46C6C",template:"\uaf43 \ubaa8\uc73c\uae30 %1",params:[{type:"Indicator",img:"/img/assets/ntry/bitmap/jr/block_item_image.png",highlightColor:"#FFF",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.GET_ITEM,function(){Ntry.dispatchEvent("getItem");
c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.cparty_jr_item={skeleton:"pebble_basic",color:"#8ABC1D",template:"%1 %2",params:[{type:"Text",text:Lang.Menus.pick_up_pencil},{type:"Indicator",img:"/img/assets/ntry/bitmap/cpartyjr/pen.png",highlightColor:"#FFF",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.GET_ITEM,function(){Ntry.dispatchEvent("getItem");
c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.jr_north={skeleton:"pebble_basic",color:"#A751E3",template:"%1 %2",params:[{type:"Text",text:Lang.Menus.go_up},{type:"Indicator",img:"/img/assets/ntry/bitmap/jr/block_up_image.png",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=Ntry.STATIC,b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,
function(){b.isAction=!1})},3)},e;switch(Ntry.unitComp.direction){case Ntry.STATIC.EAST:e=c.TURN_LEFT;break;case Ntry.STATIC.SOUTH:e=c.HALF_ROTATION;break;case Ntry.STATIC.WEST:e=c.TURN_RIGHT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.CONTINUE}}};
Entry.block.jr_east={skeleton:"pebble_basic",color:"#A751E3",template:"%1 %2",params:[{type:"Text",text:Lang.Menus.go_right},{type:"Indicator",img:"/img/assets/ntry/bitmap/jr/block_right_image.png",position:{x:83,y:0},size:22}],func:function(){var c=Ntry.STATIC;if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",c.WALK,
function(){b.isAction=!1})},3)},e;switch(Ntry.unitComp.direction){case c.SOUTH:e=c.TURN_LEFT;break;case c.WEST:e=c.HALF_ROTATION;break;case c.NORTH:e=c.TURN_RIGHT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.CONTINUE}}};
Entry.block.jr_south={skeleton:"pebble_basic",color:"#A751E3",template:"%1 %2",params:[{type:"Text",text:Lang.Menus.go_down},{type:"Indicator",img:"/img/assets/ntry/bitmap/jr/block_down_image.png",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=Ntry.STATIC,b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,
function(){b.isAction=!1})},3)},e;switch(Ntry.unitComp.direction){case c.EAST:e=c.TURN_RIGHT;break;case c.NORTH:e=c.HALF_ROTATION;break;case c.WEST:e=c.TURN_LEFT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.CONTINUE}}};
Entry.block.jr_west={skeleton:"pebble_basic",color:"#A751E3",template:"%1 %2",params:[{type:"Text",text:Lang.Menus.go_left},{type:"Indicator",img:"/img/assets/ntry/bitmap/jr/block_left_image.png",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=Ntry.STATIC,b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",c.WALK,function(){b.isAction=
!1})},3)},e;switch(Ntry.unitComp.direction){case c.SOUTH:e=c.TURN_RIGHT;break;case c.EAST:e=c.HALF_ROTATION;break;case c.NORTH:e=c.TURN_LEFT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.CONTINUE}}};
Entry.block.jr_start_basic={skeleton:"basic_event",event:"start",color:"#3BBD70",template:"%1 %2",params:[{type:"Indicator",boxMultiplier:2,img:"/img/assets/block_icon/start_icon_play.png",highlightColor:"#3BBD70",size:17,position:{x:0,y:-2}},Lang.Menus.maze_when_run],func:function(){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;for(b in c)this._unit=c[b];Ntry.unitComp=Ntry.entityManager.getComponent(this._unit.id,Ntry.STATIC.UNIT)}};
Entry.block.jr_go_straight={skeleton:"basic",color:"#A751E3",template:"%1 %2",params:[Lang.Menus.go_forward,{type:"Image",img:"/img/assets/ntry/bitmap/jr/cparty_go_straight.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.jr_turn_left={skeleton:"basic",color:"#A751E3",template:"%1 %2",params:[Lang.Menus.jr_turn_left,{type:"Image",img:"/img/assets/ntry/bitmap/jr/cparty_rotate_l.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_LEFT,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.jr_turn_right={skeleton:"basic",color:"#A751E3",template:"%1 %2",params:[Lang.Menus.jr_turn_right,{type:"Image",img:"/img/assets/ntry/bitmap/jr/cparty_rotate_r.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_RIGHT,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.jr_go_slow={skeleton:"basic",color:"#f46c6c",template:"%1 %2",params:[Lang.Menus.go_slow,{type:"Image",img:"/img/assets/ntry/bitmap/jr/cparty_go_slow.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.GO_SLOW,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.jr_repeat_until_dest={skeleton:"basic_loop",color:"#498DEB",template:"%1 %2 %3 %4",syntax:["BasicWhile","true"],params:[Lang.Menus.repeat_until_reach_2,{type:"Image",img:"/img/assets/ntry/bitmap/jr/jr_goal_image.png",size:18},Lang.Menus.repeat_until_reach_1,{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}};
Entry.block.jr_if_construction={skeleton:"basic_loop",color:"#498DEB",template:"%1 %2 %3 %4",params:[Lang.Menus.jr_if_1,{type:"Image",img:"/img/assets/ntry/bitmap/jr/jr_construction_image.png",size:18},Lang.Menus.jr_if_2,{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_REPAIR});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}}};
Entry.block.jr_if_speed={skeleton:"basic_loop",color:"#498DEB",template:Lang.Menus.jr_if_1+" %1 "+Lang.Menus.jr_if_2+" %2",params:[{type:"Image",img:"/img/assets/ntry/bitmap/jr/jr_speed_image.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_SLOW});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_start={skeleton:"basic_event",mode:"maze",event:"start",color:"#3BBD70",template:"%1 \uc2dc\uc791\ud558\uae30\ub97c \ud074\ub9ad\ud588\uc744 \ub54c",syntax:["Program"],params:[{type:"Indicator",boxMultiplier:2,img:"/img/assets/block_icon/start_icon_play.png",highlightColor:"#3BBD70",size:17,position:{x:0,y:-2}}],func:function(){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;for(b in c)this._unit=c[b];Ntry.unitComp=Ntry.entityManager.getComponent(this._unit.id,
Ntry.STATIC.UNIT)}};Entry.block.maze_step_jump={skeleton:"basic",mode:"maze",color:"#FF6E4B",template:"\ub6f0\uc5b4\ub118\uae30%1",params:[{type:"Image",img:"/img/assets/week/blocks/jump.png",size:24}],syntax:["Scope","jump"],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.JUMP,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_for={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"%1 \ubc88 \ubc18\ubcf5\ud558\uae30%2",syntax:["BasicIteration"],params:[{type:"Dropdown",key:"REPEAT",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:1},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){if(void 0===this.repeatCount)return this.repeatCount=this.block.params[0],Entry.STATIC.CONTINUE;if(0<this.repeatCount){this.repeatCount--;
var c=this.block.statements[0];if(0===c.getBlocks().length)return;this.executor.stepInto(c);return Entry.STATIC.CONTINUE}delete this.repeatCount}};Entry.block.test={skeleton:"basic_boolean_field",mode:"maze",color:"#127CDB",template:"%1 this is test block %2",params:[{type:"Angle",value:"90"},{type:"Dropdown",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:1}],func:function(){}};
Entry.block.maze_repeat_until_1={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"%1 \ub9cc\ub0a0 \ub54c \uae4c\uc9c0 \ubc18\ubcf5%2",syntax:["BasicWhile","true"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/repeat_goal_1.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}};
Entry.block.maze_repeat_until_2={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"\ubaa8\ub4e0 %1 \ub9cc\ub0a0 \ub54c \uae4c\uc9c0 \ubc18\ubcf5%2",syntax:["BasicWhile","true"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/repeat_goal_1.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}};
Entry.block.maze_step_if_1={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"\ub9cc\uc57d \uc55e\uc5d0 %1 \uc788\ub2e4\uba74%2",syntax:["BasicIf",'front == "wall"'],params:[{type:"Image",img:"/img/assets/ntry/block_inner/if_target_1.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);d=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y});c=this.block.statements[0];if(0===d.length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE;b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.WALL});this.isContinue=!0;if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),
Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_if_2={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"\ub9cc\uc57d \uc55e\uc5d0 %1 \uc788\ub2e4\uba74%2",syntax:["BasicIf",'front == "bee"'],params:[{type:"Image",img:"/img/assets/ntry/bitmap/maze2/obstacle_01.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_BEE});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}}};
Entry.block.maze_call_function={skeleton:"basic",mode:"maze",color:"#B57242",template:"\uc57d\uc18d \ubd88\ub7ec\uc624\uae30%1",syntax:["Scope","promise"],params:[{type:"Image",img:"/img/assets/week/blocks/function.png",size:24}],func:function(){if(!this.funcExecutor){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.CODE),b;for(b in c)this.funcExecutor=new Entry.Executor(c[b].components[Ntry.STATIC.CODE].code.getEventMap("define")[0])}this.funcExecutor.execute();if(null!==this.funcExecutor.scope.block)return Entry.STATIC.CONTINUE}};
Entry.block.maze_define_function={skeleton:"basic_define",mode:"maze",color:"#B57242",event:"define",template:"\uc57d\uc18d\ud558\uae30%1",syntax:["BasicFunction"],params:[{type:"Image",img:"/img/assets/week/blocks/function.png",size:24}],statements:[{accept:"basic"}],func:function(c){if(!this.executed&&(c=this.block.statements[0],0!==c.getBlocks().length))return this.executor.stepInto(c),this.executed=!0,Entry.STATIC.CONTINUE}};
Entry.block.maze_step_if_3={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"\ub9cc\uc57d \uc55e\uc5d0 %1 \uc788\ub2e4\uba74%2",syntax:["BasicIf",'front == "banana"'],params:[{type:"Image",img:"/img/assets/ntry/block_inner/if_target_3.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_BANANA});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_if_4={skeleton:"basic_loop",mode:"maze",color:"#498DEB",template:"\ub9cc\uc57d \uc55e\uc5d0 %1 \uc788\ub2e4\uba74%2",syntax:["BasicIf",'front == "wall"'],params:[{type:"Image",img:"/img/assets/ntry/block_inner/if_target_2.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.WALL});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_move_step={skeleton:"basic",mode:"maze",color:"#A751E3",template:"\uc55e\uc73c\ub85c \ud55c \uce78 \uc774\ub3d9%1",syntax:["Scope","move"],params:[{type:"Image",img:"/img/assets/week/blocks/moveStep.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_rotate_left={skeleton:"basic",mode:"maze",color:"#A751E3",template:"\uc67c\ucabd\uc73c\ub85c \ud68c\uc804%1",syntax:["Scope","left"],params:[{type:"Image",img:"/img/assets/week/blocks/turnL.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_LEFT,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.maze_step_rotate_right={skeleton:"basic",mode:"maze",color:"#A751E3",template:"\uc624\ub978\ucabd\uc73c\ub85c \ud68c\uc804%1",syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/week/blocks/turnR.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.CONTINUE;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_RIGHT,function(){c.isAction=!1});return Entry.STATIC.CONTINUE}}};
Entry.block.test_wrapper={skeleton:"basic",mode:"maze",color:"#3BBD70",template:"%1 this is test block %2",params:[{type:"Block",accept:"basic_boolean_field",value:[{type:"test",params:[30,50]}]},{type:"Dropdown",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:1}],func:function(){}};Entry.block.basic_button={skeleton:"basic_button",color:"#eee",template:"%1",params:[{type:"Text",text:"basic button",color:"#333",align:"center"}],func:function(){}};Entry.Thread=function(c,b,d){this._data=new Entry.Collection;this._code=b;this.changeEvent=new Entry.Event(this);this.changeEvent.attach(this,this.handleChange);this._event=null;this.parent=d?d:b;this.load(c)};
(function(c){c.load=function(b,c){if(void 0===b||null===b)b=[];if(!(b instanceof Array))return console.error("thread must be array");for(var d=0;d<b.length;d++){var f=b[d];f instanceof Entry.Block||f.isDummy?(f.setThread(this),this._data.push(f)):this._data.push(new Entry.Block(f,this))}(b=this._code.view)&&this.createView(b.board,c)};c.registerEvent=function(b,c){this._event=c;this._code.registerEvent(b,c)};c.unregisterEvent=function(b,c){this._code.unregisterEvent(b,c)};c.createView=function(b,
c){this.view||(this.view=new Entry.ThreadView(this,b));this._data.getAll().forEach(function(d){d.createView(b,c)})};c.destroyView=function(){this.view=null;this._data.map(function(b){b.destroyView()})};c.separate=function(b,c,e){this._data.has(b.id)&&(b=this._data.splice(this._data.indexOf(b),c),this._code.createThread(b,e),this.changeEvent.notify())};c.cut=function(b){b=this._data.indexOf(b);b=this._data.splice(b);this.changeEvent.notify();return b};c.insertByBlock=function(b,c){b=b?this._data.indexOf(b):
-1;for(var d=0;d<c.length;d++)c[d].setThread(this);this._data.splice.apply(this._data,[b+1,0].concat(c));this.changeEvent.notify()};c.insertToTop=function(b){b.setThread(this);this._data.unshift.apply(this._data,[b]);this.changeEvent.notify()};c.clone=function(b,c){b=b||this._code;b=new Entry.Thread([],b);for(var d=this._data,f=[],g=0,h=d.length;g<h;g++)f.push(d[g].clone(b));b.load(f,c);return b};c.toJSON=function(b,c,e,f){var d=[];void 0===c?c=0:c instanceof Entry.Block&&(c=this.indexOf(c));var h=
this._data;for(c;c<h.length;c++){var k=h[c];k instanceof Entry.Block&&d.push(k.toJSON(b,e,f))}return d};c.destroy=function(b,c){this.view&&this.view.destroy(b);for(var d=this._data,f=d.length-1;0<=f;f--)d[f].destroy(b,null,c);!d.length&&this._code.destroyThread(this,!1)};c.getBlock=function(b){return this._data[b]};c.getBlocks=function(){return this._data.map(function(b){return b})};c.countBlock=function(){for(var b=0,c=0;c<this._data.length;c++){var e=this._data[c];if(e.type&&(b++,e=e.statements))for(var f=
0;f<e.length;f++)b+=e[f].countBlock()}return b};c.handleChange=function(){0===this._data.length&&this.destroy()};c.getCode=function(){return this._code};c.setCode=function(b){this._code=b};c.spliceBlock=function(b){this._data.remove(b);this.changeEvent.notify()};c.getFirstBlock=function(){return this._data[0]};c.getPrevBlock=function(b){b=this._data.indexOf(b);return this._data.at(b-1)};c.getNextBlock=function(b){b=this._data.indexOf(b);return this._data.at(b+1)};c.getLastBlock=function(){return this._data.at(this._data.length-
1)};c.getRootBlock=function(){return this._data.at(0)};c.hasBlockType=function(b){function c(d){if(b==d.type)return!0;for(var e=d.params,f=0;f<e.length;f++){var k=e[f];if(k&&k.constructor==Entry.Block&&c(k))return!0}if(d=d.statements)for(e=0;e<d.length;e++)if(d[e].hasBlockType(b))return!0;return!1}for(var e=0;e<this._data.length;e++)if(c(this._data[e]))return!0;return!1};c.getCount=function(b){var c=this._data.length;b&&(c-=this._data.indexOf(b));return c};c.indexOf=function(b){return this._data.indexOf(b)};
c.pointer=function(b,c){b=b||[];c&&b.unshift(this.indexOf(c));c=this.parent;c instanceof Entry.Block&&b.unshift(c.indexOfStatements(this));return this._code===c?(b.unshift(this._code.indexOf(this)),c=this._data[0],b.unshift(c.y),b.unshift(c.x),b):c.pointer(b)};c.getBlockList=function(b,c){for(var d=[],f=0;f<this._data.length;f++){var g=this._data[f];g.constructor===Entry.Block&&(d=d.concat(g.getBlockList(b,c)))}return d};c.stringify=function(b){return JSON.stringify(this.toJSON(void 0,void 0,b))};
c.isInOrigin=function(){var b=this.getFirstBlock();return b&&b.isInOrigin()};c.getDom=function(b){if(0<b.length){if("magnet"===b.shift())return this.view.getMagnet("next")}else return this.view.svgGroup}})(Entry.Thread.prototype);Entry.skeleton=function(){};
Entry.skeleton.basic={path:function(c){var b=c.contentWidth;c=c.contentHeight;c=Math.max(30,c+2);b=Math.max(0,b+9-c/2);return"m -8,0 l 8,8 8,-8 h %w a %h,%h 0 0,1 0,%wh h -%w l -8,8 -8,-8 v -%wh z".replace(/%wh/gi,c).replace(/%w/gi,b).replace(/%h/gi,c/2)},box:function(c){return{offsetX:-8,offsetY:0,width:(c?c.contentWidth:150)+30,height:Math.max(30,(c?c.contentHeight:28)+2),marginBottom:0}},magnets:function(c){return{previous:{x:0,y:0},next:{x:0,y:(c?Math.max(c.height,30):30)+1+c.offsetY}}},contentPos:function(c){return{x:14,
y:Math.max(c.contentHeight,28)/2+1}}};
Entry.skeleton.basic_create={path:function(c){var b=c.contentWidth;c=c.contentHeight;c=Math.max(30,c+2);b=Math.max(0,b+9-c/2);return"m -8,0 l 16,0 h %w a %h,%h 0 0,1 0,%wh h -%w l -8,8 -8,-8 v -%wh z".replace(/%wh/gi,c).replace(/%w/gi,b).replace(/%h/gi,c/2)},box:function(c){return{offsetX:-8,offsetY:0,width:(c?c.contentWidth:150)+30,height:Math.max(30,(c?c.contentHeight:28)+2),marginBottom:0}},magnets:function(c){return{next:{x:0,y:(c?Math.max(c.height,30):30)+1+c.offsetY}}},contentPos:function(c){return{x:14,
y:Math.max(c.contentHeight,28)/2+1}}};Entry.skeleton.basic_event={path:function(c){c=c.contentWidth;c=Math.max(0,c);return"m -8,0 m 0,-5 a 19.5,19.5 0, 0,1 16,0 c 10,5 15,5 20,5 h %w a 15,15 0 0,1 0,30 H 8 l -8,8 -8,-8 l 0,0.5 a 19.5,19.5 0, 0,1 0,-35 z".replace(/%w/gi,c-30)},box:function(c){return{offsetX:-19,offsetY:-7,width:c.contentWidth+30,height:30,marginBottom:0}},magnets:function(c){return{next:{x:0,y:(c?Math.max(c.height+c.offsetY+7,30):30)+1}}},contentPos:function(c){return{x:1,y:15}}};
Entry.skeleton.basic_loop={path:function(c){var b=c.contentWidth,d=c.contentHeight,d=Math.max(30,d+2),b=Math.max(0,b+9-d/2);c=c._statements[0]?c._statements[0].height:20;c=Math.max(c,20);return"m -8,0 l 8,8 8,-8 h %w a %h,%h 0 0,1 0,%wh H 24 l -8,8 -8,-8 h -0.4 v %sh h 0.4 l 8,8 8,-8 h %bw a 8,8 0 0,1 0,16 H 8 l -8,8 -8,-8 z".replace(/%wh/gi,d).replace(/%w/gi,b).replace(/%bw/gi,b-8).replace(/%h/gi,d/2).replace(/%sh/gi,c+1)},magnets:function(c){var b=Math.max(c.contentHeight+2,30),d=c._statements[0]?
c._statements[0].height:20,d=Math.max(d,20);return{previous:{x:0,y:0},next:{x:0,y:d+b+18+c.offsetY}}},box:function(c){var b=c.contentWidth,d=Math.max(c.contentHeight+2,30);c=c._statements[0]?c._statements[0].height:20;c=Math.max(c,20);return{offsetX:-8,offsetY:0,width:b+30,height:d+c+17,marginBottom:0}},statementPos:function(c){return[{x:16,y:Math.max(30,c.contentHeight+2)+1}]},contentPos:function(c){return{x:14,y:Math.max(c.contentHeight,28)/2+1}}};
Entry.skeleton.basic_define={path:function(c){var b=c.contentWidth,d=c.contentHeight,d=Math.max(30,d+2),b=Math.max(0,b+9-d/2);c=c._statements[0]?c._statements[0].height:30;c=Math.max(c,20);return"m -8,0 l 16,0 h %w a %h,%h 0 0,1 0,%wh H 24 l -8,8 -8,-8 h -0.4 v %sh h 0.4 l 8,8 8,-8 h %bw a 8,8 0 0,1 0,16 H -8 z".replace(/%wh/gi,d).replace(/%w/gi,b).replace(/%h/gi,d/2).replace(/%bw/gi,b-8).replace(/%sh/gi,c+1)},magnets:function(){return{}},box:function(c){return{offsetX:0,offsetY:0,width:c.contentWidth,
height:Math.max(c.contentHeight,25)+46,marginBottom:0}},statementPos:function(c){return[{x:16,y:Math.max(30,c.contentHeight+2)}]},contentPos:function(){return{x:14,y:15}}};Entry.skeleton.pebble_event={path:function(c){return"m 0,0 a 25,25 0 0,1 9,48.3 a 9,9 0 0,1 -18,0 a 25,25 0 0,1 9,-48.3 z"},box:function(c){return{offsetX:-25,offsetY:0,width:50,height:48.3,marginBottom:0}},magnets:function(c){return{next:{x:0,y:(c?Math.max(c.height,49.3):49.3)+c.offsetY}}},contentPos:function(){return{x:0,y:25}}};
Entry.skeleton.pebble_loop={fontSize:16,dropdownHeight:23,path:function(c){c=Math.max(c._statements[0]?c._statements[0].height:50,50);return"M 0,9 a 9,9 0 0,0 9,-9 h %cw q 25,0 25,25 v %ch q 0,25 -25,25 h -%cw a 9,9 0 0,1 -18,0 h -%cw q -25,0 -25,-25 v -%ch q 0,-25 25,-25 h %cw a 9,9 0 0,0 9,9 M 0,49 a 9,9 0 0,1 -9,-9 h -28 a 25,25 0 0,0 -25,25 v %cih a 25,25 0 0,0 25,25 h 28 a 9,9 0 0,0 18,0 h 28 a 25,25 0 0,0 25,-25 v -%cih a 25,25 0 0,0 -25,-25 h -28 a 9,9 0 0,1 -9,9 z".replace(/%cw/gi,41).replace(/%ch/gi,
c+4).replace(/%cih/gi,c-50)},magnets:function(c){var b=Math.max(c.contentHeight+2,41),d=c._statements[0]?c._statements[0].height:20,d=Math.max(d,51);return{previous:{x:0,y:0},next:{x:0,y:d+b+13+c.offsetY}}},box:function(c){var b=c.contentWidth,d=Math.max(c.contentHeight+2,41);c=c._statements[0]?c._statements[0].height:20;c=Math.max(c,51);return{offsetX:-(b/2+13),offsetY:0,width:b+30,height:d+c+13,marginBottom:0}},statementPos:function(c){return[{x:0,y:Math.max(39,c.contentHeight+2)+1.5}]},contentPos:function(){return{x:-46,
y:25}}};Entry.skeleton.pebble_basic={fontSize:15,morph:["prev","next"],path:function(c){return"m 0,9 a 9,9 0 0,0 9,-9 h 28 q 25,0 25,25q 0,25 -25,25h -28 a 9,9 0 0,1 -18,0 h -28 q -25,0 -25,-25q 0,-25 25,-25h 28 a 9,9 0 0,0 9,9 z"},magnets:function(c){return{previous:{x:0,y:0},next:{x:0,y:(c?Math.max(c.height,51):51)+c.offsetY}}},box:function(){return{offsetX:-62,offsetY:0,width:124,height:50,marginBottom:0}},contentPos:function(){return{x:-46,y:25}}};
Entry.skeleton.basic_string_field={path:function(c){var b=c.contentWidth;c=c.contentHeight;c=Math.max(18,c+2);b=Math.max(0,b-c+12);return"m %h,0 h %w a %h,%h 0 1,1 0,%wh H %h A %h,%h 0 1,1 %h,0 z".replace(/%wh/gi,c).replace(/%w/gi,b).replace(/%h/gi,c/2)},color:"#000",outerLine:"#768dce",box:function(c){return{offsetX:0,offsetY:0,width:(c?c.contentWidth:5)+12,height:Math.max((c?c.contentHeight:18)+2,18),marginBottom:0}},magnets:function(){return{string:{}}},contentPos:function(c){return{x:6,y:Math.max(c.contentHeight,
16)/2+1}}};
Entry.skeleton.basic_boolean_field={path:function(c){var b=c.contentWidth;c=c.contentHeight;c=Math.max(18,c+2);b=Math.max(0,b-c+19);return"m %h,0 h %w l %h,%h -%h,%h H %h l -%h,-%h %h,-%h z".replace(/%wh/gi,c).replace(/%w/gi,b).replace(/%h/gi,c/2)},color:"#000",outerLine:"#768dce",box:function(c){return{offsetX:0,offsetY:0,width:(c?c.contentWidth:5)+19,height:Math.max((c?c.contentHeight:18)+2,18),marginBottom:0}},magnets:function(){return{boolean:{}}},contentPos:function(c){return{x:10,y:Math.max(c.contentHeight,
16)/2+1}}};
Entry.skeleton.basic_param={path:function(c){var b=c.contentWidth;(c=c._contents[c._contents.length-1])&&(b-=c.box.width+Entry.BlockView.PARAM_SPACE-2);b=Math.max(0,b);return"m 4,0 h 10 h %w l 2,2 0,3 3,0 1,1 0,12 -1,1 -3,0 0,3 -2,2h -%w h -10 l -2,-2 0,-3 3,0 1,-1 0,-12 -1,-1 -3,0 0,-3 2,-2".replace(/%w/gi,b)},outerLine:"#768dce",box:function(c){return{offsetX:0,offsetY:0,width:(c?c.contentWidth:5)+11,height:24,marginBottom:0}},magnets:function(){return{param:{}}},contentPos:function(c){return{x:11,y:12}}};
Entry.skeleton.basic_button={path:function(){return"m -64,0 h 128 a 6,6 0, 0,1 6,6 v 18 a 6,6 0, 0,1 -6,6 h -128 a 6,6 0, 0,1 -6,-6 v -18 a 6,6 0, 0,1 6,-6 z"},box:function(){return{offsetX:-80,offsetY:0,width:140,height:30}},contentPos:function(){return{x:0,y:15}},movable:!1,readOnly:!0,nextShadow:!0,classes:["basicButtonView"]};
Entry.skeleton.basic_without_next={box:Entry.skeleton.basic.box,contentPos:Entry.skeleton.basic.contentPos,path:function(c){var b=c.contentWidth;c=c.contentHeight;c=Math.max(30,c+2);b=Math.max(0,b+9-c/2);return"m -8,0 l 8,8 8,-8 h %w a %h,%h 0 0,1 0, %wh H -8 z".replace(/%wh/gi,c).replace(/%w/gi,b).replace(/%h/gi,c/2)},magnets:function(c){return{previous:{x:0,y:0}}}};
Entry.skeleton.basic_double_loop={path:function(c){var b=c.contentWidth,d=c.contentHeight%1E6,e=Math.floor(c.contentHeight/1E6),d=Math.max(30,d+2),e=Math.max(30,e+2),b=Math.max(0,b+5-d/2),f=c._statements;c=f[0]?f[0].height:20;f=f[1]?f[1].height:20;c=Math.max(c,20);f=Math.max(f,20);return"m -8,0 l 8,8 8,-8 h %w a %h1,%h1 0 0,1 0,%wh1 H 24 l -8,8 -8,-8 h -0.4 v %sh1 h 0.4 l 8,8 8,-8 h %bw a %h2,%h2 0 0,1 0,%wh2 H 24 l -8,8 -8,-8 h -0.4 v %sh2 h 0.4 l 8,8 8,-8 h %bw a 8,8 0 0,1 0,16 H 8 l -8,8 -8,-8 z".replace(/%wh1/gi,
d).replace(/%wh2/gi,e).replace(/%w/gi,b).replace(/%bw/gi,b-8).replace(/%h1/gi,d/2).replace(/%h2/gi,e/2).replace(/%sh1/gi,c+1).replace(/%sh2/gi,f+1)},magnets:function(c){var b=Math.max(c.contentHeight%1E6+2,30),d=Math.max(Math.floor(c.contentHeight/1E6)+2,30),e=c._statements[0]?c._statements[0].height:20,f=c._statements[1]?c._statements[1].height:20,e=Math.max(e,20),f=Math.max(f,20);return{previous:{x:0,y:0},next:{x:0,y:e+f+b+d+19+c.offsetY}}},box:function(c){var b=c.contentWidth,d=Math.max(Math.floor(c.contentHeight/
1E6)+2,30),e=Math.max(c.contentHeight%1E6+2,30),f=c._statements[0]?c._statements[0].height%1E6:20;c=c._statements[1]?c._statements[1].height:20;f=Math.max(f,20);c=Math.max(c,20);return{offsetX:-8,offsetY:0,width:b+30,height:d+e+f+c+17,marginBottom:0}},statementPos:function(c){var b=Math.max(30,c.contentHeight%1E6+2)+1;return[{x:16,y:b},{x:16,y:b+Math.max(c._statements[0]?c._statements[0].height%1E6:20,20)+Math.max(Math.floor(c.contentHeight/1E6)+2,30)+1}]},contentPos:function(c){return{x:14,y:Math.max(c.contentHeight%
1E6,28)/2+1}}};Entry.Block=function(c,b){var d=this;Entry.Model(this,!1);this._schema=null;c._backupParams&&(this._backupParams=c._backupParams);this.setThread(b);this.load(c);if(b=c.category)this.category=b,Entry.block[this.type]&&(Entry.block[this.type].isFor=["category_"+b]);b=this.getCode();void 0!==c.display&&(this.display=c.display);b.registerBlock(this);(c=this.events.dataAdd)&&b.object&&c.forEach(function(b){Entry.Utils.isFunction(b)&&b(d)});c=this.events.viewAdd;b=b.board;c&&Entry.getMainWS()&&Entry.isTextMode&&
(!b||b&&b.constructor!==Entry.BlockMenu)&&c.forEach(function(b){Entry.Utils.isFunction(b)&&b.apply(d,[d])})};Entry.Block.MAGNET_RANGE=10;Entry.Block.MAGNET_OFFSET=.4;Entry.Block.DELETABLE_TRUE=1;Entry.Block.DELETABLE_FALSE=2;Entry.Block.DELETABLE_FALSE_LIGHTEN=3;
(function(c){c.schema={id:null,x:0,y:0,type:null,params:[],statements:[],view:null,thread:null,movable:null,deletable:Entry.Block.DELETABLE_TRUE,readOnly:null,copyable:!0,events:{},extensions:[]};c.load=function(b){b.id||(b.id=Entry.Utils.generateId());this.set(b);this.loadSchema()};c.changeSchema=function(b,c){b=[];if(c)if(c.isRestore)b=this._backupParams||[],delete this._backupParams;else switch(c.type){case "noChange":b=this.params;break;case "cut":this.params.splice(c.pos);b=this.params;break;
case "insert":var d=c.startPos;c=c.endPos;var f=Entry.block[this.type].params;b=Array(f.length);for(var g=0;g<d;g++)b[g]=this.params[g];d=c-d+1;for(g=c+1;g<f.length;g++)b[g]=this.params[g-d]}b.forEach(function(b){b instanceof Entry.Block&&b.destroyView()});this.set({params:b});this.loadSchema();this.view&&this.view.changeType()};c.getSchema=function(){this._schema||this.loadSchema();return this._schema};c.loadSchema=function(){if(this._schema=Entry.block[this.type]){!this._schemaChangeEvent&&this._schema.changeEvent&&
(this._schemaChangeEvent=this._schema.changeEvent.attach(this,this.changeSchema));!this._paramsBackupEvent&&this._schema.paramsBackupEvent&&(this._paramsBackupEvent=this._schema.paramsBackupEvent.attach(this,this.paramsBackup));!this._destroyParamsBackupEvent&&this._schema.destroyParamsBackupEvent&&(this._destroyParamsBackupEvent=this._schema.destroyParamsBackupEvent.attach(this,this.destroyParamsBackup));var b=this._schema.events;if(b)for(var c in b){this.events[c]||(this.events[c]=[]);for(var e=
b[c],f=0;f<e.length;f++){var g=e[f];g&&0>this.events[c].indexOf(g)&&this.events[c].push(g)}}this._schema.event&&this.thread.registerEvent(this,this._schema.event);b=this.params;c=this._schema.params;for(f=0;c&&f<c.length;f++)e=void 0===b[f]||null===b[f]?c[f].value:b[f],g=b[f]||f<b.length,!e||"Output"!==c[f].type&&"Block"!==c[f].type||("object"!==typeof e&&(e={type:"number",params:[e]}),e=new Entry.Block(e,this.thread)),g?b.splice(f,1,e):b.push(e);if(b=this._schema.statements)for(f=0;f<b.length;f++)this.statements.splice(f,
1,new Entry.Thread(this.statements[f],this.getCode(),this))}};c.changeType=function(b){this._schemaChangeEvent&&this._schemaChangeEvent.destroy();this._backupEvent&&this._backupEvent.destroy();this._destroyBackupEvent&&this._destroyBackupEvent.destroy();this.set({type:b});this.loadSchema();this.view&&this.view.changeType(b)};c.setThread=function(b){this.set({thread:b})};c.getThread=function(){return this.thread};c.insertAfter=function(b){this.thread.insertByBlock(this,b)};c._updatePos=function(){this.view&&
this.set({x:this.view.x,y:this.view.y})};c.moveTo=function(b,c){this.view&&this.view._moveTo(b,c);this._updatePos();this.getCode().changeEvent.notify()};c.createView=function(b,c){b=b||this.getCode().view.board;this.view||(this.set({view:new Entry.BlockView(this,b,c)}),this._updatePos())};c.destroyView=function(){this.view&&this.view.destroy()};c.clone=function(b){return new Entry.Block(this.toJSON(!0),b)};c.toJSON=function(b,c,e){var d=this._toJSON();delete d.view;delete d.thread;delete d.events;
e=e||{};b&&delete d.id;for(var g=[],h=0;h<d.params.length;h++){var k=d.params[h];k instanceof Entry.Block?k=k.toJSON(b,c,e):e.captureDynamic&&this.view.getParam(h)instanceof Entry.FieldDropdownDynamic&&(k=this.view.getParam(h).getTextValue());g.push(k)}d.params=g;d.statements=d.statements.map(function(d){return d.toJSON(b,void 0,c,e)});d.x=this.x;d.y=this.y;d.movable=this.movable;d.deletable=this.deletable;d.readOnly=this.readOnly;this._backupParams&&(d._backupParams=this._backupParams.map(function(b){return b instanceof
Entry.Block?b.toJSON():b}));c&&c instanceof Array&&c.forEach(function(b){delete d[b]});return d};c.destroy=function(b,c,e){if(!e||this.isDeletable()){var d=this,g=this.params;if(g)for(e=0;e<g.length;e++){var h=g[e];h instanceof Entry.Block&&(h.doNotSplice=!(h.thread instanceof Entry.FieldOutput),h.destroy(b))}if(g=this.statements)for(e=0;e<g.length;e++)g[e].destroy(b);var k=this.getPrevBlock(),g=this.getNextBlock();e=this.getCode();e.unregisterBlock(this);h=this.getThread();this._schema&&this._schema.event&&
h.unregisterEvent(this,this._schema.event);g&&(c?g.destroy(b,c):k?g.view&&g.view.bindPrev(k,!0):h.view&&(c=h.view.getParent(),c.constructor===Entry.FieldStatement?(g.view&&g.view.bindPrev(c),c.insertTopBlock(g)):c.constructor===Entry.FieldStatement?g.replace(c._valueBlock):g.view._toGlobalCoordinate()));var l=this.doNotSplice;!this.doNotSplice&&h.spliceBlock?h.spliceBlock(this):delete this.doNotSplice;this.view&&this.view.destroy(b);this._schemaChangeEvent&&this._schemaChangeEvent.destroy();this._paramsBackupEvent&&
this._paramsBackupEvent.destroy();this._destroyParamsBackupEvent&&this._destroyParamsBackupEvent.destroy();(b=this.events.dataDestroy)&&e.object&&b.forEach(function(b){Entry.Utils.isFunction(b)&&b.apply(d,[d,l])});b=this.events.viewDestroy;c=this.getCode().board;b&&Entry.getMainWS()&&Entry.isTextMode&&(!c||c&&c.constructor!==Entry.BlockMenu)&&b.forEach(function(b){Entry.Utils.isFunction(b)&&b.apply(d,[d,l])})}};c.getView=function(){return this.view};c.setMovable=function(b){this.movable!=b&&this.set({movable:b})};
c.setCopyable=function(b){this.copyable!=b&&this.set({copyable:b})};c.isMovable=function(){return this.movable};c.isCopyable=function(){return this.copyable};c.setDeletable=function(b){this.deletable!=b&&this.set({deletable:b})};c.isDeletable=function(){return this.deletable===Entry.Block.DELETABLE_TRUE||!0===this.deletable};c.isReadOnly=function(){return this.readOnly};c.getCode=function(){return this.thread.getCode()};c.doAdd=function(){this.getCode().changeEvent.notify()};c.doMove=function(){this._updatePos();
this.getCode().changeEvent.notify()};c.doInsert=function(b){"basic"===this.getBlockType()?this.insert(b):this.replace(b)};c.doDestroy=function(b){this.destroy(b);this.getCode().changeEvent.notify();return this};c.doDestroyBelow=function(b){this.destroy(b,!0);this.getCode().changeEvent.notify();return this};c.copy=function(){var b=this.getThread(),c=[];if(b instanceof Entry.Thread)for(var e=b.getBlocks().indexOf(this),b=b.toJSON(!0,e),e=0;e<b.length;e++)c.push(b[e]);else c.push(this.toJSON(!0));b=
this.view.getAbsoluteCoordinate();e=c[0];e.x=b.x+15;e.y=b.y+15;e.id=Entry.Utils.generateId();return c};c.copyToClipboard=function(){Entry.clipboard=this.copy()};c.separate=function(b,c){this.thread.separate(this,b,c);this._updatePos();this.getCode().changeEvent.notify()};c.doSeparate=c.separate;c.insert=function(b){var c=this.thread.cut(this);b instanceof Entry.Thread?b.insertByBlock(null,c):b.insertAfter(c);this._updatePos();this.getCode().changeEvent.notify()};c.replace=function(b){this.thread.cut(this);
b.getThread().replace(this);this.getCode().changeEvent.notify()};c.getPrevBlock=function(){return this.thread.getPrevBlock(this)};c.getNextBlock=function(){return this.thread.getNextBlock(this)||null};c.getLastBlock=function(){return this.thread.getLastBlock()};c.getOutputBlock=function(){for(var b=this._schema.params,c=0;b&&c<b.length;c++)if("Output"===b[c].type)return this.params[c];return null};c.getTerminateOutputBlock=function(){for(var b=this;;){var c=b.getOutputBlock();if(!c)return b;b=c}};
c.getBlockType=function(){if(!this.view)return null;var b=Entry.skeleton[this._schema.skeleton].magnets(this.view);return b.next||b.previous?"basic":b.boolean||b.string?"field":b.output?"output":null};c.indexOfStatements=function(b){return this.statements.indexOf(b)};c.pointer=function(b){return this.thread.pointer(b||[],this)};c.targetPointer=function(){var b=this.thread.pointer([],this);4===b.length&&0===b[3]?b.pop():-1<b[b.length-2]&&(0===b[b.length-1]?b.pop():--b[b.length-1]);return b};c.getDataByPointer=
function(b){b=b.concat();var c=this.params[b.shift()];return b.length?c.getDataByPointer?c.getDataByPointer(b):null:c};c.getBlockList=function(b,c){var d=[];if(!this._schema)return[];if(b&&this._schema.isPrimitive)return d;(c||this.type)===this.type&&d.push(this);for(var f=this.params,g=0;g<f.length;g++){var h=f[g];h&&h.constructor==Entry.Block&&(d=d.concat(h.getBlockList(b,c)))}if(f=this.statements)for(g=0;g<f.length;g++)h=f[g],h.constructor===Entry.Thread&&(d=d.concat(h.getBlockList(b,c)));return d};
c.stringify=function(b){return JSON.stringify(this.toJSON(!1,b))};c.isInOrigin=function(){return 0===this.x&&0===this.y};c.isSameParamWith=function(b){if("wildcard"===b.type.substr(0,8)||"wildcard"===this.type.substr(0,8))return!0;if(!("angle"===b.type&&"text"===this.type||"text"===b.type&&"angle"===this.type)&&b.type!==this.type)return!1;for(var c=0;c<this.params.length;c++){var e=this.params[c];if(e instanceof Entry.Block){if(!e.isSameParamWith(b.params[c]))return!1}else{var e=this.params[c],f=
b.params[c],e="number"===typeof e?e+"":e,f="number"===typeof f?f+"":f;if(e!==f)return!1}}return!0};c.paramsBackup=function(){this.view&&this.view.isInBlockMenu||(this._backupParams=this.params.slice())};c.destroyParamsBackup=function(){this._backupParams=null};c.getDom=function(b){return 0<b.length&&"magnet"===b.shift()?this.view.getMagnet(b):this.view.svgGroup};c.getParam=function(b){return this.params[b]}})(Entry.Block.prototype);if("object"!==typeof Entry)var Entry={};if("object"==typeof exports){var Lang=require("../../extern/lang/ko.js").Lang;"object"!==typeof Entry&&(Entry={});Entry.Bitbrick={};EntryStatic={}}Entry.block||(Entry.block={});Entry.block.converters||(Entry.block.converters={});
Entry&&Entry.block&&(Entry.block.converters={},function(c){c.keyboardCode=function(b,c){var d;b&&(d=b.toUpperCase());d={32:"space",13:"enter",38:"up",37:"left",39:"right",40:"down"}[c]||d||c;return Entry.Utils.isNumber(d)?'"()"'.replace('"()"',d):'"()"'.replace("()",d)};c.returnStringKey=function(b,c){if(!c&&"number"!==typeof c||"null"===c)return"None";b=String(b);"mouse"===c&&(b="mouse");var d=Entry.TextCodingUtil.dropdownDynamicIdToNameConvertor(c,this.menuName);d&&(b=d);if(this.codeMap)var f=eval(this.codeMap);
f&&(c=f[c])&&(b=c);b=b.replace(/\"/gi,"");return'"()"'.replace("()",b)};c.returnRawStringKey=function(b,c){if(!c&&"number"!==typeof c||"null"===c)return"None";b=String(b);"mouse"===c&&(b=c);(c=Entry.TextCodingUtil.dropdownDynamicIdToNameConvertor(c,this.menuName))&&(b=c);b=b.replace(/\"/gi,"");return'"()"'.replace('"()"',b)};c.returnStringValue=function(b,c){if(!c&&"number"!==typeof c||"null"===c)return"None";if(this.codeMap)var d=eval(this.codeMap);b=c;d&&(d=d[b])&&(c=d);return'"()"'.replace("()",
c)};c.returnOperator=function(b,c){return{EQUAL:"==",GREATER:">",LESS:"<",GREATER_OR_EQUAL:">=",LESS_OR_EQUAL:"<=",PLUS:"+",MINUS:"-",MULTI:"*",DIVIDE:"/","==":"EQUAL",">":"GREATER","<":"LESS",">=":"GREATER_OR_EQUAL","<=":"LESS_OR_EQUAL","+":"PLUS","-":"MINUS","*":"MULTI","/":"DIVIDE"}[c]};c.returnRawNumberValueByKey=function(b,c){return b};c.returnStringOrNumberByValue=function(b,c){if(Entry.Utils.isNumber(c))return c;c=c.replace(/\"/gi,"");return'"()"'.replace("()",c)};c.returnObjectOrStringValue=
function(b,c){if(Entry.container&&Entry.container.getObject(c))return c=Entry.container.getObject(c).name,'"()"'.replace("()",c);if(this.codeMap)var d=eval(this.codeMap);b=c;d&&(d=d[b])&&(c=d);c=c.replace(/\"/gi,"");return'"()"'.replace("()",c)};c.returnStringValueUpperCase=function(b,c){if(this.codeMap)var d=eval(this.codeMap);b=c;d&&(d=d[b])&&(c=d);return'"()"'.replace("()",c).toUpperCase()};c.returnValueUpperCase=function(b,c){if(this.codeMap)var d=eval(this.codeMap);b=c;d&&(d=d[b])&&(c=d);return c.toUpperCase()};
c.returnStringValueLowerCase=function(b,c){if(this.codeMap)var d=eval(this.codeMap);b=c;d&&(d=d[b])&&(c=d);return'"()"'.replace("()",c).toLowerCase()}}(Entry.block.converters));
Entry.block={albert_hand_found:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[],events:{},def:{params:[],type:"albert_hand_found"},"class":"albert_sensor",isNotFor:["albert"],func:function(c,b){c=Entry.hw.portData;return 40<c.leftProximity||40<c.rightProximity},syntax:{js:[],py:["Albert.hand_found()"]}},albert_is_oid_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_front_oid,
"FRONT"],[Lang.Blocks.ALBERT_back_oid,"BACK"]],value:"FRONT",fontSize:11},{type:"Block",accept:"string"}],events:{},def:{params:[null,{type:"number",params:["0"]}],type:"albert_is_oid_value"},paramsKeyMap:{OID:0,VALUE:1},"class":"albert_sensor",isNotFor:["albert"],func:function(c,b){c=Entry.hw.portData;var d=b.getField("OID",b);b=b.getNumberValue("VALUE");return"FRONT"==d?c.frontOid==b:c.backOid==b}},albert_value:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",
options:[[Lang.Blocks.ALBERT_sensor_left_proximity,"leftProximity"],[Lang.Blocks.ALBERT_sensor_right_proximity,"rightProximity"],[Lang.Blocks.ALBERT_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.ALBERT_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.ALBERT_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.ALBERT_sensor_front_oid,"frontOid"],[Lang.Blocks.ALBERT_sensor_back_oid,"backOid"],[Lang.Blocks.ALBERT_sensor_position_x,"positionX"],[Lang.Blocks.ALBERT_sensor_position_y,"positionY"],
[Lang.Blocks.ALBERT_sensor_orientation,"orientation"],[Lang.Blocks.ALBERT_sensor_light,"light"],[Lang.Blocks.ALBERT_sensor_temperature,"temperature"],[Lang.Blocks.ALBERT_sensor_battery,"battery"],[Lang.Blocks.ALBERT_sensor_signal_strength,"signalStrength"]],value:"leftProximity",fontSize:11}],events:{},def:{params:[null],type:"albert_value"},paramsKeyMap:{DEVICE:0},"class":"albert_sensor",isNotFor:["albert"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]},syntax:{js:[],
py:["Albert.value(%1)"]}},albert_move_forward_for_secs:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"albert_move_forward_for_secs"},paramsKeyMap:{VALUE:0},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=
!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=30;c.rightWheel=30;c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},c);Entry.Albert.timeouts.push(d);return b},syntax:{js:[],py:["Albert.move_forward_for_secs(%1)"]}},albert_move_backward_for_secs:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},
def:{params:[{type:"text",params:["1"]},null],type:"albert_move_backward_for_secs"},paramsKeyMap:{VALUE:0},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=-30;c.rightWheel=-30;c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},
c);Entry.Albert.timeouts.push(d);return b},syntax:{js:[],py:["Albert.move_backward_for_secs(%1)"]}},albert_turn_for_secs:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_turn_left,"LEFT"],[Lang.Blocks.ALBERT_turn_right,"RIGHT"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["1"]},null],type:"albert_turn_for_secs",id:"como"},paramsKeyMap:{DIRECTION:0,
VALUE:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;"LEFT"==b.getField("DIRECTION",b)?(c.leftWheel=-30,c.rightWheel=30):(c.leftWheel=30,c.rightWheel=-30);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},c);Entry.Albert.timeouts.push(d);
return b},syntax:{js:[],py:["Albert.turn_for_secs(%1, %2)"]}},albert_change_both_wheels_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["10"]},{type:"text",params:["10"]},null],type:"albert_change_both_wheels_by"},paramsKeyMap:{LEFT:0,RIGHT:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;
var d=b.getNumberValue("LEFT"),e=b.getNumberValue("RIGHT");c.leftWheel=void 0!=c.leftWheel?c.leftWheel+d:d;c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e;return b.callReturn()},syntax:{js:[],py:["Albert.change_both_wheels(%1, %2)"]}},albert_set_both_wheels_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["30"]},{type:"text",
params:["30"]},null],type:"albert_set_both_wheels_to"},paramsKeyMap:{LEFT:0,RIGHT:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;c.leftWheel=b.getNumberValue("LEFT");c.rightWheel=b.getNumberValue("RIGHT");return b.callReturn()},syntax:{js:[],py:["Albert.set_both_wheels(%1, %2)"]}},albert_change_wheel_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_left_wheel,"LEFT"],[Lang.Blocks.ALBERT_right_wheel,"RIGHT"],
[Lang.Blocks.ALBERT_both_wheels,"BOTH"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["10"]},null],type:"albert_change_wheel_by"},paramsKeyMap:{DIRECTION:0,VALUE:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=void 0!=c.leftWheel?c.leftWheel+e:e:("RIGHT"!=d&&(c.leftWheel=
void 0!=c.leftWheel?c.leftWheel+e:e),c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e);return b.callReturn()},syntax:{js:[],py:["Albert.change_wheel(%1, %2)"]}},albert_set_wheel_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_left_wheel,"LEFT"],[Lang.Blocks.ALBERT_right_wheel,"RIGHT"],[Lang.Blocks.ALBERT_both_wheels,"BOTH"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],
events:{},def:{params:[null,{type:"text",params:["30"]},null],type:"albert_set_wheel_to"},paramsKeyMap:{DIRECTION:0,VALUE:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=e:("RIGHT"!=d&&(c.leftWheel=e),c.rightWheel=e);return b.callReturn()},syntax:{js:[],py:["Albert.set_wheel(%1, %2)"]}},albert_stop:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null],type:"albert_stop",id:"4adb"},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;c.leftWheel=0;c.rightWheel=0;return b.callReturn()},syntax:{js:[],py:["Albert.stop()"]}},albert_set_pad_size_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["108"]},{type:"text",
params:["76"]},null],type:"albert_set_pad_size_to",id:"5mhg"},paramsKeyMap:{WIDTH:0,HEIGHT:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;c.padWidth=b.getNumberValue("WIDTH");c.padHeight=b.getNumberValue("HEIGHT");return b.callReturn()},syntax:{js:[],py:["Albert.set_pad_size(%1, %2)"]}},albert_move_to_x_y_on_board:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"number",params:["0"]},{type:"number",params:["0"]},null],type:"albert_move_to_x_y_on_board"},paramsKeyMap:{X:0,Y:1},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){var d=Entry.hw.sendQueue,e=Entry.hw.portData;c=Entry.Albert.controller;if(b.isStart){if(b.isMoving){0<=e.positionX&&(b.x=e.positionX);0<=e.positionY&&(b.y=e.positionY);b.theta=e.orientation;switch(b.boardState){case 1:if(0==b.initialized){if(0>b.x||0>b.y){d.leftWheel=20;d.rightWheel=
-20;break}b.initialized=!0}d=c.toRadian(b.theta);0==c.controlAngle(d,Math.atan2(b.targetY-b.y,b.targetX-b.x))&&(b.boardState=2);break;case 2:0==c.controlPosition(b.x,b.y,c.toRadian(b.theta),b.targetX,b.targetY)&&(b.boardState=3);break;case 3:0==c.controlPositionFine(b.x,b.y,c.toRadian(b.theta),b.targetX,b.targetY)&&(d.leftWheel=0,d.rightWheel=0,b.isMoving=!1)}return b}delete b.isStart;delete b.isMoving;delete b.initialized;delete b.boardState;delete b.x;delete b.y;delete b.theta;delete b.targetX;
delete b.targetY;Entry.engine.isContinue=!1;d.leftWheel=0;d.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.initialized=!1;b.boardState=1;b.x=-1;b.y=-1;b.theta=-200;b.targetX=b.getNumberValue("X");b.targetY=b.getNumberValue("Y");c.clear();d.leftWheel=0;d.rightWheel=0;return b}},albert_set_orientation_on_board:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"number",
params:["0"]},null],type:"albert_set_orientation_on_board"},paramsKeyMap:{ORIENTATION:0},"class":"albert_wheel",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData,e=Entry.Albert.controller;if(b.isStart){if(b.isMoving){b.theta=d.orientation;switch(b.boardState){case 1:var d=e.toRadian(b.theta),f=e.toRadian(b.targetTheta);0==e.controlAngle(d,f)&&(b.boardState=2);break;case 2:d=e.toRadian(b.theta),f=e.toRadian(b.targetTheta),0==e.controlAngleFine(d,f)&&(c.leftWheel=0,
c.rightWheel=0,b.isMoving=!1)}return b}delete b.isStart;delete b.isMoving;delete b.boardState;delete b.theta;delete b.targetTheta;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.boardState=1;b.theta=-200;b.targetTheta=b.getNumberValue("ORIENTATION");e.clear();c.leftWheel=0;c.rightWheel=0;return b}},albert_set_eye_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_left_eye,"LEFT"],[Lang.Blocks.ALBERT_right_eye,
"RIGHT"],[Lang.Blocks.ALBERT_both_eyes,"BOTH"]],value:"LEFT",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.ALBERT_color_red,"4"],[Lang.Blocks.ALBERT_color_yellow,"6"],[Lang.Blocks.ALBERT_color_green,"2"],[Lang.Blocks.ALBERT_color_cyan,"3"],[Lang.Blocks.ALBERT_color_blue,"1"],[Lang.Blocks.ALBERT_color_magenta,"5"],[Lang.Blocks.ALBERT_color_white,"7"]],value:"4",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"albert_set_eye_to"},
paramsKeyMap:{DIRECTION:0,COLOR:1},"class":"albert_led",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b),e=Number(b.getField("COLOR",b));"LEFT"==d?c.leftEye=e:("RIGHT"!=d&&(c.leftEye=e),c.rightEye=e);return b.callReturn()},syntax:{js:[],py:["Albert.set_eye(%1, %2)"]}},albert_clear_eye:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_left_eye,"LEFT"],[Lang.Blocks.ALBERT_right_eye,"RIGHT"],[Lang.Blocks.ALBERT_both_eyes,
"BOTH"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"albert_clear_eye"},paramsKeyMap:{DIRECTION:0},"class":"albert_led",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b);"LEFT"==d?c.leftEye=0:("RIGHT"!=d&&(c.leftEye=0),c.rightEye=0);return b.callReturn()},syntax:{js:[],py:["Albert.clear_eye(%1)"]}},albert_body_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",
options:[[Lang.Blocks.ALBERT_turn_on,"ON"],[Lang.Blocks.ALBERT_turn_off,"OFF"]],value:"ON",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"albert_body_led"},paramsKeyMap:{STATE:0},"class":"albert_led",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;"ON"==b.getField("STATE",b)?c.bodyLed=1:c.bodyLed=0;return b.callReturn()},syntax:{js:[],py:["Albert.body_led(%1)"]}},albert_front_led:{color:"#00979D",skeleton:"basic",statements:[],
params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_turn_on,"ON"],[Lang.Blocks.ALBERT_turn_off,"OFF"]],value:"ON",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"albert_front_led"},paramsKeyMap:{STATE:0},"class":"albert_led",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;"ON"==b.getField("STATE",b)?c.frontLed=1:c.frontLed=0;return b.callReturn()},syntax:{js:[],py:["Albert.front_led(%1)"]}},albert_beep:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"albert_beep"},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.buzzer=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.buzzer=440;c.note=0;var d=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(d)},200);Entry.Albert.timeouts.push(d);
return b},syntax:{js:[],py:["Albert.beep()"]}},albert_change_buzzer_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["10"]},null],type:"albert_change_buzzer_by"},paramsKeyMap:{VALUE:0},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("VALUE");c.buzzer=void 0!=c.buzzer?c.buzzer+d:d;c.note=0;return b.callReturn()},
syntax:{js:[],py:["Albert.change_buzzer(%1)"]}},albert_set_buzzer_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},null],type:"albert_set_buzzer_to"},paramsKeyMap:{VALUE:0},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;c.buzzer=b.getNumberValue("VALUE");c.note=0;return b.callReturn()},syntax:{js:[],py:["Albert.set_buzzer(%1)"]}},
albert_clear_buzzer:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"albert_clear_buzzer"},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;c.buzzer=0;c.note=0;return b.callReturn()},syntax:{js:[],py:["Albert.clear_buzzer()"]}},albert_play_note_for:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_note_c+"","4"],
[Lang.Blocks.ALBERT_note_c+"#","5"],[Lang.Blocks.ALBERT_note_d+"","6"],[Lang.Blocks.ALBERT_note_e+"b","7"],[Lang.Blocks.ALBERT_note_e+"","8"],[Lang.Blocks.ALBERT_note_f+"","9"],[Lang.Blocks.ALBERT_note_f+"#","10"],[Lang.Blocks.ALBERT_note_g+"","11"],[Lang.Blocks.ALBERT_note_g+"#","12"],[Lang.Blocks.ALBERT_note_a+"","13"],[Lang.Blocks.ALBERT_note_b+"b","14"],[Lang.Blocks.ALBERT_note_b+"","15"]],value:"4",fontSize:11},{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6",
"6"],["7","7"]],value:"1",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,"4",{type:"text",params:["0.5"]},null],type:"albert_play_note_for"},paramsKeyMap:{NOTE:0,OCTAVE:1,VALUE:2},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){var d=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;d.note=0;return b.callReturn()}c=b.getNumberField("NOTE",
b);var e=b.getNumberField("OCTAVE",b),f=6E4*b.getNumberValue("VALUE",b)/Entry.Albert.tempo;b.isStart=!0;b.timeFlag=1;d.buzzer=0;d.note=c+12*(e-1);if(100<f){var g=setTimeout(function(){d.note=0;Entry.Albert.removeTimeout(g)},f-100);Entry.Albert.timeouts.push(g)}var h=setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(h)},f);Entry.Albert.timeouts.push(h);return b},syntax:{js:[],py:["Albert.play_note(%1, %2, %3)"]}},albert_rest_for:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",
accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0.25"]},null],type:"albert_rest_for"},paramsKeyMap:{VALUE:0},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;return b.callReturn()}b.isStart=!0;b.timeFlag=1;var d=b.getNumberValue("VALUE"),d=6E4*d/Entry.Albert.tempo;c.buzzer=0;c.note=0;var e=
setTimeout(function(){b.timeFlag=0;Entry.Albert.removeTimeout(e)},d);Entry.Albert.timeouts.push(e);return b},syntax:{js:[],py:["Albert.rest(%1)"]}},albert_change_tempo_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["20"]},null],type:"albert_change_tempo_by"},paramsKeyMap:{VALUE:0},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){Entry.Albert.tempo+=
b.getNumberValue("VALUE");1>Entry.Albert.tempo&&(Entry.Albert.tempo=1);return b.callReturn()},syntax:{js:[],py:["Albert.change_tempo(%1)"]}},albert_set_tempo_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["60"]},null],type:"albert_set_tempo_to"},paramsKeyMap:{VALUE:0},"class":"albert_buzzer",isNotFor:["albert"],func:function(c,b){Entry.Albert.tempo=b.getNumberValue("VALUE");
1>Entry.Albert.tempo&&(Entry.Albert.tempo=1);return b.callReturn()},syntax:{js:[],py:["Albert.set_tempo(%1)"]}},albert_move_forward:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null]},func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=
30;c.rightWheel=30;setTimeout(function(){b.timeFlag=0},1E3);return b},syntax:{js:[],py:["Albert.move_forward()"]}},albert_move_backward:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null]},func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return c.leftWheel=-30,c.rightWheel=-30,b;delete b.timeFlag;delete b.isStart;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=
!0;b.timeFlag=1;setTimeout(function(){b.timeFlag=0},1E3);return b},syntax:{js:[],py:["Albert.move_backward()"]}},albert_turn_around:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_turn_left,"LEFT"],[Lang.Blocks.ALBERT_turn_right,"RIGHT"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null]},paramsKeyMap:{DIRECTION:0},func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==
b.timeFlag)return c.leftWheel=b.leftValue,c.rightWheel=b.rightValue,b;delete b.timeFlag;delete b.isStart;delete b.leftValue;delete b.rightValue;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}c="LEFT"==b.getField("DIRECTION",b);b.leftValue=c?-30:30;b.rightValue=c?30:-30;b.isStart=!0;b.timeFlag=1;setTimeout(function(){b.timeFlag=0},1E3);return b},syntax:{js:[],py:["Albert.turn_around()"]}},albert_set_led_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",
options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"FRONT"]],value:"LEFT",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,null,null]},paramsKeyMap:{DIRECTION:0,COLOR:1},func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b),e=Number(b.getField("COLOR",b));"FRONT"==d?(c.leftEye=e,c.rightEye=e):"LEFT"==d?c.leftEye=e:c.rightEye=e;return b.callReturn()},syntax:{js:[],py:["Albert.set_led(%1, %2)"]}},albert_clear_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],
[Lang.Blocks.HAMSTER_both_leds,"FRONT"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null]},paramsKeyMap:{DIRECTION:0},func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b);"FRONT"==d?(c.leftEye=0,c.rightEye=0):"LEFT"==d?c.leftEye=0:c.rightEye=0;return b.callReturn()},syntax:{js:[],py:["Albert.clear_led(%1)"]}},albert_change_wheels_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_left_wheel,
"LEFT"],[Lang.Blocks.ALBERT_right_wheel,"RIGHT"],[Lang.Blocks.ALBERT_both_wheels,"FRONT"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null]},paramsKeyMap:{DIRECTION:0,VALUE:1},func:function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData,e=b.getField("DIRECTION"),f=b.getNumberValue("VALUE");"LEFT"==e?c.leftWheel=void 0!=c.leftWheel?c.leftWheel+f:d.leftWheel+f:("RIGHT"!=e&&(c.leftWheel=void 0!=
c.leftWheel?c.leftWheel+f:d.leftWheel+f),c.rightWheel=void 0!=c.rightWheel?c.rightWheel+f:d.rightWheel+f);return b.callReturn()},syntax:{js:[],py:["Albert.change_wheels(%1, %2)"]}},albert_set_wheels_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_left_wheel,"LEFT"],[Lang.Blocks.ALBERT_right_wheel,"RIGHT"],[Lang.Blocks.ALBERT_both_wheels,"FRONT"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,null]},paramsKeyMap:{DIRECTION:0,VALUE:1},func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=e:("RIGHT"!=d&&(c.leftWheel=e),c.rightWheel=e);return b.callReturn()},syntax:{js:[],py:["Albert.set_wheels(%1, %2)"]}},arduino_text:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"TextInput",value:10}],events:{},def:{params:[]},paramsKeyMap:{NAME:0},func:function(c,b){return b.getStringField("NAME")},
syntax:{js:[],py:[{syntax:"%1",textParams:[{type:"TextInput",value:10,converter:Entry.block.converters.returnStringOrNumberByValue}],keyOption:"arduino_text"}]}},arduino_send:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[]},paramsKeyMap:{VALUE:0},func:function(c,b){c=b.getValue("VALUE",b);var d=new XMLHttpRequest;d.open("POST","http://localhost:23518/arduino/",!1);d.send(String(c));Entry.assert(200==d.status,"arduino is not connected");
return b.callReturn()},syntax:{js:[],py:["Arduino.send(%1)"]}},arduino_get_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[]},paramsKeyMap:{VALUE:0},func:function(c,b){c=b.getValue("VALUE",b);b=new XMLHttpRequest;b.open("POST","http://localhost:23518/arduino/",!1);b.send(String(c));Entry.assert(200==b.status,"arduino is not connected");return Number(b.responseText)},syntax:{js:[],py:["Arduino.number(%1)"]}},arduino_get_string:{color:"#00979D",
skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[]},paramsKeyMap:{VALUE:0},func:function(c,b){c=b.getValue("VALUE",b);b=new XMLHttpRequest;b.open("POST","http://localhost:23518/arduino/",!1);b.send(String(c));Entry.assert(200==b.status,"arduino is not connected");return b.responseText},syntax:{js:[],py:["Arduino.string(%1)"]}},arduino_get_sensor_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["0",
"A0"],["1","A1"],["2","A2"],["3","A3"],["4","A4"],["5","A5"]],value:"A0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getStringField("PORT")},syntax:{js:[],py:[{syntax:"%1",blockType:"param",textParams:[{type:"Dropdown",options:[["0","A0"],["1","A1"],["2","A2"],["3","A3"],["4","A4"],["5","A5"]],value:"A0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW,converter:Entry.block.converters.returnStringValue}],keyOption:"arduino_get_sensor_number"}]}},
arduino_get_port_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"]],value:"0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getStringField("PORT")},syntax:{js:[],py:[{syntax:"%1",textParams:[{type:"Dropdown",options:[["0",
"0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"]],value:"0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],keyOption:"arduino_get_port_number"}]}},arduino_get_pwm_port_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],value:"3",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},
def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getStringField("PORT")},syntax:{js:[],py:[{syntax:"%1",textParams:[{type:"Dropdown",options:[["3","3"],["5","5"],["6","6"],["9","9"],["10","10"],["11","11"]],value:"3",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW,converter:Entry.block.converters.returnStringOrNumberByValue}],keyOption:"arduino_get_pwm_port_number"}]}},arduino_get_number_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],
params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_get_sensor_number"}],type:"arduino_get_number_sensor_value"},paramsKeyMap:{VALUE:0},"class":"arduino_value",isNotFor:["arduino"],func:function(c,b){c=b.getValue("VALUE",b);return Entry.hw.getAnalogPortValue(c[1])},syntax:{js:[],py:[{syntax:"Arduino.sensor_value(%1)",blockType:"param",textParams:[{type:"Block",accept:"string"}]}]}},arduino_get_digital_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",
statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_get_port_number"}],type:"arduino_get_digital_value"},paramsKeyMap:{VALUE:0},"class":"arduino_value",isNotFor:["arduino"],func:function(c,b){c=b.getNumberValue("VALUE",b);return Entry.hw.getDigitalPortValue(c)},syntax:{js:[],py:[{syntax:"Arduino.digitalRead(%1)",blockType:"param",replaceBlockType:"arduino_ext_get_digital",textParams:[{type:"Block",accept:"string"}]}]}},arduino_toggle_led:{color:"#00979D",skeleton:"basic",
statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]],value:"on",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_port_number"},null,null],type:"arduino_toggle_led"},paramsKeyMap:{VALUE:0,OPERATOR:1},"class":"arduino_set",isNotFor:["arduino"],func:function(c,b){c=b.getNumberValue("VALUE");var d=b.getField("OPERATOR");
Entry.hw.setDigitalPortValue(c,"on"==d?255:0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Arduino.pin_digital(%1, %2)",textParams:[{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]],value:"on",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW,converter:Entry.block.converters.returnStringValue}]}]}},arduino_toggle_pwm:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"arduino_toggle_pwm"},paramsKeyMap:{PORT:0,VALUE:1},"class":"arduino_set",isNotFor:["arduino"],func:function(c,b){c=b.getNumberValue("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255);Entry.hw.setDigitalPortValue(c,d);return b.callReturn()},syntax:{js:[],py:[{syntax:"Arduino.set_pin_digital(%1, %2)",
textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},arduino_convert_scale:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_get_number_sensor_value",params:[{type:"arduino_get_sensor_number",id:"bl5e"}]},{type:"number",params:["0"]},{type:"number",
params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"arduino_convert_scale"},paramsKeyMap:{VALUE1:0,VALUE2:1,VALUE3:2,VALUE4:3,VALUE5:4},"class":"arduino",isNotFor:["arduino"],func:function(c,b){var d=b.getNumberValue("VALUE1",b),e=b.getNumberValue("VALUE2",b),f=b.getNumberValue("VALUE3",b);c=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(e>f)var g=e,e=f,f=g;c>b&&(g=c,c=b,b=g);d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)},
syntax:{js:[],py:[{syntax:"Arduino.convert_scale(%1, %2, %3, %4, %5)",blockType:"param",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},arduino_ext_analog_list:{color:"#00979D",skeleton:"basic_string_field",statements:[],template:"%1",params:[{type:"Dropdown",options:[["A0","0"],["A1","1"],["A2","2"],["A3","3"],["A4","4"],["A5","5"]],value:"0",fontSize:11}],events:{},def:{params:[null]},
paramsKeyMap:{PORT:0},func:function(c,b){return b.getField("PORT")},syntax:{js:[],py:[{syntax:"%1",blockType:"param",textParams:[{type:"Dropdown",options:[["A0","0"],["A1","1"],["A2","2"],["A3","3"],["A4","4"],["A5","5"]],value:"0",fontSize:11,converter:Entry.block.converters.returnStringKey,codeMap:"Entry.CodeMap.Arduino.arduino_ext_analog_list[0]"}],keyOption:"arduino_ext_analog_list"}]}},arduino_ext_get_analog_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],
params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_ext_analog_list"}],type:"arduino_ext_get_analog_value"},paramsKeyMap:{PORT:0},"class":"ArduinoExtGet",isNotFor:["ArduinoExt"],func:function(c,b){c=b.getValue("PORT",b);b=Entry.hw.portData.ANALOG;"A"===c[0]&&(c=c.substring(1));return b?b[c]||0:0},syntax:{js:[],py:[{syntax:"Arduino.analogRead(%1)",blockType:"param",textParams:[{type:"Block",accept:"string"}]}]}},arduino_ext_get_analog_value_map:{color:"#00979D",fontColor:"#fff",
skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_ext_get_analog_value",params:[{type:"arduino_ext_analog_list"}]},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"arduino_ext_get_analog_value_map"},paramsKeyMap:{PORT:0,VALUE2:1,
VALUE3:2,VALUE4:3,VALUE5:4},"class":"ArduinoExtGet",isNotFor:["ArduinoExt"],func:function(c,b){c=b.getValue("PORT",b);var d=b.getNumberValue("VALUE2",b),e=b.getNumberValue("VALUE3",b),f=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(d>e)var g=d,d=e,e=g;f>b&&(g=f,f=b,b=g);c=Math.min(b,(b-f)/(e-d)*(c-d)+f);return c=Math.max(f,c)},syntax:{js:[],py:[{syntax:"Arduino.map(%1, %2, %3, %4, %5)",blockType:"param",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",
accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},arduino_ext_get_ultrasonic_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_get_port_number",params:["2"]},{type:"arduino_get_port_number",params:["4"]}],type:"arduino_ext_get_ultrasonic_value"},paramsKeyMap:{PORT1:0,PORT2:1},"class":"ArduinoExtGet",isNotFor:["ArduinoExt"],
func:function(c,b){c=b.getNumberValue("PORT1",b);b=b.getNumberValue("PORT2",b);Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET={});delete Entry.hw.sendQueue.SET[c];delete Entry.hw.sendQueue.SET[b];Entry.hw.sendQueue.GET||(Entry.hw.sendQueue.GET={});Entry.hw.sendQueue.GET[Entry.ArduinoExt.sensorTypes.ULTRASONIC]={port:[c,b],time:(new Date).getTime()};return Entry.hw.portData.ULTRASONIC||0},syntax:{js:[],py:[{syntax:"Arduino.ultrasonicRead(%1, %2)",blockType:"param",textParams:[{type:"Block",accept:"string"},
{type:"Block",accept:"string"}]}]}},arduino_ext_get_digital:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_get_port_number"}],type:"arduino_ext_get_digital"},paramsKeyMap:{PORT:0},"class":"ArduinoExtGet",isNotFor:["ArduinoExt"],func:function(c,b){c=b.getNumberValue("PORT",b);b=Entry.hw.portData.DIGITAL;Entry.hw.sendQueue.GET||(Entry.hw.sendQueue.GET={});Entry.hw.sendQueue.GET[Entry.ArduinoExt.sensorTypes.DIGITAL]=
{port:c,time:(new Date).getTime()};return b?b[c]||0:0},syntax:{js:[],py:[{syntax:"Arduino.digitalRead(%1)",keyOption:"ext",blockType:"param",textParams:[{type:"Block",accept:"string"}]}]}},arduino_get_digital_toggle:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]],value:"on",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null]},paramsKeyMap:{OPERATOR:0},func:function(c,
b){return b.getStringField("OPERATOR")},syntax:{js:[],py:[{syntax:"%1",textParams:[{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]],value:"on",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW,converter:Entry.block.converters.returnStringValueUpperCase,codeMap:"Entry.CodeMap.Arduino.arduino_get_digital_toggle[0]"}],keyOption:"arduino_get_digital_toggle"}]}},arduino_ext_toggle_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},
{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_port_number"},{type:"arduino_get_digital_toggle",params:["on"]},null],type:"arduino_ext_toggle_led"},paramsKeyMap:{PORT:0,VALUE:1},"class":"ArduinoExt",isNotFor:["ArduinoExt"],func:function(c,b){c=b.getNumberValue("PORT");var d=b.getValue("VALUE");"string"===typeof d&&(d=d.toLowerCase());if(-1<Entry.ArduinoExt.highList.indexOf(d))d=255;else if(-1<Entry.ArduinoExt.lowList.indexOf(d))d=
0;else throw Error();Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET={});Entry.hw.sendQueue.SET[c]={type:Entry.ArduinoExt.sensorTypes.DIGITAL,data:d,time:(new Date).getTime()};return b.callReturn()},syntax:{js:[],py:[{syntax:"Arduino.digitalWrite(%1, %2)",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},arduino_ext_digital_pwm:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"arduino_get_pwm_port_number"},{type:"text",params:["255"]},null],type:"arduino_ext_digital_pwm"},paramsKeyMap:{PORT:0,VALUE:1},"class":"ArduinoExt",isNotFor:["ArduinoExt"],func:function(c,b){c=b.getNumberValue("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255);Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET={});Entry.hw.sendQueue.SET[c]={type:Entry.ArduinoExt.sensorTypes.PWM,data:d,time:(new Date).getTime()};return b.callReturn()},
syntax:{js:[],py:[{syntax:"Arduino.analogWrite(%1, %2)",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},arduino_ext_tone_list:{color:"#00979D",skeleton:"basic_string_field",statements:[],template:"%1",params:[{type:"Dropdown",options:[[Lang.Blocks.silent,"0"],[Lang.Blocks.do_name,"C"],[Lang.Blocks.do_sharp_name,"CS"],[Lang.Blocks.re_name,"D"],[Lang.Blocks.re_sharp_name,"DS"],[Lang.Blocks.mi_name,"E"],[Lang.Blocks.fa_name,"F"],[Lang.Blocks.fa_sharp_name,"FS"],[Lang.Blocks.sol_name,
"G"],[Lang.Blocks.sol_sharp_name,"GS"],[Lang.Blocks.la_name,"A"],[Lang.Blocks.la_sharp_name,"AS"],[Lang.Blocks.si_name,"B"]],value:"C",fontSize:11}],events:{},def:{params:[null]},paramsKeyMap:{NOTE:0},func:function(c,b){return b.getField("NOTE")},syntax:{js:[],py:[{syntax:"%1",textParams:[{type:"Dropdown",options:[[Lang.Blocks.silent,"0"],[Lang.Blocks.do_name,"C"],[Lang.Blocks.do_sharp_name,"CS"],[Lang.Blocks.re_name,"D"],[Lang.Blocks.re_sharp_name,"DS"],[Lang.Blocks.mi_name,"E"],[Lang.Blocks.fa_name,
"F"],[Lang.Blocks.fa_sharp_name,"FS"],[Lang.Blocks.sol_name,"G"],[Lang.Blocks.sol_sharp_name,"GS"],[Lang.Blocks.la_name,"A"],[Lang.Blocks.la_sharp_name,"AS"],[Lang.Blocks.si_name,"B"]],value:"C",fontSize:11,converter:Entry.block.converters.returnStringValueUpperCase}],keyOption:"arduino_ext_tone_list"}]}},arduino_ext_tone_value:{color:"#00979D",skeleton:"basic_string_field",statements:[],template:"%1",params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_ext_tone_list"}],type:"arduino_ext_tone_value"},
paramsKeyMap:{NOTE:0},func:function(c,b){return b.getNumberValue("NOTE")},syntax:{js:[],py:[{syntax:"%1",keyOption:"arduino_ext_tone_value"}]}},arduino_ext_octave_list:{color:"#00979D",skeleton:"basic_string_field",statements:[],template:"%1",params:[{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"]],value:"3",fontSize:11}],events:{},def:{params:[null]},paramsKeyMap:{OCTAVE:0},func:function(c,b){return b.getField("OCTAVE")},syntax:{js:[],py:[{syntax:"%1",keyOption:"arduino_ext_octave_list"}]}},
arduino_ext_set_tone:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_port_number",value:4},{type:"arduino_ext_tone_list"},{type:"arduino_ext_octave_list"},{type:"text",params:["1"]},null],type:"arduino_ext_set_tone"},paramsKeyMap:{PORT:0,NOTE:1,OCTAVE:2,DURATION:3},
"class":"ArduinoExt",isNotFor:["ArduinoExt"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("PORT",b);if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;c.SET[d]={type:Entry.ArduinoExt.sensorTypes.TONE,data:0,time:(new Date).getTime()};Entry.engine.isContinue=!1;return b.callReturn()}var e=b.getValue("NOTE",b);Entry.Utils.isNumber(e)||(e=Entry.ArduinoExt.toneTable[e]);0>e?e=0:12<e&&(e=12);var f=b.getNumberValue("DURATION",b);0>f&&(f=0);c.SET||(c.SET={});if(0===
f)return c.SET[d]={type:Entry.ArduinoExt.sensorTypes.TONE,data:0,time:(new Date).getTime()},b.callReturn();var g=b.getNumberValue("OCTAVE",b)-1;0>g?g=0:5<g&&(g=5);var h=0;0!=e&&(h=Entry.ArduinoExt.toneMap[e][g]);f*=1E3;b.isStart=!0;b.timeFlag=1;c.SET[d]={type:Entry.ArduinoExt.sensorTypes.TONE,data:{value:h,duration:f},time:(new Date).getTime()};setTimeout(function(){b.timeFlag=0},f+32);return b},syntax:{js:[],py:[{syntax:"Arduino.tone(%1, %2, %3, %4)",textParams:[{type:"Block",accept:"string"},{type:"Block",
accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},arduino_ext_set_servo:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_port_number"},null],type:"arduino_ext_set_servo"},paramsKeyMap:{PORT:0,VALUE:1},"class":"ArduinoExt",isNotFor:["ArduinoExt"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("PORT",
b),e=b.getNumberValue("VALUE",b),e=Math.min(180,e),e=Math.max(0,e);c.SET||(c.SET={});c.SET[d]={type:Entry.ArduinoExt.sensorTypes.SERVO_PIN,data:e,time:(new Date).getTime()};return b.callReturn()},syntax:{js:[],py:[{syntax:"Arduino.servomotorWrite(%1, %2)",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},sensorBoard_get_named_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["\uc18c\ub9ac","0"],
["\ube5b \uac10\uc9c0","1"],["\uc2ac\ub77c\uc774\ub354","2"],["\uc628\ub3c4","3"]],value:"0",fontSize:11}],events:{},def:{params:[null],type:"sensorBoard_get_named_sensor_value"},paramsKeyMap:{PORT:0},"class":"sensorBoard",isNotFor:["sensorBoard"],func:function(c,b){return Entry.hw.getAnalogPortValue(b.getField("PORT",b))},syntax:{js:[],py:["Sensorboard.sensor_value(%1)"]}},sensorBoard_is_button_pressed:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",
options:[["\ube68\uac04","8"],["\ud30c\ub780","9"],["\ub178\ub791","10"],["\ucd08\ub85d","11"]],value:"8",fontSize:11}],events:{},def:{params:[null],type:"sensorBoard_is_button_pressed"},paramsKeyMap:{PORT:0},"class":"sensorBoard",isNotFor:["sensorBoard"],func:function(c,b){return Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b))},syntax:{js:[],py:["Sensorboard.is_button_pressed(%1)"]}},sensorBoard_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["\ube68\uac04",
"2"],["\ucd08\ub85d","3"],["\ud30c\ub780","4"],["\ub178\ub791","5"]],value:"2",fontSize:11},{type:"Dropdown",options:[["\ucf1c\uae30","255"],["\ub044\uae30","0"]],value:"255",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"sensorBoard_led"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"sensorBoard",isNotFor:["sensorBoard"],func:function(c,b){Entry.hw.setDigitalPortValue(b.getField("PORT"),b.getNumberField("OPERATOR"));return b.callReturn()},
syntax:{js:[],py:["Sensorboard.led(%1, %2)"]}},arduino_download_connector:{skeleton:"basic_button",isNotFor:["arduinoDisconnected"],color:"#eee",params:[{type:"Text",text:Entry.isOffline?Lang.Blocks.ARDUINO_open_connector:Lang.Blocks.ARDUINO_download_connector,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.hw.downloadConnector()}]}},download_guide:{skeleton:"basic_button",isNotFor:["arduinoDisconnected"],color:"#eee",params:[{type:"Text",text:Lang.Blocks.download_guide,color:"#333",
align:"center"}],events:{mousedown:[function(){Entry.hw.downloadGuide()}]}},arduino_download_source:{skeleton:"basic_button",isNotFor:["arduinoDisconnected"],color:"#eee",params:[{type:"Text",text:Lang.Blocks.ARDUINO_download_source,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.hw.downloadSource()}]}},arduino_connected:{skeleton:"basic_button",color:"#eee",isNotFor:["arduinoConnected"],params:[{type:"Text",text:Lang.Blocks.ARDUINO_connected,color:"#333",align:"center"}],events:{}},
arduino_connect:{skeleton:"basic_button",color:"#eee",isNotFor:["arduinoConnect"],params:[{type:"Text",text:Lang.Blocks.ARDUINO_connect,color:"#333",align:"center"}],events:{}},arduino_reconnect:{skeleton:"basic_button",color:"#eee",isNotFor:["arduinoDisconnected"],params:[{type:"Text",text:Lang.Blocks.ARDUINO_reconnect,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.hw.retryConnect()}]}},arduino_open:{skeleton:"basic_button",color:"#eee",isNotFor:["arduinoDisconnected"],template:"%1",
params:[{type:"Text",text:Lang.Blocks.ARDUINO_open_connector,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.hw.openHardwareProgram()}]}},arduino_cloud_pc_open:{skeleton:"basic_button",color:"#eee",isNotFor:["arduinoConnect","arduinoConnected"],template:"%1",params:[{type:"Text",text:Lang.Blocks.ARDUINO_cloud_pc_connector,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.hw.openHardwareProgram()}]}},CODEino_get_sensor_number:{color:"#00979D",skeleton:"basic_string_field",
statements:[],params:[{type:"Dropdown",options:[["0","A0"],["1","A1"],["2","A2"],["3","A3"],["4","A4"],["5","A5"],["6","A6"]],value:"A0",fontSize:11}],events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getStringField("PORT")}},CODEino_get_named_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_sensor_name_0,"0"],[Lang.Blocks.CODEino_sensor_name_1,"1"],[Lang.Blocks.CODEino_sensor_name_2,
"2"],[Lang.Blocks.CODEino_sensor_name_3,"3"],[Lang.Blocks.CODEino_sensor_name_4,"4"],[Lang.Blocks.CODEino_sensor_name_5,"5"],[Lang.Blocks.CODEino_sensor_name_6,"6"]],value:"0",fontSize:11}],events:{},def:{params:[null],type:"CODEino_get_named_sensor_value"},paramsKeyMap:{PORT:0},"class":"CODEino_sensor",isNotFor:["CODEino"],func:function(c,b){c=b.getField("PORT",b);var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.ANALOG;
if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,f?f[c]||0:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:c};throw new Entry.Utils.AsyncError;}},CODEino_get_sound_status:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_string_11,
"GREAT"],[Lang.Blocks.CODEino_string_12,"SMALL"]],value:"GREAT",fontSize:11}],events:{},def:{params:[null],type:"CODEino_get_sound_status"},paramsKeyMap:{STATUS:0},"class":"CODEino_sensor",isNotFor:["CODEino"],func:function(c,b){c=b.getField("STATUS",b);var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.ANALOG;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,"GREAT"==c?600<f[0]?
1:0:600>=f[0]?1:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:0};throw new Entry.Utils.AsyncError;}},CODEino_get_light_status:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_string_14,"BRIGHT"],[Lang.Blocks.CODEino_string_15,"DARK"]],value:"BRIGHT",fontSize:11}],
events:{},def:{params:[null],type:"CODEino_get_light_status"},paramsKeyMap:{STATUS:0},"class":"CODEino_sensor",isNotFor:["CODEino"],func:function(c,b){c=b.getField("STATUS",b);var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.ANALOG;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,"GREAT"==c?800>f[1]?1:0:800>=f[1]?1:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;
Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:1};throw new Entry.Utils.AsyncError;}},CODEino_is_button_pressed:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_string_3,"4"],[Lang.Blocks.CODEino_string_4,"17"],[Lang.Blocks.CODEino_string_5,"18"],[Lang.Blocks.CODEino_string_6,"19"],[Lang.Blocks.CODEino_string_7,"20"]],
value:"4",fontSize:11}],events:{},def:{params:[null],type:"CODEino_is_button_pressed"},paramsKeyMap:{PORT:0},"class":"CODEino_sensor",isNotFor:["CODEino"],func:function(c,b){c=b.getNumberField("PORT",b);if(10>c){var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.DIGITAL),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.DIGITAL;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,f?!f[c]:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;
b.stamp=d;Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.DIGITAL,port:4};throw new Entry.Utils.AsyncError;}d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG);e=Entry.hw.portData.TIME||0;b=b.executor.scope;f=Entry.hw.portData.ANALOG;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,1E3>f[c-14]?1:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;Entry.hw.sendQueue.TIME=
d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:c-14};throw new Entry.Utils.AsyncError;}},CODEino_get_accelerometer_direction:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_string_16,"LEFT"],[Lang.Blocks.CODEino_string_17,"RIGHT"],[Lang.Blocks.CODEino_string_18,"FRONT"],[Lang.Blocks.CODEino_string_19,"REAR"],[Lang.Blocks.CODEino_string_20,
"REVERSE"]],value:"LEFT",fontSize:11}],events:{},def:{params:[null],type:"CODEino_get_accelerometer_direction"},paramsKeyMap:{DIRECTION:0},"class":"CODEino_sensor",isNotFor:["CODEino"],func:function(c,b){c=b.getField("DIRECTION",b);var d=0,e=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG),f=Entry.hw.portData.TIME||0;b=b.executor.scope;var g=Entry.hw.portData.ANALOG;"LEFT"==c||"RIGHT"==c?d=3:"FRONT"==c||"REAR"==c?d=4:"REVERSE"==c&&(d=5);if(b.isStart)if(f&&f===b.stamp){delete b.isStart;
delete b.stamp;d=g[d];d=Math.min(90,180/137*(d-265)+-90);d=Math.max(-90,d);d=Math.round(d);if("LEFT"==c||"REAR"==c)return-30>d?1:0;if("RIGHT"==c||"FRONT"==c)return 30<d?1:0;if("REVERSE"==c)return-50>d?1:0}else if(64<e-b.stamp){delete b.isStart;delete b.stamp;d=g[d];d=Math.min(90,180/137*(d-265)+-90);d=Math.max(-90,d);d=Math.round(d);if("LEFT"==c||"REAR"==c)return-30>d?1:0;if("RIGHT"==c||"FRONT"==c)return 30<d?1:0;if("REVERSE"==c)return-50>d?1:0}else throw new Entry.Utils.AsyncError;else throw b.isStart=
!0,b.stamp=e,Entry.hw.sendQueue.TIME=e,Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey(),Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:d},new Entry.Utils.AsyncError;}},CODEino_get_accelerometer_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["X","3"],["Y","4"],["Z","5"]],value:"3",fontSize:11}],events:{},def:{params:[null],type:"CODEino_get_accelerometer_value"},paramsKeyMap:{PORT:0},"class":"CODEino_sensor",
isNotFor:["CODEino"],func:function(c,b){c=b.getNumberField("PORT",b);var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.ANALOG;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,c=f[c],c=Math.min(90,1.46*(c-333)),c=Math.max(-90,c),Math.round(c);throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();
Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:c};throw new Entry.Utils.AsyncError;}},CODEino_get_analog_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]],value:"0",fontSize:11}],events:{},def:{params:[null],type:"CODEino_get_analog_value"},paramsKeyMap:{PORT:0},"class":"CODEino_Adumode",isNotFor:["CODEino"],func:function(c,b){c=b.getField("PORT",b);
var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.ANALOG),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.ANALOG;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,delete b.stamp,f?f[c]||0:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.ANALOG,port:c};throw new Entry.Utils.AsyncError;}},CODEino_get_digital_value:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_boolean_field",params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"arduino_get_port_number"}],type:"CODEino_get_digital_value"},paramsKeyMap:{PORT:0},"class":"CODEino_Adumode",isNotFor:["CODEino"],func:function(c,b){c=b.getNumberValue("PORT",b);var d=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.DIGITAL),e=Entry.hw.portData.TIME||0;b=b.executor.scope;var f=Entry.hw.portData.DIGITAL;if(b.isStart){if(e&&e===b.stamp||64<d-b.stamp)return delete b.isStart,
delete b.stamp,f?f[c]||0:0;throw new Entry.Utils.AsyncError;}b.isStart=!0;b.stamp=d;Entry.hw.sendQueue.TIME=d;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.GET={type:Entry.CODEino.sensorTypes.DIGITAL,port:c};throw new Entry.Utils.AsyncError;}},CODEino_set_digital_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"255"],[Lang.Blocks.ARDUINO_off,"0"]],fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_port_number"},"255",null],type:"CODEino_set_digital_value"},paramsKeyMap:{PORT:0,VALUE:1},"class":"CODEino_Setmode",isNotFor:["CODEino"],func:function(c,b){c=b.getNumberValue("PORT");var d=b.getNumberField("VALUE"),e=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.DIGITAL);Entry.hw.sendQueue.TIME=e;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET=
{});Entry.hw.sendQueue.SET[c]={type:Entry.CODEino.sensorTypes.DIGITAL,data:d};return b.callReturn()}},CODEino_set_pwm_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"CODEino_set_pwm_value"},paramsKeyMap:{PORT:0,VALUE:1},"class":"CODEino_Setmode",isNotFor:["CODEino"],
func:function(c,b){c=b.getNumberValue("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255),e=Entry.CODEino.getSensorTime(Entry.CODEino.sensorTypes.PWM);Entry.hw.sendQueue.TIME=e;Entry.hw.sendQueue.KEY=Entry.CODEino.getSensorKey();Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET={});Entry.hw.sendQueue.SET[c]={type:Entry.CODEino.sensorTypes.PWM,data:d};return b.callReturn()}},CODEino_convert_scale:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],
params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"CODEino_get_analog_value",value:"0"},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"CODEino_convert_scale"},paramsKeyMap:{VALUE1:0,VALUE2:1,VALUE3:2,VALUE4:3,VALUE5:4},"class":"CODEino_extmode",isNotFor:["CODEino"],func:function(c,
b){var d=b.getNumberValue("VALUE1",b),e=b.getNumberValue("VALUE2",b),f=b.getNumberValue("VALUE3",b);c=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(e>f)var g=e,e=f,f=g;c>b&&(g=c,c=b,b=g);d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)}},CODEino_set_rgb_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_led_red,"17"],[Lang.Blocks.CODEino_led_green,"18"],[Lang.Blocks.CODEino_led_blue,"19"]],value:"17",
fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{type:"CODEino_set_rgb_value"},paramsKeyMap:{PORT:0,VALUE:1},"class":"CODEino_RGBLED_mode",isNotFor:["CODEino"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberField("PORT",b),e=b.getNumberValue("VALUE",b),e=Math.min(255,e),e=Math.max(0,e);17==d?CODEINO_RED=e:18==d?CODEINO_GREEN=e:CODEINO_BLUE=e;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||
(c.SET={});c.SET[d]={type:4,data:e};return b.callReturn()}},CODEino_set_rgb_add_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CODEino_led_red,"17"],[Lang.Blocks.CODEino_led_green,"18"],[Lang.Blocks.CODEino_led_blue,"19"]],value:"17",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{type:"CODEino_set_rgb_add_value"},paramsKeyMap:{PORT:0,VALUE:1},"class":"CODEino_RGBLED_mode",
isNotFor:["CODEino"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberField("PORT",b),e=b.getNumberValue("VALUE",b),e=Math.min(255,e),e=Math.max(0,e);17==d&&(CODEINO_RED+=e,CODEINO_RED=Math.min(255,CODEINO_RED),e=CODEINO_RED=Math.max(0,CODEINO_RED));18==d&&(CODEINO_GREEN+=e,CODEINO_GREEN=Math.min(255,CODEINO_GREEN),e=CODEINO_GREEN=Math.max(0,CODEINO_GREEN));19==d&&(CODEINO_BLUE+=e,CODEINO_BLUE=Math.min(255,CODEINO_BLUE),e=CODEINO_BLUE=Math.max(0,CODEINO_BLUE));c.TIME=Entry.CODEino.getSensorTime(4);
c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:e};return b.callReturn()}},CODEino_rgb_set_color:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Color"},{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"CODEino_rgb_set_color"},paramsKeyMap:{VALUE:0},"class":"CODEino_RGBLED_mode",isNotFor:["CODEino"],func:function(c,b){c=b.getStringField("VALUE");CODEINO_RED=parseInt(c.substr(1,2),16);CODEINO_GREEN=parseInt(c.substr(3,
2),16);CODEINO_BLUE=parseInt(c.substr(5,2),16);c=Entry.hw.sendQueue;var d=17;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:CODEINO_RED};c=Entry.hw.sendQueue;d=18;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:CODEINO_GREEN};c=Entry.hw.sendQueue;d=19;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:CODEINO_BLUE};
return b.callReturn()}},CODEino_set_rgb_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"CODEino_set_rgb_off"},"class":"CODEino_RGBLED_mode",isNotFor:["CODEino"],func:function(c,b){c=Entry.hw.sendQueue;CODEINO_GREEN=CODEINO_BLUE=CODEINO_RED=0;var d=17;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:0};c=Entry.hw.sendQueue;d=18;
c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:0};c=Entry.hw.sendQueue;d=19;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:0};return b.callReturn()}},CODEino_set__led_by_rgb:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["255"]},{type:"text",params:["255"]},{type:"text",params:["255"]},null],type:"CODEino_set__led_by_rgb"},paramsKeyMap:{rValue:0,gValue:1,bValue:2},"class":"CODEino_RGBLED_mode",isNotFor:["CODEino"],func:function(c,b){CODEINO_RED=b.getNumberValue("rValue");CODEINO_GREEN=b.getNumberValue("gValue");CODEINO_BLUE=b.getNumberValue("bValue");c=Entry.hw.sendQueue;var d=17;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET=
{});c.SET[d]={type:4,data:CODEINO_RED};c=Entry.hw.sendQueue;d=18;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:CODEINO_GREEN};c=Entry.hw.sendQueue;d=19;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:CODEINO_BLUE};return b.callReturn()}},CODEino_led_by_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],
events:{},def:{params:[null],type:"CODEino_led_by_value"},"class":"CODEino_RGBLED_mode",isNotFor:["CODEino"],func:function(c,b){c=Entry.hw.sendQueue;var d=17;CODEINO_BLUE=CODEINO_GREEN=CODEINO_RED=100;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:100};c=Entry.hw.sendQueue;d=18;c.TIME=Entry.CODEino.getSensorTime(4);c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:100};c=Entry.hw.sendQueue;d=19;c.TIME=Entry.CODEino.getSensorTime(4);
c.KEY=Entry.CODEino.getSensorKey();c.SET||(c.SET={});c.SET[d]={type:4,data:100};return b.callReturn()}},CODEino_get_number_sensor_value:{parent:"arduino_get_number_sensor_value",isNotFor:["CODEino"],def:{params:[{type:"arduino_get_sensor_number"}],type:"CODEino_get_number_sensor_value"},"class":"arduino_value",syntax:{js:[],py:["CODEino.get_number_sensor_value(%1)"]}},CODEino_toggle_led:{parent:"arduino_toggle_led",isNotFor:["CODEino"],def:{params:[{type:"arduino_get_port_number"},null,null],type:"CODEino_toggle_led"},
"class":"arduino_set",syntax:{js:[],py:["CODEino.toggle_led(%1)"]}},CODEino_toggle_pwm:{parent:"arduino_toggle_pwm",isNotFor:["CODEino"],def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"CODEino_toggle_pwm"},"class":"arduino_set",syntax:{js:[],py:["CODEino.toggle_pwm(%1, %2)"]}},nemoino_get_named_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"%1 \uc13c\uc11c\uac12",params:[{type:"Dropdown",options:[["\uc18c\ub9ac",
"0"],["\ube5b","1"],["\uc2ac\ub77c\uc774\ub354","2"],["\uc800\ud56d-A","3"],["\uc800\ud56d-B","4"],["\uc800\ud56d-C","5"],["\uc800\ud56d-D","6"]],value:"0",fontSize:11}],events:{},def:{params:[null],type:"nemoino_get_named_sensor_value"},paramsKeyMap:{PORT:0},"class":"nemoino",isNotFor:["nemoino"],func:function(c,b){return Entry.hw.getAnalogPortValue(b.getField("PORT",b))}},nemoino_get_sound_status:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],template:"\uc18c\ub9ac\uc13c\uc11c %1",
params:[{type:"Dropdown",options:[["\uc18c\ub9ac\ud07c","GREAT"],["\uc18c\ub9ac\uc791\uc74c","SMALL"]],value:"GREAT",fontSize:11}],events:{},def:{params:[null],type:"nemoino_get_sound_status"},paramsKeyMap:{STATUS:0},"class":"nemoino",isNotFor:["nemoino"],func:function(c,b){return"GREAT"==b.getField("STATUS",b)?600<Entry.hw.getAnalogPortValue(0)?1:0:600>Entry.hw.getAnalogPortValue(0)?1:0}},nemoino_is_button_pressed:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],template:"\ubcf4\ub4dc\uc758 %1",
params:[{type:"Dropdown",options:[["\ubc84\ud2bc\ub204\ub984","4"],["A\uc5f0\uacb0\ub428","17"],["B\uc5f0\uacb0\ub428","18"],["C\uc5f0\uacb0\ub428","19"],["D\uc5f0\uacb0\ub428","20"]],value:"4",fontSize:11}],events:{},def:{params:[null],type:"nemoino_is_button_pressed"},paramsKeyMap:{PORT:0},"class":"nemoino",isNotFor:["nemoino"],func:function(c,b){c=b.getNumberField("PORT",b);return 14<c?!Entry.hw.getAnalogPortValue(c-14):!Entry.hw.getDigitalPortValue(c)}},nemoino_get_accelerometer_direction:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],template:"3\ucd95 \uac00\uc18d\ub3c4\uc13c\uc11c %1",params:[{type:"Dropdown",options:[["\uc67c\ucabd \uae30\uc6b8\uc784","LEFT"],["\uc624\ub978\ucabd \uae30\uc6b8\uc784","RIGHT"],["\uc704\ucabd \uae30\uc6b8\uc784","FRONT"],["\uc544\ub798\ucabd \uae30\uc6b8\uc784","REAR"],["\ub4a4\uc9d1\ud798","REVERSE"]],value:"LEFT",fontSize:11}],events:{},def:{params:[null],type:"nemoino_get_accelerometer_direction"},paramsKeyMap:{DIRECTION:0},"class":"nemoino",
isNotFor:["nemoino"],func:function(c,b){c=b.getField("DIRECTION",b);b=0;"LEFT"==c||"RIGHT"==c?b=3:"FRONT"==c||"REAR"==c?b=4:"REVERSE"==c&&(b=5);b=Entry.hw.getAnalogPortValue(b)-265;b=Math.min(90,180/137*b+-90);b=Math.max(-90,b);b=Math.round(b);if("LEFT"==c||"REAR"==c)return-30>b?1:0;if("RIGHT"==c||"FRONT"==c)return 30<b?1:0;if("REVERSE"==c)return-50>b?1:0}},nemoino_get_accelerometer_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"3\ucd95 \uac00\uc18d\ub3c4\uc13c\uc11c %1 \ucd95\uc758 \uc13c\uc11c\uac12",
params:[{type:"Dropdown",options:[["X","3"],["Y","4"],["Z","5"]],value:"3",fontSize:11}],events:{},def:{params:[null],type:"nemoino_get_accelerometer_value"},paramsKeyMap:{PORT:0},"class":"nemoino",isNotFor:["nemoino"],func:function(c,b){var d=Entry.hw.getAnalogPortValue(b.getField("PORT",b)),e=265,f=402;c=-90;b=90;if(e>f)var g=e,e=f,f=g;c>b&&(g=c,c=b,b=g);d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)}},bitbrick_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",
statements:[],params:[{type:"DropdownDynamic",value:null,fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW,menuName:Entry.Bitbrick.sensorList}],events:{},def:{params:[null],type:"bitbrick_sensor_value"},paramsKeyMap:{PORT:0},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c=b.getStringField("PORT");return Entry.hw.portData[c].value},syntax:{js:[],py:["Bitbrick.sensor_value(%1)"]}},bitbrick_is_touch_pressed:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],
params:[{type:"DropdownDynamic",value:null,fontSize:11,menuName:Entry.Bitbrick.touchList}],events:{},def:{params:[null],type:"bitbrick_is_touch_pressed"},paramsKeyMap:{PORT:0},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){return 0===Entry.hw.portData[b.getStringField("PORT")].value},syntax:{js:[],py:["Bitbrick.is_touch_pressed(%1)"]}},bitbrick_turn_off_color_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},
def:{params:[null],type:"bitbrick_turn_off_color_led",id:"i3je"},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){Entry.hw.sendQueue.LEDR=0;Entry.hw.sendQueue.LEDG=0;Entry.hw.sendQueue.LEDB=0;return b.callReturn()},syntax:{js:[],py:["Bitbrick.turn_off_color_led()"]}},bitbrick_turn_on_color_led_by_rgb:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["255"]},{type:"text",params:["255"]},{type:"text",params:["255"]},null],type:"bitbrick_turn_on_color_led_by_rgb"},paramsKeyMap:{rValue:0,gValue:1,bValue:2},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c=b.getNumberValue("rValue");var d=b.getNumberValue("gValue"),e=b.getNumberValue("bValue"),f=Entry.adjustValueWithMaxMin,g=Entry.hw.sendQueue;g.LEDR=f(c,0,255);g.LEDG=f(d,0,255);g.LEDB=f(e,0,255);return b.callReturn()},syntax:{js:[],
py:["Bitbrick.color_led_by_rgb(%1, %2, %3)"]}},bitbrick_turn_on_color_led_by_picker:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Color"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"bitbrick_turn_on_color_led_by_picker"},paramsKeyMap:{VALUE:0},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c=b.getStringField("VALUE");Entry.hw.sendQueue.LEDR=parseInt(c.substr(1,2),16);Entry.hw.sendQueue.LEDG=parseInt(c.substr(3,2),16);
Entry.hw.sendQueue.LEDB=parseInt(c.substr(5,2),16);return b.callReturn()},syntax:{js:[],py:["Bitbrick.color_led_by_picker(%1)"]}},bitbrick_turn_on_color_led_by_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0"]},null],type:"bitbrick_turn_on_color_led_by_value"},paramsKeyMap:{VALUE:0},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c=b.getNumberValue("VALUE");
var d,e,f;c%=200;67>c?(d=200-3*c,e=3*c,f=0):134>c?(c-=67,d=0,e=200-3*c,f=3*c):201>c&&(c-=134,d=3*c,e=0,f=200-3*c);Entry.hw.sendQueue.LEDR=d;Entry.hw.sendQueue.LEDG=e;Entry.hw.sendQueue.LEDB=f;return b.callReturn()},syntax:{js:[],py:["Bitbrick.color_led_by_value(%1)"]}},bitbrick_buzzer:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["60"]},null],type:"bitbrick_buzzer"},
paramsKeyMap:{VALUE:0},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){if(b.isStart)return Entry.hw.sendQueue.buzzer=0,delete b.isStart,b.callReturn();c=b.getNumberValue("VALUE");Entry.hw.sendQueue.buzzer=c;b.isStart=!0;return b},syntax:{js:[],py:["Bitbrick.buzzer(%1)"]}},bitbrick_turn_off_all_motors:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"bitbrick_turn_off_all_motors"},"class":"condition",
isNotFor:["bitbrick"],func:function(c,b){var d=Entry.hw.sendQueue;c=Entry.Bitbrick;c.servoList().map(function(b){d[b[1]]=0});c.dcList().map(function(b){d[b[1]]=128});return b.callReturn()},syntax:{js:[],py:["Bitbrick.turn_off_all_motors()"]}},bitbrick_dc_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,fontSize:11,menuName:Entry.Bitbrick.dcList},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,
{type:"text",params:["60"]},null],type:"bitbrick_dc_speed"},paramsKeyMap:{PORT:0,VALUE:1},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c=b.getNumberValue("VALUE");c=Math.min(c,Entry.Bitbrick.dcMaxValue);c=Math.max(c,Entry.Bitbrick.dcMinValue);Entry.hw.sendQueue[b.getStringField("PORT")]=c+128;return b.callReturn()},syntax:{js:[],py:["Bitbrick.dc_speed(%1, %2)"]}},bitbrick_dc_direction_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,
fontSize:11,menuName:Entry.Bitbrick.dcList},{type:"Dropdown",options:[[Lang.Blocks.BITBRICK_dc_direction_cw,"CW"],[Lang.Blocks.BITBRICK_dc_direction_ccw,"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["100"]},null],type:"bitbrick_dc_direction_speed"},paramsKeyMap:{PORT:0,DIRECTION:1,VALUE:2},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c="CW"===b.getStringField("DIRECTION");
var d=b.getNumberValue("VALUE"),d=Math.min(d,Entry.Bitbrick.dcMaxValue),d=Math.max(d,0);Entry.hw.sendQueue[b.getStringField("PORT")]=c?d+128:128-d;return b.callReturn()},syntax:{js:[],py:["Bitbrick.dc_direction_speed(%1, %2, %3)"]}},bitbrick_servomotor_angle:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,fontSize:11,menuName:Entry.Bitbrick.servoList},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,
{type:"text",params:["100"]},null],type:"bitbrick_servomotor_angle"},paramsKeyMap:{PORT:0,VALUE:1},"class":"condition",isNotFor:["bitbrick"],func:function(c,b){c=Entry.Bitbrick.servoMaxValue-(b.getNumberValue("VALUE")+1);c=Math.min(c,Entry.Bitbrick.servoMaxValue);c=Math.max(c,Entry.Bitbrick.servoMinValue);Entry.hw.sendQueue[b.getStringField("PORT")]=c;return b.callReturn()},syntax:{js:[],py:["Bitbrick.servomotor_angle(%1, %2)"]}},bitbrick_convert_scale:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",
statements:[],params:[{type:"DropdownDynamic",value:null,fontSize:11,menuName:Entry.Bitbrick.sensorList},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[null,{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["-100"]},{type:"number",params:["100"]}],type:"bitbrick_convert_scale"},paramsKeyMap:{PORT:0,VALUE2:1,VALUE3:2,VALUE4:3,VALUE5:4},"class":"condition",isNotFor:["bitbrick"],
func:function(c,b){c=b.getNumberField("PORT");var d=Entry.hw.portData[c].value,e=b.getNumberValue("VALUE2",b),f=b.getNumberValue("VALUE3",b);c=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(c>b){var g=c;c=b;b=g}d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)},syntax:{js:[],py:["Bitbrick.convert_scale(%1, %2, %3, %4, %5)"]}},cobl_read_ultrason:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"1. \ucd08\uc74c\ud30c\uac70\ub9ac(0~400)",
def:{type:"cobl_read_ultrason"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("ultrason")}},cobl_read_potenmeter:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"2.\uac00\ubcc0\uc800\ud56d(0~1023)",def:{type:"cobl_read_potenmeter"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("potenmeter")}},cobl_read_irread1:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"3.\uc801\uc678\uc120\uc13c\uc11c1(0~1023)",
def:{type:"cobl_read_irread1"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("irread1")}},cobl_read_irread2:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"4.\uc801\uc678\uc120\uc13c\uc11c2(0~1023)",def:{type:"cobl_read_irread2"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("irread2")}},cobl_read_joyx:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"5.\uc870\uc774\uc2a4\ud2f1X\ucd95(1, 0, -1)",
def:{type:"cobl_read_joyx"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("joyx")}},cobl_read_joyy:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"6.\uc870\uc774\uc2a4\ud2f1Y\ucd95(1, 0, -1)",def:{type:"cobl_read_joyy"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("joyy")}},cobl_read_tilt:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"7.\uae30\uc6b8\uae30\uc13c\uc11c(0~4)",
def:{type:"cobl_read_tilt"},class:"cobl",isNotFor:["cobl"],func:function(c,b){return Entry.hw.getAnalogPortValue("tilt")}},cobl_read_temps:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"8.\uc628\ub3c4\uc13c\uc11c@\ud3ec\ud2b8%1",params:[{type:"Dropdown",options:[["1","1"],["2","2"]],fontSize:11}],def:{params:["1"],type:"cobl_read_temps"},paramsKeyMap:{VALUE:0},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getField("VALUE",b);if(1==c)return Entry.hw.getAnalogPortValue("temps1");
if(2==c)return Entry.hw.getAnalogPortValue("temps2")}},cobl_read_light:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",template:"9.\ube5b\uc13c\uc11c@\ud3ec\ud2b8%1",params:[{type:"Dropdown",options:[["1","1"],["2","2"]],fontSize:11}],def:{params:["1"],type:"cobl_read_light"},paramsKeyMap:{VALUE:0},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getField("VALUE",b);if(1==c)return Entry.hw.getAnalogPortValue("light1");if(2==c)return Entry.hw.getAnalogPortValue("light2")}},cobl_read_btn:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_boolean_field",template:"10.\ubc84\ud2bc\uc2a4\uc704\uce58@\ud3ec\ud2b8%1",params:[{type:"Dropdown",options:[["1","1"],["2","2"]],fontSize:11}],def:{params:["1"],type:"cobl_read_btn"},paramsKeyMap:{VALUE:0},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getField("VALUE",b);if(1==c)return Entry.hw.getDigitalPortValue("btn1");if(2==c)return Entry.hw.getDigitalPortValue("btn2")}},cobl_led_control:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"11.\ubb34\uc9c0\uac1cLED%1%2 %3",
params:[{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"]],fontSize:11},{type:"Dropdown",options:[["OFF","OFF"],["\ube68\uac15","Red"],["\uc8fc\ud669","Orange"],["\ub178\ub791","Yellow"],["\ucd08\ub85d","Green"],["\ud30c\ub791","Blue"],["\ub0a8\uc0c9","Dark Blue"],["\ubcf4\ub77c","Purple"],["\ud770\uc0c9","White"]],fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],def:{params:["1","OFF"],type:"cobl_led_control"},paramsKeyMap:{PORT:0,OPERATOR:1},class:"cobl",isNotFor:["cobl"],
func:function(c,b){c=b.getStringField("PORT");var d=b.getStringField("OPERATOR");Entry.hw.setDigitalPortValue("RainBowLED_"+c,d);Entry.hw.update();delete Entry.hw.sendQueue["RainBowLED_"+c];return b.callReturn()}},cobl_servo_angle_control:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"12.\uac01\ub3c4\ubaa8\ud130 \uac01\ub3c4%1(15~165) %2",params:[{type:"TextInput",value:0},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],def:{type:"cobl_servo_angle_control"},paramsKeyMap:{VALUE:0},
class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getNumberField("VALUE");c=Math.round(c);c=Math.max(c,15);c=Math.min(c,165);Entry.hw.setDigitalPortValue("Servo1",c);Entry.hw.update();delete Entry.hw.sendQueue.Servo1;return b.callReturn()}},cobl_melody:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"13.\uba5c\ub85c\ub514%1 ,%2",params:[{type:"Dropdown",options:[["((\ub0ae\uc740)\uc194","L_So"],["(\ub0ae\uc740)\uc194#","L_So#"],["(\ub0ae\uc740)\ub77c","L_La"],["(\ub0ae\uc740)\ub77c#",
"L_La#"],["(\ub0ae\uc740)\uc2dc","L_Ti"],["\ub3c4","Do"],["\ub3c4#","Do#"],["\ub808","Re"],["\ub808#","Re#"],["\ubbf8","Mi"],["\ud30c","Fa"],["\ud30c#","Fa#"],["\uc194","So"],["\uc194#","So#"],["\ub77c","La"],["\ub77c#","La#"],["\uc2dc","Ti"],["(\ub192\uc740)\ub3c4","H_Do"],["(\ub192\uc740)\ub3c4#","H_Do#"],["(\ub192\uc740)\ub808","H_Re"],["(\ub192\uc740)\ub808#","H_Re#"],["(\ub192\uc740)\ubbf8#","H_Mi"],["(\ub192\uc740)\ud30c","H_Fa"]],fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],def:{params:["Do"],type:"cobl_melody"},paramsKeyMap:{MELODY:0},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getStringField("MELODY");Entry.hw.setDigitalPortValue("Melody",c);Entry.hw.update();delete Entry.hw.sendQueue.Melody;return b.callReturn()}},cobl_dcmotor:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"14.\ud68c\uc804\ubaa8\ud130%1%2\uc18d\ub3c4%3 %4",params:[{type:"Dropdown",options:[["1","1"],["2","2"]],fontSize:11},{type:"Dropdown",options:[["1.\uc2dc\uacc4\ubc29\ud5a5",
"1"],["2.\ubc18\uc2dc\uacc4\ubc29\ud5a5","2"],["3.\uc815\uc9c0","3"]],fontSize:11},{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]],fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],def:{params:["1","1","1"],type:"cobl_dcmotor"},paramsKeyMap:{MOTOR:0,DIRECTION:1,SPEED:2},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getStringField("MOTOR");var d=b.getStringField("DIRECTION"),e=b.getStringField("SPEED");1==c&&(Entry.hw.setDigitalPortValue("DC1_DIR",
d),Entry.hw.setDigitalPortValue("DC1_SPEED",e),Entry.hw.update(),delete Entry.hw.sendQueue.DC1_DIR,delete Entry.hw.sendQueue.DC1_SPEED);2==c&&(Entry.hw.setDigitalPortValue("DC2_DIR",d),Entry.hw.setDigitalPortValue("DC2_SPEED",e),Entry.hw.update(),delete Entry.hw.sendQueue.DC2_DIR,delete Entry.hw.sendQueue.DC2_SPEED);return b.callReturn()}},cobl_extention_port:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"15.USB\ud3ec\ud2b8%1\ub2e8\uacc4%2 %3",params:[{type:"Dropdown",options:[["1",
"1"],["2","2"]],fontSize:11},{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]],fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],def:{params:["1","0"],type:"cobl_extention_port"},paramsKeyMap:{PORT:0,LEVEL:1},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getStringField("PORT");var d=b.getStringField("LEVEL");1==c&&(Entry.hw.setDigitalPortValue("EXUSB1",d),Entry.hw.update(),delete Entry.hw.sendQueue.EXUSB1);2==c&&(Entry.hw.setDigitalPortValue("EXUSB2",
d),Entry.hw.update(),delete Entry.hw.sendQueue.EXUSB2);return b.callReturn()}},cobl_external_led:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"16.\uc678\ubd80LED%1(1~64)R%2G%3B%4 %5",params:[{type:"TextInput",value:0,fontSize:11},{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]],fontSize:11},{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],
["8","8"],["9","9"],["10","10"]],fontSize:11},{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"]],fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],def:{params:["1","1","1","1"],type:"cobl_external_led"},paramsKeyMap:{LED:0,RED:1,GREEN:2,BLUE:3},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getNumberField("LED");var d=b.getStringField("RED"),e=b.getStringField("GREEN"),f=b.getStringField("BLUE");
Entry.hw.setDigitalPortValue("ELED_IDX",c);Entry.hw.setDigitalPortValue("ELED_R",d);Entry.hw.setDigitalPortValue("ELED_G",e);Entry.hw.setDigitalPortValue("ELED_B",f);Entry.hw.update();delete Entry.hw.sendQueue.ELED_IDX;delete Entry.hw.sendQueue.ELED_R;delete Entry.hw.sendQueue.ELED_G;delete Entry.hw.sendQueue.ELED_B;return b.callReturn()}},cobl_7_segment:{color:"#00979D",fontColor:"#fff",skeleton:"basic",template:"17.\uc22b\uc790\uc804\uad11\ud310%1(0~9999) %2",params:[{type:"TextInput",value:0},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],def:{type:"cobl_7_segment"},paramsKeyMap:{VALUE:0},class:"cobl",isNotFor:["cobl"],func:function(c,b){c=b.getNumberField("VALUE");Entry.hw.setDigitalPortValue("7SEG",c);Entry.hw.update();delete Entry.hw.sendQueue["7SEG"];return b.callReturn()}},start_drawing:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"start_drawing"},"class":"brush_control",
isNotFor:["textBox"],func:function(c,b){c.brush?c.brush.stop=!1:Entry.setBasicBrush(c);Entry.stage.sortZorder();c.brush.moveTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.start_drawing()"]}},stop_drawing:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"stop_drawing"},"class":"brush_control",isNotFor:["textBox"],func:function(c,b){c.brush&&c.shape&&(c.brush.stop=!0);return b.callReturn()},
syntax:{js:[],py:["Entry.stop_drawing()"]}},set_color:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Color"},{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"set_color"},pyHelpDef:{params:["A&value"],type:"set_color"},paramsKeyMap:{VALUE:0},"class":"brush_color",isNotFor:["textBox"],func:function(c,b){var d=b.getField("VALUE",b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);c.brush&&(d=Entry.hex2rgb(d),c.brush.rgb=d,c.brush.endStroke(),
c.brush.beginStroke("rgba("+d.r+","+d.g+","+d.b+","+c.brush.opacity/100+")"),c.brush.moveTo(c.getX(),-1*c.getY()));return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.set_brush_color_to(%1)",textParams:[{type:"Color",converter:Entry.block.converters.returnStringValueUpperCase,codeMap:"Entry.CodeMap.Entry.set_color[0]"}]}]}},set_random_color:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"set_random_color"},
"class":"brush_color",isNotFor:["textBox"],func:function(c,b){c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);if(c.brush){var d=Entry.generateRgb();c.brush.rgb=d;c.brush.endStroke();c.brush.beginStroke("rgba("+d.r+","+d.g+","+d.b+","+c.brush.opacity/100+")");c.brush.moveTo(c.getX(),-1*c.getY())}return b.callReturn()},syntax:{js:[],py:["Entry.set_brush_color_to_random()"]}},change_thickness:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/brush_03.png",
size:12}],events:{},def:{params:[{type:"number",params:["1"]},null],type:"change_thickness"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"change_thickness"},paramsKeyMap:{VALUE:0},"class":"brush_thickness",isNotFor:["textBox"],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);c.brush&&(c.brush.thickness+=d,1>c.brush.thickness&&(c.brush.thickness=1),c.brush.setStrokeStyle(c.brush.thickness),c.brush.moveTo(c.getX(),-1*c.getY()));
return b.callReturn()},syntax:{js:[],py:["Entry.add_brush_size(%1)"]}},set_thickness:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[{type:"number",params:["1"]},null],type:"set_thickness"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"set_thickness"},paramsKeyMap:{VALUE:0},"class":"brush_thickness",isNotFor:["textBox"],func:function(c,b){var d=b.getNumberValue("VALUE",
b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);c.brush&&(c.brush.thickness=d,c.brush.setStrokeStyle(c.brush.thickness),c.brush.moveTo(c.getX(),-1*c.getY()));return b.callReturn()},syntax:{js:[],py:["Entry.set_brush_size(%1)"]}},change_opacity:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"change_opacity"},paramsKeyMap:{VALUE:0},"class":"brush_opacity",
isNotFor:["textBox"],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);d=Entry.adjustValueWithMaxMin(c.brush.opacity+d,0,100);c.brush&&(c.brush.opacity=d,c.brush.endStroke(),d=c.brush.rgb,c.brush.beginStroke("rgba("+d.r+","+d.g+","+d.b+","+c.brush.opacity/100+")"),c.brush.moveTo(c.getX(),-1*c.getY()));return b.callReturn()},syntax:{js:[],py:[""]}},set_opacity:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[{type:"number",params:["50"]},null],type:"set_opacity"},paramsKeyMap:{VALUE:0},"class":"brush_opacity",isNotFor:["textBox"],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);c.brush&&(c.brush.opacity=Entry.adjustValueWithMaxMin(d,0,100),c.brush.endStroke(),d=c.brush.rgb,c.brush.beginStroke("rgba("+d.r+","+d.g+","+d.b+","+c.brush.opacity/100+")"),c.brush.moveTo(c.getX(),
-1*c.getY()));return b.callReturn()},syntax:{js:[],py:[""]}},brush_erase_all:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"brush_erase_all"},"class":"brush_clear",isNotFor:["textBox"],func:function(c,b){var d=c.brush;if(d){var e=d._stroke.style,f=d._strokeStyle.width;d.clear().setStrokeStyle(f).beginStroke(e);d.moveTo(c.getX(),-1*c.getY())}c=c.parent.getStampEntities();c.map(function(b){b.removeClone()});
c=null;return b.callReturn()},syntax:{js:[],py:["Entry.clear_drawing()"]}},brush_stamp:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[null],type:"brush_stamp"},"class":"stamp",isNotFor:["textBox"],func:function(c,b){c.parent.addStampEntity(c);return b.callReturn()},syntax:{js:[],py:["Entry.stamp()"]}},change_brush_transparency:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"change_brush_transparency"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"change_brush_transparency"},paramsKeyMap:{VALUE:0},"class":"brush_opacity",isNotFor:["textBox"],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);d=Entry.adjustValueWithMaxMin(c.brush.opacity-d,0,100);c.brush&&(c.brush.opacity=d,c.brush.endStroke(),
d=c.brush.rgb,c.brush.beginStroke("rgba("+d.r+","+d.g+","+d.b+","+c.brush.opacity/100+")"),c.brush.moveTo(c.getX(),-1*c.getY()));return b.callReturn()},syntax:{js:[],py:["Entry.add_brush_transparency(%1)"]}},set_brush_tranparency:{color:"#FF9E20",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/brush_03.png",size:12}],events:{},def:{params:[{type:"number",params:["50"]},null],type:"set_brush_tranparency"},pyHelpDef:{params:[{type:"number",params:["A&value"]},
null],type:"set_brush_tranparency"},paramsKeyMap:{VALUE:0},"class":"brush_opacity",isNotFor:["textBox"],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.brush||(Entry.setBasicBrush(c),c.brush.stop=!0);c.brush&&(c.brush.opacity=Entry.adjustValueWithMaxMin(d,0,100),c.brush.endStroke(),d=c.brush.rgb,c.brush.beginStroke("rgba("+d.r+","+d.g+","+d.b+","+(1-c.brush.opacity/100)+")"),c.brush.moveTo(c.getX(),-1*c.getY()));return b.callReturn()},syntax:{js:[],py:["Entry.set_brush_transparency(%1)"]}},
number:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"TextInput",value:10}],events:{},def:{params:[]},paramsKeyMap:{NUM:0},func:function(c,b){return b.getField("NUM",b)},isPrimitive:!0,syntax:{js:["Scope","%1"],py:[{syntax:"%1",keyOption:"number",textParams:[{type:"TextInput",converter:Entry.block.converters.returnStringOrNumberByValue}]}]}},angle:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Angle"}],events:{},def:{params:[null],type:"angle"},
paramsKeyMap:{ANGLE:0},func:function(c,b){return b.getNumberField("ANGLE")},syntax:{js:[],py:[{syntax:"%1",keyOption:"angle",textParams:[{type:"Angle",converter:Entry.block.converters.returnRawNumberValueByKey}]}]}},get_x_coordinate:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_get_x_coordinate,color:"#3D3D3D"}],events:{},def:{params:[null],type:"get_x_coordinate"},"class":"calc",isNotFor:[],func:function(c,b){return c.getX()},syntax:{js:[],
py:[""]}},get_y_coordinate:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_get_y_coordinate,color:"#3D3D3D"}],events:{},def:{params:[null],type:"get_y_coordinate"},"class":"calc",isNotFor:[],func:function(c,b){return c.getY()},syntax:{js:[],py:[""]}},get_angle:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_get_angle,color:"#3D3D3D"}],events:{},def:{params:[null]},func:function(c,b){return parseFloat(c.getRotation().toFixed(1))},
syntax:{js:[],py:[""]}},get_rotation_direction:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CALC_rotation_value,"ROTATION"],[Lang.Blocks.CALC_direction_value,"DIRECTION"]],value:"ROTATION",fontSize:11}],events:{},def:{params:[null],type:"get_rotation_direction"},paramsKeyMap:{OPERATOR:0},"class":"calc",isNotFor:[],func:function(c,b){return"DIRECTION"==b.getField("OPERATOR",b).toUpperCase()?parseFloat(c.getDirection().toFixed(1)):parseFloat(c.getRotation().toFixed(1))},
syntax:{js:[],py:[""]}},distance_something:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_distance_something_1,color:"#3D3D3D"},{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_distance_something_2,color:"#3D3D3D"}],events:{},def:{params:[null,null,null],type:"distance_something"},pyHelpDef:{params:[null,"A&value",null],type:"distance_something"},
paramsKeyMap:{VALUE:1},"class":"calc_distance",isNotFor:[],func:function(c,b){b=b.getField("VALUE",b);if("mouse"==b)return b=Entry.stage.mouseCoordinate,Math.sqrt(Math.pow(c.getX()-b.x,2)+Math.pow(c.getY()-b.y,2));b=Entry.container.getEntity(b);return Math.sqrt(Math.pow(c.getX()-b.getX(),2)+Math.pow(c.getY()-b.getY(),2))},syntax:{js:[],py:[{syntax:"Entry.value_of_distance_to(%2)",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,
converter:Entry.block.converters.returnStringKey,codeMap:"Entry.CodeMap.Entry.distance_something[1]"}]}]}},coordinate_mouse:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_coordinate_mouse_1,color:"#3D3D3D"},{type:"Dropdown",options:[["x","x"],["y","y"]],value:"x",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_coordinate_mouse_2,color:"#3D3D3D"}],events:{},def:{params:[null,null,null],type:"coordinate_mouse"},
pyHelpDef:{params:[null,"A&value",null],type:"coordinate_mouse"},paramsKeyMap:{VALUE:1},"class":"calc",isNotFor:[],func:function(c,b){return"x"===b.getField("VALUE",b)?Number(Entry.stage.mouseCoordinate.x):Number(Entry.stage.mouseCoordinate.y)},syntax:{js:[],py:[{syntax:"Entry.value_of_mouse_pointer(%2)",blockType:"param",textParams:[{type:"Text",text:Lang.Blocks.CALC_coordinate_mouse_1,color:"#3D3D3D"},{type:"Dropdown",options:[["x","x"],["y","y"]],value:"x",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,
converter:Entry.block.converters.returnStringKey,codeMap:"Entry.CodeMap.Entry.coordinate_mouse[1]"},{type:"Text",text:Lang.Blocks.CALC_coordinate_mouse_2,color:"#3D3D3D"}]}]}},coordinate_object:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_coordinate_object_1,color:"#3D3D3D"},{type:"DropdownDynamic",value:null,menuName:"spritesWithSelf",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_coordinate_object_2,
color:"#3D3D3D"},{type:"Dropdown",options:[[Lang.Blocks.CALC_coordinate_x_value,"x"],[Lang.Blocks.CALC_coordinate_y_value,"y"],[Lang.Blocks.CALC_coordinate_rotation_value,"rotation"],[Lang.Blocks.CALC_coordinate_direction_value,"direction"],[Lang.Blocks.CALC_coordinate_size_value,"size"],[Lang.Blocks.CALC_picture_index,"picture_index"],[Lang.Blocks.CALC_picture_name,"picture_name"]],value:"x",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC}],events:{},def:{params:[null,null,null,null],type:"coordinate_object"},
pyHelpDef:{params:[null,"A&value",null,"B&value"],type:"coordinate_object"},paramsKeyMap:{VALUE:1,COORDINATE:3},"class":"calc",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b);c="self"==d?c:Entry.container.getEntity(d);switch(b.getField("COORDINATE",b)){case "x":return c.getX();case "y":return c.getY();case "rotation":return c.getRotation();case "direction":return c.getDirection();case "picture_index":return b=c.parent,b=b.pictures,b.indexOf(c.picture)+1;case "size":return Number(c.getSize().toFixed(1));
case "picture_name":return b=c.parent,b=b.pictures,b[b.indexOf(c.picture)].name}},syntax:{js:[],py:[{syntax:"Entry.value_of_object(%2, %4)",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"spritesWithSelf",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnObjectOrStringValue,codeMap:"Entry.CodeMap.Entry.coordinate_object[1]"},void 0,{type:"Dropdown",options:[[Lang.Blocks.CALC_coordinate_x_value,"x"],[Lang.Blocks.CALC_coordinate_y_value,
"y"],[Lang.Blocks.CALC_coordinate_rotation_value,"rotation"],[Lang.Blocks.CALC_coordinate_direction_value,"direction"],[Lang.Blocks.CALC_coordinate_size_value,"size"],[Lang.Blocks.CALC_picture_index,"picture_index"],[Lang.Blocks.CALC_picture_name,"picture_name"]],value:"x",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValue,codeMap:"Entry.CodeMap.Entry.coordinate_object[3]"}]}]}},calc_basic:{color:"#FFD974",skeleton:"basic_string_field",statements:[],
params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["+","PLUS"],["-","MINUS"],["x","MULTI"],["/","DIVIDE"]],value:"PLUS",fontSize:11,noArrow:!0},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"number",params:["10"]},"PLUS",{type:"number",params:["10"]}],type:"calc_basic"},pyHelpDef:{params:[{type:"number",params:["A&value"]},"PLUS",{type:"number",params:["B&value"]}],type:"calc_basic"},defs:[{params:[{type:"number",params:["10"]},"PLUS",{type:"number",params:["10"]}],type:"calc_basic"},
{params:[{type:"number",params:["10"]},"MINUS",{type:"number",params:["10"]}],type:"calc_basic"},{params:[{type:"number",params:["10"]},"MULTI",{type:"number",params:["10"]}],type:"calc_basic"},{params:[{type:"number",params:["10"]},"DIVIDE",{type:"number",params:["10"]}],type:"calc_basic"}],paramsKeyMap:{LEFTHAND:0,OPERATOR:1,RIGHTHAND:2},"class":"calc",isNotFor:[],func:function(c,b){c=b.getField("OPERATOR",b);var d=b.getNumberValue("LEFTHAND",b),e=b.getNumberValue("RIGHTHAND",b);return"PLUS"==c?
(isNaN(d)&&(d=b.getStringValue("LEFTHAND",b)),isNaN(e)&&(e=b.getStringValue("RIGHTHAND",b)),d+e):"MINUS"==c?d-e:"MULTI"==c?d*e:d/e},syntax:{js:[],py:[{syntax:"(%1 %2 %3)",template:"%1 %2 %3",keyOption:"calc_basic",blockType:"param",textParams:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["+","PLUS"],["-","MINUS"],["x","MULTI"],["/","DIVIDE"]],value:"PLUS",fontSize:11,noArrow:!0,converter:Entry.block.converters.returnOperator,paramType:"operator"},{type:"Block",accept:"string"}]}]}},calc_plus:{color:"#FFD974",
skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"+",color:"#3D3D3D"},{type:"Block",accept:"string"}],events:{},def:{params:[null]},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return c+b},syntax:{js:[],py:[""]}},calc_minus:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"-",color:"#3D3D3D"},{type:"Block",
accept:"string"}],events:{},def:{params:[null]},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return c-b},syntax:{js:[],py:[""]}},calc_times:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"x",color:"#3D3D3D"},{type:"Block",accept:"string"}],events:{},def:{params:[null]},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},func:function(c,b){c=b.getNumberValue("LEFTHAND",
b);b=b.getNumberValue("RIGHTHAND",b);return c*b},syntax:{js:[],py:[""]}},calc_divide:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"/",color:"#3D3D3D"},{type:"Block",accept:"string"}],events:{},def:{params:[null]},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return c/b},syntax:{js:[],py:[""]}},calc_mod:{color:"#FFD974",skeleton:"basic_string_field",
statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"/",color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_calc_mod_3,color:"#3D3D3D"}],events:{},def:{params:[{type:"number",params:["10"]},null,{type:"number",params:["10"]},null],type:"calc_mod"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"calc",isNotFor:[],func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return c%b},syntax:{js:[],py:["Entry.get_remainder(%1, %3)"]}},
calc_share:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"/",color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:"\uc758 \ubaab",color:"#3D3D3D"}],events:{},def:{params:[{type:"number",params:["10"]},null,{type:"number",params:["10"]},null],type:"calc_share"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"calc",isNotFor:[],func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return Math.floor(c/
b)},syntax:{js:[],py:[""]}},calc_operation:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_calc_operation_of_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_calc_operation_of_2,color:"#3D3D3D"},{type:"Dropdown",options:[[Lang.Blocks.CALC_calc_operation_square,"square"],[Lang.Blocks.CALC_calc_operation_root,"root"],[Lang.Blocks.CALC_calc_operation_sin,"sin"],[Lang.Blocks.CALC_calc_operation_cos,"cos"],[Lang.Blocks.CALC_calc_operation_tan,
"tan"],[Lang.Blocks.CALC_calc_operation_asin,"asin_radian"],[Lang.Blocks.CALC_calc_operation_acos,"acos_radian"],[Lang.Blocks.CALC_calc_operation_atan,"atan_radian"],[Lang.Blocks.CALC_calc_operation_log,"log"],[Lang.Blocks.CALC_calc_operation_ln,"ln"],[Lang.Blocks.CALC_calc_operation_unnatural,"unnatural"],[Lang.Blocks.CALC_calc_operation_floor,"floor"],[Lang.Blocks.CALC_calc_operation_ceil,"ceil"],[Lang.Blocks.CALC_calc_operation_round,"round"],[Lang.Blocks.CALC_calc_operation_factorial,"factorial"],
[Lang.Blocks.CALC_calc_operation_abs,"abs"]],value:"square",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC}],events:{},def:{params:[null,{type:"number",params:["10"]},null,null],type:"calc_operation"},pyHelpDef:{params:[null,{type:"number",params:["A&value"]},null,null],type:"calc_operation"},paramsKeyMap:{LEFTHAND:1,VALUE:3},"class":"calc",isNotFor:[],func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getField("VALUE",b);if(-1<["asin_radian","acos_radian"].indexOf(b)&&(1<c||-1>c))throw Error("x range exceeded");
b.indexOf("_")&&(b=b.split("_")[0]);-1<["sin","cos","tan"].indexOf(b)&&(c=Entry.toRadian(c));switch(b){case "square":b=c*c;break;case "factorial":b=Entry.factorial(c);break;case "root":b=Math.sqrt(c);break;case "log":b=Math.log(c)/Math.LN10;break;case "ln":b=Math.log(c);break;case "asin":case "acos":case "atan":b=Entry.toDegrees(Math[b](c));break;case "unnatural":b=c-Math.floor(c);0>c&&(b=1-b);break;default:b=Math[b](c)}return b},syntax:{js:[],py:[{syntax:"(%2 ** 2)",template:"%2 ** 2",params:[null,
null,null,"square"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.sqrt(%2)",params:[null,null,null,"root"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.sin(%2)",params:[null,null,null,"sin"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.cos(%2)",params:[null,null,null,"cos"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,
null]},{syntax:"math.tan(%2)",params:[null,null,null,"tan"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.asin(%2)",params:[null,null,null,"asin_radian"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.acos(%2)",params:[null,null,null,"acos_radian"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.atan(%2)",params:[null,null,null,"atan_radian"],blockType:"param",
textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.log10(%2)",params:[null,null,null,"log"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.log(%2)",params:[null,null,null,"ln"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"%2 - math.floor(%2)",params:[null,null,null,"unnatural"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.floor(%2)",
params:[null,null,null,"floor"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.ceil(%2)",params:[null,null,null,"ceil"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.round(%2)",params:[null,null,null,"round"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]},{syntax:"math.factorial(%2)",params:[null,null,null,"factorial"],blockType:"param",textParams:[void 0,{type:"Block",
accept:"string"},void 0,null]},{syntax:"math.fabs(%2)",params:[null,null,null,"abs"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,null]}]}},calc_rand:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_calc_rand_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_calc_rand_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_calc_rand_3,color:"#3D3D3D"}],
events:{},def:{params:[null,{type:"number",params:["0"]},null,{type:"number",params:["10"]},null],type:"calc_rand"},pyHelpDef:{params:[null,{type:"number",params:["A&value"]},null,{type:"number",params:["B&value"]},null],type:"calc_rand"},paramsKeyMap:{LEFTHAND:1,RIGHTHAND:3},"class":"calc",isNotFor:[],func:function(c,b){c=b.getStringValue("LEFTHAND",b);b=b.getStringValue("RIGHTHAND",b);var d=Math.min(c,b),e=Math.max(c,b);c=Entry.isFloat(c);return Entry.isFloat(b)||c?(Math.random()*(e-d)+d).toFixed(2):
Math.floor(Math.random()*(e-d+1)+d)},syntax:{js:[],py:[{syntax:"random.randint(%2, %4)",blockType:"param",textParams:[null,{type:"Block",accept:"string",paramType:"integer"},null,{type:"Block",accept:"string",paramType:"integer"},null]},{syntax:"random.uniform(%2, %4)",blockType:"param",textParams:[null,{type:"Block",accept:"string",paramType:"float"},null,{type:"Block",accept:"string",paramType:"float"},null]}]}},get_date:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",
text:Lang.Blocks.CALC_get_date_1,color:"#3D3D3D"},{type:"Dropdown",options:[[Lang.Blocks.CALC_get_date_year,"YEAR"],[Lang.Blocks.CALC_get_date_month,"MONTH"],[Lang.Blocks.CALC_get_date_day,"DAY"],[Lang.Blocks.CALC_get_date_hour,"HOUR"],[Lang.Blocks.CALC_get_date_minute,"MINUTE"],[Lang.Blocks.CALC_get_date_second,"SECOND"]],value:"YEAR",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_get_date_2,color:"#3D3D3D"}],events:{},def:{params:[null,"YEAR",null],type:"get_date"},
pyHelpDef:{params:[null,"A&value",null],type:"get_date"},paramsKeyMap:{VALUE:1},"class":"calc_date",isNotFor:[],func:function(c,b){c=b.getField("VALUE",b);b=new Date;return"YEAR"==c?b.getFullYear():"MONTH"==c?b.getMonth()+1:"DAY"==c?b.getDate():"HOUR"==c?b.getHours():"MINUTE"==c?b.getMinutes():b.getSeconds()},syntax:{js:[],py:[{syntax:"Entry.value_of_current_time(%2)",blockType:"param",textParams:[void 0,{type:"Dropdown",options:[[Lang.Blocks.CALC_get_date_year,"YEAR"],[Lang.Blocks.CALC_get_date_month,
"MONTH"],[Lang.Blocks.CALC_get_date_day,"DAY"],[Lang.Blocks.CALC_get_date_hour,"HOUR"],[Lang.Blocks.CALC_get_date_minute,"MINUTE"],[Lang.Blocks.CALC_get_date_second,"SECOND"]],value:"YEAR",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValueLowerCase,codeMap:"Entry.CodeMap.Entry.get_date[1]"}]}]}},get_sound_duration:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_get_sound_duration_1,color:"#3D3D3D"},
{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_get_sound_duration_2,color:"#3D3D3D"}],events:{},def:{params:[null,null,null],type:"get_sound_duration"},pyHelpDef:{params:[null,"A&value",null],type:"get_sound_duration"},paramsKeyMap:{VALUE:1},"class":"calc_duration",isNotFor:[],func:function(c,b){b=b.getField("VALUE",b);c=c.parent.sounds;for(var d=0;d<c.length;d++)if(c[d].id==b)return c[d].duration},syntax:{js:[],
py:[{syntax:"Entry.value_of_sound_length_of(%2)",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringKey}]}]}},reset_project_timer:{color:"#FFD974",skeleton:"basic",statements:[],params:[{type:"Text",text:"\ucd08\uc2dc\uacc4 \ucd08\uae30\ud654",color:"#3D3D3D"}],events:{viewAdd:[function(){Entry.engine&&Entry.engine.showProjectTimer()}],viewDestroy:[function(c,b){Entry.engine&&
Entry.engine.hideProjectTimer(c,b)}]},def:{params:[null],type:"reset_project_timer"},"class":"calc_timer",isNotFor:[],func:function(c,b){Entry.engine.updateProjectTimer(0);return b.callReturn()},syntax:{js:[],py:[""]}},set_visible_project_timer:{color:"#FFD974",skeleton:"basic",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_timer_visible_1,color:"#000"},{type:"Dropdown",options:[[Lang.Blocks.CALC_timer_visible_show,"SHOW"],[Lang.Blocks.CALC_timer_visible_hide,"HIDE"]],value:"SHOW",fontSize:11,
arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_timer_visible_2,color:"#000"},{type:"Indicator",img:"block_icon/calc_01.png",size:12}],events:{viewAdd:[function(){Entry.engine&&Entry.engine.showProjectTimer()}],viewDestroy:[function(c,b){Entry.engine&&Entry.engine.hideProjectTimer(c,b)}]},def:{params:[null,"HIDE",null,null],type:"set_visible_project_timer"},pyHelpDef:{params:[null,"A&value",null,null],type:"set_visible_project_timer"},paramsKeyMap:{ACTION:1},"class":"calc_timer",
isNotFor:[],func:function(c,b){c=b.getField("ACTION",b);var d=Entry.engine.projectTimer;"SHOW"==c?d.setVisible(!0):d.setVisible(!1);return b.callReturn()},syntax:{js:[],py:[{template:"%1 %2 %3",syntax:"Entry.timer_view(%2)",textParams:[{type:"Text",text:"Entry.timer_view(",color:"#000"},{type:"Dropdown",options:[[Lang.Blocks.CALC_timer_visible_show,"SHOW"],[Lang.Blocks.CALC_timer_visible_hide,"HIDE"]],value:"SHOW",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValueLowerCase,
codeMap:"Entry.CodeMap.Entry.set_visible_project_timer[1]"},{type:"Text",text:")",color:"#000"}]}]}},timer_variable:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:"\ucd08\uc2dc\uacc4 \uac12",color:"#3D3D3D"},{type:"Text",text:" ",color:"#3D3D3D"}],events:{},def:{params:[null,null]},func:function(c,b){return Entry.container.inputValue.getValue()},syntax:{js:[],py:[""]}},get_project_timer_value:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",
text:Lang.Blocks.CALC_get_timer_value,color:"#3D3D3D"},{type:"Text",text:"",color:"#3D3D3D"}],events:{viewAdd:[function(){Entry.engine&&Entry.engine.showProjectTimer()}],viewDestroy:[function(c,b){Entry.engine&&Entry.engine.hideProjectTimer(c,b)}]},def:{params:[null,null],type:"get_project_timer_value"},"class":"calc_timer",isNotFor:[],func:function(c,b){return Entry.engine.projectTimer.getValue()},syntax:{js:[],py:[{syntax:"Entry.value_of_timer()",blockType:"param"}]}},char_at:{color:"#FFD974",skeleton:"basic_string_field",
statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_char_at_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_char_at_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_char_at_3,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:[Lang.Blocks.hi_entry]},null,{type:"number",params:["1"]},null],type:"char_at"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,{type:"number",params:["B&value"]},null],
type:"char_at"},paramsKeyMap:{LEFTHAND:1,RIGHTHAND:3},"class":"calc_string",isNotFor:[],func:function(c,b){c=b.getStringValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b)-1;if(0>b||b>c.length-1)throw Error();return c[b]},syntax:{js:[],py:[{syntax:"%2[%4]",blockType:"param",textParams:[{type:"Text",text:Lang.Blocks.CALC_char_at_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_char_at_2,color:"#3D3D3D"},{type:"Block",accept:"string",paramType:"index"},{type:"Text",
text:Lang.Blocks.CALC_char_at_3,color:"#3D3D3D"}],keyOption:"char_at"}]}},length_of_string:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_length_of_string_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_length_of_string_2,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:[Lang.Blocks.entry]},null],type:"length_of_string"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null],type:"length_of_string"},
paramsKeyMap:{STRING:1},"class":"calc_string",isNotFor:[],func:function(c,b){return b.getStringValue("STRING",b).length},syntax:{js:[],py:[{syntax:"len(%2)",blockType:"param",keyOption:"length_of_string"}]}},substring:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_substring_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_substring_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_substring_3,
color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_substring_4,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:[Lang.Blocks.hi_entry]},null,{type:"number",params:["2"]},null,{type:"number",params:["5"]},null],type:"substring"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,{type:"number",params:["B&value"]},null,{type:"number",params:["C&value"]},null],type:"substring"},paramsKeyMap:{STRING:1,START:3,END:5},"class":"calc_string",isNotFor:[],
func:function(c,b){c=b.getStringValue("STRING",b);var d=b.getNumberValue("START",b)-1;b=b.getNumberValue("END",b)-1;var e=c.length-1;if(0>d||0>b||d>e||b>e)throw Error();return c.substring(Math.min(d,b),Math.max(d,b)+1)},syntax:{js:[],py:[{syntax:"%2[%4:%6]",blockType:"param",textParams:[null,{type:"Block",accept:"string"},null,{type:"Block",accept:"string",paramType:"index"},null,{type:"Block",accept:"string"},null]}]}},replace_string:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",
text:Lang.Blocks.CALC_replace_string_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_replace_string_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_replace_string_3,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_replace_string_4,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:[Lang.Blocks.hi_entry]},null,{type:"text",params:[Lang.Blocks.hello]},null,{type:"text",params:[Lang.Blocks.nice]},
null],type:"replace_string"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,{type:"text",params:["B&value"]},null,{type:"text",params:["C&value"]},null],type:"replace_string"},paramsKeyMap:{STRING:1,OLD_WORD:3,NEW_WORD:5},"class":"calc_string",isNotFor:[],func:function(c,b){return b.getStringValue("STRING",b).replace(new RegExp(b.getStringValue("OLD_WORD",b),"gm"),b.getStringValue("NEW_WORD",b))},syntax:{js:[],py:[{syntax:"%2.replace(%4, %6)",blockType:"param"}]}},change_string_case:{color:"#FFD974",
skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_change_string_case_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_change_string_case_2,color:"#3D3D3D"},{type:"Dropdown",options:[[Lang.Blocks.CALC_change_string_case_sub_1,"toUpperCase"],[Lang.Blocks.CALC_change_string_case_sub_2,"toLowerCase"]],value:"toUpperCase",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_change_string_case_3,
color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:["Hello Entry!"]},null,null,null],type:"change_string_case"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,null,null],type:"change_string_case"},paramsKeyMap:{STRING:1,CASE:3},"class":"calc_string",isNotFor:[],func:function(c,b){return b.getStringValue("STRING",b)[b.getField("CASE",b)]()},syntax:{js:[],py:[{syntax:"%2.upper()",params:[null,null,null,"toUpperCase",null],blockType:"param",textParams:[void 0,{type:"Block",
accept:"string"},void 0,{type:"Dropdown",options:[[Lang.Blocks.CALC_change_string_case_sub_1,"toUpperCase"],[Lang.Blocks.CALC_change_string_case_sub_2,"toLowerCase"]],value:"toUpperCase",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValue}]},{syntax:"%2.lower()",params:[null,null,null,"toLowerCase",null],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,{type:"Dropdown",options:[[Lang.Blocks.CALC_change_string_case_sub_1,
"toUpperCase"],[Lang.Blocks.CALC_change_string_case_sub_2,"toLowerCase"]],value:"toUpperCase",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValue}]}]}},index_of_string:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_index_of_string_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_index_of_string_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",
text:Lang.Blocks.CALC_index_of_string_3,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:[Lang.Blocks.hi_entry]},null,{type:"text",params:[Lang.Blocks.entry]},null],type:"index_of_string"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,{type:"text",params:["B&value"]},null],type:"index_of_string"},paramsKeyMap:{LEFTHAND:1,RIGHTHAND:3},"class":"calc_string",isNotFor:[],func:function(c,b){c=b.getStringValue("LEFTHAND",b);b=b.getStringValue("RIGHTHAND",b);return c.indexOf(b)+
1},syntax:{js:[],py:[{syntax:"%2.find(%4)",blockType:"param"}]}},combine_something:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.VARIABLE_combine_something_1,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.VARIABLE_combine_something_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.VARIABLE_combine_something_3,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"text",params:[Lang.Blocks.block_hi]},
null,{type:"text",params:[Lang.Blocks.entry]},null],type:"combine_something"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,{type:"text",params:["B&value"]},null],type:"combine_something"},paramsKeyMap:{VALUE1:1,VALUE2:3},"class":"calc_string",isNotFor:[],func:function(c,b){c=b.getStringValue("VALUE1",b);b=b.getStringValue("VALUE2",b);return c+b},syntax:{js:[],py:[{syntax:"(%2 + %4)",template:"%2 + %4",blockType:"param"}]}},get_sound_volume:{color:"#FFD974",skeleton:"basic_string_field",
statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_get_sound_volume,color:"#3D3D3D"},{type:"Text",text:"",color:"#3D3D3D"}],events:{},def:{params:[null,null],type:"get_sound_volume"},"class":"calc",isNotFor:[],func:function(c,b){return 100*createjs.Sound.getVolume()},syntax:{js:[],py:[{syntax:"Entry.value_of_sound_volume()",blockType:"param"}]}},quotient_and_mod:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_quotient_and_mod_1,color:"#3D3D3D"},
{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_quotient_and_mod_2,color:"#3D3D3D"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.CALC_quotient_and_mod_3,color:"#3D3D3D"},{type:"Dropdown",options:[[Lang.Blocks.CALC_quotient_and_mod_sub_1,"QUOTIENT"],[Lang.Blocks.CALC_quotient_and_mod_sub_2,"MOD"]],value:"QUOTIENT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC}],events:{},def:{params:[null,{type:"text",params:["10"]},null,{type:"text",params:["10"]},null,null],
type:"quotient_and_mod"},pyHelpDef:{params:[null,{type:"text",params:["A&value"]},null,{type:"text",params:["B&value"]},null,null],type:"quotient_and_mod"},paramsKeyMap:{LEFTHAND:1,RIGHTHAND:3,OPERATOR:5},"class":"calc",isNotFor:[],func:function(c,b){c=b.getNumberValue("LEFTHAND",b);var d=b.getNumberValue("RIGHTHAND",b);if(isNaN(c)||isNaN(d))throw Error();return"QUOTIENT"==b.getField("OPERATOR",b)?Math.floor(c/d):c%d},syntax:{js:[],py:[{syntax:"(%2 // %4)",template:"%2 // %4",params:[null,null,null,
null,null,"QUOTIENT"],blockType:"param",textParams:[void 0,{type:"Block",accept:"string"},void 0,{type:"Block",accept:"string"},void 0,{type:"Dropdown",options:[[Lang.Blocks.CALC_quotient_and_mod_sub_1,"QUOTIENT"],[Lang.Blocks.CALC_quotient_and_mod_sub_2,"MOD"]],value:"QUOTIENT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValue}]},{syntax:"(%2 % %4)",template:"%2 % %4",params:[null,null,null,null,null,"MOD"],blockType:"param",textParams:[void 0,
{type:"Block",accept:"string"},void 0,{type:"Block",accept:"string"},void 0,{type:"Dropdown",options:[[Lang.Blocks.CALC_quotient_and_mod_sub_1,"QUOTIENT"],[Lang.Blocks.CALC_quotient_and_mod_sub_2,"MOD"]],value:"QUOTIENT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValue}]}]}},choose_project_timer_action:{color:"#FFD974",skeleton:"basic",statements:[],params:[{type:"Text",text:Lang.Blocks.CALC_choose_project_timer_action_1,color:"#000"},{type:"Dropdown",
options:[[Lang.Blocks.CALC_choose_project_timer_action_sub_1,"START"],[Lang.Blocks.CALC_choose_project_timer_action_sub_2,"STOP"],[Lang.Blocks.CALC_choose_project_timer_action_sub_3,"RESET"]],value:"START",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC},{type:"Text",text:Lang.Blocks.CALC_choose_project_timer_action_2,color:"#000"},{type:"Indicator",img:"block_icon/calc_01.png",size:12}],events:{viewAdd:[function(){Entry.engine&&Entry.engine.showProjectTimer()}],dataDestroy:[function(c){Entry.engine&&
Entry.engine.hideProjectTimer(c)}]},def:{params:[null,"START",null,null],type:"choose_project_timer_action"},pyHelpDef:{params:[null,"A&value",null,null],type:"choose_project_timer_action"},paramsKeyMap:{ACTION:1},"class":"calc_timer",isNotFor:[],func:function(c,b){c=b.getField("ACTION");var d=Entry.engine,e=d.projectTimer;"START"==c?e.isInit?e.isInit&&e.isPaused&&(e.pauseStart&&(e.pausedTime+=(new Date).getTime()-e.pauseStart),delete e.pauseStart,e.isPaused=!1):d.startProjectTimer():"STOP"==c?e.isInit&&
!e.isPaused&&(e.isPaused=!0,e.pauseStart=(new Date).getTime()):"RESET"==c&&e.isInit&&(e.setValue(0),e.start=(new Date).getTime(),e.pausedTime=0,delete e.pauseStart);return b.callReturn()},syntax:{js:[],py:[{template:"%1 %2 %3",syntax:"Entry.timer(%2)",textParams:[{type:"Text",text:"Entry.timer(",color:"#000"},{type:"Dropdown",options:[[Lang.Blocks.CALC_choose_project_timer_action_sub_1,"START"],[Lang.Blocks.CALC_choose_project_timer_action_sub_2,"STOP"],[Lang.Blocks.CALC_choose_project_timer_action_sub_3,
"RESET"]],value:"START",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_CALC,converter:Entry.block.converters.returnStringValueLowerCase,codeMap:"Entry.CodeMap.Entry.choose_project_timer_action[1]"},{type:"Text",text:")",color:"#000"}]}]}},wait_second:{color:"#498deb",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[{type:"number",params:["2"]},null],type:"wait_second"},pyHelpDef:{params:[{type:"number",
params:["A&value"]},null],type:"wait_second"},paramsKeyMap:{SECOND:0},"class":"delay",isNotFor:[],func:function(c,b){if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;Entry.engine.isContinue=!1;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c=b.getNumberValue("SECOND",b);setTimeout(function(){b.timeFlag=0},60/(Entry.FPS||60)*c*1E3);return b},syntax:{js:[],py:[{syntax:"Entry.wait_for_sec(%1)"}]}},repeat_basic:{color:"#498deb",skeleton:"basic_loop",statements:[{accept:"basic"}],
params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"repeat_basic"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"repeat_basic"},paramsKeyMap:{VALUE:0},statementsKeyMap:{DO:0},"class":"repeat",isNotFor:[],func:function(c,b){if(!b.isLooped){b.isLooped=!0;c=b.getNumberValue("VALUE",b);if(0>c)throw Error(Lang.Blocks.FLOW_repeat_basic_errorMsg);b.iterCount=Math.floor(c)}if(0==
b.iterCount||0>b.iterCount)return delete b.isLooped,delete b.iterCount,b.callReturn();b.iterCount--;return b.getStatement("DO",b)},syntax:{js:[],py:[{syntax:"for i in range(%1):\n$1",template:"for i in range(%1):",idChar:["i","j","k"]}]}},repeat_inf:{color:"#498deb",skeleton:"basic_loop",statements:[{accept:"basic"}],params:[{type:"Indicator",img:"block_icon/flow_03.png",size:12},{type:"Block",accept:"Boolean"}],events:{},def:{params:[null],type:"repeat_inf"},pyHelpDef:{params:[null,{type:"boolean_shell",
params:["A"]}],type:"repeat_inf"},statementsKeyMap:{DO:0},"class":"repeat",isNotFor:[],func:function(c,b){b.isLooped=!0;return b.getStatement("DO")},syntax:{js:[],py:[{syntax:"while True:\n$1",template:"while %2\n:",textParams:[void 0,{type:"Block",accept:"boolean"}]}]}},stop_repeat:{color:"#498deb",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[null],type:"stop_repeat"},"class":"repeat",isNotFor:[],func:function(c,b){return this.executor.breakLoop()},
syntax:{js:[],py:["break"]}},wait_until_true:{color:"#498deb",skeleton:"basic",statements:[],params:[{type:"Block",accept:"boolean"},{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[{type:"True"},null],type:"wait_until_true"},pyHelpDef:{params:[{type:"boolean_shell",params:["A"]},null],type:"wait_until_true"},paramsKeyMap:{BOOL:0},"class":"wait",isNotFor:[],func:function(c,b){return b.getBooleanValue("BOOL",b)?b.callReturn():b},syntax:{js:[],py:["Entry.wait_until(%1)"]}},
_if:{color:"#498deb",skeleton:"basic_loop",statements:[{accept:"basic"}],params:[{type:"Block",accept:"boolean"},{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[{type:"True"},null],type:"_if"},pyHelpDef:{params:[{type:"boolean_shell",params:["A"]},null],type:"_if"},paramsKeyMap:{BOOL:0},statementsKeyMap:{STACK:0},"class":"condition",isNotFor:[],func:function(c,b){return b.isCondition?(delete b.isCondition,b.callReturn()):b.getBooleanValue("BOOL",b)?(b.isCondition=!0,
b.getStatement("STACK",b)):b.callReturn()},syntax:{js:[],py:[{syntax:"if %1:\n$1",template:"if %1:"}]}},if_else:{color:"#498deb",skeleton:"basic_double_loop",statements:[{accept:"basic"},{accept:"basic"}],params:[{type:"Block",accept:"boolean"},{type:"Indicator",img:"block_icon/flow_03.png",size:12},{type:"LineBreak"}],events:{},def:{params:[{type:"True"},null],type:"if_else"},pyHelpDef:{params:[{type:"boolean_shell",params:["A"]},null],type:"if_else"},paramsKeyMap:{BOOL:0},statementsKeyMap:{STACK_IF:0,
STACK_ELSE:1},"class":"condition",isNotFor:[],func:function(c,b){if(b.isCondition)return delete b.isCondition,b.callReturn();c=b.getBooleanValue("BOOL",b);b.isCondition=!0;return c?b.getStatement("STACK_IF",b):b.getStatement("STACK_ELSE",b)},syntax:{js:[],py:[{syntax:"if %1:\n$1\nelse:\n$2",template:"if %1: %3 else:",textParams:[{type:"Block",accept:"boolean"},void 0,{type:"LineBreak"}]}]}},create_clone:{color:"#498deb",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"clone",
fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_FLOW},{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[null,null],type:"create_clone"},pyHelpDef:{params:["A&value",null],type:"create_clone"},paramsKeyMap:{VALUE:0},"class":"clone",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b);b=b.callReturn();"self"==d?c.parent.addCloneEntity(c.parent,c,null):Entry.container.getObject(d).addCloneEntity(c.parent,null,null);return b},syntax:{js:[],py:[{syntax:"Entry.make_clone_of(%1)",
textParams:[{type:"DropdownDynamic",value:null,menuName:"clone",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_FLOW,converter:Entry.block.converters.returnStringKey,codeMap:"Entry.CodeMap.Entry.create_clone[0]"}]}]}},delete_clone:{color:"#498deb",skeleton:"basic_without_next",statements:[],params:[{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[null],type:"delete_clone"},"class":"clone",isNotFor:[],func:function(c,b){if(!c.isClone)return b.callReturn();c.removeClone();
return this.die()},syntax:{js:[],py:["Entry.remove_this_clone()"]}},when_clone_start:{color:"#498deb",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_clone.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null],type:"when_clone_start"},"class":"clone",isNotFor:[],func:function(c,b){return b.callReturn()},event:"when_clone_start",syntax:{js:[],py:[{syntax:"def when_make_clone():",blockType:"event"}]}},stop_run:{color:"#498deb",skeleton:"basic",statements:[],
params:[{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[null]},func:function(c,b){return Entry.engine.toggleStop()},syntax:{js:[],py:[""]}},repeat_while_true:{color:"#498deb",skeleton:"basic_loop",statements:[{accept:"basic"}],params:[{type:"Block",accept:"boolean"},{type:"Dropdown",options:[[Lang.Blocks.FLOW_repeat_while_true_until,"until"],[Lang.Blocks.FLOW_repeat_while_true_while,"while"]],value:"until",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_FLOW},{type:"Indicator",
img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[{type:"True"},null,null],type:"repeat_while_true"},pyHelpDef:{params:[{type:"boolean_shell",params:["A"]},null,null],type:"repeat_while_true"},paramsKeyMap:{BOOL:0,OPTION:1},statementsKeyMap:{DO:0},"class":"repeat",isNotFor:[],func:function(c,b){c=b.getBooleanValue("BOOL",b);"until"==b.getField("OPTION",b)&&(c=!c);return(b.isLooped=c)?b.getStatement("DO",b):b.callReturn()},syntax:{js:[],py:[{syntax:"while %1 %2:\n$1",template:"while not %1:"}]}},
stop_object:{color:"#498deb",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.FLOW_stop_object_all,"all"],[Lang.Blocks.FLOW_stop_object_this_object,"thisOnly"],[Lang.Blocks.FLOW_stop_object_this_thread,"thisThread"],[Lang.Blocks.FLOW_stop_object_other_thread,"otherThread"]],value:"all",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_FLOW},{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[null,null],type:"stop_object"},pyHelpDef:{params:["A&value",
null],type:"stop_object"},paramsKeyMap:{TARGET:0},"class":"terminate",isNotFor:[],func:function(c,b){var d=c.parent;switch(b.getField("TARGET",b)){case "all":return Entry.container.mapObject(function(b){b.objectType&&b.script.clearExecutors()},null),this.die();case "thisOnly":return d.script.clearExecutorsByEntity(c),this.die();case "thisObject":return d.script.clearExecutors(),this.die();case "thisThread":return this.die();case "otherThread":var e=this.executor,d=d.script,f=d.executors;c=c.id;for(var g=
0;g<f.length;g++){var h=f[g];h!==e&&h.entity.id===c&&(d.removeExecutor(h),--g)}return b.callReturn()}},syntax:{js:[],py:[{syntax:"Entry.stop_code(%1)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.FLOW_stop_object_all,"all"],[Lang.Blocks.FLOW_stop_object_this_object,"thisOnly"],[Lang.Blocks.FLOW_stop_object_this_thread,"thisThread"],[Lang.Blocks.FLOW_stop_object_other_thread,"otherThread"]],value:"all",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_FLOW,converter:Entry.block.converters.returnStringValue,
codeMap:"Entry.CodeMap.Entry.stop_object[0]"}]}]}},restart_project:{color:"#498deb",skeleton:"basic_without_next",statements:[],params:[{type:"Indicator",img:"block_icon/flow_03.png",size:12}],events:{},def:{params:[null],type:"restart_project"},"class":"terminate",isNotFor:[],func:function(c,b){Entry.engine.toggleStop();Entry.engine.toggleRun()},syntax:{js:[],py:["Entry.start_again()"]}},remove_all_clones:{color:"#498deb",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/flow_03.png",
size:12}],events:{},def:{params:[null],type:"remove_all_clones"},"class":"clone",isNotFor:[],func:function(c,b){c=c.parent.getClonedEntities();c.map(function(b){b.removeClone()});c=null;return b.callReturn()},syntax:{js:[],py:["Entry.remove_all_clone()"]}},functionAddButton:{skeleton:"basic_button",color:"#eee",isNotFor:["functionInit"],params:[{type:"Text",text:Lang.Workspace.function_create,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.variableContainer.createFunction()}]}},
function_field_label:{skeleton:"basic_param",isNotFor:["functionEdit"],color:"#f9c535",params:[{type:"TextInput",value:Lang.Blocks.FUNCTION_explanation_1},{type:"Output",accept:"param"}],paramsKeyMap:{NAME:0,NEXT:1},def:{params:["\uc774\ub984"],type:"function_field_label"},syntax:{js:[],py:["name"]}},function_field_string:{skeleton:"basic_param",isNotFor:["functionEdit"],color:"#ffd974",params:[{type:"Block",accept:"string",restore:!0},{type:"Output",accept:"param"}],paramsKeyMap:{PARAM:0,NEXT:1},
def:{params:[{type:"text",params:["\ubb38\uc790/\uc22b\uc790\uac12"]}],type:"function_field_string"},syntax:{js:[],py:["value"]}},function_field_boolean:{skeleton:"basic_param",isNotFor:["functionEdit"],color:"#aeb8ff",params:[{type:"Block",accept:"boolean",restore:!0},{type:"Output",accept:"param"}],paramsKeyMap:{PARAM:0,NEXT:1},def:{params:[{type:"True",params:["\ud310\ub2e8\uac12"]}],type:"function_field_boolean"},syntax:{js:[],py:["boolean"]}},function_param_string:{skeleton:"basic_string_field",
color:"#ffd974",template:"%1 %2",events:{viewAdd:[function(){Entry.Func.isEdit&&Entry.Func.refreshMenuCode()}]},func:function(){return this.executor.register.params[this.executor.register.paramMap[this.block.type]]},syntax:{js:[],py:[""]}},function_param_boolean:{skeleton:"basic_boolean_field",color:"#aeb8ff",template:"%1 %2",events:{viewAdd:[function(){Entry.Func.isEdit&&Entry.Func.refreshMenuCode()}]},func:function(){return this.executor.register.params[this.executor.register.paramMap[this.block.type]]},
syntax:{js:[],py:[""]}},function_create:{skeleton:"basic_create",color:"#cc7337",event:"funcDef",params:[{type:"Block",accept:"param",value:{type:"function_field_label",params:[Lang.Blocks.FUNC]}},{type:"Indicator",img:"block_icon/function_03.png",size:12}],paramsKeyMap:{FIELD:0},func:function(){},syntax:{js:[],py:[{syntax:"%1",keyOption:"function_create"}]}},function_general:{skeleton:"basic",color:"#cc7337",params:[{type:"Indicator",img:"block_icon/function_03.png",size:12}],events:{dataAdd:[function(c){var b=
Entry.variableContainer;b&&b.addRef("_functionRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_functionRefs",c)}],dblclick:[function(c){c.getBoard().workspace.getMode()===Entry.Workspace.MODE_BOARD&&"workspace"===Entry.type&&(c=c.block.type.substr(5),Entry.Func.edit(Entry.variableContainer.functions_[c]))}]},func:function(c){if(!this.initiated){this.initiated=!0;var b=Entry.variableContainer.getFunction(this.block.type.substr(5,9));this.funcCode=b.content;this.funcExecutor=
this.funcCode.raiseEvent("funcDef",c)[0];this.funcExecutor.register.params=this.getParams();this.funcExecutor.register.paramMap=b.paramMap}this.funcExecutor.execute();if(!this.funcExecutor.isEnd())return this.funcCode.removeExecutor(this.funcExecutor),Entry.STATIC.BREAK},syntax:{js:[],py:[""]}},hamster_hand_found:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[],events:{},def:{params:[],type:"hamster_hand_found"},"class":"hamster_sensor",isNotFor:["hamster"],
func:function(c,b){c=Entry.hw.portData;return 50<c.leftProximity||50<c.rightProximity},syntax:{js:[],py:[{syntax:"Hamster.hand_found()",blockType:"param"}]}},hamster_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],
[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11}],events:{},def:{params:[null],type:"hamster_value"},
paramsKeyMap:{DEVICE:0},"class":"hamster_sensor",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]},syntax:{js:[],py:[{syntax:"Hamster.left_proximity()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,
"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["leftProximity"]},
{syntax:"Hamster.right_proximity()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,
"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["rightProximity"]},{syntax:"Hamster.left_floor()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,
"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],
[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["leftFloor"]},{syntax:"Hamster.right_floor()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,
"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["rightFloor"]},{syntax:"Hamster.acceleration_x()",
blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],
[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["accelerationX"]},{syntax:"Hamster.acceleration_y()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,
"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],
[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["accelerationY"]},{syntax:"Hamster.acceleration_z()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,
"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["accelerationZ"]},
{syntax:"Hamster.light()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,
"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["light"]},{syntax:"Hamster.temperature()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,
"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],
[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["temperature"]},{syntax:"Hamster.signal_strength()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,
"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["signalStrength"]},
{syntax:"Hamster.input_a()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,
"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["inputA"]},{syntax:"Hamster.input_b()",blockType:"param",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_sensor_left_proximity,"leftProximity"],[Lang.Blocks.HAMSTER_sensor_right_proximity,
"rightProximity"],[Lang.Blocks.HAMSTER_sensor_left_floor,"leftFloor"],[Lang.Blocks.HAMSTER_sensor_right_floor,"rightFloor"],[Lang.Blocks.HAMSTER_sensor_acceleration_x,"accelerationX"],[Lang.Blocks.HAMSTER_sensor_acceleration_y,"accelerationY"],[Lang.Blocks.HAMSTER_sensor_acceleration_z,"accelerationZ"],[Lang.Blocks.HAMSTER_sensor_light,"light"],[Lang.Blocks.HAMSTER_sensor_temperature,"temperature"],[Lang.Blocks.HAMSTER_sensor_signal_strength,"signalStrength"],[Lang.Blocks.HAMSTER_sensor_input_a,"inputA"],
[Lang.Blocks.HAMSTER_sensor_input_b,"inputB"]],value:"leftProximity",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["inputB"]}]}},hamster_move_forward_once:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"hamster_move_forward_once"},"class":"hamster_board",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData;if(b.isStart){if(b.isMoving){switch(b.boardState){case 1:2>
b.count?(50>d.leftFloor&&50>d.rightFloor?b.count++:b.count=0,d=d.leftFloor-d.rightFloor,c.leftWheel=45+.25*d,c.rightWheel=45-.25*d):(b.count=0,b.boardState=2);break;case 2:d=d.leftFloor-d.rightFloor;c.leftWheel=45+.25*d;c.rightWheel=45-.25*d;b.boardState=3;var e=setTimeout(function(){b.boardState=4;Entry.Hamster.removeTimeout(e)},250);Entry.Hamster.timeouts.push(e);break;case 3:d=d.leftFloor-d.rightFloor;c.leftWheel=45+.25*d;c.rightWheel=45-.25*d;break;case 4:c.leftWheel=0,c.rightWheel=0,b.boardState=
0,b.isMoving=!1}return b}delete b.isStart;delete b.isMoving;delete b.count;delete b.boardState;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.count=0;b.boardState=1;c.leftWheel=45;c.rightWheel=45;Entry.Hamster.setLineTracerMode(c,0);return b},syntax:{js:[],py:[{syntax:"Hamster.board_forward()"}]}},hamster_turn_once:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],
[Lang.Blocks.HAMSTER_turn_right,"RIGHT"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"hamster_turn_once"},paramsKeyMap:{DIRECTION:0},"class":"hamster_board",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData;if(b.isStart){if(b.isMoving){if(b.isLeft)switch(b.boardState){case 1:2>b.count?50<d.leftFloor&&b.count++:(b.count=0,b.boardState=2);break;case 2:20>d.leftFloor&&(b.boardState=3);
break;case 3:2>b.count?20>d.leftFloor&&b.count++:(b.count=0,b.boardState=4);break;case 4:50<d.leftFloor&&(b.boardState=5);break;case 5:d=d.leftFloor-d.rightFloor,-15<d?(c.leftWheel=0,c.rightWheel=0,b.boardState=0,b.isMoving=!1):(c.leftWheel=.5*d,c.rightWheel=.5*-d)}else switch(b.boardState){case 1:2>b.count?50<d.rightFloor&&b.count++:(b.count=0,b.boardState=2);break;case 2:20>d.rightFloor&&(b.boardState=3);break;case 3:2>b.count?20>d.rightFloor&&b.count++:(b.count=0,b.boardState=4);break;case 4:50<
d.rightFloor&&(b.boardState=5);break;case 5:d=d.rightFloor-d.leftFloor,-15<d?(c.leftWheel=0,c.rightWheel=0,b.boardState=0,b.isMoving=!1):(c.leftWheel=.5*-d,c.rightWheel=.5*d)}return b}delete b.isStart;delete b.isMoving;delete b.count;delete b.boardState;delete b.isLeft;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.isMoving=!0;b.count=0;b.boardState=1;"LEFT"==b.getField("DIRECTION",b)?(b.isLeft=!0,c.leftWheel=-45,c.rightWheel=45):(b.isLeft=!1,c.leftWheel=
45,c.rightWheel=-45);Entry.Hamster.setLineTracerMode(c,0);return b},syntax:{js:[],py:[{syntax:"Hamster.board_left()",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_right,"RIGHT"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT"]},{syntax:"Hamster.board_right()",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_right,"RIGHT"]],value:"LEFT",
fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT"]}]}},hamster_move_forward_for_secs:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"hamster_move_forward_for_secs"},paramsKeyMap:{VALUE:0},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;
delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.leftWheel=30;c.rightWheel=30;Entry.Hamster.setLineTracerMode(c,0);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},c);Entry.Hamster.timeouts.push(d);return b},syntax:{js:[],py:[{syntax:"Hamster.move_forward(%1)",textParams:[{type:"Block",accept:"string"}]}]}},hamster_move_backward_for_secs:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"hamster_move_backward_for_secs"},paramsKeyMap:{VALUE:0},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=!0;b.timeFlag=
1;c.leftWheel=-30;c.rightWheel=-30;Entry.Hamster.setLineTracerMode(c,0);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},c);Entry.Hamster.timeouts.push(d);return b},syntax:{js:[],py:[{syntax:"Hamster.move_backward(%1)",textParams:[{type:"Block",accept:"string"}]}]}},hamster_turn_for_secs:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_right,
"RIGHT"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["1"]},null],type:"hamster_turn_for_secs"},paramsKeyMap:{DIRECTION:0,VALUE:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.leftWheel=0;c.rightWheel=0;return b.callReturn()}b.isStart=
!0;b.timeFlag=1;"LEFT"==b.getField("DIRECTION",b)?(c.leftWheel=-30,c.rightWheel=30):(c.leftWheel=30,c.rightWheel=-30);Entry.Hamster.setLineTracerMode(c,0);c=1E3*b.getNumberValue("VALUE");var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},c);Entry.Hamster.timeouts.push(d);return b},syntax:{js:[],py:[{syntax:"Hamster.turn_left(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_right,"RIGHT"]],value:"LEFT",fontSize:11,
converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["LEFT"]},{syntax:"Hamster.turn_right(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_turn_once_left,"LEFT"],[Lang.Blocks.HAMSTER_turn_right,"RIGHT"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["RIGHT"]}]}},hamster_change_both_wheels_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},
{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["10"]},{type:"text",params:["10"]},null],type:"hamster_change_both_wheels_by"},paramsKeyMap:{LEFT:0,RIGHT:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("LEFT"),e=b.getNumberValue("RIGHT");c.leftWheel=void 0!=c.leftWheel?c.leftWheel+d:d;c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e;Entry.Hamster.setLineTracerMode(c,
0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.wheels_by(%1, %2)",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},hamster_set_both_wheels_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["30"]},{type:"text",params:["30"]},null],type:"hamster_set_both_wheels_to"},paramsKeyMap:{LEFT:0,
RIGHT:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;c.leftWheel=b.getNumberValue("LEFT");c.rightWheel=b.getNumberValue("RIGHT");Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.wheels(%1, %2)",textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"}]}]}},hamster_change_wheel_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],
[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["10"]},null],type:"hamster_change_wheel_by"},paramsKeyMap:{DIRECTION:0,VALUE:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=void 0!=
c.leftWheel?c.leftWheel+e:e:("RIGHT"!=d&&(c.leftWheel=void 0!=c.leftWheel?c.leftWheel+e:e),c.rightWheel=void 0!=c.rightWheel?c.rightWheel+e:e);Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.left_wheel_by(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",
accept:"string"}],params:["LEFT"]},{syntax:"Hamster.right_wheel_by(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["RIGHT"]},{syntax:"Hamster.wheels_by(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,
"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["BOTH"],keyOption:"SAME"}]}},hamster_set_wheel_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,{type:"text",params:["30"]},null],type:"hamster_set_wheel_to"},paramsKeyMap:{DIRECTION:0,VALUE:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION"),e=b.getNumberValue("VALUE");"LEFT"==d?c.leftWheel=e:("RIGHT"!=d&&(c.leftWheel=e),c.rightWheel=e);Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.left_wheel(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,
"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["LEFT"]},{syntax:"Hamster.right_wheel(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",
accept:"string"}],params:["RIGHT"]},{syntax:"Hamster.wheels(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_wheel,"LEFT"],[Lang.Blocks.HAMSTER_right_wheel,"RIGHT"],[Lang.Blocks.HAMSTER_both_wheels,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["BOTH"],keyOption:"SAME"}]}},hamster_follow_line_using:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,
"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"hamster_follow_line_using"},paramsKeyMap:{COLOR:0,DIRECTION:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,
b){c=Entry.hw.sendQueue;var d=b.getField("COLOR"),e=b.getField("DIRECTION"),f=1;"RIGHT"==e?f=2:"BOTH"==e&&(f=3);"WHITE"==d&&(f+=7);c.leftWheel=0;c.rightWheel=0;Entry.Hamster.setLineTracerMode(c,f);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_LEFT_SENSOR)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},
{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","LEFT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_LEFT_SENSOR)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,
converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","LEFT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_RIGHT_SENSOR)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,
"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","RIGHT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_BOTH_SENSORS)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,
"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","BOTH"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_RIGHT_SENSOR)",textParams:[{type:"Dropdown",
options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","RIGHT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_BOTH_SENSORS)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_both_floor_sensors,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","BOTH"]}]}},hamster_follow_line_until:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"hamster_follow_line_until"},
paramsKeyMap:{COLOR:0,DIRECTION:1},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=Entry.hw.portData,e=b.getField("COLOR"),f=b.getField("DIRECTION"),g=4;"RIGHT"==f?g=5:"FRONT"==f?g=6:"REAR"==f&&(g=7);"WHITE"==e&&(g+=7);if(b.isStart){if(e=Entry.Hamster,d.lineTracerStateId!=e.lineTracerStateId&&(e.lineTracerStateId=d.lineTracerStateId,64==d.lineTracerState))return delete b.isStart,Entry.engine.isContinue=!1,e.setLineTracerMode(c,0),b.callReturn()}else b.isStart=
!0,c.leftWheel=0,c.rightWheel=0,Entry.Hamster.setLineTracerMode(c,g);return b},syntax:{js:[],py:[{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_TURN_LEFT)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,
"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","LEFT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_TURN_LEFT)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,
"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","LEFT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_TURN_RIGHT)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,
"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","RIGHT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_MOVE_FORWARD)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},
{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","FRONT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_BLACK_UTURN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",
fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BLACK","REAR"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_TURN_RIGHT)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,
"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","RIGHT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_MOVE_FORWARD)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","FRONT"]},{syntax:"Hamster.line_tracer_mode(Hamster.LINE_TRACER_MODE_WHITE_UTURN)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_black,"BLACK"],[Lang.Blocks.HAMSTER_color_white,"WHITE"]],value:"BLACK",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_floor_sensor,"LEFT"],[Lang.Blocks.HAMSTER_right_floor_sensor,"RIGHT"],[Lang.Blocks.HAMSTER_front,"FRONT"],[Lang.Blocks.HAMSTER_rear,"REAR"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["WHITE","REAR"]}]}},hamster_set_following_speed_to:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]],value:"1",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["5",null],type:"hamster_set_following_speed_to"},paramsKeyMap:{SPEED:0},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){Entry.hw.sendQueue.lineTracerSpeed=Number(b.getField("SPEED",b));return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.line_tracer_speed(%1)",
textParams:[{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]],value:"1",fontSize:11,converter:Entry.block.converters.returnStringOrNumberByValue}]}]}},hamster_stop:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"hamster_stop"},"class":"hamster_wheel",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;c.leftWheel=0;c.rightWheel=0;
Entry.Hamster.setLineTracerMode(c,0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.stop()"}]}},hamster_set_led_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,
"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"hamster_set_led_to"},paramsKeyMap:{DIRECTION:0,COLOR:1},"class":"hamster_led",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b),e=Number(b.getField("COLOR",b));"LEFT"==d?c.leftLed=e:("RIGHT"!=d&&(c.leftLed=e),
c.rightLed=e);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.left_led(Hamster.LED_RED)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,
"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT","4"]},{syntax:"Hamster.left_led(Hamster.LED_YELLOW)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",
options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT","6"]},{syntax:"Hamster.left_led(Hamster.LED_GREEN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,
"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT",
"2"]},{syntax:"Hamster.left_led(Hamster.LED_CYAN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,
"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT","3"]},{syntax:"Hamster.left_led(Hamster.LED_BLUE)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,
"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT","1"]},{syntax:"Hamster.left_led(Hamster.LED_MAGENTA)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",
fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT","5"]},{syntax:"Hamster.left_led(Hamster.LED_WHITE)",textParams:[{type:"Dropdown",
options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",
fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT","7"]},{syntax:"Hamster.right_led(Hamster.LED_RED)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],
[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT","4"]},{syntax:"Hamster.right_led(Hamster.LED_YELLOW)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},
{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT","6"]},{syntax:"Hamster.right_led(Hamster.LED_GREEN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,
"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],
params:["RIGHT","2"]},{syntax:"Hamster.right_led(Hamster.LED_CYAN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,
"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT","3"]},{syntax:"Hamster.right_led(Hamster.LED_BLUE)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,
"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT","1"]},{syntax:"Hamster.right_led(Hamster.LED_MAGENTA)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,
"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT","5"]},{syntax:"Hamster.right_led(Hamster.LED_WHITE)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,
"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT","7"]},{syntax:"Hamster.leds(Hamster.LED_RED)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,
"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH","4"]},{syntax:"Hamster.leds(Hamster.LED_YELLOW)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},
{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH","6"]},{syntax:"Hamster.leds(Hamster.LED_GREEN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],
[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],
params:["BOTH","2"]},{syntax:"Hamster.leds(Hamster.LED_CYAN)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,
"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH","3"]},{syntax:"Hamster.leds(Hamster.LED_BLUE)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,
"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH","1"]},{syntax:"Hamster.leds(Hamster.LED_MAGENTA)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,
"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH","5"]},{syntax:"Hamster.leds(Hamster.LED_WHITE)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_color_red,"4"],[Lang.Blocks.HAMSTER_color_yellow,"6"],[Lang.Blocks.HAMSTER_color_green,"2"],[Lang.Blocks.HAMSTER_color_cyan,"3"],[Lang.Blocks.HAMSTER_color_blue,"1"],[Lang.Blocks.HAMSTER_color_magenta,"5"],[Lang.Blocks.HAMSTER_color_white,
"7"]],value:"4",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH","7"]}]}},hamster_clear_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"hamster_clear_led"},paramsKeyMap:{DIRECTION:0},"class":"hamster_led",
isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("DIRECTION",b);"LEFT"==d?c.leftLed=0:("RIGHT"!=d&&(c.leftLed=0),c.rightLed=0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.left_led(0)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT"]},{syntax:"Hamster.left_led(Hamster.LED_OFF)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["LEFT"]},{syntax:"Hamster.left_led(Hamster.LED_OFF,Hamster.LED_OFF)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],
params:["LEFT"]},{syntax:"Hamster.right_led(0)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT"]},{syntax:"Hamster.right_led(Hamster.LED_OFF)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],
value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT"]},{syntax:"Hamster.right_led(Hamster.LED_OFF,Hamster.LED_OFF)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["RIGHT"]},{syntax:"Hamster.leds(0)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,
"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH"]},{syntax:"Hamster.leds(Hamster.LED_OFF)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH"]},{syntax:"Hamster.leds(Hamster.LED_OFF,Hamster.LED_OFF)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_left_led,"LEFT"],[Lang.Blocks.HAMSTER_right_led,"RIGHT"],[Lang.Blocks.HAMSTER_both_leds,"BOTH"]],value:"LEFT",fontSize:11,converter:Entry.block.converters.returnStringValue}],params:["BOTH"]}]}},hamster_beep:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"hamster_beep"},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){c=
Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;c.buzzer=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c.buzzer=440;c.note=0;var d=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(d)},200);Entry.Hamster.timeouts.push(d);return b},syntax:{js:[],py:[{syntax:"Hamster.beep()"}]}},hamster_change_buzzer_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["10"]},null],type:"hamster_change_buzzer_by"},paramsKeyMap:{VALUE:0},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberValue("VALUE");c.buzzer=void 0!=c.buzzer?c.buzzer+d:d;c.note=0;return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.add_buzzer_sound(%1)"}]}},hamster_set_buzzer_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["1000"]},null],type:"hamster_set_buzzer_to"},paramsKeyMap:{VALUE:0},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;c.buzzer=b.getNumberValue("VALUE");c.note=0;return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.buzzer(%1)"}]}},hamster_clear_buzzer:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"hamster_clear_buzzer"},
"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;c.buzzer=0;c.note=0;return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.buzzer(0)",params:[null]}]}},hamster_play_note_for:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_note_c+"","4"],[Lang.Blocks.ALBERT_note_c+"#","5"],[Lang.Blocks.ALBERT_note_d+"","6"],[Lang.Blocks.ALBERT_note_e+"b","7"],[Lang.Blocks.ALBERT_note_e+"","8"],[Lang.Blocks.ALBERT_note_f+
"","9"],[Lang.Blocks.ALBERT_note_f+"#","10"],[Lang.Blocks.ALBERT_note_g+"","11"],[Lang.Blocks.ALBERT_note_g+"#","12"],[Lang.Blocks.ALBERT_note_a+"","13"],[Lang.Blocks.ALBERT_note_b+"b","14"],[Lang.Blocks.ALBERT_note_b+"","15"]],value:"4",fontSize:11},{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]],value:"1",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,"4",{type:"text",
params:["0.5"]},null],type:"hamster_play_note_for"},paramsKeyMap:{NOTE:0,OCTAVE:1,VALUE:2},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){var d=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;d.note=0;return b.callReturn()}c=b.getNumberField("NOTE",b);var e=b.getNumberField("OCTAVE",b),f=6E4*b.getNumberValue("VALUE",b)/Entry.Hamster.tempo;b.isStart=!0;b.timeFlag=1;d.buzzer=0;d.note=c+12*(e-1);if(100<f){var g=
setTimeout(function(){d.note=0;Entry.Hamster.removeTimeout(g)},f-100);Entry.Hamster.timeouts.push(g)}var h=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(h)},f);Entry.Hamster.timeouts.push(h);return b},syntax:{js:[],py:[{syntax:"Hamster.note(%1, %2, %3)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.ALBERT_note_c+"","4"],[Lang.Blocks.ALBERT_note_c+"#","5"],[Lang.Blocks.ALBERT_note_d+"","6"],[Lang.Blocks.ALBERT_note_e+"b","7"],[Lang.Blocks.ALBERT_note_e+"","8"],[Lang.Blocks.ALBERT_note_f+
"","9"],[Lang.Blocks.ALBERT_note_f+"#","10"],[Lang.Blocks.ALBERT_note_g+"","11"],[Lang.Blocks.ALBERT_note_g+"#","12"],[Lang.Blocks.ALBERT_note_a+"","13"],[Lang.Blocks.ALBERT_note_b+"b","14"],[Lang.Blocks.ALBERT_note_b+"","15"]],value:"4",fontSize:11,converter:Entry.block.converters.returnValueUpperCase,codeMap:"Entry.CodeMap.Hamster.hamster_play_note_for[0]"},{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]],value:"1",fontSize:11,converter:Entry.block.converters.returnStringOrNumberByValue},
{type:"Block",accept:"string"}]}]}},hamster_rest_for:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0.25"]},null],type:"hamster_rest_for"},paramsKeyMap:{VALUE:0},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;return b.callReturn()}b.isStart=
!0;b.timeFlag=1;var d=b.getNumberValue("VALUE"),d=6E4*d/Entry.Hamster.tempo;c.buzzer=0;c.note=0;var e=setTimeout(function(){b.timeFlag=0;Entry.Hamster.removeTimeout(e)},d);Entry.Hamster.timeouts.push(e);return b},syntax:{js:[],py:[{syntax:"Hamster.note(0,%1)",textParams:[{type:"Block",accept:"string"}],keyOption:"0"},{syntax:"Hamster.note(Hamster.NOTE_OFF,%1)",textParams:[{type:"Block",accept:"string"}],keyOption:"Hamster.NOTE_OFF"}]}},hamster_change_tempo_by:{color:"#00979D",skeleton:"basic",statements:[],
params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["20"]},null],type:"hamster_change_tempo_by"},paramsKeyMap:{VALUE:0},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){Entry.Hamster.tempo+=b.getNumberValue("VALUE");1>Entry.Hamster.tempo&&(Entry.Hamster.tempo=1);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.tempo_by(%1)",textParams:[{type:"Block",accept:"string"}]}]}},hamster_set_tempo_to:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["60"]},null],type:"hamster_set_tempo_to"},paramsKeyMap:{VALUE:0},"class":"hamster_buzzer",isNotFor:["hamster"],func:function(c,b){Entry.Hamster.tempo=b.getNumberValue("VALUE");1>Entry.Hamster.tempo&&(Entry.Hamster.tempo=1);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.tempo(%1)",textParams:[{type:"Block",accept:"string"}]}]}},
hamster_set_port_to:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_analog_input,"0"],[Lang.Blocks.HAMSTER_digital_input,"1"],[Lang.Blocks.HAMSTER_servo_output,"8"],[Lang.Blocks.HAMSTER_pwm_output,"9"],[Lang.Blocks.HAMSTER_digital_output,"10"]],value:"0",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,null,null],type:"hamster_set_port_to"},paramsKeyMap:{PORT:0,MODE:1},"class":"hamster_port",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT",b),e=Number(b.getField("MODE",b));"A"==d?c.ioModeA=e:("B"!=d&&(c.ioModeA=e),c.ioModeB=e);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.io_mode_a(Hamster.IO_MODE_ANALOG_INPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["A","0"]},{syntax:"Hamster.io_mode_a(Hamster.IO_MODE_DIGITAL_INPUT)",
textParams:[{converter:Entry.block.converters.returnStringValue}],params:["A","1"]},{syntax:"Hamster.io_mode_a(Hamster.IO_MODE_SERVO_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["A","8"]},{syntax:"Hamster.io_mode_a(Hamster.IO_MODE_PWM_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["A","9"]},{syntax:"Hamster.io_mode_a(Hamster.IO_MODE_DIGITAL_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["A",
"10"]},{syntax:"Hamster.io_mode_b(Hamster.IO_MODE_ANALOG_INPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["B","0"]},{syntax:"Hamster.io_mode_b(Hamster.IO_MODE_DIGITAL_INPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["B","1"]},{syntax:"Hamster.io_mode_b(Hamster.IO_MODE_SERVO_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["B","8"]},{syntax:"Hamster.io_mode_b(Hamster.IO_MODE_PWM_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],
params:["B","9"]},{syntax:"Hamster.io_mode_b(Hamster.IO_MODE_DIGITAL_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["B","10"]},{syntax:"Hamster.io_modes(Hamster.IO_MODE_ANALOG_INPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["AB","0"]},{syntax:"Hamster.io_modes(Hamster.IO_MODE_DIGITAL_INPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["AB","1"]},{syntax:"Hamster.io_modes(Hamster.IO_MODE_SERVO_OUTPUT)",
textParams:[{converter:Entry.block.converters.returnStringValue}],params:["AB","8"]},{syntax:"Hamster.io_modes(Hamster.IO_MODE_PWM_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["AB","9"]},{syntax:"Hamster.io_modes(Hamster.IO_MODE_DIGITAL_OUTPUT)",textParams:[{converter:Entry.block.converters.returnStringValue}],params:["AB","10"]}]}},hamster_change_output_by:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,
"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["10"]},null],type:"hamster_change_output_by"},paramsKeyMap:{PORT:0,VALUE:1},"class":"hamster_port",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT"),e=b.getNumberValue("VALUE");"A"==d?c.outputA=void 0!=c.outputA?c.outputA+e:e:("B"!=
d&&(c.outputA=void 0!=c.outputA?c.outputA+e:e),c.outputB=void 0!=c.outputB?c.outputB+e:e);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.output_a_by(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["A"]},{syntax:"Hamster.output_b_by(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,
"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["B"]},{syntax:"Hamster.outputs_by(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["AB"]}]}},hamster_set_output_to:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["100"]},null],type:"hamster_set_output_to"},paramsKeyMap:{PORT:0,VALUE:1},"class":"hamster_port",isNotFor:["hamster"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT"),
e=b.getNumberValue("VALUE");"A"==d?c.outputA=e:("B"!=d&&(c.outputA=e),c.outputB=e);return b.callReturn()},syntax:{js:[],py:[{syntax:"Hamster.output_a(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["A"]},{syntax:"Hamster.output_b(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,
"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["B"]},{syntax:"Hamster.outputs(%2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.HAMSTER_port_a,"A"],[Lang.Blocks.HAMSTER_port_b,"B"],[Lang.Blocks.HAMSTER_port_ab,"AB"]],value:"A",fontSize:11,converter:Entry.block.converters.returnStringValue},{type:"Block",accept:"string"}],params:["AB"]}]}},is_clicked:{color:"#AEB8FF",
skeleton:"basic_boolean_field",statements:[],params:[{type:"Text",text:Lang.Blocks.JUDGEMENT_is_clicked,color:"#3D3D3D"}],events:{},def:{params:[null],type:"is_clicked"},"class":"boolean_input",isNotFor:[],func:function(c,b){return Entry.stage.isClick},syntax:{js:[],py:[{syntax:"Entry.is_mouse_clicked()",blockType:"param"}]}},is_press_some_key:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Keyboard",value:81},{type:"Text",text:Lang.Blocks.JUDGEMENT_is_press_some_key_2,
color:"#3D3D3D"}],events:{},def:{params:[null,null],type:"is_press_some_key"},pyHelpDef:{params:["A&value",null],type:"is_press_some_key"},paramsKeyMap:{VALUE:0},"class":"boolean_input",isNotFor:[],func:function(c,b){c=Number(b.getField("VALUE",b));return 0<=Entry.pressedKeys.indexOf(c)},syntax:{js:[],py:[{syntax:"Entry.is_key_pressed(%1)",blockType:"param",textParams:[{type:"Keyboard",value:"81",converter:Entry.block.converters.keyboardCode}]}]}},reach_something:{color:"#AEB8FF",skeleton:"basic_boolean_field",
statements:[],params:[{type:"Text",text:Lang.Blocks.JUDGEMENT_reach_something_1,color:"#3D3D3D"},{type:"DropdownDynamic",value:null,menuName:"collision",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_JUDGE},{type:"Text",text:Lang.Blocks.JUDGEMENT_reach_something_2,color:"#3D3D3D"}],events:{},def:{params:[null,null,null],type:"reach_something"},pyHelpDef:{params:[null,"A&value",null],type:"reach_something"},paramsKeyMap:{VALUE:1},"class":"boolean_collision",isNotFor:[],func:function(c,b){if(!c.getVisible())return!1;
var d=b.getField("VALUE",b);b=c.object;var e=/wall/.test(d),f=ndgmr.checkPixelCollision;if(e)switch(c=Entry.stage.wall,d){case "wall":return!!(f(b,c.up,.2,!0)||f(b,c.down,.2,!0)||f(b,c.left,.2,!0)||f(b,c.right,.2,!0));case "wall_up":return!!f(b,c.up,.2,!0);case "wall_down":return!!f(b,c.down,.2,!0);case "wall_right":return!!f(b,c.right,.2,!0);case "wall_left":return!!f(b,c.left,.2,!0)}else{if("mouse"==d)return f=Entry.stage.canvas,f=b.globalToLocal(f.mouseX,f.mouseY),b.hitTest(f.x,f.y);d=Entry.container.getEntity(d);
if("textBox"==d.type||"textBox"==c.type){f=d.object.getTransformedBounds();b=b.getTransformedBounds();if(Entry.checkCollisionRect(b,f))return!0;c=d.parent.clonedEntities;d=0;for(e=c.length;d<e;d++){var g=c[d];if(!g.isStamp&&g.getVisible()&&Entry.checkCollisionRect(b,g.object.getTransformedBounds()))return!0}}else{if(d.getVisible()&&f(b,d.object,.2,!0))return!0;c=d.parent.clonedEntities;d=0;for(e=c.length;d<e;d++)if(g=c[d],!g.isStamp&&g.getVisible()&&f(b,g.object,.2,!0))return!0}}return!1},syntax:{js:[],
py:[{syntax:"Entry.is_touched(%2)",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"collision",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_JUDGE,converter:Entry.block.converters.returnObjectOrStringValue,codeMap:"Entry.CodeMap.Entry.reach_something[1]"}]}]}},boolean_comparison:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["=","EQUAL"],["<","SMALLER"],[">","BIGGER"]],value:"EQUAL",
fontSize:11},{type:"Block",accept:"string"}],events:{},def:{params:[null],type:"boolean_comparison"},paramsKeyMap:{LEFTHAND:0,OPERATOR:1,RIGHTHAND:2},func:function(c,b){c=b.getField("OPERATOR",b);var d=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return"EQUAL"==c?d==b:"BIGGER"==c?d>b:d<b},syntax:{js:[],py:[""]}},boolean_equal:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"=",color:"#3D3D3D"},{type:"Block",
accept:"string"}],events:{},def:{params:[{type:"number",params:["10"]},null,{type:"number",params:["10"]}],type:"boolean_equal"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"boolean_compare",isNotFor:[],func:function(c,b){c=b.getStringValue("LEFTHAND",b);b=b.getStringValue("RIGHTHAND",b);return c==b},syntax:{js:[],py:[""]}},boolean_bigger:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:">",color:"#3D3D3D"},{type:"Block",accept:"string"}],
events:{},def:{params:[{type:"number",params:["10"]},null,{type:"number",params:["10"]}],type:"boolean_bigger"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"boolean_compare",isNotFor:[],func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return c>b},syntax:{js:[],py:[""]}},boolean_smaller:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Text",text:"<",color:"#3D3D3D"},{type:"Block",accept:"string"}],events:{},
def:{params:[{type:"number",params:["10"]},null,{type:"number",params:["10"]}],type:"boolean_smaller"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"boolean_compare",isNotFor:[],func:function(c,b){c=b.getNumberValue("LEFTHAND",b);b=b.getNumberValue("RIGHTHAND",b);return c<b},syntax:{js:[],py:[""]}},boolean_and_or:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"boolean"},{type:"Dropdown",options:[[Lang.Blocks.JUDGEMENT_boolean_and,"AND"],[Lang.Blocks.JUDGEMENT_boolean_or,
"OR"]],value:"AND",fontSize:11},{type:"Block",accept:"boolean"}],events:{},def:{params:[null]},paramsKeyMap:{LEFTHAND:0,OPERATOR:1,RIGHTHAND:2},func:function(c,b){c=b.getField("OPERATOR",b);var d=b.getBooleanValue("LEFTHAND",b);b=b.getBooleanValue("RIGHTHAND",b);return"AND"==c?d&&b:d||b},syntax:{js:[],py:[""]}},boolean_and:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"boolean"},{type:"Text",text:Lang.Blocks.JUDGEMENT_boolean_and,color:"#3D3D3D"},{type:"Block",
accept:"boolean"}],events:{},def:{params:[{type:"True"},null,{type:"True"}],type:"boolean_and"},pyHelpDef:{params:[{type:"boolean_shell",params:["A"]},null,{type:"boolean_shell",params:["B"]}],type:"boolean_and"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"boolean",isNotFor:[],func:function(c,b){c=b.getBooleanValue("LEFTHAND",b);b=b.getBooleanValue("RIGHTHAND",b);return c&&b},syntax:{js:[],py:[{syntax:"(%1 and %3)",template:"%1 and %3",blockType:"param"}]}},boolean_or:{color:"#AEB8FF",skeleton:"basic_boolean_field",
statements:[],params:[{type:"Block",accept:"boolean"},{type:"Text",text:Lang.Blocks.JUDGEMENT_boolean_or,color:"#3D3D3D"},{type:"Block",accept:"boolean"}],events:{},def:{params:[{type:"True"},null,{type:"False"}],type:"boolean_or"},pyHelpDef:{params:[{type:"boolean_shell",params:["A"]},null,{type:"boolean_shell",params:["B"]}],type:"boolean_or"},paramsKeyMap:{LEFTHAND:0,RIGHTHAND:2},"class":"boolean",isNotFor:[],func:function(c,b){c=b.getBooleanValue("LEFTHAND",b);b=b.getBooleanValue("RIGHTHAND",
b);return c||b},syntax:{js:[],py:[{syntax:"(%1 or %3)",template:"%1 or %3",blockType:"param"}]}},boolean_not:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Text",text:Lang.Blocks.JUDGEMENT_boolean_not_1,color:"#3D3D3D"},{type:"Block",accept:"boolean"},{type:"Text",text:Lang.Blocks.JUDGEMENT_boolean_not_2,color:"#3D3D3D"}],events:{},def:{params:[null,{type:"True"},null],type:"boolean_not"},pyHelpDef:{params:[null,{type:"boolean_shell"},null],type:"boolean_not"},paramsKeyMap:{VALUE:1},
"class":"boolean",isNotFor:[],func:function(c,b){return!b.getBooleanValue("VALUE")},syntax:{js:[],py:[{syntax:"not (%2)",template:"not %2",blockType:"param",textParams:[void 0,{type:"Block",accept:"Boolean"}]}]}},true_or_false:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.JUDGEMENT_true,"true"],[Lang.Blocks.JUDGEMENT_false,"false"]],value:"true",fontSize:11}],events:{},def:{params:[null]},paramsKeyMap:{VALUE:0},func:function(c,b){return"true"==
b.children[0].textContent},syntax:{js:[],py:[""]}},True:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Text",text:Lang.Blocks.JUDGEMENT_true,color:"#3D3D3D"}],events:{},def:{params:[null],type:"True"},func:function(c,b){return!0},isPrimitive:!0,syntax:{js:["Scope","true"],py:["True"]}},False:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Text",text:Lang.Blocks.JUDGEMENT_false,color:"#3D3D3D"}],events:{},def:{params:[null],type:"False"},func:function(c,
b){return!1},isPrimitive:!0,syntax:{js:[],py:["False"]}},boolean_basic_operator:{color:"#AEB8FF",skeleton:"basic_boolean_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["=","EQUAL"],[">","GREATER"],["<","LESS"],["\u2265","GREATER_OR_EQUAL"],["\u2264","LESS_OR_EQUAL"]],value:"EQUAL",fontSize:11,noArrow:!0},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"text",params:["10"]},"EQUAL",{type:"text",params:["10"]}],type:"boolean_basic_operator"},pyHelpDef:{params:[{type:"text",
params:["A&value"]},"EQUAL",{type:"text",params:["B&value"]}],type:"boolean_basic_operator"},defs:[{params:[{type:"text",params:["10"]},"EQUAL",{type:"text",params:["10"]}],type:"boolean_basic_operator"},{params:[{type:"text",params:["10"]},"GREATER",{type:"text",params:["10"]}],type:"boolean_basic_operator"},{params:[{type:"text",params:["10"]},"LESS",{type:"text",params:["10"]}],type:"boolean_basic_operator"},{params:[{type:"text",params:["10"]},"GREATER_OR_EQUAL",{type:"text",params:["10"]}],type:"boolean_basic_operator"},
{params:[{type:"text",params:["10"]},"LESS_OR_EQUAL",{type:"text",params:["10"]}],type:"boolean_basic_operator"}],paramsKeyMap:{LEFTHAND:0,OPERATOR:1,RIGHTHAND:2},"class":"boolean_compare",isNotFor:[],func:function(c,b){c=b.getField("OPERATOR",b);var d=b.getStringValue("LEFTHAND",b);b=b.getStringValue("RIGHTHAND",b);switch(c){case "EQUAL":return d==b;case "GREATER":return Number(d)>Number(b);case "LESS":return Number(d)<Number(b);case "GREATER_OR_EQUAL":return Number(d)>=Number(b);case "LESS_OR_EQUAL":return Number(d)<=
Number(b)}},syntax:{js:[],py:[{syntax:"(%1 %2 %3)",template:"%1 %2 %3",keyOption:"boolean_basic_operator",blockType:"param",textParams:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["=","EQUAL"],[">","GREATER"],["<","LESS"],["\u2265","GREATER_OR_EQUAL"],["\u2264","LESS_OR_EQUAL"]],value:"EQUAL",fontSize:11,noArrow:!0,converter:Entry.block.converters.returnOperator},{type:"Block",accept:"string"}]}]}},show:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/looks_03.png",
size:12}],events:{},def:{params:[null],type:"show"},"class":"visibility",isNotFor:[],func:function(c,b){c.setVisible(!0);return b.callReturn()},syntax:{js:[],py:["Entry.show()"]}},hide:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null],type:"hide"},"class":"visibility",isNotFor:[],func:function(c,b){c.setVisible(!1);return b.callReturn()},syntax:{js:[],py:["Entry.hide()"]}},dialog_time:{color:"#EC4466",skeleton:"basic",
statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.speak,"speak"]],value:"speak",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"text",params:[Lang.Blocks.block_hi]},{type:"number",params:["4"]},null,null],type:"dialog_time"},pyHelpDef:{params:[{type:"text",params:["A&value"]},{type:"number",params:["B&value"]},null,null],type:"dialog_time"},
paramsKeyMap:{VALUE:0,SECOND:1,OPTION:2},"class":"say",isNotFor:["textBox"],func:function(c,b){if(!b.isStart){var d=b.getNumberValue("SECOND",b),e=b.getStringValue("VALUE",b),f=b.getField("OPTION",b);b.isStart=!0;b.timeFlag=1;e||"number"==typeof e||(e="    ");e=Entry.convertToRoundedDecimals(e,3);new Entry.Dialog(c,e,f);c.syncDialogVisible(c.getVisible());setTimeout(function(){b.timeFlag=0},1E3*d)}if(0==b.timeFlag)return delete b.timeFlag,delete b.isStart,c.dialog&&c.dialog.remove(),b.callReturn();
c.dialog||(e=b.getStringValue("VALUE",b),f=b.getField("OPTION",b),e||"number"==typeof e||(e="    "),e=Entry.convertToRoundedDecimals(e,3),new Entry.Dialog(c,e,f),c.syncDialogVisible(c.getVisible()));return b},syntax:{js:[],py:[{syntax:"Entry.print_for_sec(%1, %2)",params:[null,null,"speak"],textParams:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.speak,"speak"]],value:"speak",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS,converter:Entry.block.converters.returnStringValue}]}]}},
dialog:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.speak,"speak"]],value:"speak",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"text",params:[Lang.Blocks.block_hi]},null,null],type:"dialog"},pyHelpDef:{params:[{type:"text",params:["A&value"]},null,null],type:"dialog"},paramsKeyMap:{VALUE:0,OPTION:1},"class":"say",isNotFor:["textBox"],
func:function(c,b){var d=b.getStringValue("VALUE",b);d||"number"==typeof d||(d="    ");var e=b.getField("OPTION",b),d=Entry.convertToRoundedDecimals(d,3);new Entry.Dialog(c,d,e);c.syncDialogVisible(c.getVisible());return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.print(%1)",params:[null,"speak"]}]}},remove_dialog:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null],type:"remove_dialog"},"class":"say",isNotFor:["textBox"],
func:function(c,b){c.dialog&&c.dialog.remove();return b.callReturn()},syntax:{js:[],py:["Entry.clear_print()"]}},change_to_nth_shape:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"pictures",fontSize:11},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,null],type:"change_to_nth_shape"},paramsKeyMap:{VALUE:0},"class":"shape",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b),d=c.parent.getPicture(d);c.setImage(d);
return b.callReturn()},syntax:{js:[],py:[""]}},change_to_next_shape:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.LOOKS_change_shape_next,"next"],[Lang.Blocks.LOOKS_change_shape_prev,"prev"]],value:"next",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,null],type:"change_to_next_shape"},pyHelpDef:{params:["A&value",null],type:"change_to_next_shape"},paramsKeyMap:{DRIECTION:0},
"class":"shape",isNotFor:["textBox"],func:function(c,b){var d;d="prev"!==b.getStringField("DRIECTION")?c.parent.getNextPicture(c.picture.id):c.parent.getPrevPicture(c.picture.id);c.setImage(d);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.change_shape_to(%1)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.LOOKS_change_shape_next,"next"],[Lang.Blocks.LOOKS_change_shape_prev,"prev"]],value:"next",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS,converter:Entry.block.converters.returnStringValue,
codeMap:"Entry.CodeMap.Entry.change_to_next_shape[0]"}]}]}},set_effect_volume:{color:"#EC4466",skeleton:"basic",statements:[],deprecated:!0,params:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.opacity,"opacity"]],value:"color",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["10"]},null],type:"set_effect_volume"},paramsKeyMap:{EFFECT:0,
VALUE:1},"class":"effect",isNotFor:["textBox"],func:function(c,b){var d=b.getField("EFFECT",b),e=b.getNumberValue("VALUE",b),f="";"color"==d?(c.effect.hue=e+c.effect.hue,f="hue"):"lens"!=d&&"swriling"!=d&&"pixel"!=d&&"mosaic"!=d&&("brightness"==d?(c.effect.brightness=e+c.effect.brightness,f="brightness"):"blur"!=d&&"opacity"==d&&(c.effect.alpha+=e/100,f="alpha"));c.applyFilter(!0,[f]);return b.callReturn()},syntax:{js:[],py:["Entry.set_effect_volume(%1, %2)"]}},set_effect:{color:"#EC4466",skeleton:"basic",
statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.opacity,"opacity"]],value:"color",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["100"]},null],type:"set_effect"},paramsKeyMap:{EFFECT:0,VALUE:1},"class":"effect",isNotFor:["textBox"],func:function(c,b){var d=b.getField("EFFECT",b),e=b.getNumberValue("VALUE",b),f="";"color"==
d?(c.effect.hue=e,f="hue"):"lens"!=d&&"swriling"!=d&&"pixel"!=d&&"mosaic"!=d&&("brightness"==d?(c.effect.brightness=e,f="brightness"):"blur"!=d&&"opacity"==d&&(c.effect.alpha=e/100,f="alpha"));c.applyFilter(!0,[f]);return b.callReturn()},syntax:{js:[],py:["Entry.set_effect(%1, %2)"]}},erase_all_effects:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null],type:"erase_all_effects"},"class":"effect",isNotFor:["textBox"],
func:function(c,b){c.resetFilter();return b.callReturn()},syntax:{js:[],py:["Entry.clear_effect()"]}},change_scale_percent:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"change_scale_percent"},paramsKeyMap:{VALUE:0},"class":"scale",isNotFor:[],func:function(c,b){var d=(b.getNumberValue("VALUE",b)+100)/100;c.setScaleX(c.getScaleX()*d);c.setScaleY(c.getScaleY()*
d);return b.callReturn()},syntax:{js:[],py:[""]}},set_scale_percent:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"number",params:["100"]},null],type:"set_scale_percent"},paramsKeyMap:{VALUE:0},"class":"scale",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b)/100,e=c.snapshot_;c.setScaleX(d*e.scaleX);c.setScaleY(d*e.scaleY);return b.callReturn()},syntax:{js:[],
py:[""]}},change_scale_size:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"change_scale_size"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"change_scale_size"},paramsKeyMap:{VALUE:0},"class":"scale",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setSize(c.getSize()+d);return b.callReturn()},syntax:{js:[],
py:["Entry.add_size(%1)"]}},set_scale_size:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"number",params:["100"]},null],type:"set_scale_size"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"set_scale_size"},paramsKeyMap:{VALUE:0},"class":"scale",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setSize(d);return b.callReturn()},syntax:{js:[],
py:["Entry.set_size(%1)"]}},flip_y:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null],type:"flip_y"},"class":"flip",isNotFor:[],func:function(c,b){c.setScaleX(-1*c.getScaleX());return b.callReturn()},syntax:{js:[],py:["Entry.flip_vertical()"]}},flip_x:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null],type:"flip_x"},
"class":"flip",isNotFor:[],func:function(c,b){c.setScaleY(-1*c.getScaleY());return b.callReturn()},syntax:{js:[],py:["Entry.flip_horizontal()"]}},set_object_order:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"objectSequence",fontSize:11},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,null],type:"set_object_order"},paramsKeyMap:{VALUE:0},"class":"z-index",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",
b);c=Entry.container.getCurrentObjects().indexOf(c.parent);if(-1<c)return Entry.container.moveElementByBlock(c,d),b.callReturn();throw Error("object is not available");},syntax:{js:[],py:[""]}},get_pictures:{color:"#EC4466",skeleton:"basic_string_field",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"pictures",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS}],events:{},def:{params:[null]},paramsKeyMap:{VALUE:0},func:function(c,b){return b.getStringField("VALUE")},syntax:{js:[],
py:[{syntax:"%1",keyOption:"get_pictures",textParams:[{type:"DropdownDynamic",value:null,menuName:"pictures",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS,converter:Entry.block.converters.returnStringKey}]}]}},change_to_some_shape:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[{type:"get_pictures",id:"z4jm"},null],type:"change_to_some_shape"},pyHelpDef:{params:[{type:"get_pictures",
params:["A&value"]},null],type:"change_to_some_shape"},paramsKeyMap:{VALUE:0},"class":"shape",isNotFor:["textBox"],func:function(c,b){var d=b.getStringValue("VALUE");Entry.parseNumber(d);d=c.parent.getPicture(d);c.setImage(d);return b.callReturn()},syntax:{js:[],py:["Entry.change_shape(%1)"]}},add_effect_amount:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.transparency,"transparency"]],
value:"color",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["10"]},null],type:"add_effect_amount"},pyHelpDef:{params:["A&value",{type:"number",params:["B&value"]},null],type:"add_effect_amount"},paramsKeyMap:{EFFECT:0,VALUE:1},"class":"effect",isNotFor:["textBox"],func:function(c,b){var d=b.getField("EFFECT",b),e=b.getNumberValue("VALUE",b),f="";"color"==
d?(c.effect.hsv=e+c.effect.hsv,f="hsv"):"brightness"==d?(c.effect.brightness=e+c.effect.brightness,f="brightness"):"transparency"==d&&(c.effect.alpha-=e/100,f="alpha");c.applyFilter(!0,[f]);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.add_effect(%1, %2)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.transparency,"transparency"]],value:"color",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS,converter:Entry.block.converters.returnStringValue,
codeMap:"Entry.CodeMap.Entry.add_effect_amount[0]"},{type:"Block",accept:"string"}]}]}},change_effect_amount:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.transparency,"transparency"]],value:"color",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["100"]},
null],type:"change_effect_amount"},pyHelpDef:{params:["A&value",{type:"number",params:["B&value"]},null],type:"change_effect_amount"},paramsKeyMap:{EFFECT:0,VALUE:1},"class":"effect",isNotFor:["textBox"],func:function(c,b){var d=b.getField("EFFECT",b),e=b.getNumberValue("VALUE",b),f="";"color"==d?(c.effect.hsv=e,f="hsv"):"brightness"==d?(c.effect.brightness=e,f="brightness"):"transparency"==d&&(c.effect.alpha=1-e/100,f="alpha");c.applyFilter(!0,[f]);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.set_effect(%1, %2)",
textParams:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.transparency,"transparency"]],value:"color",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS,converter:Entry.block.converters.returnStringValue,codeMap:"Entry.CodeMap.Entry.change_effect_amount[0]"},{type:"Block",accept:"string"}]}]}},set_effect_amount:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,
"brightness"],[Lang.Blocks.transparency,"transparency"]],value:"color",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["10"]},null],type:"set_effect_amount"},paramsKeyMap:{EFFECT:0,VALUE:1},"class":"effect",isNotFor:["textBox"],func:function(c,b){var d=b.getField("EFFECT",b),e=b.getNumberValue("VALUE",b),f="";"color"==d?(c.effect.hue=e+c.effect.hue,f="hue"):"brightness"==d?(c.effect.brightness=
e+c.effect.brightness,f="brightness"):"transparency"==d&&(c.effect.alpha-=e/100,f="alpha");c.applyFilter(!0,[f]);return b.callReturn()},syntax:{js:[],py:[""]}},set_entity_effect:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.color,"color"],[Lang.Blocks.brightness,"brightness"],[Lang.Blocks.transparency,"transparency"]],value:"color",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,
{type:"number",params:["100"]},null],type:"set_entity_effect"},paramsKeyMap:{EFFECT:0,VALUE:1},"class":"effect",isNotFor:["textBox"],func:function(c,b){var d=b.getField("EFFECT",b),e=b.getNumberValue("VALUE",b),f="";"color"==d?(c.effect.hue=e,f="hue"):"brightness"==d?(c.effect.brightness=e,f="brightness"):"transparency"==d&&(c.effect.alpha=1-e/100,f="alpha");c.applyFilter(!0,[f]);return b.callReturn()},syntax:{js:[],py:[""]}},change_object_index:{color:"#EC4466",skeleton:"basic",statements:[],params:[{type:"Dropdown",
options:[[Lang.Blocks.LOOKS_change_object_index_sub_1,"FRONT"],[Lang.Blocks.LOOKS_change_object_index_sub_2,"FORWARD"],[Lang.Blocks.LOOKS_change_object_index_sub_3,"BACKWARD"],[Lang.Blocks.LOOKS_change_object_index_sub_4,"BACK"]],value:"FRONT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS},{type:"Indicator",img:"block_icon/looks_03.png",size:12}],events:{},def:{params:[null,null],type:"change_object_index"},pyHelpDef:{params:["A&value",null],type:"change_object_index"},paramsKeyMap:{LOCATION:0},
"class":"z-index",isNotFor:[],func:function(c,b){var d,e=b.getField("LOCATION",b),f=Entry.container.getCurrentObjects();c=f.indexOf(c.parent);f=f.length-1;if(0>c)throw Error("object is not available for current scene");switch(e){case "FRONT":d=0;break;case "FORWARD":d=Math.max(0,c-1);break;case "BACKWARD":d=Math.min(f,c+1);break;case "BACK":d=f}Entry.container.moveElementByBlock(c,d);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.send_layer_to(%1)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.LOOKS_change_object_index_sub_1,
"FRONT"],[Lang.Blocks.LOOKS_change_object_index_sub_2,"FORWARD"],[Lang.Blocks.LOOKS_change_object_index_sub_3,"BACKWARD"],[Lang.Blocks.LOOKS_change_object_index_sub_4,"BACK"]],value:"FRONT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_LOOKS,converter:Entry.block.converters.returnStringValueLowerCase,codeMap:"Entry.CodeMap.Entry.change_object_index[0]"}]}]}},move_direction:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",
size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"move_direction"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"move_direction"},paramsKeyMap:{VALUE:0},"class":"walk",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setX(c.getX()+d*Math.cos((c.getRotation()+c.getDirection()-90)/180*Math.PI));c.setY(c.getY()-d*Math.sin((c.getRotation()+c.getDirection()-90)/180*Math.PI));c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},
syntax:{js:[],py:["Entry.move_to_direction(%1)"]}},move_x:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"move_x"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"move_x"},paramsKeyMap:{VALUE:0},"class":"move_relative",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setX(c.getX()+d);c.brush&&!c.brush.stop&&
c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.add_x(%1)"]}},move_y:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"move_y"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"move_y"},paramsKeyMap:{VALUE:0},"class":"move_relative",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",
b);c.setY(c.getY()+d);c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.add_y(%1)"]}},locate_xy_time:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["2"]},{type:"number",params:["10"]},{type:"number",params:["10"]},null],type:"locate_xy_time"},
pyHelpDef:{params:[{type:"number",params:["C&value"]},{type:"number",params:["A&value"]},{type:"number",params:["B&value"]},null],type:"locate_xy_time"},paramsKeyMap:{VALUE1:0,VALUE2:1,VALUE3:2},"class":"move_absolute",isNotFor:[],func:function(c,b){function d(){var d=b.x-c.getX(),e=b.y-c.getY(),d=d/b.frameCount,e=e/b.frameCount;c.setX(c.getX()+d);c.setY(c.getY()+e);b.frameCount--;c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY())}if(!b.isStart){var e;e=b.getNumberValue("VALUE1",b);b.isStart=
!0;b.frameCount=Math.max(Math.floor(e*Entry.FPS),1);b.x=b.getNumberValue("VALUE2",b);b.y=b.getNumberValue("VALUE3",b);1==b.frameCount&&d()}if(0!=b.frameCount)return d(),b;delete b.isStart;delete b.frameCount;return b.callReturn()},syntax:{js:[],py:["Entry.set_xy_for_sec(%2, %3, %1)"]}},rotate_by_angle:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["90"]},
null],type:"rotate_by_angle"},paramsKeyMap:{VALUE:0},"class":"rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setRotation(c.getRotation()+d);return b.callReturn()},syntax:{js:[],py:[""]}},rotate_by_angle_dropdown:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["45","45"],["90","90"],["135","135"],["180","180"]],value:"45",fontSize:11},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:["45",null],type:"rotate_by_angle_dropdown"},
paramsKeyMap:{VALUE:0},"class":"ebs",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b);c.setRotation(c.getRotation()+Number(d));return b.callReturn()},syntax:{js:[],py:[""]}},see_angle:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["90"]},null],type:"see_angle"},paramsKeyMap:{VALUE:0},"class":"rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",
b);c.setDirection(d);return b.callReturn()},syntax:{js:[],py:[""]}},see_direction:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"sprites",fontSize:11},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[null,null]},paramsKeyMap:{VALUE:0},func:function(c,b){var d=b.getField("VALUE",b),e=Entry.container.getEntity(d),d=e.getX()-c.getX(),e=e.getY()-c.getY();0<=d?c.setRotation(Math.atan(e/d)/Math.PI*180+90):c.setRotation(Math.atan(e/
d)/Math.PI*180+270);return b.callReturn()},syntax:{js:[],py:[""]}},locate_xy:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["0"]},{type:"number",params:["0"]},null],type:"locate_xy"},pyHelpDef:{params:[{type:"number",params:["A&value"]},{type:"number",params:["B&value"]}],type:"locate_xy"},paramsKeyMap:{VALUE1:0,VALUE2:1},"class":"move_absolute",
isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE1",b),e=b.getNumberValue("VALUE2",b);c.setX(d);c.setY(e);c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.set_xy(%1, %2)"]}},locate_x:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"locate_x"},pyHelpDef:{params:[{type:"number",
params:["A&value"]},null],type:"locate_x"},paramsKeyMap:{VALUE:0},"class":"move_absolute",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setX(d);c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.set_x(%1)"]}},locate_y:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],
type:"locate_y"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"locate_y"},paramsKeyMap:{VALUE:0},"class":"move_absolute",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setY(d);c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.set_y(%1)"]}},locate:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_MOVING},
{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[null,null],type:"locate"},pyHelpDef:{params:["A&value",null],type:"locate"},paramsKeyMap:{VALUE:0},"class":"move_absolute",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b),e;"mouse"==d?(d=Entry.stage.mouseCoordinate.x,e=Entry.stage.mouseCoordinate.y):(e=Entry.container.getEntity(d),d=e.getX(),e=e.getY());c.setX(Number(d));c.setY(Number(e));c.brush&&!c.brush.stop&&c.brush.lineTo(d,-1*e);return b.callReturn()},
syntax:{js:[],py:[{syntax:"Entry.move_to(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_MOVING,converter:Entry.block.converters.returnStringKey,codeMap:"Entry.CodeMap.Entry.locate[0]"}]}]}},move_xy_time:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},
def:{params:[{type:"number",params:["2"]},{type:"number",params:["10"]},{type:"number",params:["10"]},null],type:"move_xy_time"},pyHelpDef:{params:[{type:"number",params:["C&value"]},{type:"number",params:["A&value"]},{type:"number",params:["B&value"]},null],type:"move_xy_time"},paramsKeyMap:{VALUE1:0,VALUE2:1,VALUE3:2},"class":"move_relative",isNotFor:[],func:function(c,b){function d(){c.setX(c.getX()+b.dX);c.setY(c.getY()+b.dY);b.frameCount--;c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY())}
if(!b.isStart){var e;e=b.getNumberValue("VALUE1",b);var f=b.getNumberValue("VALUE2",b),g=b.getNumberValue("VALUE3",b);b.isStart=!0;b.frameCount=Math.max(Math.floor(e*Entry.FPS),1);b.dX=f/b.frameCount;b.dY=g/b.frameCount;1==b.frameCount&&d()}if(0!=b.frameCount)return d(),b;delete b.isStart;delete b.frameCount;return b.callReturn()},syntax:{js:[],py:["Entry.add_xy_for_sec(%2, %3, %1)"]}},rotate_by_angle_time:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Angle"},
{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["2"]},null,null],type:"rotate_by_angle_time"},paramsKeyMap:{VALUE:1},"class":"rotate",isNotFor:[],func:function(c,b){if(!b.isStart){var d;d=b.getNumberValue("VALUE",b);var e=b.getNumberField("VALUE",b);b.isStart=!0;b.frameCount=Math.floor(d*Entry.FPS);b.dAngle=e/b.frameCount}if(0!=b.frameCount)return c.setRotation(c.getRotation()+b.dAngle),b.frameCount--,b;delete b.isStart;delete b.frameCount;
return b.callReturn()},syntax:{js:[],py:[""]}},bounce_wall:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[null],type:"bounce_wall"},"class":"walk",isNotFor:[],func:function(c,b){var d=c.parent.getRotateMethod(),e="free"==d?(c.getRotation()+c.getDirection()).mod(360):c.getDirection(),f;if(90>e&&0<=e||360>e&&270<=e){f=c.collision==Entry.Utils.COLLISION.UP;var g=ndgmr.checkPixelCollision(Entry.stage.wall.up,c.object,
0,!1);!g&&f&&(c.collision=Entry.Utils.COLLISION.NONE);g&&f&&(g=!1);g?("free"==d?c.setRotation(-c.getRotation()-2*c.getDirection()+180):c.setDirection(-c.getDirection()+180),c.collision=Entry.Utils.COLLISION.UP):(f=c.collision==Entry.Utils.COLLISION.DOWN,g=ndgmr.checkPixelCollision(Entry.stage.wall.down,c.object,0,!1),!g&&f&&(c.collision=Entry.Utils.COLLISION.NONE),g&&f&&(g=!1),g&&("free"==d?c.setRotation(-c.getRotation()-2*c.getDirection()+180):c.setDirection(-c.getDirection()+180),c.collision=Entry.Utils.COLLISION.DOWN))}else 270>
e&&90<=e&&(f=c.collision==Entry.Utils.COLLISION.DOWN,g=ndgmr.checkPixelCollision(Entry.stage.wall.down,c.object,0,!1),!g&&f&&(c.collision=Entry.Utils.COLLISION.NONE),g&&f&&(g=!1),g?("free"==d?c.setRotation(-c.getRotation()-2*c.getDirection()+180):c.setDirection(-c.getDirection()+180),c.collision=Entry.Utils.COLLISION.DOWN):(f=c.collision==Entry.Utils.COLLISION.UP,g=ndgmr.checkPixelCollision(Entry.stage.wall.up,c.object,0,!1),!g&&f&&(c.collision=Entry.Utils.COLLISION.NONE),g&&f&&(g=!1),g&&("free"==
d?c.setRotation(-c.getRotation()-2*c.getDirection()+180):c.setDirection(-c.getDirection()+180),c.collision=Entry.Utils.COLLISION.UP)));360>e&&180<=e?(f=c.collision==Entry.Utils.COLLISION.LEFT,e=ndgmr.checkPixelCollision(Entry.stage.wall.left,c.object,0,!1),!e&&f&&(c.collision=Entry.Utils.COLLISION.NONE),e&&f&&(e=!1),e?("free"==d?c.setRotation(-c.getRotation()-2*c.getDirection()):c.setDirection(-c.getDirection()+360),c.collision=Entry.Utils.COLLISION.LEFT):(f=c.collision==Entry.Utils.COLLISION.RIGHT,
e=ndgmr.checkPixelCollision(Entry.stage.wall.right,c.object,0,!1),!e&&f&&(c.collision=Entry.Utils.COLLISION.NONE),e&&f&&(e=!1),e&&("free"==d?c.setRotation(-c.getRotation()-2*c.getDirection()):c.setDirection(-c.getDirection()+360),c.collision=Entry.Utils.COLLISION.RIGHT))):180>e&&0<=e&&(f=c.collision==Entry.Utils.COLLISION.RIGHT,e=ndgmr.checkPixelCollision(Entry.stage.wall.right,c.object,0,!1),!e&&f&&(c.collision=Entry.Utils.COLLISION.NONE),e&&f&&(e=!1),e?("free"==d?c.setRotation(-c.getRotation()-
2*c.getDirection()):c.setDirection(-c.getDirection()+360),c.collision=Entry.Utils.COLLISION.RIGHT):(f=c.collision==Entry.Utils.COLLISION.LEFT,e=ndgmr.checkPixelCollision(Entry.stage.wall.left,c.object,0,!1),!e&&f&&(c.collision=Entry.Utils.COLLISION.NONE),e&&f&&(e=!1),e&&("free"==d?c.setRotation(-c.getRotation()-2*c.getDirection()):c.setDirection(-c.getDirection()+360),c.collision=Entry.Utils.COLLISION.LEFT)));return b.callReturn()},syntax:{js:[],py:["Entry.bounce_on_edge()"]}},flip_arrow_horizontal:{color:"#A751E3",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[null]},func:function(c,b){c.setDirection(c.getDirection()+180);return b.callReturn()},syntax:{js:[],py:[""]}},flip_arrow_vertical:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[null]},func:function(c,b){c.setDirection(c.getDirection()+180);return b.callReturn()},syntax:{js:[],py:[""]}},see_angle_object:{color:"#A751E3",
skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_MOVING},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[null,null],type:"see_angle_object"},pyHelpDef:{params:["A&value",null],type:"see_angle_object"},paramsKeyMap:{VALUE:0},"class":"rotate_absolute",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b),e=c.getX(),f=c.getY();if(c.parent.id==d)return b.callReturn();
"mouse"==d?(d=Entry.stage.mouseCoordinate.y,e=Entry.stage.mouseCoordinate.x-e,f=d-f):(d=Entry.container.getEntity(d),e=d.getX()-e,f=d.getY()-f);f=0===e&&0===f?c.getDirection()+c.getRotation():0<=e?-Math.atan(f/e)/Math.PI*180+90:-Math.atan(f/e)/Math.PI*180+270;e=c.getDirection()+c.getRotation();c.setRotation(c.getRotation()+f-e);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.look_at(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_MOVING,
converter:Entry.block.converters.returnStringKey,codeMap:"Entry.CodeMap.Entry.see_angle_object[0]"}]}]}},see_angle_direction:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["90"]},null],type:"see_angle_direction"},paramsKeyMap:{VALUE:0},"class":"rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b),e=c.getDirection()+c.getRotation();c.setRotation(c.getRotation()+
d-e);return b.callReturn()},syntax:{js:[],py:[""]}},rotate_direction:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["90"]},null],type:"rotate_direction"},paramsKeyMap:{VALUE:0},"class":"rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setDirection(d+c.getDirection());return b.callReturn()},syntax:{js:[],py:[""]}},locate_object_time:{color:"#A751E3",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_MOVING},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["2"]},null,null],type:"locate_object_time"},pyHelpDef:{params:[{type:"number",params:["B&value"]},"A&value"],type:"locate_object_time"},paramsKeyMap:{VALUE:0,TARGET:1},"class":"move_absolute",isNotFor:[],func:function(c,
b){if(!b.isStart){var d,e,f;e=b.getField("TARGET",b);d=b.getNumberValue("VALUE",b);d=Math.floor(d*Entry.FPS);f=Entry.stage.mouseCoordinate;if(0!=d)"mouse"==e?(e=f.x-c.getX(),f=f.y-c.getY()):(f=Entry.container.getEntity(e),e=f.getX()-c.getX(),f=f.getY()-c.getY()),b.isStart=!0,b.frameCount=d,b.dX=e/b.frameCount,b.dY=f/b.frameCount;else return"mouse"==e?(e=Number(f.x),f=Number(f.y)):(f=Entry.container.getEntity(e),e=f.getX(),f=f.getY()),c.setX(e),c.setY(f),c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),
-1*c.getY()),b.callReturn()}if(0!=b.frameCount)return c.setX(c.getX()+b.dX),c.setY(c.getY()+b.dY),b.frameCount--,c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY()),b;delete b.isStart;delete b.frameCount;return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.move_to_for_sec(%2, %1)",textParams:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,menuName:"spritesWithMouse",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_MOVING,converter:Entry.block.converters.returnStringKey,
codeMap:"Entry.CodeMap.Entry.locate_object_time[1]"}]}]}},rotate_absolute:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"angle"},null],type:"rotate_absolute"},pyHelpDef:{params:[{type:"angle",params:["A&value"]},null],type:"rotate_absolute"},paramsKeyMap:{VALUE:0},"class":"rotate_absolute",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setRotation(d);
return b.callReturn()},syntax:{js:[],py:["Entry.set_rotation(%1)"]}},rotate_relative:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"angle"},null],type:"rotate_relative"},pyHelpDef:{params:[{type:"angle",params:["A&value"]}],type:"rotate_relative"},paramsKeyMap:{VALUE:0},"class":"rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b);c.setRotation(d+c.getRotation());
return b.callReturn()},syntax:{js:[],py:["Entry.add_rotation(%1)"]}},direction_absolute:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"angle"},null],type:"direction_absolute"},pyHelpDef:{params:[{type:"angle",params:["A&value"]},null],type:"direction_absolute"},paramsKeyMap:{VALUE:0},"class":"rotate_absolute",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",
b);c.setDirection(d);return b.callReturn()},syntax:{js:[],py:["Entry.set_direction(%1)"]}},direction_relative:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"angle"},null],type:"direction_relative"},pyHelpDef:{params:[{type:"angle",params:["A&value"]},null],type:"direction_relative"},paramsKeyMap:{VALUE:0},"class":"rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",
b);c.setDirection(d+c.getDirection());return b.callReturn()},syntax:{js:[],py:["Entry.add_direction(%1)"]}},move_to_angle:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"angle"},{type:"number",params:["10"]},null],type:"move_to_angle"},pyHelpDef:{params:[{type:"angle",params:["B&value"]},{type:"number",params:["A&value"]},null],type:"move_to_angle"},
paramsKeyMap:{ANGLE:0,VALUE:1},"class":"move_rotate",isNotFor:[],func:function(c,b){var d=b.getNumberValue("VALUE",b),e=b.getNumberValue("ANGLE",b);c.setX(c.getX()+d*Math.cos((e-90)/180*Math.PI));c.setY(c.getY()-d*Math.sin((e-90)/180*Math.PI));c.brush&&!c.brush.stop&&c.brush.lineTo(c.getX(),-1*c.getY());return b.callReturn()},syntax:{js:[],py:["Entry.move_to_degree(%2, %1)"]}},rotate_by_time:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"number",params:["2"]},{type:"angle"},null],type:"rotate_by_time"},pyHelpDef:{params:[{type:"number",params:["B&value"]},{type:"angle",params:["A&value"]},null],type:"rotate_by_time"},paramsKeyMap:{VALUE:0,ANGLE:1},"class":"rotate",isNotFor:[],func:function(c,b){function d(){c.setRotation(c.getRotation()+b.dAngle);b.frameCount--}if(!b.isStart){var e;e=b.getNumberValue("VALUE",b);var f=b.getNumberValue("ANGLE",
b);b.isStart=!0;b.frameCount=Math.max(Math.floor(e*Entry.FPS),1);b.dAngle=f/b.frameCount;1==b.frameCount&&d()}if(0!=b.frameCount)return d(),b;delete b.isStart;delete b.frameCount;return b.callReturn()},syntax:{js:[],py:["Entry.add_rotation_for_sec(%2, %1)"]}},direction_relative_duration:{color:"#A751E3",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/moving_03.png",size:12}],events:{},def:{params:[{type:"text",
params:["2"]},{type:"angle"},null],type:"direction_relative_duration"},pyHelpDef:{params:[{type:"text",params:["B&value"]},{type:"angle",params:["A&value"]},null],type:"direction_relative_duration"},paramsKeyMap:{DURATION:0,AMOUNT:1},"class":"rotate",isNotFor:[],func:function(c,b){function d(){c.setDirection(c.getDirection()+b.dDirection);b.frameCount--}if(!b.isStart){var e;e=b.getNumberValue("DURATION",b);var f=b.getNumberValue("AMOUNT",b);b.isStart=!0;b.frameCount=Math.max(Math.floor(e*Entry.FPS),
1);b.dDirection=f/b.frameCount;1==b.frameCount&&d()}if(0!=b.frameCount)return d(),b;delete b.isStart;delete b.frameCount;delete b.dDirection;return b.callReturn()},syntax:{js:[],py:["Entry.add_direction_for_sec(%2, %1)"]}},neobot_sensor_value:{color:"#00979D",skeleton:"basic_string_field",fontColor:"#fff",statements:[],template:"%1  \uac12",params:[{type:"Dropdown",options:[["1\ubc88 \ud3ec\ud2b8","IN1"],["2\ubc88 \ud3ec\ud2b8","IN2"],["3\ubc88 \ud3ec\ud2b8","IN3"],["\ub9ac\ubaa8\ucee8","IR"],["\ubc30\ud130\ub9ac",
"BAT"]],value:"IN1",fontSize:11}],events:{},def:{params:[null],type:"neobot_sensor_value"},paramsKeyMap:{PORT:0},"class":"neobot_value",isNotFor:["neobot"],func:function(c,b){c=b.getStringField("PORT");return Entry.hw.portData[c]},syntax:{js:[],py:["Neobot.sensor_value(%1)"]}},neobot_sensor_convert_scale:{color:"#00979D",skeleton:"basic_string_field",fontColor:"#fff",statements:[],template:"%1 \uac12\uc758 \ubc94\uc704\ub97c %2 ~ %3 \uc5d0\uc11c %4 ~ %5 (\uc73c)\ub85c \ubcc0\ud658",params:[{type:"Dropdown",
options:[["1\ubc88 \ud3ec\ud2b8","IN1"],["2\ubc88 \ud3ec\ud2b8","IN2"],["3\ubc88 \ud3ec\ud2b8","IN3"],["\ub9ac\ubaa8\ucee8","IR"],["\ubc30\ud130\ub9ac","BAT"]],value:"IN1",fontSize:11},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[null,{type:"number",params:["0"]},{type:"number",params:["255"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"neobot_sensor_convert_scale"},paramsKeyMap:{PORT:0,
OMIN:1,OMAX:2,MIN:3,MAX:4},"class":"neobot_value",isNotFor:["neobot"],func:function(c,b){c=b.getStringField("PORT");c=Entry.hw.portData[c];var d=b.getNumberValue("OMIN",b),e=b.getNumberValue("OMAX",b),f=b.getNumberValue("MIN",b);b=b.getNumberValue("MAX",b);if(d>e)var g=d,d=e,e=g;f>b&&(g=f,f=b,b=g);c=Math.min(b,(b-f)/(e-d)*(c-d)+f);c=Math.max(f,c);return Math.round(c)}},neobot_left_motor:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc67c\ucabd \ubaa8\ud130\ub97c %1 %2 \uc758 \uc18d\ub3c4\ub85c \ud68c\uc804 %3",
params:[{type:"Dropdown",options:[["\uc55e\uc73c\ub85c","16"],["\ub4a4\ub85c","32"]],value:"16",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"]],value:"0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,"15",
null],type:"neobot_left_motor"},paramsKeyMap:{DIRECTION:0,SPEED:1},"class":"neobot_motor",isNotFor:["neobot"],func:function(c,b){c=b.getNumberField("SPEED");var d=b.getNumberField("DIRECTION");Entry.hw.sendQueue.DCL=c+d;return b.callReturn()},syntax:{js:[],py:["Neobot.turn_left(%1, %2)"]}},neobot_stop_left_motor:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc67c\ucabd \ubaa8\ud130\ub97c \uc815\uc9c0 %1",params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],
type:"neobot_stop_left_motor"},"class":"neobot_motor",isNotFor:["neobot"],func:function(c,b){Entry.hw.sendQueue.DCL=0;return b.callReturn()},syntax:{js:[],py:["Neobot.stop_left()"]}},neobot_right_motor:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc624\ub978\ucabd \ubaa8\ud130\ub97c %1 %2 \uc758 \uc18d\ub3c4\ub85c \ud68c\uc804 %3",params:[{type:"Dropdown",options:[["\uc55e\uc73c\ub85c","16"],["\ub4a4\ub85c","32"]],value:"16",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",
options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"]],value:"0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,"15",null],type:"neobot_right_motor"},paramsKeyMap:{DIRECTION:0,SPEED:1},"class":"neobot_motor",isNotFor:["neobot"],func:function(c,b){c=b.getNumberField("SPEED");var d=
b.getNumberField("DIRECTION");Entry.hw.sendQueue.DCR=c+d;return b.callReturn()},syntax:{js:[],py:["Neobot.turn_right(%1, %2)"]}},neobot_stop_right_motor:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc624\ub978\ucabd \ubaa8\ud130\ub97c \uc815\uc9c0 %1",params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"neobot_stop_right_motor"},"class":"neobot_motor",isNotFor:["neobot"],func:function(c,b){Entry.hw.sendQueue.DCR=0;return b.callReturn()},
syntax:{js:[],py:["Neobot.stop_right()"]}},neobot_all_motor:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc591\ucabd \ubaa8\ud130\ub97c %1 %2\uc758 \uc18d\ub3c4\ub85c %3\ucd08 \ub3d9\uc548 \ud68c\uc804 %4",params:[{type:"Dropdown",options:[["\uc55e\uc73c\ub85c","1"],["\ub4a4\ub85c","2"],["\uc81c\uc790\ub9ac\uc5d0\uc11c \uc67c\ucabd \ub3cc\uae30","3"],["\uc81c\uc790\ub9ac\uc5d0\uc11c \uc624\ub978\ucabd \ub3cc\uae30","4"],["\uc67c\ucabd\uc73c\ub85c \ub3cc\uae30","5"],["\uc624\ub978\ucabd\uc73c\ub85c \ub3cc\uae30",
"6"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["1","15",{type:"number",params:["0"]}],type:"neobot_all_motor"},
paramsKeyMap:{DIRECTION:0,SPEED:1,DURATION:2},"class":"neobot_motor",isNotFor:["neobot"],func:function(c,b){if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;Entry.hw.sendQueue.DCL=0;Entry.hw.sendQueue.DCR=0;Entry.engine.isContinue=!1;return b.callReturn()}c=b.getNumberField("SPEED");var d=b.getNumberField("DIRECTION"),e=b.getNumberValue("DURATION");0>e&&(e=0);switch(d){case 1:Entry.hw.sendQueue.DCL=16+c;Entry.hw.sendQueue.DCR=16+c;break;case 2:Entry.hw.sendQueue.DCL=32+c;
Entry.hw.sendQueue.DCR=32+c;break;case 3:Entry.hw.sendQueue.DCL=32+c;Entry.hw.sendQueue.DCR=16+c;break;case 4:Entry.hw.sendQueue.DCL=16+c;Entry.hw.sendQueue.DCR=32+c;break;case 5:Entry.hw.sendQueue.DCL=0;Entry.hw.sendQueue.DCR=16+c;break;case 6:Entry.hw.sendQueue.DCL=16+c,Entry.hw.sendQueue.DCR=0}if(0===e)return b.callReturn();b.isStart=!0;b.timeFlag=1;setTimeout(function(){b.timeFlag=0},1E3*e);return b}},neobot_stop_all_motor:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc591\ucabd \ubaa8\ud130\ub97c \uc815\uc9c0 %1",
params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"neobot_stop_all_motor"},"class":"neobot_motor",isNotFor:["neobot"],func:function(c,b){Entry.hw.sendQueue.DCL=0;Entry.hw.sendQueue.DCR=0;return b.callReturn()},syntax:{js:[],py:["Neobot.run_motor(%1, %2, %3, %4)"]}},neobot_set_servo:{color:"#00979D",skeleton:"basic",statements:[],template:"%1 \ud3ec\ud2b8\uc758 \uc11c\ubcf4\ubaa8\ud130\ub97c %2 \ub3c4 \uc774\ub3d9 %3",params:[{type:"Dropdown",options:[["OUT1",
"1"],["OUT2","2"],["OUT3","3"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"neobot_set_servo"},paramsKeyMap:{PORT:0,DEGREE:1},"class":"neobot_output",isNotFor:["neobot"],func:function(c,b){c=b.getNumberField("PORT");var d=b.getNumberValue("DEGREE");0>d?d=0:180<d&&(d=180);Entry.hw.sendQueue["OUT"+c]=d;3===c&&(c=4);Entry.hw.sendQueue.OPT|=c;return b.callReturn()},
syntax:{js:[],py:["Neobot.servo_1(%1, %2)"]}},neobot_set_output:{color:"#00979D",skeleton:"basic",statements:[],template:"%1 \ubc88 \ud3ec\ud2b8\uc758 \uac12\uc744 %2 \ub9cc\ud07c \ucd9c\ub825 %3",params:[{type:"Dropdown",options:[["OUT1","1"],["OUT2","2"],["OUT3","3"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["255"]},null],type:"neobot_set_output"},
paramsKeyMap:{PORT:0,VALUE:1},"class":"neobot_output",isNotFor:["neobot"],func:function(c,b){c=b.getStringField("PORT",b);var d=b.getNumberValue("VALUE",b),e=c;0>d?d=0:255<d&&(d=255);3===e&&(e=4);Entry.hw.sendQueue["OUT"+c]=d;Entry.hw.sendQueue.OPT&=~e;return b.callReturn()},syntax:{js:[],py:["Neobot.servo_2(%1, %2)"]}},neobot_set_fnd:{color:"#00979D",skeleton:"basic",statements:[],template:"FND\uc5d0 %1 \ucd9c\ub825 %2",params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"number",params:["0"]},null],type:"neobot_set_fnd"},paramsKeyMap:{VALUE:0},"class":"neobot_output",isNotFor:["neobot"],func:function(c,b){c=b.getNumberValue("VALUE",b);99<c&&(c=99);Entry.hw.sendQueue.FND=parseInt("0x"+c);Entry.hw.sendQueue.OPT|=8;return b.callReturn()}},neobot_set_fnd_off:{color:"#00979D",skeleton:"basic",statements:[],template:"FND \ucd9c\ub825 \ub044\uae30 %1",params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],
type:"neobot_set_fnd_off"},paramsKeyMap:{VALUE:0},"class":"neobot_output",isNotFor:["neobot"],func:function(c,b){Entry.hw.sendQueue.FND=0;Entry.hw.sendQueue.OPT&=-9;return b.callReturn()}},neobot_play_note_for:{color:"#00979D",skeleton:"basic",statements:[],template:"\uba5c\ub85c\ub514 %1 \uc744(\ub97c) %2 \uc625\ud0c0\ube0c\ub85c %3 \uae38\uc774\ub9cc\ud07c \uc18c\ub9ac\ub0b4\uae30 %4",params:[{type:"Dropdown",options:[["\ubb34\uc74c","0"],["\ub3c4","1"],["\ub3c4#","2"],["\ub808","3"],["\ub808#",
"4"],["\ubbf8","5"],["\ud30c","6"],["\ud30c#","7"],["\uc194","8"],["\uc194#","9"],["\ub77c","10"],["\ub77c#","11"],["\uc2dc","12"]],value:"0",fontSize:11},{type:"Dropdown",options:[["1","0"],["2","1"],["3","2"],["4","3"],["5","4"],["6","5"]],value:"0",fontSize:11},{type:"Dropdown",options:[["2\ubd84\uc74c\ud45c","2"],["4\ubd84\uc74c\ud45c","4"],["8\ubd84\uc74c\ud45c","8"],["16\ubd84\uc74c\ud45c","16"]],value:"2",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["1",
"2","4",null],type:"neobot_play_note_for"},paramsKeyMap:{NOTE:0,OCTAVE:1,DURATION:2},"class":"neobot_note",isNotFor:["neobot"],func:function(c,b){c=Entry.hw.sendQueue;if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;Entry.hw.sendQueue.SND=0;Entry.engine.isContinue=!1;return b.callReturn()}var d=b.getNumberField("NOTE",b),e=b.getNumberField("OCTAVE",b),f=b.getNumberField("DURATION",b),d=0<d?d+12*e:0;b.isStart=!0;b.timeFlag=1;65<d&&(d=65);c.SND=d;setTimeout(function(){b.timeFlag=
0},1/f*2E3);return b},syntax:{js:[],py:["Neobot.play_note(%1, %2, %3)"]}},robotis_openCM70_cm_custom_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["BYTE","BYTE"],["WORD","WORD"],["DWORD","DWORD"]],value:"BYTE",fontSize:11}],events:{},def:{params:[{type:"number",params:["0"]},null],type:"robotis_openCM70_cm_custom_value"},paramsKeyMap:{VALUE:0,SIZE:1},"class":"robotis_openCM70_custom",isNotFor:["robotis_openCM70"],
func:function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.READ;var d=0,e=b.getStringField("SIZE");"BYTE"==e?d=1:"WORD"==e?d=2:"DWORD"==e&&(d=4);b=b.getNumberValue("VALUE");if(Entry.hw.sendQueue.prevAddress&&Entry.hw.sendQueue.prevAddress==b&&Entry.hw.sendQueue.prevTime&&200>new Date-Entry.hw.sendQueue.prevTime)return Entry.hw.sendQueue.prevResult;Entry.Robotis_carCont.setRobotisData([[c,b,d,0,d]]);Entry.Robotis_carCont.update();c=Entry.hw.portData[b];Entry.hw.sendQueue.prevAddress=b;Entry.hw.sendQueue.prevTime=
new Date;return Entry.hw.sendQueue.prevResult=c},syntax:{js:[],py:["Robotis.opencm70_cm_custom_value(%1, %2)"]}},robotis_openCM70_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_cm_sound_detected,"CM_SOUND_DETECTED"],[Lang.Blocks.robotis_cm_sound_detecting,"CM_SOUND_DETECTING"],[Lang.Blocks.robotis_cm_user_button,"CM_USER_BUTTON"]],value:"CM_SOUND_DETECTED",fontSize:11}],events:{},def:{params:[null],
type:"robotis_openCM70_sensor_value"},paramsKeyMap:{SENSOR:0},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.executor.scope;c.isStart=!0;c.count=0;var d=Entry.Robotis_openCM70.INSTRUCTION.READ,e=0,f=0,g=c=0;b=b.getStringField("SENSOR");"CM_SOUND_DETECTED"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[1]):
"CM_SOUND_DETECTING"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTING[1]):"CM_USER_BUTTON"==b&&(c=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_USER_BUTTON[1]);
c+=0*g;if(Entry.hw.sendQueue.prevAddress&&Entry.hw.sendQueue.prevAddress==c&&Entry.hw.sendQueue.prevTime&&200>new Date-Entry.hw.sendQueue.prevTime)return Entry.hw.sendQueue.prevResult;Entry.Robotis_carCont.setRobotisData([[d,e,f,0,g]]);Entry.Robotis_carCont.update();b=Entry.hw.portData[c];Entry.hw.sendQueue.prevAddress=c;Entry.hw.sendQueue.prevTime=new Date;return Entry.hw.sendQueue.prevResult=b},syntax:{js:[],py:["Robotis.opencm70_sensor_value(%1)"]}},robotis_openCM70_aux_sensor_value:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["3","PORT_3"],["4","PORT_4"],["5","PORT_5"],["6","PORT_6"]],value:"PORT_3",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_aux_servo_position,"AUX_SERVO_POSITION"],[Lang.Blocks.robotis_aux_ir,"AUX_IR"],[Lang.Blocks.robotis_aux_touch,"AUX_TOUCH"],[Lang.Blocks.robotis_aux_brightness,"AUX_BRIGHTNESS"],[Lang.Blocks.robotis_aux_hydro_themo_humidity,"AUX_HYDRO_THEMO_HUMIDITY"],[Lang.Blocks.robotis_aux_hydro_themo_temper,
"AUX_HYDRO_THEMO_TEMPER"],[Lang.Blocks.robotis_aux_temperature,"AUX_TEMPERATURE"],[Lang.Blocks.robotis_aux_ultrasonic,"AUX_ULTRASONIC"],[Lang.Blocks.robotis_aux_magnetic,"AUX_MAGNETIC"],[Lang.Blocks.robotis_aux_motion_detection,"AUX_MOTION_DETECTION"],[Lang.Blocks.robotis_aux_color,"AUX_COLOR"],[Lang.Blocks.robotis_aux_custom,"AUX_CUSTOM"]],value:"AUX_SERVO_POSITION",fontSize:11}],events:{},def:{params:[null,null],type:"robotis_openCM70_aux_sensor_value"},paramsKeyMap:{PORT:0,SENSOR:1},"class":"robotis_openCM70_cm",
isNotFor:["robotis_openCM70"],func:function(c,b){var d=Entry.Robotis_openCM70.INSTRUCTION.READ,e=0,f=c=0,g=b.getStringField("PORT");b=b.getStringField("SENSOR");var h=0;"PORT_3"==g?h=2:"PORT_4"==g?h=3:"PORT_5"==g?h=4:"PORT_6"==g&&(h=5);"AUX_SERVO_POSITION"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[1]):"AUX_IR"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[0],
f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_IR[1]):"AUX_TOUCH"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TOUCH[1]):"AUX_TEMPERATURE"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_TEMPERATURE[1]):"AUX_BRIGHTNESS"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[0],
f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_BRIGHTNESS[1]):"AUX_HYDRO_THEMO_HUMIDITY"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_HUMIDITY[1]):"AUX_HYDRO_THEMO_TEMPER"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[1],
e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_HYDRO_THEMO_TEMPER[1]):"AUX_ULTRASONIC"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_ULTRASONIC[1]):"AUX_MAGNETIC"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MAGNETIC[1]):"AUX_MOTION_DETECTION"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[0],
f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTION_DETECTION[1]):"AUX_COLOR"==b?(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_COLOR[1]):"AUX_CUSTOM"==b&&(c=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[0],f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[1],e=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[1]);c+=h*f;if(Entry.hw.sendQueue.prevAddress&&
Entry.hw.sendQueue.prevAddress==c&&Entry.hw.sendQueue.prevTime&&200>new Date-Entry.hw.sendQueue.prevTime)return Entry.hw.sendQueue.prevResult;Entry.Robotis_carCont.setRobotisData([[d,c,e,0,f]]);Entry.Robotis_carCont.update();d=Entry.hw.portData[c];Entry.hw.sendQueue.prevAddress=c;Entry.hw.sendQueue.prevTime=new Date;return Entry.hw.sendQueue.prevResult=d},syntax:{js:[],py:["Robotis.opencm70_aux_sensor_value(%1, %2)"]}},robotis_openCM70_cm_buzzer_index:{color:"#00979D",skeleton:"basic",statements:[],
params:[{type:"Dropdown",options:[[Lang.General.note_a+"(0)","0"],[Lang.General.note_a+"#(1)","1"],[Lang.General.note_b+"(2)","2"],[Lang.General.note_c+"(3)","3"],[Lang.General.note_c+"#(4)","4"],[Lang.General.note_d+"(5)","5"],[Lang.General.note_d+"#(6)","6"],[Lang.General.note_e+"(7)","7"],[Lang.General.note_f+"(8)","8"],[Lang.General.note_f+"#(9)","9"],[Lang.General.note_g+"(10)","10"],[Lang.General.note_g+"#(11)","11"],[Lang.General.note_a+"(12)","12"],[Lang.General.note_a+"#(13)","13"],[Lang.General.note_b+
"(14)","14"],[Lang.General.note_c+"(15)","15"],[Lang.General.note_c+"#(16)","16"],[Lang.General.note_d+"(17)","17"],[Lang.General.note_d+"#(18)","18"],[Lang.General.note_e+"(19)","19"],[Lang.General.note_f+"(20)","20"],[Lang.General.note_f+"#(21)","21"],[Lang.General.note_g+"(22)","22"],[Lang.General.note_g+"#(23)","23"],[Lang.General.note_a+"(24)","24"],[Lang.General.note_a+"#(25)","25"],[Lang.General.note_b+"(26)","26"],[Lang.General.note_c+"(27)","27"],[Lang.General.note_c+"#(28)","28"],[Lang.General.note_d+
"(29)","29"],[Lang.General.note_d+"#(30)","30"],[Lang.General.note_e+"(31)","31"],[Lang.General.note_f+"(32)","32"],[Lang.General.note_f+"#(33)","33"],[Lang.General.note_g+"(34)","34"],[Lang.General.note_g+"#(35)","35"],[Lang.General.note_a+"(36)","36"],[Lang.General.note_a+"#(37)","37"],[Lang.General.note_b+"(38)","38"],[Lang.General.note_c+"(39)","39"],[Lang.General.note_c+"#(40)","40"],[Lang.General.note_d+"(41)","41"],[Lang.General.note_d+"#(42)","42"],[Lang.General.note_e+"(43)","43"],[Lang.General.note_f+
"(44)","44"],[Lang.General.note_f+"#(45)","45"],[Lang.General.note_g+"(46)","46"],[Lang.General.note_g+"#(47)","47"],[Lang.General.note_a+"(48)","48"],[Lang.General.note_a+"#(49)","49"],[Lang.General.note_b+"(50)","50"],[Lang.General.note_c+"(51)","51"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["1"]},null],type:"robotis_openCM70_cm_buzzer_index"},paramsKeyMap:{CM_BUZZER_INDEX:0,
CM_BUZZER_TIME:1},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("CM_BUZZER_INDEX",b);var d=b.getNumberValue("CM_BUZZER_TIME",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g,h;f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[1];h=parseInt(10*d);50<h&&(h=50);return Entry.Robotis_carCont.postCallReturn(b,[[e,f,g,h],[e,Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[1],
c]],1E3*d+100)},syntax:{js:[],py:["Robotis.opencm70_cm_buzzer_index(%1, %2)"]}},robotis_openCM70_cm_buzzer_melody:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],["19","19"],["20","20"],["21","21"],["22","22"],["23","23"],["24","24"]],value:"0",fontSize:11},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"robotis_openCM70_cm_buzzer_melody"},paramsKeyMap:{CM_BUZZER_MELODY:0},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("CM_BUZZER_MELODY",b);var d=Entry.Robotis_openCM70.INSTRUCTION.WRITE;return Entry.Robotis_carCont.postCallReturn(b,[[d,Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_TIME[1],255],[d,Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[0],
Entry.Robotis_openCM70.CONTROL_TABLE.CM_BUZZER_INDEX[1],c]],1100)},syntax:{js:[],py:["Robotis.opencm70_cm_buzzer_melody(%1)"]}},robotis_openCM70_cm_sound_detected_clear:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"robotis_openCM70_cm_sound_detected_clear"},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){return Entry.Robotis_carCont.postCallReturn(b,[[Entry.Robotis_openCM70.INSTRUCTION.WRITE,
Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[0],Entry.Robotis_openCM70.CONTROL_TABLE.CM_SOUND_DETECTED[1],0]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_cm_sound_clear()"]}},robotis_openCM70_cm_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_red_color,"CM_LED_R"],[Lang.Blocks.robotis_common_green_color,"CM_LED_G"],[Lang.Blocks.robotis_common_blue_color,"CM_LED_B"]],value:"CM_LED_R",fontSize:11},{type:"Dropdown",
options:[[Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_common_off,"0"]],value:"1",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"robotis_openCM70_cm_led"},paramsKeyMap:{CM_LED:0,VALUE:1},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("CM_LED",b);var d=b.getField("VALUE",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f=0,g=0;"CM_LED_R"==c?(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_R[0],
g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_R[1]):"CM_LED_G"==c?(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_G[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_G[1]):"CM_LED_B"==c&&(f=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_B[0],g=Entry.Robotis_openCM70.CONTROL_TABLE.CM_LED_B[1]);return Entry.Robotis_carCont.postCallReturn(b,[[e,f,g,d]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_cm_led(%1, %2)"]}},robotis_openCM70_cm_motion:{color:"#00979D",skeleton:"basic",statements:[],
params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"number",params:["1"]},null],type:"robotis_openCM70_cm_motion"},paramsKeyMap:{VALUE:0},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.WRITE;var d,e,f;d=Entry.Robotis_openCM70.CONTROL_TABLE.CM_MOTION[0];e=Entry.Robotis_openCM70.CONTROL_TABLE.CM_MOTION[1];f=b.getNumberValue("VALUE",b);return Entry.Robotis_carCont.postCallReturn(b,
[[c,d,e,f]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_cm_motion(%1)"]}},robotis_openCM70_aux_motor_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_port_1,"1"],[Lang.Blocks.robotis_common_port_2,"2"]],value:"1",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"number",params:["500"]},null],type:"robotis_openCM70_aux_motor_speed"},paramsKeyMap:{PORT:0,DIRECTION_ANGLE:1,VALUE:2},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("PORT",b);var d=b.getField("DIRECTION_ANGLE",b),e=b.getNumberValue("VALUE"),f=Entry.Robotis_openCM70.INSTRUCTION.WRITE,g,h;g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTOR_SPEED[0];h=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_MOTOR_SPEED[1];
"CW"==d?(e+=1024,2047<e&&(e=2047)):1023<e&&(e=1023);return Entry.Robotis_carCont.postCallReturn(b,[[f,g+(c-1)*h,h,e]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_aux_motor_speed(%1, %2, %3)"]}},robotis_openCM70_aux_servo_mode:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]],value:"3",
fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_common_wheel_mode,"0"],[Lang.Blocks.robotis_common_joint_mode,"1"]],value:"0",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"robotis_openCM70_aux_servo_mode"},paramsKeyMap:{PORT:0,MODE:1},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("PORT",b);var d=b.getField("MODE",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_MODE[0];
g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_MODE[1];return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_aux_servo_mode(%1, %2)"]}},robotis_openCM70_aux_servo_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]],value:"3",
fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"number",params:["500"]},null],type:"robotis_openCM70_aux_servo_speed"},paramsKeyMap:{PORT:0,DIRECTION_ANGLE:1,VALUE:2},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("PORT",
b);var d=b.getField("DIRECTION_ANGLE",b),e=b.getNumberValue("VALUE"),f=Entry.Robotis_openCM70.INSTRUCTION.WRITE,g,h;g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_SPEED[0];h=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_SPEED[1];"CW"==d?(e+=1024,2047<e&&(e=2047)):1023<e&&(e=1023);return Entry.Robotis_carCont.postCallReturn(b,[[f,g+(c-1)*h,h,e]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_aux_servo_speed(%1, %2, %3)"]}},robotis_openCM70_aux_servo_position:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]],value:"3",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["512"]},null],type:"robotis_openCM70_aux_servo_position"},paramsKeyMap:{PORT:0,VALUE:1},"class":"robotis_openCM70_cm",
isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("PORT",b);var d=b.getNumberValue("VALUE"),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_SERVO_POSITION[1];1023<d?d=1023:0>d&&(d=0);return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_aux_servo_position(%1, %2)"]}},robotis_openCM70_aux_led_module:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]],value:"3",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_cm_led_both+Lang.Blocks.robotis_common_off,"0"],[Lang.Blocks.robotis_cm_led_right+Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_cm_led_left+Lang.Blocks.robotis_common_on,"2"],[Lang.Blocks.robotis_cm_led_both+
Lang.Blocks.robotis_common_on,"3"]],value:"0",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"robotis_openCM70_aux_led_module"},paramsKeyMap:{PORT:0,LED_MODULE:1},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("PORT",b);var d=b.getField("LED_MODULE",b),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_LED_MODULE[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_LED_MODULE[1];
return Entry.Robotis_carCont.postCallReturn(b,[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_aux_led_module(%1, %2)"]}},robotis_openCM70_aux_custom:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_port_3,"3"],[Lang.Blocks.robotis_common_port_4,"4"],[Lang.Blocks.robotis_common_port_5,"5"],[Lang.Blocks.robotis_common_port_6,"6"]],value:"3",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["0"]},null],type:"robotis_openCM70_aux_custom"},paramsKeyMap:{PORT:0,VALUE:1},"class":"robotis_openCM70_cm",isNotFor:["robotis_openCM70"],func:function(c,b){c=b.getField("PORT",b);var d=b.getNumberValue("VALUE"),e=Entry.Robotis_openCM70.INSTRUCTION.WRITE,f,g;f=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[0];g=Entry.Robotis_openCM70.CONTROL_TABLE.AUX_CUSTOM[1];return Entry.Robotis_carCont.postCallReturn(b,
[[e,f+(c-1)*g,g,d]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_aux_custom(%1, %2)"]}},robotis_openCM70_cm_custom:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"number",params:["0"]},{type:"number",params:["0"]},null],type:"robotis_openCM70_cm_custom"},paramsKeyMap:{ADDRESS:0,VALUE:1},"class":"robotis_openCM70_custom",
isNotFor:["robotis_openCM70"],func:function(c,b){c=Entry.Robotis_openCM70.INSTRUCTION.WRITE;var d,e;d=b.getNumberValue("ADDRESS");e=b.getNumberValue("VALUE");return Entry.Robotis_carCont.postCallReturn(b,[[c,d,65535<e?4:255<e?2:1,e]],Entry.Robotis_openCM70.delay)},syntax:{js:[],py:["Robotis.opencm70_cm_custom(%1, %2)"]}},robotis_carCont_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_cm_spring_left,"CM_SPRING_LEFT"],
[Lang.Blocks.robotis_cm_spring_right,"CM_SPRING_RIGHT"],[Lang.Blocks.robotis_cm_switch,"CM_SWITCH"],[Lang.Blocks.robotis_cm_sound_detected,"CM_SOUND_DETECTED"],[Lang.Blocks.robotis_cm_sound_detecting,"CM_SOUND_DETECTING"],[Lang.Blocks.robotis_cm_ir_left,"CM_IR_LEFT"],[Lang.Blocks.robotis_cm_ir_right,"CM_IR_RIGHT"],[Lang.Blocks.robotis_cm_calibration_left,"CM_CALIBRATION_LEFT"],[Lang.Blocks.robotis_cm_calibration_right,"CM_CALIBRATION_RIGHT"]],value:"CM_SPRING_LEFT",fontSize:11}],events:{},def:{params:[null],
type:"robotis_carCont_sensor_value"},paramsKeyMap:{SENSOR:0},"class":"robotis_carCont_cm",isNotFor:["robotis_carCont"],func:function(c,b){var d=Entry.Robotis_carCont.INSTRUCTION.READ,e=0,f=0,g=c=0;b=b.getStringField("SENSOR");"CM_SPRING_LEFT"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[2],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_LEFT[3]):"CM_SPRING_RIGHT"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[0],
g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[2],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SPRING_RIGHT[3]):"CM_SWITCH"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SWITCH[1]):"CM_SOUND_DETECTED"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[1],
e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[1]):"CM_SOUND_DETECTING"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTING[1]):"CM_IR_LEFT"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[1],
e=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[2],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_LEFT[3]):"CM_IR_RIGHT"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[2],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_IR_RIGHT[3]):"CM_CALIBRATION_LEFT"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[0],
f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[1]):"CM_CALIBRATION_RIGHT"==b?(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[1]):"CM_BUTTON_STATUS"==b&&(c=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[0],g=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[1],e=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[0],
f=Entry.Robotis_carCont.CONTROL_TABLE.CM_BUTTON_STATUS[1]);if(Entry.hw.sendQueue.prevAddress&&Entry.hw.sendQueue.prevAddress==c&&Entry.hw.sendQueue.prevTime&&300>new Date-Entry.hw.sendQueue.prevTime)return Entry.hw.sendQueue.prevResult;Entry.Robotis_carCont.setRobotisData([[d,e,f,0,g]]);Entry.Robotis_carCont.update();b=Entry.hw.portData[c];Entry.hw.sendQueue.prevAddress=c;Entry.hw.sendQueue.prevTime=new Date;return Entry.hw.sendQueue.prevResult=b},syntax:{js:[],py:["Robotis.carcont_sensor_value(%1)"]}},
robotis_carCont_cm_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_common_off,"0"]],value:"1",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_common_on,"1"],[Lang.Blocks.robotis_common_off,"0"]],value:"1",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"robotis_carCont_cm_led"},paramsKeyMap:{VALUE_LEFT:0,VALUE_RIGHT:1},"class":"robotis_carCont_cm",
isNotFor:["robotis_carCont"],func:function(c,b){c=b.getField("VALUE_LEFT",b);var d=b.getField("VALUE_RIGHT",b),e=Entry.Robotis_carCont.INSTRUCTION.WRITE,f,g,h=0;f=Entry.Robotis_carCont.CONTROL_TABLE.CM_LED[0];g=Entry.Robotis_carCont.CONTROL_TABLE.CM_LED[1];1==c&&1==d?h=9:1==c&&0==d&&(h=8);0==c&&1==d&&(h=1);return Entry.Robotis_carCont.postCallReturn(b,[[e,f,g,h]],Entry.Robotis_carCont.delay)},syntax:{js:[],py:["Robotis.carcont_cm_led(%1, %2)"]}},robotis_carCont_cm_sound_detected_clear:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"robotis_carCont_cm_sound_detected_clear"},"class":"robotis_carCont_cm",isNotFor:["robotis_carCont"],func:function(c,b){return Entry.Robotis_carCont.postCallReturn(b,[[Entry.Robotis_carCont.INSTRUCTION.WRITE,Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[0],Entry.Robotis_carCont.CONTROL_TABLE.CM_SOUND_DETECTED[1],0]],Entry.Robotis_carCont.delay)},syntax:{js:[],
py:["Robotis.carcont_cm_sound_clear()"]}},robotis_carCont_aux_motor_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.General.left,"LEFT"],[Lang.General.right,"RIGHT"]],value:"LEFT",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,
null,{type:"number",params:["500"]},null],type:"robotis_carCont_aux_motor_speed"},paramsKeyMap:{DIRECTION:0,DIRECTION_ANGLE:1,VALUE:2},"class":"robotis_carCont_cm",isNotFor:["robotis_carCont"],func:function(c,b){var d=b.getField("DIRECTION",b);c=b.getField("DIRECTION_ANGLE",b);var e=b.getNumberValue("VALUE"),f=Entry.Robotis_carCont.INSTRUCTION.WRITE,g;"LEFT"==d?(d=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_LEFT[0],g=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_LEFT[1]):(d=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_RIGHT[0],
g=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_RIGHT[1]);"CW"==c?(e+=1024,2047<e&&(e=2047)):1023<e&&(e=1023);return Entry.Robotis_carCont.postCallReturn(b,[[f,d,g,e]],Entry.Robotis_carCont.delay)},syntax:{js:[],py:["Robotis.carcont_aux_motor_speed(%1, %2, %3)"]}},robotis_carCont_aux_motor_speed2:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc67c\ucabd \uac10\uc18d\ubaa8\ud130 \uc18d\ub3c4\ub97c %1, \ucd9c\ub825\uac12\uc744 %2 (\uc73c)\ub85c \uc624\ub978\ucabd \uac10\uc18d\ubaa8\ud130 \uc18d\ub3c4\ub97c %3, \ucd9c\ub825\uac12\uc744 %4 (\uc73c)\ub85c \uc815\ud558\uae30 %5",
params:[{type:"Dropdown",options:[[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.robotis_common_clockwhise,"CW"],[Lang.Blocks.robotis_common_counter_clockwhise,"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["500"]},null,{type:"number",
params:["500"]},null],type:"robotis_carCont_aux_motor_speed2"},paramsKeyMap:{LEFT_ANGLE:0,LEFT_VALUE:1,RIGHT_ANGLE:2,RIGHT_VALUE:3},"class":"robotis_carCont_cm",isNotFor:["robotis_carCont"],func:function(c,b){c=Entry.Robotis_carCont.INSTRUCTION.WRITE;var d=Entry.Robotis_carCont.CONTROL_TABLE.AUX_MOTOR_SPEED_LEFT[0],e=b.getField("LEFT_ANGLE",b),f=b.getNumberValue("LEFT_VALUE"),g=b.getField("RIGHT_ANGLE",b),h=b.getNumberValue("RIGHT_VALUE"),f=Math.min(f,1023),f=Math.max(f,0),h=Math.min(h,1023),h=Math.max(h,
0);"CW"===e&&(f+=1024);"CW"===g&&(h+=1024);return Entry.Robotis_carCont.postCallReturn(b,[[c,d,4,f+(h<<16)]],Entry.Robotis_carCont.delay)}},robotis_carCont_cm_calibration:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.General.left,"LEFT"],[Lang.General.right,"RIGHT"]],value:"LEFT",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["0"]},null],type:"robotis_carCont_cm_calibration"},
paramsKeyMap:{DIRECTION:0,VALUE:1},"class":"robotis_carCont_cm",isNotFor:["robotis_carCont"],func:function(c,b){var d=b.getField("DIRECTION",b);c=b.getNumberValue("VALUE");var e=Entry.Robotis_carCont.INSTRUCTION.WRITE,f;"LEFT"==d?(d=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_LEFT[1]):(d=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[0],f=Entry.Robotis_carCont.CONTROL_TABLE.CM_CALIBRATION_RIGHT[1]);return Entry.Robotis_carCont.postCallReturn(b,
[[e,d,f,c]],Entry.Robotis_carCont.delay)},syntax:{js:[],py:["Robotis.carcont_cm_calibration(%1, %2)"]}},when_scene_start:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_scene_1_2.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null],type:"when_scene_start"},"class":"scene",isNotFor:["scene"],func:function(c,b){return b.callReturn()},event:"when_scene_start",syntax:{js:[],py:[{syntax:"def when_start_scene():",blockType:"event"}]}},
start_scene:{color:"#3BBD70",skeleton:"basic_without_next",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"scenes",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START},{type:"Indicator",img:"block_icon/start_03.png",size:12}],events:{},def:{params:[null,null],type:"start_scene"},pyHelpDef:{params:["A&value",null],type:"start_scene"},paramsKeyMap:{VALUE:0},"class":"scene",isNotFor:["scene"],func:function(c,b){c=b.getField("VALUE",b);if(c=Entry.scene.getSceneById(c))Entry.scene.selectScene(c),
Entry.engine.fireEvent("when_scene_start");return null},syntax:{js:[],py:[{syntax:"Entry.start_scene(%1)",blockType:"last",textParams:[{type:"DropdownDynamic",value:null,menuName:"scenes",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START,converter:Entry.block.converters.returnStringKey}]}]}},start_neighbor_scene:{color:"#3BBD70",skeleton:"basic_without_next",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.SCENE_start_scene_next,"next"],[Lang.Blocks.SCENE_start_scene_pre,"pre"]],value:"next",
fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START},{type:"Indicator",img:"block_icon/start_03.png",size:12}],events:{},def:{params:[null,null],type:"start_neighbor_scene"},pyHelpDef:{params:["A&value",null],type:"start_neighbor_scene"},paramsKeyMap:{OPERATOR:0},"class":"scene",isNotFor:["scene"],func:function(c,b){var d=Entry.scene.selectedScene;c=Entry.scene.getScenes();d=c.indexOf(d);"next"==b.getField("OPERATOR",b)?d+1<c.length&&(b=Entry.scene.getSceneById(c[d+1].id))&&(Entry.scene.selectScene(b),
Entry.engine.fireEvent("when_scene_start")):0<d&&(b=Entry.scene.getSceneById(c[d-1].id))&&(Entry.scene.selectScene(b),Entry.engine.fireEvent("when_scene_start"));return null},syntax:{js:[],py:[{syntax:"Entry.start_scene_of(%1)",blockType:"last",textParams:[{type:"Dropdown",options:[[Lang.Blocks.SCENE_start_scene_next,"next"],[Lang.Blocks.SCENE_start_scene_pre,"pre"]],value:"next",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START,converter:Entry.block.converters.returnStringValue,codeMap:"Entry.CodeMap.Entry.start_neighbor_scene[0]"}]}]}},
sound_something:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[null,null],type:"sound_something"},paramsKeyMap:{VALUE:0},"class":"sound",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b);Entry.isExist(d,"id",c.parent.sounds)&&createjs.Sound.play(d);return b.callReturn()},syntax:{js:[],py:[""]}},sound_something_second:{color:"#A4D01D",
skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["1"]},null],type:"sound_something_second"},paramsKeyMap:{VALUE:0,SECOND:1},"class":"sound",isNotFor:[],func:function(c,b){var d=b.getField("VALUE",b),e=b.getNumberValue("SECOND",b);if(Entry.isExist(d,"id",c.parent.sounds)){var f=createjs.Sound.play(d);setTimeout(function(){f.stop()},
1E3*e)}return b.callReturn()},syntax:{js:[],py:[""]}},sound_something_wait:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[null,null],type:"sound_something_wait"},paramsKeyMap:{VALUE:0},"class":"sound",isNotFor:[],func:function(c,b){if(b.isPlay){if(1==b.playState)return b;delete b.playState;delete b.isPlay;return b.callReturn()}b.isPlay=!0;b.playState=
1;var d=b.getField("VALUE",b),e=c.parent.getSound(d);Entry.isExist(d,"id",c.parent.sounds)&&(createjs.Sound.play(d),setTimeout(function(){b.playState=0},1E3*e.duration));return b},syntax:{js:[],py:[""]}},sound_something_second_wait:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["1"]},null],
type:"sound_something_second_wait"},paramsKeyMap:{VALUE:0,SECOND:1},"class":"sound",isNotFor:[],func:function(c,b){if(b.isPlay){if(1==b.playState)return b;delete b.isPlay;delete b.playState;return b.callReturn()}b.isPlay=!0;b.playState=1;var d=b.getField("VALUE",b);if(Entry.isExist(d,"id",c.parent.sounds)){var e=createjs.Sound.play(d);c=b.getNumberValue("SECOND",b);setTimeout(function(){e.stop();b.playState=0},1E3*c);e.addEventListener("complete",function(b){})}return b},syntax:{js:[],py:[""]}},sound_volume_change:{color:"#A4D01D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"sound_volume_change"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"sound_volume_change"},paramsKeyMap:{VALUE:0},"class":"sound_volume",isNotFor:[],func:function(c,b){c=b.getNumberValue("VALUE",b)/100;c+=createjs.Sound.getVolume();1<c&&(c=1);0>c&&(c=0);createjs.Sound.setVolume(c);return b.callReturn()},
syntax:{js:[],py:["Entry.add_sound_volume(%1)"]}},sound_volume_set:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"number",params:["10"]},null],type:"sound_volume_set"},pyHelpDef:{params:[{type:"number",params:["A&value"]},null],type:"sound_volume_set"},paramsKeyMap:{VALUE:0},"class":"sound_volume",isNotFor:[],func:function(c,b){c=b.getNumberValue("VALUE",b)/100;1<c&&(c=1);
0>c&&(c=0);createjs.Sound.setVolume(c);return b.callReturn()},syntax:{js:[],py:["Entry.set_sound_volume(%1)"]}},sound_silent_all:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[null],type:"sound_silent_all"},"class":"sound_stop",isNotFor:[],func:function(c,b){createjs.Sound.stop();return b.callReturn()},syntax:{js:[],py:["Entry.stop_sound()"]}},get_sounds:{color:"#A4D01D",skeleton:"basic_string_field",statements:[],
params:[{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_SOUNDS}],events:{},def:{params:[null],type:"get_sounds"},paramsKeyMap:{VALUE:0},func:function(c,b){return b.getStringField("VALUE")},syntax:{js:[],py:[{syntax:"%1",textParams:[{type:"DropdownDynamic",value:null,menuName:"sounds",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_SOUNDS,converter:Entry.block.converters.returnStringKey}],keyOption:"get_sounds"}]}},sound_something_with_block:{color:"#A4D01D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"get_sounds"},null],type:"sound_something_with_block"},pyHelpDef:{params:[{type:"get_sounds",params:["A&value"]},null],type:"sound_something_with_block"},paramsKeyMap:{VALUE:0},"class":"sound_play",isNotFor:[],func:function(c,b){var d=b.getStringValue("VALUE",b);(c=c.parent.getSound(d))&&createjs.Sound.play(c.id);return b.callReturn()},syntax:{js:[],
py:["Entry.play_sound(%1)"]}},sound_something_second_with_block:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"get_sounds",id:"95dw"},{type:"number",params:["1"]},null],type:"sound_something_second_with_block"},pyHelpDef:{params:[{type:"get_sounds",params:["A&value"]},{type:"number",params:["B&value"]},null],type:"sound_something_second_with_block"},
paramsKeyMap:{VALUE:0,SECOND:1},"class":"sound_play",isNotFor:[],func:function(c,b){var d=b.getStringValue("VALUE",b),e=b.getNumberValue("SECOND",b);(c=c.parent.getSound(d))&&createjs.Sound.play(c.id,{startTime:0,duration:1E3*e});return b.callReturn()},syntax:{js:[],py:["Entry.play_sound_for_sec(%1, %2)"]}},sound_something_wait_with_block:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"get_sounds"},
null],type:"sound_something_wait_with_block"},pyHelpDef:{params:[{type:"get_sounds",params:["A&value"]},null],type:"sound_something_wait_with_block"},paramsKeyMap:{VALUE:0},"class":"sound_wait",isNotFor:[],func:function(c,b){if(b.isPlay){if(1==b.playState)return b;delete b.playState;delete b.isPlay;return b.callReturn()}b.isPlay=!0;b.playState=1;var d=b.getStringValue("VALUE",b);if(c=c.parent.getSound(d))createjs.Sound.play(c.id),setTimeout(function(){b.playState=0},1E3*c.duration);return b},syntax:{js:[],
py:["Entry.play_sound_and_wait(%1)"]}},sound_something_second_wait_with_block:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"get_sounds"},{type:"number",params:["1"]},null],type:"sound_something_second_wait_with_block"},pyHelpDef:{params:[{type:"get_sounds",params:["A&value"]},{type:"number",params:["B&value"]},null],type:"sound_something_second_wait_with_block"},
paramsKeyMap:{VALUE:0,SECOND:1},"class":"sound_wait",isNotFor:[],func:function(c,b){if(b.isPlay){if(1==b.playState)return b;delete b.isPlay;delete b.playState;return b.callReturn()}b.isPlay=!0;b.playState=1;var d=b.getStringValue("VALUE",b);if(c=c.parent.getSound(d)){var e=createjs.Sound.play(c.id);c=b.getNumberValue("SECOND",b);setTimeout(function(){e.stop();b.playState=0},1E3*c);e.addEventListener("complete",function(b){})}return b},syntax:{js:[],py:["Entry.play_sound_for_sec_and_wait(%1, %2)"]}},
sound_from_to:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"get_sounds"},{type:"text",params:["1"]},{type:"text",params:["10"]},null],type:"sound_from_to"},pyHelpDef:{params:[{type:"get_sounds",params:["A&value"]},{type:"text",params:["B&value"]},{type:"text",params:["C&value"]},null],type:"sound_from_to"},paramsKeyMap:{VALUE:0,
START:1,END:2},"class":"sound_play",isNotFor:[],func:function(c,b){var d=b.getStringValue("VALUE",b);if(c=c.parent.getSound(d)){var d=1E3*b.getNumberValue("START",b),e=1E3*b.getNumberValue("END",b);createjs.Sound.play(c.id,{startTime:Math.min(d,e),duration:Math.max(d,e)-Math.min(d,e)})}return b.callReturn()},syntax:{js:[],py:["Entry.play_sound_from_to(%1, %2, %3)"]}},sound_from_to_and_wait:{color:"#A4D01D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},
{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/sound_03.png",size:12}],events:{},def:{params:[{type:"get_sounds"},{type:"text",params:["1"]},{type:"text",params:["10"]},null],type:"sound_from_to_and_wait"},pyHelpDef:{params:[{type:"get_sounds",params:["A&value"]},{type:"text",params:["B&value"]},{type:"text",params:["C&value"]},null],type:"sound_from_to_and_wait"},paramsKeyMap:{VALUE:0,START:1,END:2},"class":"sound_wait",isNotFor:[],func:function(c,b){if(b.isPlay){if(1==b.playState)return b;
delete b.isPlay;delete b.playState;return b.callReturn()}b.isPlay=!0;b.playState=1;var d=b.getStringValue("VALUE",b);if(c=c.parent.getSound(d)){var e=1E3*b.getNumberValue("START",b),f=1E3*b.getNumberValue("END",b),d=Math.min(e,f),e=Math.max(e,f)-d;createjs.Sound.play(c.id,{startTime:d,duration:e});setTimeout(function(){b.playState=0},e)}return b},syntax:{js:[],py:["Entry.play_sound_from_to_and_wait(%1, %2, %3)"]}},when_run_button_click:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",
img:"block_icon/start_icon_play.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null],type:"when_run_button_click"},"class":"event",isNotFor:[],func:function(c,b){return b.callReturn()},event:"start",syntax:{js:[],py:[{syntax:"def when_start():",blockType:"event"}]}},press_some_key:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_keyboard.png",size:17,position:{x:0,y:-2}},{type:"Dropdown",options:[["q","81"],["w","87"],["e","69"],
["r","82"],["a","65"],["s","83"],["d","68"],["\uc704\ucabd \ud654\uc0b4\ud45c","38"],["\uc544\ub798\ucabd \ud654\uc0b4\ud45c","40"],["\uc67c\ucabd \ud654\uc0b4\ud45c","37"],["\uc624\ub978\ucabd \ud654\uc0b4\ud45c","39"],["\uc5d4\ud130","13"],["\uc2a4\ud398\uc774\uc2a4","32"]],value:"81",fontSize:11},{type:"Indicator",img:"block_icon/start_03.png",size:12}],events:{},def:{params:[null,null,null]},paramsKeyMap:{VALUE:1},func:function(c,b){return b.callReturn()},syntax:{js:[],py:[""]}},when_some_key_pressed:{color:"#3BBD70",
skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_keyboard.png",size:17,position:{x:0,y:-2}},{type:"Keyboard",value:"81"}],events:{},def:{params:[null,"81"],type:"when_some_key_pressed"},pyHelpDef:{params:[null,"A&value"],type:"when_some_key_pressed"},paramsKeyMap:{VALUE:1},"class":"event",isNotFor:[],func:function(c,b){return b.callReturn()},event:"keyPress",syntax:{js:[],py:[{syntax:"def when_press_key(%2):",blockType:"event",textParams:[void 0,{type:"Keyboard",
value:"81",converter:Entry.block.converters.keyboardCode}]}]}},mouse_clicked:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_mouse.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null],type:"mouse_clicked"},"class":"event",isNotFor:[],func:function(c,b){return b.callReturn()},event:"mouse_clicked",syntax:{js:[],py:[{syntax:"def when_click_mouse_on():",blockType:"event"}]}},mouse_click_cancled:{color:"#3BBD70",skeleton:"basic_event",
statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_mouse.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null],type:"mouse_click_cancled"},"class":"event",isNotFor:[],func:function(c,b){return b.callReturn()},event:"mouse_click_cancled",syntax:{js:[],py:[{syntax:"def when_click_mouse_off():",blockType:"event"}]}},when_object_click:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_mouse.png",size:17,position:{x:0,y:-2}}],
events:{},def:{params:[null],type:"when_object_click"},"class":"event",isNotFor:[],func:function(c,b){return b.callReturn()},event:"when_object_click",syntax:{js:[],py:[{syntax:"def when_click_object_on():",blockType:"event"}]}},when_object_click_canceled:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_mouse.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null],type:"when_object_click_canceled"},"class":"event",isNotFor:[],func:function(c,
b){return b.callReturn()},event:"when_object_click_canceled",syntax:{js:[],py:[{syntax:"def when_click_object_off():",blockType:"event"}]}},when_some_key_click:{color:"#3BBD70",skeleton:"basic_event",statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_keyboard.png",size:17,position:{x:0,y:-2}}],events:{},def:{params:[null]},func:function(c,b){return b.callReturn()},event:"keyPress",syntax:{js:[],py:["Entry.on_key_press_down(%1)"]}},when_message_cast:{color:"#3BBD70",skeleton:"basic_event",
statements:[],params:[{type:"Indicator",img:"block_icon/start_icon_signal.png",size:17,position:{x:0,y:-2}},{type:"DropdownDynamic",value:null,menuName:"messages",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_messageRefs",c)}],viewDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_messageRefs",c)}]},def:{params:[null,null],type:"when_message_cast"},pyHelpDef:{params:[null,"A&value"],type:"when_message_cast"},
paramsKeyMap:{VALUE:1},"class":"message",isNotFor:["message"],func:function(c,b){return b.callReturn()},event:"when_message_cast",syntax:{js:[],py:[{syntax:"def when_get_signal(%2):",blockType:"event",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"messages",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START,converter:Entry.block.converters.returnStringKey}]}]}},message_cast:{color:"#3BBD70",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"messages",
fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START},{type:"Indicator",img:"block_icon/start_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_messageRefs",c)}],viewDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_messageRefs",c)}]},def:{params:[null,null],type:"message_cast"},pyHelpDef:{params:["A&value",null],type:"message_cast"},paramsKeyMap:{VALUE:0},"class":"message",isNotFor:["message"],func:function(c,b){c=b.getField("VALUE",b);b=
Entry.isExist(c,"id",Entry.variableContainer.messages_);if("null"==c||!b)throw Error("value can not be null or undefined");Entry.engine.raiseMessage(c)},syntax:{js:[],py:[{syntax:"Entry.send_signal(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"messages",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START,converter:Entry.block.converters.returnStringKey,paramType:"signal"},void 0]}]}},message_cast_wait:{color:"#3BBD70",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",
value:null,menuName:"messages",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START},{type:"Indicator",img:"block_icon/start_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_messageRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_messageRefs",c)}]},def:{params:[null,null],type:"message_cast_wait"},pyHelpDef:{params:["A&value",null],type:"message_cast_wait"},paramsKeyMap:{VALUE:0},"class":"message",isNotFor:["message"],func:function(c,
b){if(b.runningScript){c=b.runningScript;for(var d=c.length,e=0;e<d;e++){var f=c.shift();f&&!f.isEnd()&&c.push(f)}return c.length?b:b.callReturn()}c=b.getField("VALUE",b);f=Entry.isExist(c,"id",Entry.variableContainer.messages_);if("null"==c||!f)throw Error("value can not be null or undefined");d=Entry.engine.raiseMessage(c);for(c=[];d.length;)(f=d.shift())&&(c=c.concat(f));b.runningScript=c;return b},syntax:{js:[],py:[{syntax:"Entry.send_signal_wait(%1)",textParams:[{type:"DropdownDynamic",value:null,
menuName:"messages",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_START,converter:Entry.block.converters.returnStringKey}]}]}},text:{color:"#FFD974",skeleton:"basic_string_field",statements:[],params:[{type:"TextInput",value:10}],events:{},def:{params:[],type:"text"},paramsKeyMap:{NAME:0},func:function(c,b){return b.getField("NAME",b)},isPrimitive:!0,syntax:{js:["Scope","%1"],py:[{syntax:"%1",keyOption:"text",textParams:[{type:"TextInput",converter:Entry.block.converters.returnStringOrNumberByValue}]}]}},
text_write:{color:"#FFCA36",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/text.png",size:12}],events:{},def:{params:[{type:"text",params:[Lang.Blocks.entry]},null],type:"text_write"},pyHelpDef:{params:[{type:"text",params:["A&value"]},null],type:"text_write"},paramsKeyMap:{VALUE:0},"class":"text",isNotFor:["sprite"],func:function(c,b){var d=b.getStringValue("VALUE",b);c.setText(d);return b.callReturn()},syntax:{js:[],py:["Entry.write_text(%1)"]}},
text_append:{color:"#FFCA36",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/text.png",size:12}],events:{},def:{params:[{type:"text",params:[Lang.Blocks.entry]},null],type:"text_append"},pyHelpDef:{params:[{type:"text",params:["A&value"]},null],type:"text_append"},paramsKeyMap:{VALUE:0},"class":"text",isNotFor:["sprite"],func:function(c,b){var d=b.getStringValue("VALUE",b);c.setText(c.getText()+""+d);return b.callReturn()},syntax:{js:[],py:["Entry.append_text(%1)"]}},
text_prepend:{color:"#FFCA36",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/text.png",size:12}],events:{},def:{params:[{type:"text",params:[Lang.Blocks.entry]},null],type:"text_prepend"},pyHelpDef:{params:[{type:"text",params:["A&value"]},null],type:"text_prepend"},paramsKeyMap:{VALUE:0},"class":"text",isNotFor:["sprite"],func:function(c,b){var d=b.getStringValue("VALUE",b);c.setText(d+""+c.getText());return b.callReturn()},syntax:{js:[],py:["Entry.prepend_text(%1)"]}},
text_flush:{color:"#FFCA36",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/text.png",size:12}],events:{},def:{params:[null],type:"text_flush"},"class":"text",isNotFor:["sprite"],func:function(c,b){c.setText("");return b.callReturn()},syntax:{js:[],py:["Entry.clear_text()"]}},variableAddButton:{skeleton:"basic_button",color:"#eee",params:[{type:"Text",text:Lang.Workspace.variable_create,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.variableContainer.openVariableAddPanel("variable")}]},
syntax:{js:[],py:[""]}},listAddButton:{skeleton:"basic_button",color:"#eee",params:[{type:"Text",text:Lang.Workspace.create_list_block,color:"#333",align:"center"}],events:{mousedown:[function(){Entry.variableContainer.openVariableAddPanel("list")}]}},change_variable:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/variable_03.png",
size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,{type:"text",params:["10"]},null],type:"change_variable"},pyHelpDef:{params:["A&value",{type:"text",params:["B&value"]},null],type:"change_variable"},paramsKeyMap:{VARIABLE:0,VALUE:1},"class":"variable",isNotFor:["variableNotExist"],func:function(c,b){var d=b.getField("VARIABLE",b),e=b.getValue("VALUE",
b);if(0==e&&"boolean"==typeof e)throw Error("Type is not correct");c=Entry.variableContainer.getVariable(d,c);var f=c.getValue();Entry.Utils.isNumber(e)&&c.isNumber()?(e=Entry.parseNumber(e),f=Entry.parseNumber(f),d=Entry.getMaxFloatPoint([e,c.getValue()]),e=(e+f).toFixed(d)):e=""+f+e;c.setValue(e);return b.callReturn()},syntax:{js:[],py:[{syntax:"%1 += %2",textParams:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey},
{type:"Block",accept:"string"}]},{syntax:"%1 = %1 + %2",textParams:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey},{type:"Block",accept:"string"}]}]}},set_variable:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/variable_03.png",
size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,{type:"text",params:["10"]},null],type:"set_variable"},pyHelpDef:{params:["A&value",{type:"text",params:["B&value"]},null],type:"set_variable"},paramsKeyMap:{VARIABLE:0,VALUE:1},"class":"variable",isNotFor:["variableNotExist"],func:function(c,b){var d=b.getField("VARIABLE",b),e=b.getValue("VALUE",
b);Entry.variableContainer.getVariable(d,c).setValue(e);return b.callReturn()},syntax:{js:[],py:[{syntax:"%1 = %2",blockType:"variable",textParams:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey},{type:"Block",accept:"string"}]}]}},show_variable:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},
{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null],type:"show_variable"},pyHelpDef:{params:["A&value",null],type:"show_variable"},paramsKeyMap:{VARIABLE:0},"class":"variable_visibility",isNotFor:["variableNotExist"],func:function(c,b){var d=b.getField("VARIABLE",b);c=Entry.variableContainer.getVariable(d,
c);c.setVisible(!0);c.updateView();return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.show_variable(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnStringKey}]}]}},hide_variable:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Indicator",img:"block_icon/variable_03.png",
size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null],type:"hide_variable"},pyHelpDef:{params:["A&value",null],type:"hide_variable"},paramsKeyMap:{VARIABLE:0},"class":"variable_visibility",isNotFor:["variableNotExist"],func:function(c,b){var d=b.getField("VARIABLE",b);Entry.variableContainer.getVariable(d,c).setVisible(!1);return b.callReturn()},
syntax:{js:[],py:[{syntax:"Entry.hide_variable(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnStringKey}]}]}},get_variable:{color:"#E457DC",skeleton:"basic_string_field",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Text",text:Lang.Blocks.VARIABLE_get_variable_1,color:"white"}],events:{dataAdd:[function(c){var b=
Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null],type:"get_variable"},pyHelpDef:{params:["A&value"],type:"get_variable"},paramsKeyMap:{VARIABLE:0},"class":"variable",isNotFor:["variableNotExist"],func:function(c,b){b=b.getField("VARIABLE",b);return Entry.variableContainer.getVariable(b,c).getValue()},syntax:{js:[],py:[{syntax:"%1",keyOption:"get_variable",blockType:"param",textParams:[{type:"DropdownDynamic",
value:null,menuName:"variables",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey}]}]}},ask_and_wait:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{viewAdd:[function(){Entry.container&&Entry.container.showProjectAnswer()}],viewDestroy:[function(c,b){Entry.container&&Entry.container.hideProjectAnswer(c,b)}]},def:{params:[{type:"text",
params:[Lang.Blocks.block_hi]},null],type:"ask_and_wait"},pyHelpDef:{params:[{type:"text",params:["A&value"]},null],type:"ask_and_wait"},paramsKeyMap:{VALUE:0},"class":"ask",isNotFor:[],func:function(c,b){var d=Entry.container.inputValue,e=Entry.stage.inputField,f=b.getValue("VALUE",b);if(!f)throw Error("message can not be empty");if(d.sprite==c&&e&&!e._isHidden)return b;if(d.sprite!=c&&b.isInit)return c.dialog&&c.dialog.remove(),delete b.isInit,b.callReturn();if(d.complete&&d.sprite==c&&e._isHidden&&
b.isInit)return c.dialog&&c.dialog.remove(),delete d.complete,delete b.isInit,b.callReturn();f=Entry.convertToRoundedDecimals(f,3);Entry.stage.showInputField();new Entry.Dialog(c,f,"ask");d.script=b;d.sprite=c;d.complete=!1;b.isInit=!0;return b},syntax:{js:[],py:["Entry.input(%1)"]}},get_canvas_input_value:{color:"#E457DC",skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.VARIABLE_get_canvas_input_value,color:"#fff"}],events:{viewAdd:[function(){Entry.container&&Entry.container.showProjectAnswer()}],
viewDestroy:[function(c,b){Entry.container&&Entry.container.hideProjectAnswer(c,b)}]},def:{params:[null],type:"get_canvas_input_value"},"class":"ask",isNotFor:[],func:function(c,b){return Entry.container.getInputValue()},syntax:{js:[],py:[{template:"%1",syntax:"Entry.answer()",blockType:"param",textParams:[{type:"Text",text:"Entry.answer()",color:"#fff"}]}]}},add_value_to_list:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,
menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[{type:"text",params:["10"]},null,null],type:"add_value_to_list"},pyHelpDef:{params:[{type:"text",params:["B&value"]},"A&value",null],type:"add_value_to_list"},paramsKeyMap:{VALUE:0,
LIST:1},"class":"list",isNotFor:["listNotExist"],func:function(c,b){var d=b.getField("LIST",b),e=b.getValue("VALUE",b);c=Entry.variableContainer.getList(d,c);c.array_||(c.array_=[]);c.array_.push({data:e});c.updateView();return b.callReturn()},syntax:{js:[],py:[{syntax:"%2.append(%1)",textParams:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey}]}]}},remove_value_from_list:{color:"#E457DC",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[{type:"number",params:["1"]},null,null],type:"remove_value_from_list"},
pyHelpDef:{params:[{type:"number",params:["B&value"]},"A&value",null],type:"remove_value_from_list"},paramsKeyMap:{VALUE:0,LIST:1},"class":"list",isNotFor:["listNotExist"],func:function(c,b){var d=b.getField("LIST",b),e=b.getValue("VALUE",b);c=Entry.variableContainer.getList(d,c);if(!c.array_||!Entry.Utils.isNumber(e)||e>c.array_.length)throw Error("can not remove value from array");c.array_.splice(e-1,1);c.updateView();return b.callReturn()},syntax:{js:[],py:[{syntax:"%2.pop(%1)",textParams:[{type:"Block",
accept:"string",paramType:"index"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey}]}]}},insert_value_to_list:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],
events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[{type:"text",params:["10"]},null,{type:"text",params:["1"]},null],type:"insert_value_to_list"},pyHelpDef:{params:[{type:"text",params:["C&value"]},"A&value",{type:"text",params:["B&value"]},null],type:"insert_value_to_list"},paramsKeyMap:{DATA:0,LIST:1,INDEX:2},"class":"list",isNotFor:["listNotExist"],func:function(c,
b){var d=b.getField("LIST",b),e=b.getValue("DATA",b),f=b.getValue("INDEX",b);c=Entry.variableContainer.getList(d,c);if(!c.array_||!Entry.Utils.isNumber(f)||0==f||f>c.array_.length+1)throw Error("can not insert value to array");c.array_.splice(f-1,0,{data:e});c.updateView();return b.callReturn()},syntax:{js:[],py:[{syntax:"%2.insert(%3, %1)",textParams:[{type:"Block",accept:"string"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey},
{type:"Block",accept:"string",paramType:"index"}]}]}},change_value_list_index:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;
b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,{type:"text",params:["1"]},{type:"text",params:["10"]},null],type:"change_value_list_index"},pyHelpDef:{params:["A&value",{type:"text",params:["B&value"]},{type:"text",params:["C&value"]},null],type:"change_value_list_index"},paramsKeyMap:{LIST:0,INDEX:1,DATA:2},"class":"list",isNotFor:["listNotExist"],func:function(c,b){var d=b.getField("LIST",b),e=b.getValue("DATA",b),f=b.getValue("INDEX",b);c=Entry.variableContainer.getList(d,c);if(!c.array_||
!Entry.Utils.isNumber(f)||f>c.array_.length)throw Error("can not insert value to array");c.array_[f-1].data=e;c.updateView();return b.callReturn()},syntax:{js:[],py:[{syntax:"%1[%2] = %3",textParams:[{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey},{type:"Block",accept:"string",paramType:"index"},{type:"Block",accept:"string"}]}]}},value_of_index_from_list:{color:"#E457DC",fontColor:"#fff",
skeleton:"basic_string_field",statements:[],params:[{type:"Text",text:Lang.Blocks.VARIABLE_value_of_index_from_list_1,color:"white"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Text",text:Lang.Blocks.VARIABLE_value_of_index_from_list_2,color:"white"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.VARIABLE_value_of_index_from_list_3,color:"white"}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",
c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null,null,{type:"number",params:["1"]}],type:"value_of_index_from_list"},pyHelpDef:{params:[null,"A&value",null,{type:"number",params:["B&value"]}],type:"value_of_index_from_list"},paramsKeyMap:{LIST:1,INDEX:3},"class":"list_element",isNotFor:["listNotExist"],func:function(c,b){var d=b.getField("LIST",b);b=b.getValue("INDEX",b);c=Entry.variableContainer.getList(d,c);b=Entry.getListRealIndex(b,
c);if(!c.array_||!Entry.Utils.isNumber(b)||b>c.array_.length)throw Error("can not insert value to array");return c.array_[b-1].data},syntax:{js:[],py:[{syntax:"%2[%4]",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey},void 0,{type:"Block",accept:"string",paramType:"index"}]}]}},length_of_list:{color:"#E457DC",fontColor:"#fff",skeleton:"basic_string_field",
statements:[],params:[{type:"Text",text:Lang.Blocks.VARIABLE_length_of_list_1,color:"white"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Text",text:Lang.Blocks.VARIABLE_length_of_list_2,color:"white"}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null,null],type:"length_of_list"},
pyHelpDef:{params:[null,"A&value",null],type:"length_of_list"},paramsKeyMap:{LIST:1},"class":"list",isNotFor:["listNotExist"],func:function(c,b){b=b.getField("LIST",b);return Entry.variableContainer.getList(b,c).array_.length},syntax:{js:[],py:[{syntax:"len(%2)",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnRawStringKey}]}]}},show_list:{color:"#E457DC",skeleton:"basic",
statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null],type:"show_list"},pyHelpDef:{params:["A&value",null],type:"show_list"},paramsKeyMap:{LIST:0},"class":"list_visibility",
isNotFor:["listNotExist"],func:function(c,b){c=b.getField("LIST",b);Entry.variableContainer.getList(c).setVisible(!0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.show_list(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnStringKey}]}]}},hide_list:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},
{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null],type:"hide_list"},pyHelpDef:{params:["A&value",null],type:"hide_list"},paramsKeyMap:{LIST:0},"class":"list_visibility",isNotFor:["listNotExist"],func:function(c,b){c=b.getField("LIST",b);Entry.variableContainer.getList(c).setVisible(!1);
return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.hide_list(%1)",textParams:[{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnStringKey}]}]}},options_for_list:{color:"#E457DC",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["\uccab\ubc88\uc9f8","FIRST"],["\ub9c8\uc9c0\ub9c9","LAST"],["\ubb34\uc791\uc704","RANDOM"]],value:"FIRST",fontSize:11}],events:{},def:{params:[null]},
paramsKeyMap:{OPERATOR:0},func:function(c,b){return b.getField("OPERATOR",b)},syntax:{js:[],py:[""]}},set_visible_answer:{color:"#E457DC",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.CALC_timer_visible_show,"SHOW"],[Lang.Blocks.CALC_timer_visible_hide,"HIDE"]],value:"SHOW",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},{type:"Indicator",img:"block_icon/variable_03.png",size:12}],events:{viewAdd:[function(c){Entry.container&&Entry.container.showProjectAnswer()}],
viewDestroy:[function(c,b){Entry.container&&Entry.container.hideProjectAnswer(c,b)}]},def:{params:["HIDE",null],type:"set_visible_answer"},pyHelpDef:{params:["A&value",null],type:"set_visible_answer"},paramsKeyMap:{BOOL:0},"class":"ask",isNotFor:[],func:function(c,b){"HIDE"==b.getField("BOOL",b)?Entry.container.inputValue.setVisible(!1):Entry.container.inputValue.setVisible(!0);return b.callReturn()},syntax:{js:[],py:[{syntax:"Entry.answer_view(%1)",textParams:[{type:"Dropdown",options:[[Lang.Blocks.CALC_timer_visible_show,
"SHOW"],[Lang.Blocks.CALC_timer_visible_hide,"HIDE"]],value:"SHOW",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,converter:Entry.block.converters.returnStringValueLowerCase,codeMap:"Entry.CodeMap.Entry.set_visible_answer[0]"}]}]}},is_included_in_list:{color:"#E457DC",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Text",text:Lang.Blocks.VARIABLE_is_included_in_list_1,color:"white"},{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE},
{type:"Text",text:Lang.Blocks.VARIABLE_is_included_in_list_2,color:"white"},{type:"Block",accept:"string"},{type:"Text",text:Lang.Blocks.VARIABLE_is_included_in_list_3,color:"white"}],events:{dataAdd:[function(c){var b=Entry.variableContainer;b&&b.addRef("_variableRefs",c)}],dataDestroy:[function(c){var b=Entry.variableContainer;b&&b.removeRef("_variableRefs",c)}]},def:{params:[null,null,null,{type:"text",params:["10"]},null],type:"is_included_in_list"},pyHelpDef:{params:[null,"B&value",null,{type:"text",
params:["A&value"]},null],type:"is_included_in_list"},paramsKeyMap:{LIST:1,DATA:3},"class":"list",isNotFor:["listNotExist"],func:function(c,b){var d=b.getField("LIST",b);b=b.getStringValue("DATA",b);c=Entry.variableContainer.getList(d,c);if(!c)return!1;c=c.array_;for(var d=0,e=c.length;d<e;d++)if(c[d].data.toString()==b.toString())return!0;return!1},syntax:{js:[],py:[{syntax:"%4 in %2",blockType:"param",textParams:[void 0,{type:"DropdownDynamic",value:null,menuName:"lists",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_VARIABLE,
converter:Entry.block.converters.returnRawStringKey},void 0,{type:"Block",accept:"string"}]}]}},xbot_digitalInput:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.XBOT_D2_digitalInput,"D2"],[Lang.Blocks.XBOT_D3_digitalInput,"D3"],[Lang.Blocks.XBOT_D11_digitalInput,"D11"]],value:"D2",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null],type:"xbot_digitalInput"},paramsKeyMap:{DEVICE:0},"class":"xbot_sensor",isNotFor:["xbot_epor_edge"],
func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]},syntax:{js:[],py:["Xbot.digital_input(%1)"]}},xbot_analogValue:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.XBOT_CDS,"light"],[Lang.Blocks.XBOT_MIC,"mic"],[Lang.Blocks.XBOT_analog0,"adc0"],[Lang.Blocks.XBOT_analog1,"adc1"],[Lang.Blocks.XBOT_analog2,"adc2"],[Lang.Blocks.XBOT_analog3,"adc3"]],value:"light",fontSize:11}],events:{},def:{params:[null],type:"xbot_analogValue"},
paramsKeyMap:{DEVICE:0},"class":"xbot_sensor",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]},syntax:{js:[],py:["Xbot.analog_value(%1)"]}},xbot_digitalOutput:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["LED","D13"],["D4","D4"],["D7","D7"],["D12 ","D12"]],value:"D13",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.XBOT_High,"HIGH"],[Lang.Blocks.XBOT_Low,"LOW"]],value:"HIGH",fontSize:11},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"xbot_digitalOutput"},paramsKeyMap:{DEVICE:0,VALUE:1},"class":"xbot_sensor",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getStringField("VALUE",b);c.D13="D13"==d&&"HIGH"==e?1:0;c.D4="D4"==d&&"HIGH"==e?1:0;c.D7="D7"==d&&"HIGH"==e?1:0;c.D12="D12"==d&&"HIGH"==e?1:0;return b.callReturn()},syntax:{js:[],py:["Xbot.digital_output(%1, %2)"]}},xbot_analogOutput:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["D5","analogD5"],["D6","analogD6"]],value:"analogD5",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["255"]},null],type:"xbot_analogOutput"},paramsKeyMap:{DEVICE:0,VALUE:1},"class":"xbot_sensor",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"analogD5"==
d?c.analogD5=e:"analogD6"==d&&(c.analogD6=e);return b.callReturn()},syntax:{js:[],py:["Xbot.analog_output(%1, %2)"]}},xbot_servo:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.XBOT_Head,"head"],[Lang.Blocks.XBOT_ArmR,"right"],[Lang.Blocks.XBOT_ArmL,"left"]],value:"head",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["90"]},null],type:"xbot_servo"},
paramsKeyMap:{DEVICE:0,VALUE:1},"class":"xbot_motor",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"head"==d?c.head=e:"right"==d?c.armR=e:"left"==d&&(c.armL=e);return b.callReturn()},syntax:{js:[],py:["Xbot.servo(%1, %2)"]}},xbot_oneWheel:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.XBOT_rightWheel,"rightWheel"],[Lang.Blocks.XBOT_leftWheel,"leftWheel"],[Lang.Blocks.XBOT_bothWheel,
"bothWheel"]],value:"rightWheel",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["0"]},null],type:"xbot_oneWheel"},paramsKeyMap:{DEVICE:0,VALUE:1},"class":"xbot_motor",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"rightWheel"==d?c.rightWheel=e:"leftWheel"==d?c.leftWheel=
e:c.rightWheel=c.leftWheel=e;return b.callReturn()},syntax:{js:[],py:["Xbot.one_wheel(%1, %2)"]}},xbot_twoWheel:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0"]},{type:"text",params:["0"]},null],type:"xbot_twoWheel"},paramsKeyMap:{rightWheel:0,leftWheel:1},"class":"xbot_motor",isNotFor:["xbot_epor_edge"],func:function(c,
b){c=Entry.hw.sendQueue;c.rightWheel=b.getNumberValue("rightWheel");c.leftWheel=b.getNumberValue("leftWheel");return b.callReturn()},syntax:{js:[],py:["Xbot.two_wheel(%1, %2)"]}},xbot_rgb:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["255"]},{type:"text",params:["255"]},{type:"text",params:["255"]},
null],type:"xbot_rgb"},paramsKeyMap:{ledR:0,ledG:1,ledB:2},"class":"xbot_rgb",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.sendQueue;c.ledR=b.getNumberValue("ledR");c.ledG=b.getNumberValue("ledG");c.ledB=b.getNumberValue("ledB");return b.callReturn()},syntax:{js:[],py:["Xbot.rgb(%1, %2, %3)"]}},xbot_rgb_picker:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Color"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"xbot_rgb_picker"},
paramsKeyMap:{VALUE:0},"class":"xbot_rgb",isNotFor:["xbot_epor_edge"],func:function(c,b){c=b.getStringField("VALUE");var d=Entry.hw.sendQueue;d.ledR=parseInt(.3*parseInt(c.substr(1,2),16));d.ledG=parseInt(.3*parseInt(c.substr(3,2),16));d.ledB=parseInt(.3*parseInt(c.substr(5,2),16));return b.callReturn()},syntax:{js:[],py:["Xbot.rgb_picker(%1)"]}},xbot_buzzer:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.XBOT_c,"C"],[Lang.Blocks.XBOT_d,"D"],[Lang.Blocks.XBOT_e,
"E"],[Lang.Blocks.XBOT_f,"F"],[Lang.Blocks.XBOT_g,"G"],[Lang.Blocks.XBOT_a,"A"],[Lang.Blocks.XBOT_b,"B"]],value:"C",fontSize:11},{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"]],value:"2",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,"4",{type:"text",params:["0.5"]},null],type:"xbot_buzzer"},paramsKeyMap:{NOTE:0,OCTAVE:1,VALUE:2},"class":"xbot_sensor",isNotFor:["xbot_epor_edge"],
func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("NOTE",b),e=b.getStringField("OCTAVE",b),f=b.getNumberValue("VALUE",b),d=d+e;c.note="C2"==d?65:"D2"==d?73:"E2"==d?82:"F2"==d?87:"G2"==d?98:"A2"==d?110:"B2"==d?123:"C3"==d?131:"D3"==d?147:"E3"==d?165:"F3"==d?175:"G3"==d?196:"A3"==d?220:"B3"==d?247:"C4"==d?262:"D4"==d?294:"E4"==d?330:"F4"==d?349:"G4"==d?392:"A4"==d?440:"B4"==d?494:"C5"==d?523:"D5"==d?587:"E5"==d?659:"F5"==d?698:"G5"==d?784:"A5"==d?880:"B5"==d?988:"C6"==d?1047:"D6"==d?1175:
"E6"==d?1319:"F6"==d?1397:"G6"==d?1568:"A6"==d?1760:"B6"==d?1976:"C7"==d?2093:"D7"==d?2349:"E7"==d?2637:"F7"==d?2794:"G7"==d?3136:"A7"==d?3520:"B7"==d?3951:262;c.duration=40*f;return b.callReturn()},syntax:{js:[],py:["Xbot.buzzer(%1, %2, %3)"]}},xbot_lcd:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["0","0"],["1","1"]],value:"0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,{type:"text",params:["Hello"]},null],type:"xbot_lcd"},paramsKeyMap:{LINE:0,VALUE:1},"class":"xbot_sensor",isNotFor:["xbot_epor_edge"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getNumberField("LINE",b),e=b.getStringValue("VALUE",b);0==d?(c.lcdNum=0,c.lcdTxt=e):1==d&&(c.lcdNum=1,c.lcdTxt=e);return b.callReturn()},syntax:{js:[],py:["Xbot.lcd(%1, %2)"]}},run:{skeleton:"basic",color:"#3BBD70",contents:["this is","basic block"]},mutant:{skeleton:"basic",event:"start",
color:"#3BBD70",params:[],changeEvent:{_listeners:[]}},jr_start:{skeleton:"pebble_event",event:"start",color:"#3BBD70",params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/jr/block_play_image.png",highlightColor:"#3BBD70",position:{x:0,y:0},size:22}],func:function(){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;for(b in c)this._unit=c[b];Ntry.unitComp=Ntry.entityManager.getComponent(this._unit.id,Ntry.STATIC.UNIT)}},jr_repeat:{skeleton:"pebble_loop",color:"#127CDB",
params:[{type:"Text",text:""},{type:"Dropdown",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:3,fontSize:14,roundValue:3}],statements:[{accept:"pebble_basic"}],func:function(){if(void 0===this.repeatCount)return this.repeatCount=this.block.params[1],Entry.STATIC.BREAK;if(0<this.repeatCount){this.repeatCount--;var c=this.block.statements[0];if(0===c.getBlocks().length)return;this.executor.stepInto(c);return Entry.STATIC.BREAK}delete this.repeatCount}},jr_item:{skeleton:"pebble_basic",
color:"#F46C6C",params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/jr/block_item_image.png",highlightColor:"#FFF",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.GET_ITEM,function(){Ntry.dispatchEvent("getItem");c.isAction=!1});return Entry.STATIC.BREAK}}},cparty_jr_item:{skeleton:"pebble_basic",
color:"#8ABC1D",params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/cpartyjr/pen.png",highlightColor:"#FFF",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.GET_ITEM,function(){Ntry.dispatchEvent("getItem");c.isAction=!1});return Entry.STATIC.BREAK}}},jr_north:{skeleton:"pebble_basic",color:"#A751E3",
params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/jr/block_up_image.png",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=Ntry.STATIC,b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){b.isAction=!1})},3)},e;switch(Ntry.unitComp.direction){case Ntry.STATIC.EAST:e=c.TURN_LEFT;break;
case Ntry.STATIC.SOUTH:e=c.HALF_ROTATION;break;case Ntry.STATIC.WEST:e=c.TURN_RIGHT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.BREAK}}},jr_east:{skeleton:"pebble_basic",color:"#A751E3",params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/jr/block_right_image.png",position:{x:83,y:0},size:22}],func:function(){var c=Ntry.STATIC;if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=
!0;var b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",c.WALK,function(){b.isAction=!1})},3)},e;switch(Ntry.unitComp.direction){case c.SOUTH:e=c.TURN_LEFT;break;case c.WEST:e=c.HALF_ROTATION;break;case c.NORTH:e=c.TURN_RIGHT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.BREAK}}},jr_south:{skeleton:"pebble_basic",color:"#A751E3",params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/jr/block_down_image.png",position:{x:83,y:0},
size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=Ntry.STATIC,b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){b.isAction=!1})},3)},e;switch(Ntry.unitComp.direction){case c.EAST:e=c.TURN_RIGHT;break;case c.NORTH:e=c.HALF_ROTATION;break;case c.WEST:e=c.TURN_LEFT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",
e,d);return Entry.STATIC.BREAK}}},jr_west:{skeleton:"pebble_basic",color:"#A751E3",params:[{type:"Indicator",img:"../../../img/assets/ntry/bitmap/jr/block_left_image.png",position:{x:83,y:0},size:22}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=Ntry.STATIC,b=this,d=function(){window.setTimeout(function(){Ntry.dispatchEvent("unitAction",c.WALK,function(){b.isAction=!1})},3)},e;
switch(Ntry.unitComp.direction){case c.SOUTH:e=c.TURN_RIGHT;break;case c.EAST:e=c.HALF_ROTATION;break;case c.NORTH:e=c.TURN_LEFT;break;default:d()}e&&Ntry.dispatchEvent("unitAction",e,d);return Entry.STATIC.BREAK}}},jr_start_basic:{skeleton:"basic_event",event:"start",color:"#3BBD70",params:[{type:"Indicator",boxMultiplier:2,img:"../../../img/assets/block_icon/start_icon_play.png",highlightColor:"#3BBD70",size:17,position:{x:0,y:-2}},{text:"\uc2dc\uc791\ud558\uae30\ub97c \ud074\ub9ad\ud588\uc744\ub54c",
type:"Text"}],func:function(){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;for(b in c)this._unit=c[b];Ntry.unitComp=Ntry.entityManager.getComponent(this._unit.id,Ntry.STATIC.UNIT)}},jr_go_straight:{skeleton:"basic",color:"#A751E3",params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/cparty_go_straight.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=
!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){c.isAction=!1});return Entry.STATIC.BREAK}},syntax:["Scope","move"]},jr_turn_left:{skeleton:"basic",color:"#A751E3",params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/cparty_rotate_l.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_LEFT,
function(){c.isAction=!1});return Entry.STATIC.BREAK}},syntax:["Scope","left"]},jr_turn_right:{skeleton:"basic",color:"#A751E3",params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/cparty_rotate_r.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_RIGHT,function(){c.isAction=!1});return Entry.STATIC.BREAK}},
syntax:["Scope","right"]},jr_go_slow:{skeleton:"basic",color:"#f46c6c",params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/cparty_go_slow.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.GO_SLOW,function(){c.isAction=!1});return Entry.STATIC.BREAK}},syntax:["Scope","move_slowly"]},jr_repeat_until_dest:{skeleton:"basic_loop",
color:"#498DEB",syntax:["BasicWhile","true"],params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/jr_goal_image.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}},jr_if_construction:{skeleton:"basic_loop",color:"#498DEB",syntax:["BasicIf","front == 'wall'"],params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/jr_construction_image.png",
size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_REPAIR});
this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},jr_if_speed:{skeleton:"basic_loop",color:"#498DEB",syntax:["BasicIf","front == 'hump'"],params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/jr/jr_speed_image.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),
b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_SLOW});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_step_start:{skeleton:"basic_event",mode:"maze",
event:"start",color:"#3BBD70",syntax:["Program"],params:[{type:"Indicator",boxMultiplier:2,img:"../../../img/assets/block_icon/start_icon_play.png",highlightColor:"#3BBD70",size:17,position:{x:0,y:-2}}],func:function(){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;for(b in c)this._unit=c[b];Ntry.unitComp=Ntry.entityManager.getComponent(this._unit.id,Ntry.STATIC.UNIT)}},maze_step_jump:{skeleton:"basic",mode:"maze",color:"#FF6E4B",params:[{type:"Image",img:"/img/assets/week/blocks/jump.png",
size:24}],syntax:["Scope","jump"],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.JUMP,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},maze_step_jump2:{parent:"maze_step_jump",template:Lang.template.maze_step_jump,func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=
this.isContinue=!0;var c=this,b=function(){c.isAction=!1},d=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),e;$.each(d,function(b,c){e=b;components=c.components});var d=Ntry.entityManager.getComponent(e,Ntry.STATIC.UNIT),f=$.extend({},Ntry.entityManager.getComponent(e,Ntry.STATIC.GRID));if(Ntry.checkCollisionTile(f,d.direction,[Ntry.STATIC.OBSTACLE_IRON],2))Ntry.dispatchEvent("unitAction",Ntry.STATIC.FAIL_JUMP,b),Ntry.dispatchEvent("complete",!1,Ntry.STATIC.CONTACT_IRON);else return Ntry.dispatchEvent("unitAction",
Ntry.STATIC.JUMP,b),Entry.STATIC.BREAK}}},maze_step_for:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIteration"],params:[{type:"Dropdown",key:"REPEAT",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:1},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){if(void 0===this.repeatCount)return this.repeatCount=this.block.params[0],Entry.STATIC.BREAK;if(0<this.repeatCount){this.repeatCount--;var c=
this.block.statements[0];if(0===c.getBlocks().length)return;this.executor.stepInto(c);return Entry.STATIC.BREAK}delete this.repeatCount}},test:{skeleton:"basic_boolean_field",mode:"maze",color:"#127CDB",params:[{type:"Angle",value:"90"},{type:"Dropdown",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:1}]},maze_repeat_until_1:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicWhile","true"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/repeat_goal_1.png",
size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}},maze_repeat_until_2:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicWhile","true"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/repeat_goal_1.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],
func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}},maze_step_if_1:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == 'wall'"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/if_target_1.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),
b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);d=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y});c=this.block.statements[0];if(0===d.length)return this.executor.stepInto(c),Entry.STATIC.BREAK;b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.WALL});this.isContinue=!0;if(0!==b.length&&
0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_step_if_2:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == 'bee'"],params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/maze2/obstacle_01.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_BEE});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_call_function:{skeleton:"basic",mode:"maze",color:"#B57242",syntax:["Scope","promise"],params:[{type:"Image",
img:"/img/assets/week/blocks/function.png",size:24}],func:function(){if(!this.funcExecutor){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.CODE),b;for(b in c)this.funcExecutor=new Entry.Executor(c[b].components[Ntry.STATIC.CODE].code.getEventMap("define")[0])}this.funcExecutor.execute();if(null!==this.funcExecutor.scope.block)return Entry.STATIC.BREAK}},maze_define_function:{skeleton:"basic_define",mode:"maze",color:"#B57242",event:"define",syntax:["BasicFunction"],params:[{type:"Image",
img:"/img/assets/week/blocks/function.png",size:24}],statements:[{accept:"basic"}],func:function(c){if(!this.executed&&(c=this.block.statements[0],0!==c.getBlocks().length))return this.executor.stepInto(c),this.executed=!0,Entry.STATIC.BREAK}},maze_step_if_3:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == banana"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/if_target_3.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],
func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_BANANA});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),
Entry.STATIC.BREAK}}},maze_step_if_4:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == wall"],params:[{type:"Image",img:"/img/assets/ntry/block_inner/if_target_2.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.WALL});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_step_move_step:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","move"],params:[{type:"Image",img:"/img/assets/week/blocks/moveStep.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;
delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},maze_step_rotate_left:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","left"],params:[{type:"Image",img:"/img/assets/week/blocks/turnL.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=
this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_LEFT,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},maze_step_rotate_right:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/week/blocks/turnR.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",
Ntry.STATIC.TURN_RIGHT,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},maze_step_forward:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","move"],params:[{type:"Image",img:"/img/assets/week/blocks/moveStep.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.WALK,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},
maze_rotate_left:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","left"],params:[{type:"Image",img:"/img/assets/week/blocks/turnL.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_LEFT,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},maze_rotate_right:{skeleton:"basic",mode:"maze",color:"#A751E3",
syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/week/blocks/turnR.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this;Ntry.dispatchEvent("unitAction",Ntry.STATIC.TURN_RIGHT,function(){c.isAction=!1});return Entry.STATIC.BREAK}}},maze_moon_kick:{skeleton:"basic",mode:"maze",color:"#2EB0E8",syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/maze/sprite/moon_icon.png",
size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b;$.each(c,function(c,d){b=c;components=d.components});var c=Ntry.entityManager.getComponent(b,Ntry.STATIC.UNIT),d=$.extend({},Ntry.entityManager.getComponent(b,Ntry.STATIC.GRID));if(Ntry.checkCollisionTile(d,c.direction,[Ntry.STATIC.OBSTACLE_BRICK],1)){this.isAction=this.isContinue=!0;var e=this;
Ntry.dispatchEvent("unitAction",Ntry.STATIC.ATTACK,function(){Ntry.dispatchEvent("destroyObstacle",1,function(b){switch(b){case Ntry.STATIC.OBSTACLE_DESTROY_SUCCESS:e.isAction=!1}})});return Entry.STATIC.BREAK}Ntry.dispatchEvent("playSound",Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT);Ntry.dispatchEvent("complete",!1,Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT)}}},maze_cony_flower_throw:{skeleton:"basic",mode:"maze",color:"#D8617D",syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/maze/sprite/cony_icon.png",
size:24}],func:function(){var c=this;if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var b=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),d;$.each(b,function(b,c){d=b;components=c.components});var b=Ntry.entityManager.getComponent(d,Ntry.STATIC.UNIT),e=$.extend({},Ntry.entityManager.getComponent(d,Ntry.STATIC.GRID)),e=Ntry.checkCollisionTile(e,b.direction,[Ntry.STATIC.OBSTACLE_SPIDER]),f=
550;b.direction===Ntry.STATIC.NORTH&&(f=450);if(e){var g=Ntry.entityManager.addEntity();Ntry.dispatchEvent("unitAction",Ntry.STATIC.ATTACK,function(){$.each(components,function(b,c){+b===Ntry.STATIC.SPRITE?(b=$.extend({},c),b.zIndex=f,Ntry.entityManager.addComponent(g.id,b)):+b!=Ntry.STATIC.UNIT?Ntry.entityManager.addComponent(g.id,c):Ntry.entityManager.addComponent(g.id,{type:Ntry.STATIC.PARTICLE,direction:c.direction,collisionList:[Ntry.STATIC.OBSTACLE_SPIDER]})});Ntry.dispatchEvent("particleAction",
{entityId:g.id,actionType:Ntry.STATIC.FLOWER_ATTACK,callback:function(){Ntry.entityManager.removeEntity(g.id);c.isAction=!1}})});return Entry.STATIC.BREAK}Ntry.dispatchEvent("playSound",Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT);Ntry.dispatchEvent("complete",!1,Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT)}}},maze_cony_flower_throw2:{skeleton:"basic",mode:"maze",color:"#D8617D",template:Lang.template.maze_cony_flower_throw,syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/maze/sprite/cony_icon.png",
size:24}],func:function(){var c=this;if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{var b=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),d;$.each(b,function(b,c){d=b;components=c.components});var b=Ntry.entityManager.getComponent(d,Ntry.STATIC.UNIT),e=$.extend({},Ntry.entityManager.getComponent(d,Ntry.STATIC.GRID)),e=Ntry.checkCollisionTile(e,b.direction,[Ntry.STATIC.OBSTACLE_ENERMY5,Ntry.STATIC.OBSTACLE_ENERMY4],2,!0),
f=550;b.direction===Ntry.STATIC.NORTH&&(f=450);if(e){this.isAction=this.isContinue=!0;var g=Ntry.entityManager.addEntity();Ntry.dispatchEvent("unitAction",Ntry.STATIC.ATTACK,function(){$.each(components,function(b,c){+b===Ntry.STATIC.SPRITE?(b=$.extend({},c),b.zIndex=f,Ntry.entityManager.addComponent(g.id,b)):+b!=Ntry.STATIC.UNIT?Ntry.entityManager.addComponent(g.id,c):Ntry.entityManager.addComponent(g.id,{type:Ntry.STATIC.PARTICLE,direction:c.direction,collisionList:[Ntry.STATIC.OBSTACLE_ENERMY5,
,Ntry.STATIC.OBSTACLE_ENERMY4],penetrationList:[Ntry.STATIC.WALL]})});Ntry.dispatchEvent("particleAction",{entityId:g.id,actionType:Ntry.STATIC.HEART_ATTACK,callback:function(){Ntry.entityManager.removeEntity(g.id);c.isAction=!1}})});return Entry.STATIC.BREAK}Ntry.dispatchEvent("playSound",Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT);Ntry.dispatchEvent("complete",!1,Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT)}}},maze_james_heart:{skeleton:"basic",mode:"maze",color:"#D39D18",syntax:["Scope","right"],params:[{type:"Image",
img:"/img/assets/maze/sprite/james_icon.png",size:24}],func:function(){var c=this;if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{var b=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),d;$.each(b,function(b,c){d=b;components=c.components});var b=Ntry.entityManager.getComponent(d,Ntry.STATIC.UNIT),e=$.extend({},Ntry.entityManager.getComponent(d,Ntry.STATIC.GRID)),e=Ntry.checkCollisionTile(e,b.direction,[Ntry.STATIC.OBSTACLE_ENERMY1,
Ntry.STATIC.OBSTACLE_ENERMY2,Ntry.STATIC.OBSTACLE_ENERMY3,Ntry.STATIC.OBSTACLE_ENERMY5]),f=550;b.direction===Ntry.STATIC.NORTH&&(f=450);if(e){this.isAction=this.isContinue=!0;var g=Ntry.entityManager.addEntity();Ntry.dispatchEvent("unitAction",Ntry.STATIC.ATTACK,function(){$.each(components,function(b,c){+b===Ntry.STATIC.SPRITE?(b=$.extend({},c),b.zIndex=f,Ntry.entityManager.addComponent(g.id,b)):+b!=Ntry.STATIC.UNIT?Ntry.entityManager.addComponent(g.id,c):Ntry.entityManager.addComponent(g.id,{type:Ntry.STATIC.PARTICLE,
direction:c.direction,collisionList:[Ntry.STATIC.OBSTACLE_ENERMY1,Ntry.STATIC.OBSTACLE_ENERMY2,Ntry.STATIC.OBSTACLE_ENERMY3,Ntry.STATIC.OBSTACLE_ENERMY5]})});Ntry.dispatchEvent("particleAction",{entityId:g.id,actionType:Ntry.STATIC.HEART_ATTACK,callback:function(){Ntry.entityManager.removeEntity(g.id);c.isAction=!1}})});return Entry.STATIC.BREAK}Ntry.dispatchEvent("playSound",Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT);Ntry.dispatchEvent("complete",!1,Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT)}}},maze_james_heart2:{skeleton:"basic",
mode:"maze",color:"#D39D18",template:Lang.template.maze_james_heart,syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/maze/sprite/james_icon.png",size:24}],func:function(){var c=this;if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{var b=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),d;$.each(b,function(b,c){d=b;components=c.components});var b=Ntry.entityManager.getComponent(d,Ntry.STATIC.UNIT),e=$.extend({},
Ntry.entityManager.getComponent(d,Ntry.STATIC.GRID)),e=Ntry.checkCollisionTile(e,b.direction,[Ntry.STATIC.OBSTACLE_ENERMY3,Ntry.STATIC.OBSTACLE_ENERMY4],2),f=550;b.direction===Ntry.STATIC.NORTH&&(f=450);if(e){this.isAction=this.isContinue=!0;var g=Ntry.entityManager.addEntity();Ntry.dispatchEvent("unitAction",Ntry.STATIC.ATTACK,function(){$.each(components,function(b,c){+b===Ntry.STATIC.SPRITE?(b=$.extend({},c),b.zIndex=f,Ntry.entityManager.addComponent(g.id,b)):+b!=Ntry.STATIC.UNIT?Ntry.entityManager.addComponent(g.id,
c):Ntry.entityManager.addComponent(g.id,{type:Ntry.STATIC.PARTICLE,direction:c.direction,collisionList:[Ntry.STATIC.OBSTACLE_ENERMY3,Ntry.STATIC.OBSTACLE_ENERMY4,Ntry.STATIC.OBSTACLE_ENERMY_AREA],penetrationList:[Ntry.STATIC.OBSTACLE_ENERMY_AREA]})});Ntry.dispatchEvent("particleAction",{entityId:g.id,actionType:Ntry.STATIC.HEART_ATTACK,callback:function(){Ntry.entityManager.removeEntity(g.id);c.isAction=!1}})});return Entry.STATIC.BREAK}Ntry.dispatchEvent("playSound",Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT);
Ntry.dispatchEvent("complete",!1,Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT)}}},maze_iron_switch:{skeleton:"basic",mode:"maze",color:"#748d69",syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/maze/sprite/iron_icon.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;delete this.isContinue}else{this.isAction=this.isContinue=!0;var c=this,b=Ntry.configManager.getConfig("gridSize"),d=Ntry.configManager.getConfig("tileSize").width,
e=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.OBSTACLE),f;for(f in e)if(Ntry.entityManager.getComponent(f,Ntry.STATIC.OBSTACLE).tileType===Ntry.STATIC.OBSTACLE_IRON){e=Ntry.entityManager.getComponent(f,Ntry.STATIC.GRID);Ntry.entityManager.getComponent(f,Ntry.STATIC.POSITION);e.y=1===e.y?3:1;var g=2*d;1===e.y&&(g=-g);var h={x:0,y:.5*g},k={x:0,y:g},l={minY:0,maxY:b.height*d};0<g?l.maxY=e.y*d+d/2:l.minY=e.y*d+d/2;(function(b,d,e,f,g){Ntry.entityManager.getComponent(b,Ntry.STATIC.ANIMATE)?(c.isAction=
!1,Ntry.entityManager.addComponent(b,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.TRANSITION,duration:20,option:{deltaPos:e,targetPos:f},afterAnimate:function(){var b=Ntry.getUtilGrid();g.x==b.x&&g.y==b.y&&Ntry.dispatchEvent("unitAction",Ntry.STATIC.CONTACT_IRON2)}})):Ntry.entityManager.addComponent(b,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.TRANSITION,duration:10,option:{deltaPos:d},afterAnimate:function(){c.isAction=!1;Ntry.entityManager.addComponent(b,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.TRANSITION,
duration:10,option:{deltaPos:d,targetPos:f},afterAnimate:function(){var b=Ntry.getUtilGrid();g.x==b.x&&g.y==b.y&&(console.log("\ucda9\ub3cc"),Ntry.dispatchEvent("unitAction",Ntry.STATIC.CONTACT_IRON2))}})}})})(f,h,k,l,e)}return Entry.STATIC.BREAK}}},maze_brown_punch:{skeleton:"basic",mode:"maze",color:"#6C483A",syntax:["Scope","right"],params:[{type:"Image",img:"/img/assets/maze/sprite/brown_icon.png",size:24}],func:function(){if(this.isContinue){if(this.isAction)return Entry.STATIC.BREAK;delete this.isAction;
delete this.isContinue}else{var c=this,b=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),d;$.each(b,function(b,c){d=b;components=c.components});var b=Ntry.entityManager.getComponent(d,Ntry.STATIC.UNIT),e=$.extend({},Ntry.entityManager.getComponent(d,Ntry.STATIC.GRID));if(Ntry.checkCollisionTile(e,b.direction,[Ntry.STATIC.OBSTACLE_ICE],1))return this.isAction=this.isContinue=!0,Ntry.dispatchEvent("unitAction",Ntry.STATIC.ATTACK,function(){Ntry.dispatchEvent("destroyObstacle",1,function(b){switch(b){case Ntry.STATIC.OBSTACLE_DESTROY_SUCCESS:c.isAction=
!1}})}),Entry.STATIC.BREAK;Ntry.dispatchEvent("playSound",Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT);Ntry.dispatchEvent("complete",!1,Ntry.STATIC.NOT_FOUND_DESTORY_OBJECT)}}},maze_repeat_until_3:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicWhile","true"],params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/tile_goal_01.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],statements:[{accept:"basic"}],func:function(){var c=!1,b=this.block.statements[0];if(0!==
b.getBlocks().length){var d=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),e,f;for(f in d)e=d[f];if(Ntry.entityManager.getComponent(e.id,Ntry.STATIC.UNIT).isStartedUnit){var d=Ntry.entityManager.getComponent(e.id,Ntry.STATIC.GRID),d=Ntry.entityManager.getEntitiesByGrid(d.x,d.y),g;for(g in d)if(e=d[g],f=Ntry.entityManager.getComponent(e.id,Ntry.STATIC.TILE),e=Ntry.entityManager.getComponent(e.id,Ntry.STATIC.ITEM),f&&e&&f.tileType===Ntry.STATIC.GOAL&&e.itemType===Ntry.STATIC.GOAL_ITEM){c=
!0;break}}if(!c)return this.executor.stepInto(b),Entry.STATIC.BREAK}}},maze_repeat_until_4:{parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/tile_goal_02.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_5:{parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/tile_goal_03.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_6:{parent:"maze_repeat_until_3",
params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-1.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_7:{parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-4.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_8:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-5.png",size:18},{type:"Image",
img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_9:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-6.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_10:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-7.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",
size:24}]},maze_repeat_until_11:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-9.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_12:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-10.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_13:{template:Lang.template.maze_repeat_until_7,
parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-11.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_14:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",img:"/img/assets/maze/bitmap/ws/blcok-12.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_repeat_until_15:{template:Lang.template.maze_repeat_until_7,parent:"maze_repeat_until_3",params:[{type:"Image",
img:"/img/assets/maze/bitmap/ws/tile_goal_04.png",size:18},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}]},maze_radar_check:{skeleton:"basic_boolean_field",mode:"maze",color:"#AEB8FF",params:[{type:"Dropdown",options:[[Lang.Menus.maze_distance1,"1"],[Lang.Menus.maze_distance2,"2"]],value:"1",fontSize:11},{type:"Dropdown",options:[[Lang.Menus.maze_object_trap,"TRAP"],[Lang.Menus.maze_object_monster,"MONSTER"],[Lang.Menus.maze_object_obstacle1,"OBSTACLE"]],value:"TRAP",fontSize:11}],
paramsKeyMap:{DISTANCE:0,TYPE:1},func:function(c,b){c=b.getNumberField("DISTANCE",b);b=b.getField("TYPE",b);c=Ntry.getRadarEntityIdByDistance(c);var d;if(c)switch(Ntry.entityManager.getComponent(c,Ntry.STATIC.TILE).tileType){case Ntry.STATIC.OBSTACLE_HOLE:d="TRAP";break;case Ntry.STATIC.OBSTACLE_ENERMY1:case Ntry.STATIC.OBSTACLE_ENERMY2:case Ntry.STATIC.OBSTACLE_ENERMY3:case Ntry.STATIC.OBSTACLE_ENERMY4:case Ntry.STATIC.OBSTACLE_ENERMY5:d="MONSTER";break;case Ntry.STATIC.OBSTACLE_IRON:d="OBSTACLE"}else d=
"TRAP";return b===d?!0:!1}},maze_step_if_5:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == bee"],params:[{type:"Image",img:"../../../img/assets/ntry/bitmap/maze2/obstacle_01.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,
Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_BEE});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_step_if_6:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == bee"],params:[{type:"Image",img:"../../../img/assets/maze/bitmap/stage4/road_4_01.png",
size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.ROAD});
this.isContinue=!0;c=this.block.statements[0];if(!(0<b.length)&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_step_if_7:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == ice"],params:[{type:"Image",img:"../../../img/assets/maze/bitmap/stage4/obj_ice_01.png",size:18},{type:"Image",img:"/img/assets/week/blocks/if.png",size:24}],statements:[{accept:"basic"}],func:function(){if(!this.isContinue){var c=Ntry.entityManager.getEntitiesByComponent(Ntry.STATIC.UNIT),
b,d;for(d in c)b=c[d];c=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.UNIT);b=Ntry.entityManager.getComponent(b.id,Ntry.STATIC.GRID);b={x:b.x,y:b.y};Ntry.addVectorByDirection(b,c.direction,1);b=Ntry.entityManager.find({type:Ntry.STATIC.GRID,x:b.x,y:b.y},{type:Ntry.STATIC.TILE,tileType:Ntry.STATIC.OBSTACLE_ICE});this.isContinue=!0;c=this.block.statements[0];if(0!==b.length&&0!==c.getBlocks().length)return this.executor.stepInto(c),Entry.STATIC.BREAK}}},maze_step_if_8:{parent:"_if","class":"",syntax:{js:[],
py:[]}},maze_step_if_else:{parent:"if_else","class":"",syntax:{js:[],py:[]}},test_wrapper:{skeleton:"basic",mode:"maze",color:"#3BBD70",params:[{type:"Block",accept:"basic_boolean_field",value:[{type:"test",params:[30,50]}]},{type:"Dropdown",options:[[1,1],[2,2],[3,3],[4,4],[5,5],[6,6],[7,7],[8,8],[9,9],[10,10]],value:1}]},basic_button:{skeleton:"basic_button",color:"#eee",params:[{type:"Text",text:"basic button",color:"#333",align:"center"}]},dplay_get_number_sensor_value:{parent:"arduino_get_number_sensor_value",
isNotFor:["dplay"],def:{params:[{type:"arduino_get_sensor_number"}],type:"dplay_get_number_sensor_value"},"class":"dplay_get",syntax:{js:[],py:["Dplay.sensor_value(%1)"]}},dplay_get_dust_sensor_value:{parent:"arduino_get_number_sensor_value",template:"\uc544\ub0a0\ub85c\uadf8 %1 \ubc88  \uba3c\uc9c0 \uc13c\uc11c\uac12",isNotFor:["dplay"],def:{params:[{type:"arduino_get_sensor_number"}],type:"dplay_get_dust_sensor_value"},"class":"dplay_get",syntax:{js:[],py:["Dplay.dust_sensor_value(%1)"]}},dplay_get_CO2_sensor_value:{parent:"arduino_get_number_sensor_value",
template:"\uc544\ub0a0\ub85c\uadf8 %1 \ubc88  \uc774\uc0b0\ud654\ud0c4\uc18c \uc13c\uc11c\uac12",isNotFor:["dplay"],def:{params:[{type:"arduino_get_sensor_number"}],type:"dplay_get_CO2_sensor_value"},"class":"dplay_get",syntax:{js:[],py:["Dplay.co2_sensor_value(%1)"]}},dplay_get_gas_sensor_value:{parent:"arduino_get_number_sensor_value",isNotFor:["dplay"],template:"\uc544\ub0a0\ub85c\uadf8 %1 \ubc88 \uac00\uc2a4 \uc13c\uc11c\uac12",def:{params:[{type:"arduino_get_sensor_number"}],type:"dplay_get_gas_sensor_value",
id:"hh5b"},paramsKeyMap:{VALUE:0},"class":"dplay_get",func:function(c,b){c=b.getValue("VALUE",b);return Entry.hw.getAnalogPortValue(c[1])},syntax:{js:[],py:["Dplay.gas_sensor_value(%1)"]}},dplay_convert_scale:{parent:"arduino_convert_scale",isNotFor:["dplay"],def:{params:[{type:"arduino_get_number_sensor_value",params:[{type:"arduino_get_sensor_number",id:"bl5e"}]},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"dplay_convert_scale"},
"class":"dplay_get",syntax:{js:[],py:["Dplay.convert_scale(%1, %2, %3, %4, %5)"]}},dplay_get_value:{color:"#00979D",fontColor:"#FFF",skeleton:"basic_string_field",statements:[],template:"\uc544\ub0a0\ub85c\uadf8 %1 \ubc88  %2 \uc13c\uc11c\uac12",params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["\uc801\uc678\uc120","INFR"],["\uac00\ubcc0\uc800\ud56d","ADJU"],["\ube5b\uc13c\uc11c","LIGHT"],["\uc628\ub3c4\uc13c\uc11c","TEMP"],["\uc870\uc774\uc2a4\ud2f1 X","JOYSX"],["\uc870\uc774\uc2a4\ud2f1 Y",
"JOYSY"]],value:"INFR",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[{type:"arduino_get_sensor_number"},null],type:"dplay_get_value",id:"hh5b"},paramsKeyMap:{VALUE:0,OPERATOR:1},"class":"dplay_get",isNotFor:["dplay"],func:function(c,b){c=b.getValue("VALUE",b);return Entry.hw.getAnalogPortValue(c[1])},syntax:{js:[],py:["Dplay.value(%1, %2)"]}},dplay_get_digital_value:{parent:"arduino_get_digital_value",isNotFor:["dplay"],def:{params:[{type:"arduino_get_port_number"}],type:"dplay_get_digital_value"},
"class":"dplay_get",syntax:{js:[],py:["Dplay.digital_value(%1)"]}},dplay_get_switch_status:{color:"#00979D",fontColor:"#FFF",skeleton:"basic_boolean_field",statements:[],template:"\ub514\uc9c0\ud138 %1 \ubc88 \uc2a4\uc704\uce58\uac00 %2  ",params:[{type:"Dropdown",options:[["2","2"],["4","4"]],value:"2",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[["\ub20c\ub9bc","ON"],["\uc5f4\ub9bc","OFF"]],value:"ON",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},
def:{params:[null,null],type:"dplay_get_switch_status"},paramsKeyMap:{PORT:0,STATUS:1},"class":"dplay_get",isNotFor:["dplay"],func:function(c,b){c=b.getField("PORT");var d=2;"2"==c?d=2:"4"==c&&(d=4);return"ON"==b.getField("STATUS")?1==Entry.hw.getDigitalPortValue(d)?1:0:0==Entry.hw.getDigitalPortValue(d)?1:0},syntax:{js:[],py:["Dplay.switch_status(%1, %2)"]}},dplay_get_tilt:{color:"#00979D",fontColor:"#FFF",skeleton:"basic_boolean_field",statements:[],template:"\ub514\uc9c0\ud138  %1 \ubc88 \uae30\uc6b8\uae30\uc13c\uc11c\uac00 %2  ",
params:[{type:"Dropdown",options:[["2","2"],["4","4"]],value:"2",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[["\uc67c\ucabd","LEFT"],["\uc624\ub978\ucabd","LIGHT"]],value:"LEFT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null,null],type:"dplay_get_tilt"},paramsKeyMap:{PORT:0,STATUS:1},"class":"dplay_get",isNotFor:["dplay"],func:function(c,b){c=b.getField("PORT");var d=2;"2"==c?d=2:"4"==c&&(d=4);return"LIGHT"==b.getField("STATUS")?1==
Entry.hw.getDigitalPortValue(d)?1:0:0==Entry.hw.getDigitalPortValue(d)?1:0},syntax:{js:[],py:["Dplay.tilt(%1, %2)"]}},dplay_toggle_led:{parent:"arduino_toggle_led",isNotFor:["dplay"],def:{params:[{type:"arduino_get_port_number"},null,null],type:"dplay_toggle_led"},"class":"dplay_set",syntax:{js:[],py:["Dplay.toggle_led(%1)"]}},dplay_toggle_pwm:{parent:"arduino_toggle_pwm",isNotFor:["dplay"],def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"dplay_toggle_pwm"},
"class":"dplay_set",syntax:{js:[],py:["Dplay.toggle_pwm(%1, %2)"]}},dplay_select_led:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\ub514\uc9c0\ud138 %1 LED \uc0c1\ud0dc\ub97c %2 %3",params:[{type:"Dropdown",options:[["7","7"],["8","8"],["12","12"],["13","13"]],value:"7",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[["\ucf1c\uae30","ON"],["\ub044\uae30","OFF"]],value:"ON",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"dplay_select_led"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"dplay_set",isNotFor:["dplay"],func:function(c,b){var d=b.getField("PORT");c=7;"7"==d?c=7:"8"==d?c=8:"12"==d?c=12:"13"==d&&(c=13);d=b.getField("OPERATOR");Entry.hw.setDigitalPortValue(c,"ON"==d?255:0);return b.callReturn()},syntax:{js:[],py:["Dplay.select_led(%1, %2)"]}},dplay_DCmotor:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"%1  DC\ubaa8\ud130 \uc0c1\ud0dc\ub97c %2 %3",
params:[{type:"Dropdown",options:[["\uc67c\ucabd","1"],["\uc624\ub978\ucabd","2"],["\uc591\ucabd","3"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[["\uc815\ubc29\ud5a5","FRONT"],["\uc5ed\ubc29\ud5a5","REAR"],["\uc815\uc9c0","OFF"]],value:"FRONT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"dplay_DCmotor"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"dplay_set",
isNotFor:["dplay"],func:function(c,b){var d=b.getField("PORT"),e=c=0,f=0,g=0;"1"==d?(c=3,e=5):"2"==d?(c=6,e=11):"3"==d&&(c=3,e=5,f=11,g=6);var d=Entry.dplay.vel_value,h=b.getField("OPERATOR"),k=0,l=0;"FRONT"==h?(k=d,l=0):"REAR"==h?(k=0,l=d):"OFF"==h&&(l=k=0);Entry.hw.setDigitalPortValue(c,l);Entry.hw.setDigitalPortValue(e,k);Entry.hw.setDigitalPortValue(f,l);Entry.hw.setDigitalPortValue(g,k);return b.callReturn()},syntax:{js:[],py:["Dplay.dc_motor(%1, %2)"]}},dplay_DCmotor_speed:{color:"#00979D",
fontColor:"#FFF",skeleton:"basic",statements:[],template:"%1 DC\ubaa8\ud130 \uc18d\ub3c4\ub97c %2(\uc73c)\ub85c \uc815\ud558\uae30 %3",params:[{type:"Dropdown",options:[["\uc67c\ucabd","1"],["\uc624\ub978\ucabd","2"],["\uc591\ucabd","3"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["100"]},null],type:"dplay_DCmotor_speed"},paramsKeyMap:{PORT:0,
VALUE:1},"class":"dplay_set",isNotFor:["dplay"],func:function(c,b){var d=c=0,e=0,f=0,g=0,h=0,k=0,k=b.getField("PORT");"1"==k?(c=3,d=5):"2"==k?(c=11,d=6):"3"==k&&(c=3,d=5,e=11,f=6);k=b.getNumberValue("VALUE",b);k=Math.max(k,-100);k=Math.min(k,100);0==k?(h=g=0,Entry.dplay.vel_value=h):0<k?(k=Math.round(k+155),g=0,h=k,Entry.dplay.vel_value=h):0>k&&(k=Math.round(k-155),g=-k,h=0,Entry.dplay.vel_value=g);if(b.isStart){if(1==b.timeFlag)return Entry.hw.setDigitalPortValue(3,0),Entry.hw.setDigitalPortValue(5,
0),Entry.hw.setDigitalPortValue(6,0),Entry.hw.setDigitalPortValue(11,0),b;if(2==b.timeFlag)return Entry.hw.setDigitalPortValue(c,g),Entry.hw.setDigitalPortValue(d,h),Entry.hw.setDigitalPortValue(e,g),Entry.hw.setDigitalPortValue(f,h),delete b.isStart,delete b.timeFlag,Entry.engine.isContinue=!1,b.callReturn()}else{b.isStart=!0;b.timeFlag=1;var l=setTimeout(function(){b.timeFlag=2;Entry.dplay.removeTimeout(l)},50);Entry.dplay.timeouts.push(l);return b}},syntax:{js:[],py:["Dplay.dc_motor_speed(%1, %2)"]}},
dplay_buzzer:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\ub514\uc9c0\ud138 10\ubc88 \ubd80\uc800\ub97c %1 %2 %3 \ubc15\uc790\ub85c \uc5f0\uc8fc\ud558\uae30",params:[{type:"Dropdown",options:[["\ub3c4","1"],["\ub3c4#","2"],["\ub808","3"],["\ubbf8b","4"],["\ubbf8","5"],["\ud30c","6"],["\ud30c#","7"],["\uc194","8"],["\uc194#","9"],["\ub77c","10"],["\uc2dcb","11"],["\uc2dc","12"],["\ubb34\uc74c","100"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",
options:[["1","1"],["2","2"],["3","3"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["1","1",{type:"text",params:["0.5"]},null],type:"dplay_buzzer"},paramsKeyMap:{NOTE:0,OCTAVE:1,VALUE:2},"class":"dplay_set",isNotFor:["dplay"],func:function(c,b){if(b.isStart){if(1==b.timeFlag)return b;Entry.hw.setDigitalPortValue(10,100);delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=
!1;return b.callReturn()}c=b.getNumberField("NOTE",b);var d=b.getNumberField("OCTAVE",b),e=b.getNumberValue("VALUE"),d=c+12*(d-1),e=6E4*e/60;b.isStart=!0;b.timeFlag=1;100==c?Entry.hw.setDigitalPortValue(10,100):Entry.hw.setDigitalPortValue(10,d);if(100<e){var f=setTimeout(function(){Entry.hw.setDigitalPortValue(10,100);Entry.dplay.removeTimeout(f)},e-100);Entry.dplay.timeouts.push(f)}var g=setTimeout(function(){b.timeFlag=0;Entry.dplay.removeTimeout(g)},e);Entry.dplay.timeouts.push(g);return b},syntax:{js:[],
py:["Dplay.buzzer(%1, %2, %3)"]}},dplay_servo:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\ub514\uc9c0\ud138 9\ubc88 \uc11c\ubcf4\ubaa8\ud130 \uac01\ub3c4\ub97c %1 (\ub3c4)\ub85c \uc774\ub3d9",params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["180"]},null],type:"dplay_servo"},paramsKeyMap:{VALUE:0},"class":"dplay_set",isNotFor:["dplay"],func:function(c,b){c=b.getNumberValue("VALUE");
c=Math.round(c);c=Math.max(c,1);c=Math.min(c,179);Entry.hw.setDigitalPortValue(9,c);return b.callReturn()},syntax:{js:[],py:["Dplay.servo(%1)"]}},dplay_Robot_run:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\ub85c\ubd07\uc744 %1 \ud558\uae30 %2",params:[{type:"Dropdown",options:[["\uc804\uc9c4","1"],["\ud6c4\uc9c4","2"],["\uc6b0\ud68c\uc804","3"],["\uc88c\ud68c\uc804","4"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,null],type:"dplay_Robot_run"},paramsKeyMap:{PORT:0},"class":"dplay_robot",isNotFor:["dplay"],func:function(c,b){c=b.getField("PORT");var d=0,e=0,f=0,g=0,h=Entry.dplay.Left_value,k=Entry.dplay.Right_value;"1"==c?(d=0,e=h,f=k,g=0):"2"==c?(d=h,f=e=0,g=k):"3"==c?(d=0,e=h,g=f=0):"4"==c&&(e=d=0,f=k,g=0);Entry.hw.setDigitalPortValue(3,d);Entry.hw.setDigitalPortValue(5,e);Entry.hw.setDigitalPortValue(6,f);Entry.hw.setDigitalPortValue(11,g);return b.callReturn()},syntax:{js:[],
py:["Dplay.robot_run(%1)"]}},dplay_Robot_run_sec:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\ub85c\ubd07\uc744 %1 \ucd08 \ub3d9\uc548 %2 \ud558\uae30 %3",params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[["\uc804\uc9c4","1"],["\ud6c4\uc9c4","2"],["\uc6b0\ud68c\uc804","3"],["\uc88c\ud68c\uc804","4"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",
params:["1"]},null,null],type:"dplay_Robot_run_sec"},paramsKeyMap:{VALUE:0,PORT:1},"class":"dplay_robot",isNotFor:["dplay"],func:function(c,b){var d=c=0,e=0,f=0,g=Entry.dplay.Left_value,h=Entry.dplay.Right_value,k=b.getField("PORT");if(b.isStart){if(1==b.timeFlag)return"1"==k?(c=0,d=g,e=h,f=0):"2"==k?(c=g,e=d=0,f=h):"3"==k?(c=0,d=g,f=e=0):"4"==k&&(d=c=0,e=h,f=0),Entry.hw.setDigitalPortValue(3,c),Entry.hw.setDigitalPortValue(5,d),Entry.hw.setDigitalPortValue(6,e),Entry.hw.setDigitalPortValue(11,f),
b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;f=e=d=c=0;return b.callReturn()}b.isStart=!0;b.timeFlag=1;c=1E3*b.getNumberValue("VALUE");var l=setTimeout(function(){b.timeFlag=0;Entry.dplay.removeTimeout(l)},c);Entry.dplay.timeouts.push(l);return b},syntax:{js:[],py:["Dplay.robot_run_sec(%1, %2)"]}},dplay_robot_speed_sel:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"%1 \ubc14\ud034 \uc18d\ub3c4\ub97c %2(\uc73c)\ub85c \uc815\ud558\uae30 %3",params:[{type:"Dropdown",
options:[["\uc67c\ucabd","1"],["\uc624\ub978\ucabd","2"],["\uc591\ucabd","3"]],value:"1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["100"]},null],type:"dplay_robot_speed_sel"},paramsKeyMap:{PORT:0,VALUE:1},"class":"dplay_robot",isNotFor:["dplay"],func:function(c,b){var d=c=0,e=0,f=0,g=0,h=0,k=0,l=0,m=0,q=b.getField("PORT"),n=b.getNumberValue("VALUE",
b),n=Math.max(n,-100),n=Math.min(n,100);"1"==q&&(c=3,d=5,0<n?(m=Math.round(n+155),g=0,h=m,Entry.dplay.Left_value=h):0>n?(m=Math.round(n-155),g=-m,h=0,Entry.dplay.Left_value=g):0==n&&(h=g=0,Entry.dplay.Left_value=0));"2"==q&&(e=6,f=11,0<n?(m=Math.round(n+155),k=0,l=m,Entry.dplay.Right_value=l):0>n?(m=Math.round(n-155),k=-m,l=0,Entry.dplay.Right_value=k):0==n&&(l=k=0,Entry.dplay.Right_value=k));"3"==q&&(c=3,d=5,e=6,f=11,0<n?(m=Math.round(n+155),g=0,h=m,k=0,l=m,Entry.dplay.Left_value=h,Entry.dplay.Right_value=
l):0>n?(m=Math.round(n-155),g=-m,h=0,k=-m,l=0,Entry.dplay.Left_value=g,Entry.dplay.Right_value=k):0==n&&(l=k=h=g=0,Entry.dplay.Left_value=0,Entry.dplay.Right_value=0));if(b.isStart){if(1==b.timeFlag)return Entry.hw.setDigitalPortValue(3,0),Entry.hw.setDigitalPortValue(5,0),Entry.hw.setDigitalPortValue(6,0),Entry.hw.setDigitalPortValue(11,0),b;if(2==b.timeFlag)return Entry.hw.setDigitalPortValue(c,g),Entry.hw.setDigitalPortValue(d,h),Entry.hw.setDigitalPortValue(e,l),Entry.hw.setDigitalPortValue(f,
k),delete b.isStart,delete b.timeFlag,Entry.engine.isContinue=!1,b.callReturn()}else{b.isStart=!0;b.timeFlag=1;var t=setTimeout(function(){b.timeFlag=2;Entry.dplay.removeTimeout(t)},50);Entry.dplay.timeouts.push(t);return b}}},dplay_robot_speed_set:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\uc624\ub978\ucabd \ubc14\ud034 %1 \uc67c\ucabd \ubc14\ud034 %2(\uc73c)\ub85c \uc815\ud558\uae30 %3",params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["100"]},{type:"text",params:["100"]},null],type:"dplay_robot_speed_set"},paramsKeyMap:{R_VALUE:0,L_VALUE:1},"class":"dplay_robot",isNotFor:["dplay"],func:function(c,b){var d=c=0,e=0,f=0,g=0,g=0,g=b.getNumberValue("L_VALUE",b),g=Math.max(g,-100),g=Math.min(g,100);0<g?(g=Math.round(g+155),c=0,d=g,Entry.dplay.Left_value=d):0>g?(g=Math.round(g-155),c=-g,d=0,Entry.dplay.Left_value=c):0==g&&(d=c=0,Entry.dplay.Left_value=
0);g=b.getNumberValue("R_VALUE",b);g=Math.max(g,-100);g=Math.min(g,100);0<g?(g=Math.round(g+155),e=0,f=g,Entry.dplay.Right_value=f):0>g?(g=Math.round(g-155),e=-g,f=0,Entry.dplay.Right_value=e):0==g&&(f=e=0,Entry.dplay.Right_value=0);if(b.isStart){if(1==b.timeFlag)return Entry.hw.setDigitalPortValue(3,0),Entry.hw.setDigitalPortValue(5,0),Entry.hw.setDigitalPortValue(6,0),Entry.hw.setDigitalPortValue(11,0),b;if(2==b.timeFlag)return Entry.hw.setDigitalPortValue(3,c),Entry.hw.setDigitalPortValue(5,d),
Entry.hw.setDigitalPortValue(6,f),Entry.hw.setDigitalPortValue(11,e),delete b.isStart,delete b.timeFlag,Entry.engine.isContinue=!1,b.callReturn()}else{b.isStart=!0;b.timeFlag=1;var h=setTimeout(function(){b.timeFlag=2;Entry.dplay.removeTimeout(h)},50);Entry.dplay.timeouts.push(h);return b}},syntax:{js:[],py:["Dplay.robot_speed_sel(%1, %2)"]}},dplay_robot_stop:{color:"#00979D",fontColor:"#FFF",skeleton:"basic",statements:[],template:"\ub85c\ubd07\uc744 \uc815\uc9c0\ud558\uae30 %1",params:[{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"dplay_robot_stop"},paramsKeyMap:{},"class":"dplay_robot",isNotFor:["dplay"],func:function(c,b){Entry.hw.setDigitalPortValue(3,0);Entry.hw.setDigitalPortValue(5,0);Entry.hw.setDigitalPortValue(11,0);Entry.hw.setDigitalPortValue(6,0);return b.callReturn()},syntax:{js:[],py:["Dplay.robot_stop()"]}},nemoino_get_number_sensor_value:{parent:"arduino_get_number_sensor_value",isNotFor:["nemoino"],def:{params:[{type:"arduino_get_sensor_number"}],
type:"nemoino_get_number_sensor_value"},"class":"arduino_value",syntax:{js:[],py:["Nemoino.sensor_value(%1)"]}},nemoino_get_digital_value:{parent:"arduino_get_digital_value",isNotFor:["nemoino"],def:{params:[{type:"arduino_get_port_number"}],type:"nemoino_get_digital_value"},"class":"arduino_value",syntax:{js:[],py:["Nemoino.digital_value(%1)"]}},nemoino_toggle_led:{parent:"arduino_toggle_led",isNotFor:["nemoino"],def:{params:[{type:"arduino_get_port_number"},null,null],type:"nemoino_toggle_led"},
"class":"arduino_set",syntax:{js:[],py:["Nemoino.toggle_led(%1)"]}},nemoino_toggle_pwm:{parent:"arduino_toggle_pwm",isNotFor:["nemoino"],def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"nemoino_toggle_pwm"},"class":"arduino_set",syntax:{js:[],py:["Nemoino.toggle_pwm(%1, %2)"]}},nemoino_convert_scale:{parent:"arduino_convert_scale",isNotFor:["nemoino"],def:{params:[{type:"arduino_get_number_sensor_value",params:[{type:"arduino_get_sensor_number"}]},
{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"nemoino_convert_scale"},"class":"arduino",syntax:{js:[],py:["Nemoino.convert_scale(%1, %2, %3, %4, %5)"]}},sensorBoard_get_number_sensor_value:{parent:"arduino_get_number_sensor_value",isNotFor:["sensorBoard"],def:{params:[{type:"arduino_get_sensor_number"}],type:"sensorBoard_get_number_sensor_value"},"class":"arduino_value",syntax:{js:[],py:["SensorBoard.get_number_sensor_value(%1)"]}},
sensorBoard_get_digital_value:{parent:"arduino_get_digital_value",isNotFor:["sensorBoard"],def:{params:[{type:"arduino_get_port_number"}],type:"sensorBoard_get_digital_value"},"class":"arduino_value",syntax:{js:[],py:["SensorBoard.get_digital_value(%1)"]}},sensorBoard_toggle_led:{parent:"arduino_toggle_led",isNotFor:["sensorBoard"],def:{params:[{type:"arduino_get_port_number"},null,null],type:"sensorBoard_toggle_led"},"class":"arduino_set",syntax:{js:[],py:["SensorBoard.toggle_led(%1)"]}},sensorBoard_toggle_pwm:{parent:"arduino_toggle_pwm",
isNotFor:["sensorBoard"],def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"sensorBoard_toggle_pwm"},"class":"arduino_set",syntax:{js:[],py:["SensorBoard.toggle_pwm(%1, %2)"]}},sensorBoard_convert_scale:{parent:"arduino_convert_scale",isNotFor:["sensorBoard"],def:{params:[{type:"arduino_get_number_sensor_value",params:[{type:"arduino_get_sensor_number",id:"bl5e"}]},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},
{type:"number",params:["100"]}],type:"sensorBoard_convert_scale"},"class":"arduino",syntax:{js:[],py:["SensorBoard.convert_scale(%1, %2, %3, %4, %5)"]}},ardublock_get_number_sensor_value:{parent:"arduino_get_number_sensor_value",isNotFor:["ardublock"],def:{params:[{type:"arduino_get_sensor_number"}],type:"ardublock_get_number_sensor_value"},"class":"arduino_value"},ardublock_get_digital_value:{parent:"arduino_get_digital_value",isNotFor:["ardublock"],def:{params:[{type:"arduino_get_port_number"}],
type:"ardublock_get_digital_value"},"class":"arduino_value",syntax:{js:[],py:[]}},ardublock_toggle_led:{parent:"arduino_toggle_led",isNotFor:["ardublock"],def:{params:[{type:"arduino_get_port_number"},null,null],type:"ardublock_toggle_led"},"class":"arduino_set"},ardublock_toggle_pwm:{parent:"arduino_toggle_pwm",isNotFor:["ardublock"],def:{params:[{type:"arduino_get_pwm_port_number"},{type:"arduino_text",params:["255"]},null],type:"ardublock_toggle_pwm"},"class":"arduino_set"},ardublock_convert_scale:{parent:"arduino_convert_scale",
isNotFor:["ardublock"],def:{params:[{type:"arduino_get_number_sensor_value",params:[{type:"arduino_get_sensor_number"}]},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"ardublock_convert_scale"},"class":"arduino"},joystick_get_number_sensor_value:{parent:"arduino_get_number_sensor_value",isNotFor:["joystick"],def:{params:[{type:"arduino_get_sensor_number"}],type:"joystick_get_number_sensor_value"},"class":"arduino_value"},
joystick_get_digital_value:{parent:"arduino_get_digital_value",isNotFor:["joystick"],def:{params:[{type:"arduino_get_port_number"}],type:"joystick_get_digital_value"},"class":"arduino_value",syntax:{js:[],py:[]}},joystick_toggle_led:{parent:"arduino_toggle_led",isNotFor:["joystick"],def:{params:[{type:"arduino_get_port_number"},null,null],type:"joystick_toggle_led"},"class":"arduino_set"},joystick_toggle_pwm:{parent:"arduino_toggle_pwm",isNotFor:["joystick"],def:{params:[{type:"arduino_get_pwm_port_number"},
{type:"arduino_text",params:["255"]},null],type:"joystick_toggle_pwm"},"class":"arduino_set"},joystick_convert_scale:{parent:"arduino_convert_scale",isNotFor:["joystick"],def:{params:[{type:"arduino_get_number_sensor_value",params:[{type:"arduino_get_sensor_number"}]},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"joystick_convert_scale"},"class":"arduino"},ebs_if:{parent:"_if",def:{type:"_if",params:[{type:"reach_something",
params:[null,"wall"]}]},syntax:{js:[],py:[]}},ebs_if2:{parent:"_if",def:{type:"_if",params:[{type:"reach_something",params:[null,"cwz5"]}]},syntax:{js:[],py:[]}},ai_move_right:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","move"],params:[{type:"Image",img:"/img/assets/week/blocks/moveStep.png",size:24}],func:function(c,b){if(b.isStart){if(b.isAction)return Entry.STATIC.BREAK;delete b.isAction;delete b.isStart}else{b.isStart=!0;b.isAction=!0;Ntry.dispatchEvent("gridChange",function(){b.isAction=
!1});Ntry.entityManager.getComponent(c.id,Ntry.STATIC.SPACE_SHIP).direction=Ntry.STATIC.EAST;var d=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.GRID);Ntry.entityManager.addComponent(c.id,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.ROTATE_TO,animateValue:0});d.x++;return Entry.STATIC.BREAK}}},ai_move_up:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope","up"],params:[{type:"Image",img:"/img/assets/week/blocks/ai_move_up.png",size:24}],func:function(c,b){if(b.isStart){if(b.isAction)return b;
delete b.isAction;delete b.isStart;return b.callReturn()}b.isStart=!0;b.isAction=!0;Ntry.dispatchEvent("gridChange",function(){b.isAction=!1});Ntry.entityManager.getComponent(c.id,Ntry.STATIC.SPACE_SHIP).direction=Ntry.STATIC.NORTH;var d=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.GRID);Ntry.entityManager.addComponent(c.id,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.ROTATE_TO,animateValue:-45});d.x++;d.y--;return b}},ai_move_down:{skeleton:"basic",mode:"maze",color:"#A751E3",syntax:["Scope",
"down"],params:[{type:"Image",img:"/img/assets/week/blocks/ai_move_down.png",size:24}],func:function(c,b){if(b.isStart){if(b.isAction)return b;delete b.isAction;delete b.isStart;return b.callReturn()}b.isStart=!0;b.isAction=!0;Ntry.dispatchEvent("gridChange",function(){b.isAction=!1});Ntry.entityManager.getComponent(c.id,Ntry.STATIC.SPACE_SHIP).direction=Ntry.STATIC.SOUTH;var d=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.GRID);Ntry.entityManager.addComponent(c.id,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.ROTATE_TO,
animateValue:45});d.x++;d.y++;return b}},ai_repeat_until_reach:{skeleton:"basic_loop",mode:"maze",color:"#498DEB",syntax:["BasicWhile","true"],statements:[{accept:"basic"}],params:[{type:"Image",img:"/img/assets/week/blocks/for.png",size:24}],func:function(){var c=this.block.statements[0];if(0!==c.getBlocks().length)return this.executor.stepInto(c)}},ai_if_else_1:{skeleton:"basic_double_loop",mode:"maze",color:"#498DEB",syntax:["BasicIf","front == 'stone'"],statements:[{accept:"basic"},{accept:"basic"}],
params:[{type:"Image",img:"/img/assets/ntry/bitmap/ai/obstacle_1.png",size:24},{type:"Image",img:"/img/assets/week/blocks/for.png",size:24},{type:"LineBreak"}],func:function(c,b){if(b.isLooped)return delete b.isLooped,b.callReturn();c=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.RADAR);var d=this.block.statements,e=1;b.isLooped=!0;c.center.type==Ntry.STATIC.AI_METEO&&1==c.center.distance&&(e=0);this.executor.stepInto(d[e]);return Entry.STATIC.BREAK}},ai_boolean_distance:{skeleton:"basic_boolean_field",
mode:"maze",color:"#2fc9f0",fontColor:"#fff",syntax:["Scope","radar_%1 %2 %3#"],params:[{type:"Dropdown",options:[[Lang.Menus.ai_above,"UP"],[Lang.Menus.ai_front,"RIGHT"],[Lang.Menus.ai_under,"DOWN"]],value:"RIGHT",fontSize:11},{type:"Dropdown",options:[[">","BIGGER"],[">=","BIGGER_EQUAL"],["=","EQUAL"],["<","SMALLER"],["<=","SMALLER_EQUAL"]],value:"BIGGER",fontSize:11},{type:"Block",accept:"string"}],func:function(c,b){c=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.RADAR);var d=this.block.params;
b=d[0];var d=d[1],e=this.getParam(2),f;switch(b){case "UP":f=c.left;break;case "RIGHT":f=c.center;break;case "DOWN":f=c.right}f=f.type==Ntry.STATIC.AI_GOAL?Number.MAX_VALUE:f.distance;switch(d){case "BIGGER":return f>e;case "BIGGER_EQUAL":return f>=e;case "EQUAL":return f==e;case "SMALLER":return f<e;case "SMALLER_EQUAL":return f<=e}}},ai_distance_value:{skeleton:"basic_string_field",mode:"maze",color:"#ffd974",syntax:["Scope","radar_%1#"],params:[{type:"Dropdown",options:[[Lang.Menus.ai_above,"UP"],
[Lang.Menus.ai_front,"RIGHT"],[Lang.Menus.ai_under,"DOWN"]],value:"RIGHT",fontSize:11}],func:function(c,b){c=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.RADAR);switch(this.block.params[0]){case "UP":radarValue=c.left;break;case "RIGHT":radarValue=c.center;break;case "DOWN":radarValue=c.right}return radarValue.type==Ntry.STATIC.AI_GOAL?Number.MAX_VALUE:radarValue.distance}},ai_boolean_object:{skeleton:"basic_boolean_field",fontColor:"#fff",mode:"maze",color:"#2fc9f0",syntax:["Scope","object_%1 == %2#"],
params:[{type:"Dropdown",options:[[Lang.Menus.ai_above,"UP"],[Lang.Menus.ai_front,"RIGHT"],[Lang.Menus.ai_under,"DOWN"]],value:"RIGHT",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[[Lang.Menus.asteroids,"OBSTACLE"],[Lang.Menus.wall,"WALL"],[Lang.Menus.item,"ITEM"]],value:"OBSTACLE",fontSize:11}],func:function(c,b){c=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.RADAR);b=this.block.params;var d;switch(b[0]){case "UP":d=c.left.type;break;case "RIGHT":d=c.center.type;
break;case "DOWN":d=c.right.type}switch(b[1]){case "OBSTACLE":return d==Ntry.STATIC.AI_METEO;case "WALL":return d==Ntry.STATIC.AI_WALL;case "ITEM":return d==Ntry.STATIC.AI_ITEM}}},ai_use_item:{skeleton:"basic",mode:"maze",color:"#EACF11",syntax:["Scope","use_item"],params:[{type:"Image",img:"/img/assets/week/blocks/item.png",size:24}],func:function(c,b){if(b.isStart){if(b.isAction)return b;delete b.isAction;delete b.isStart;return b.callReturn()}Ntry.dispatchEvent("triggerWeapon");b.isStart=!0;b.isAction=
!0;Ntry.dispatchEvent("gridChange",function(){b.isAction=!1});Ntry.entityManager.getComponent(c.id,Ntry.STATIC.SPACE_SHIP).direction=Ntry.STATIC.EAST;var d=Ntry.entityManager.getComponent(c.id,Ntry.STATIC.GRID);Ntry.entityManager.addComponent(c.id,{type:Ntry.STATIC.ANIMATE,animateType:Ntry.STATIC.ROTATE_TO,animateValue:0});d.x++;return b}},ai_boolean_and:{color:"#2fc9f0",skeleton:"basic_boolean_field",fontColor:"#fff",statements:[],syntax:["Scope","%1 && %3#"],params:[{type:"Block",accept:"boolean"},
{type:"Text",text:Lang.Blocks.JUDGEMENT_boolean_and,color:"#fff"},{type:"Block",accept:"boolean"}],events:{},func:function(){return this.getParam(0)&&this.getParam(2)}},ai_True:{color:"#2fc9f0",skeleton:"basic_boolean_field",statements:[],params:[{type:"Text",text:Lang.Blocks.JUDGEMENT_true,color:"#3D3D3D"}],events:{},def:{params:[null],type:"True"},func:function(c,b){return!0},isPrimitive:!0},ai_if_else:{color:"#498deb",skeleton:"basic_double_loop",statements:[{accept:"basic"},{accept:"basic"}],
params:[{type:"Block",accept:"boolean"},{type:"Indicator",img:"block_icon/if.png",size:12},{type:"LineBreak"}],func:function(c,b){if(b.isCondition)return delete b.isCondition,b.callReturn();c=this.getParam(0);b.isCondition=!0;b=this.block.statements[c?0:1];return 0===b.getBlocks().length?this.executor.end():this.executor.stepInto(b)},syntax:["BasicIf","true"]},ev3_color_sensor:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["1","1"],
["2","2"],["3","3"],["4","4"]],value:"1",fontSize:11},{type:"Dropdown",options:[["RGB","RGB"],["R","R"],["G","G"],["B","B"]],value:"RGB",fontSize:11}],events:{},def:{params:[null,null],type:"ev3_color_sensor"},paramsKeyMap:{PORT:0,RGB:1},"class":"ev3_sensor",isNotFor:["EV3"],func:function(c,b){b.getStringField("PORT",b);c=b.getStringField("RGB",b);b=Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b));var d="";if(b.type==Entry.EV3.deviceTypes.Color)if(0==b.siValue)d="";else switch(c){case "RGB":d=
Entry.EV3.colorSensorValue[b.siValue];break;case "R":d=Entry.EV3.colorSensorValue[b.siValue].substring(0,2);break;case "G":d=Entry.EV3.colorSensorValue[b.siValue].substring(2,4);break;case "B":d=Entry.EV3.colorSensorValue[b.siValue].substring(4,6)}else d="\uceec\ub7ec \uc13c\uc11c \uc544\ub2d8";return d}},ev3_get_sensor_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"]],value:"1",fontSize:11}],
events:{},def:{params:[null],type:"ev3_get_sensor_value"},paramsKeyMap:{PORT:0},"class":"ev3_sensor",isNotFor:["EV3"],func:function(c,b){b.getStringField("PORT",b);c=Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b));var d;$.isPlainObject(c)&&(d=c.siValue||0);return d}},ev3_motor_degrees:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["A","A"],["B","B"],["C","C"],["D","D"]],value:"A",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.ev3_cw,"CW"],[Lang.Blocks.ev3_ccw,
"CCW"]],value:"CW",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"angle"}],type:"ev3_motor_degrees"},paramsKeyMap:{PORT:0,DIRECTION:1,DEGREE:2},"class":"ev3_output",isNotFor:["EV3"],func:function(c,b){c=b.getStringField("PORT",b);var d=b.getValue("DEGREE",b);0>=d?d=0:720<=d&&(d=720);var e=b.getStringField("DIRECTION",b);Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Degrees,
degree:d,power:"CW"==e?50:-50};return b.callReturn()}},ev3_motor_power:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["A","A"],["B","B"],["C","C"],["D","D"]],value:"A",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["50"]}],type:"ev3_motor_power"},paramsKeyMap:{PORT:0,VALUE:1},"class":"ev3_output",isNotFor:["EV3"],func:function(c,b){c=b.getStringField("PORT",
b);var d=b.getValue("VALUE",b);Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Power,power:d};return b.callReturn()}},ev3_motor_power_on_time:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["A","A"],["B","B"],["C","C"],["D","D"]],value:"A",fontSize:11},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["2"]},
{type:"number",params:["50"]}],type:"ev3_motor_power_on_time"},paramsKeyMap:{PORT:0,TIME:1,VALUE:2},"class":"ev3_output",isNotFor:["EV3"],func:function(c,b){c=b.getStringField("PORT",b);if(b.isStart){if(1==b.timeFlag)return b;delete b.isStart;delete b.timeFlag;Entry.engine.isContinue=!1;Entry.hw.sendQueue[c]={id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Power,power:0};return b.callReturn()}var d=b.getValue("TIME",b),e=b.getValue("VALUE",b);b.isStart=!0;b.timeFlag=1;Entry.hw.sendQueue[c]=
{id:Math.floor(1E5*Math.random(),0),type:Entry.EV3.motorMovementTypes.Power,power:e};var f=setTimeout(function(){b.timeFlag=0;Entry.EV3.removeTimeout(f)},1E3*d);Entry.EV3.timeouts.push(f);return b}},ev3_touch_sensor:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[["1","1"],["2","2"],["3","3"],["4","4"]],value:"1",fontSize:11}],events:{},def:{params:[null],type:"ev3_touch_sensor"},paramsKeyMap:{PORT:0},"class":"ev3_sensor",isNotFor:["EV3"],
func:function(c,b){b.getStringField("PORT",b);c=Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b));b=!1;c.type==Entry.EV3.deviceTypes.Touch&&1<=Number(c.siValue)&&(b=!0);return b}},roduino_on_block:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[null],type:"roduino_on_block"},paramsKeyMap:{},"class":"roduino_value",isNotFor:["roborobo_roduino"],func:function(c,b){return"1"}},roduino_off_block:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[null],type:"roduino_off_block"},paramsKeyMap:{},"class":"roduino_value",isNotFor:["roborobo_roduino"],func:function(c,b){return"0"}},roduino_get_analog_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["0","0"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"]],value:"0",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],
events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getStringField("PORT")}},roduino_get_port_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"]],value:"2",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getStringField("PORT")}},roduino_get_analog_value:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"roduino_get_analog_number"}],type:"roduino_get_analog_value"},paramsKeyMap:{VALUE:0},"class":"roduino_value",isNotFor:["roborobo_roduino"],func:function(c,b){c=parseInt(b.getValue("VALUE",b));Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.ANALOG_READ,c]);return Entry.hw.getAnalogPortValue(c)}},roduino_get_digital_value:{color:"#00979D",fontColor:"#fff",
skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"roduino_get_port_number"}],type:"roduino_get_digital_value"},paramsKeyMap:{VALUE:0},"class":"roduino_value",isNotFor:["roborobo_roduino"],func:function(c,b){c=b.getNumberValue("VALUE",b);Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.DIGITAL_READ,c]);return Entry.hw.portData[c-2]}},roduino_get_color:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",
statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.roborobo_color_red,"red"],[Lang.Blocks.roborobo_color_green,"green"],[Lang.Blocks.roborobo_color_blue,"blue"],[Lang.Blocks.roborobo_color_yellow,"yellow"]],value:"red",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null],type:"roduino_get_color"},paramsKeyMap:{VALUE:0},"class":"roduino_value",isNotFor:["roborobo_roduino"],func:function(c,b){c=0;b=b.getField("VALUE",b);var d=[Entry.hw.portData[Entry.Roborobo_Roduino.ColorPin[0]-
2],Entry.hw.portData[Entry.Roborobo_Roduino.ColorPin[1]-2],Entry.hw.portData[Entry.Roborobo_Roduino.ColorPin[2]-2]];switch(b){case "red":1==d[0]&&0==d[1]&&0==d[2]&&(c=1);break;case "green":0==d[0]&&1==d[1]&&0==d[2]&&(c=1);break;case "blue":0==d[0]&&0==d[1]&&1==d[2]&&(c=1);break;case "yellow":1==d[0]&&1==d[1]&&1==d[2]&&(c=1)}return c}},roduino_set_digital:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.roborobo_on,"on"],
[Lang.Blocks.roborobo_off,"off"]],value:"on",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"roduino_get_port_number"},null,null],type:"roduino_set_digital"},paramsKeyMap:{VALUE:0,OPERATOR:1},"class":"roduino_set",isNotFor:["roborobo_roduino"],func:function(c,b){c=b.getNumberValue("VALUE",b);var d=b.getField("OPERATOR");Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.DIGITAL_WRITE,
c,"on"==d?1:0]);return b.callReturn()}},roduino_motor:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.roborobo_motor1,"motor1"],[Lang.Blocks.roborobo_motor2,"motor2"]],value:"motor1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Dropdown",options:[[Lang.Blocks.roborobo_motor_CW,"cw"],[Lang.Blocks.roborobo_motor_CCW,"ccw"],[Lang.Blocks.roborobo_motor_stop,"stop"]],value:"cw",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",
img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"roduino_motor"},paramsKeyMap:{MODE:0,OPERATOR:1},"class":"roduino_set",isNotFor:["roborobo_roduino"],func:function(c,b){pin2=0;var d;value2=0;c=b.getField("MODE");d=b.getField("OPERATOR");"motor1"==c?(c=9,pin2=10):(c=11,pin2=12);"cw"==d?(d=1,value2=0):"ccw"==d?(d=0,value2=1):value2=d=0;Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.MOTOR,c,d,pin2,value2]);return b.callReturn()}},roduino_set_color_pin:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"number",params:["2"]},{type:"number",params:["3"]},{type:"number",params:["4"]},null],type:"roduino_set_color_pin"},paramsKeyMap:{RED:0,GREEN:1,BLUE:2},"class":"roduino_set",isNotFor:["roborobo_roduino"],func:function(c,b){c=b.getNumberValue("RED",b);var d=b.getNumberValue("GREEN",
b),e=b.getNumberValue("BLUE",b);Entry.Roborobo_Roduino.ColorPin=[c,d,e];Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_Roduino.INSTRUCTION.COLOR,c,d,e]);return b.callReturn()}},schoolkit_on_block:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[null],type:"schoolkit_on_block"},paramsKeyMap:{},"class":"schoolkit_value",isNotFor:["roborobo_schoolkit"],func:function(c,b){return"1"}},schoolkit_off_block:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[null],type:"schoolkit_off_block"},paramsKeyMap:{},"class":"schoolkit_value",isNotFor:["roborobo_schoolkit"],func:function(c,b){return"0"}},schoolkit_get_out_port_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["OUT1",2],["OUT2",3],["OUT3",4],["OUT4",5],["OUT5",6]],value:2,fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],
events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getNumberField("PORT")}},schoolkit_get_in_port_number:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["IN1",7],["IN2",8],["IN3",9],["IN4",10],["IN5",11],["IN6",12],["IN7",13]],value:7,fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null]},paramsKeyMap:{PORT:0},func:function(c,b){return b.getNumberField("PORT")}},schoolkit_set_output:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.roborobo_on,"on"],[Lang.Blocks.roborobo_off,"off"]],value:"on",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"schoolkit_get_out_port_number"},null,null],type:"schoolkit_set_output"},paramsKeyMap:{VALUE:0,OPERATOR:1},"class":"schoolkit_set",isNotFor:["roborobo_schoolkit"],func:function(c,b){c=b.getNumberValue("VALUE",
b);var d=b.getField("OPERATOR");Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.DIGITAL_WRITE,c,"on"==d?1:0]);return b.callReturn()}},schoolkit_get_input_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",accept:"string"}],events:{},def:{params:[{type:"schoolkit_get_in_port_number"}],type:"schoolkit_get_input_value"},paramsKeyMap:{VALUE:0},"class":"schoolkit_value",isNotFor:["roborobo_schoolkit"],func:function(c,b){c=
b.getNumberValue("VALUE",b);Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.DIGITAL_READ,c]);return Entry.hw.portData[c-7]}},schoolkit_motor:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.roborobo_motor1,"motor1"],[Lang.Blocks.roborobo_motor2,"motor2"]],value:"motor1",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Block",accept:"string"},{type:"Dropdown",options:[[Lang.Blocks.roborobo_motor_CW,"cw"],[Lang.Blocks.roborobo_motor_CCW,
"ccw"],[Lang.Blocks.roborobo_motor_stop,"stop"]],value:"cw",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["0"]},null,null],type:"schoolkit_motor"},paramsKeyMap:{MODE:0,VALUE:1,OPERATOR:2},"class":"schoolkit_set",isNotFor:["roborobo_schoolkit"],func:function(c,b){var d;d=b.getField("MODE");c=b.getField("OPERATOR");var e=b.getNumberValue("VALUE");d="motor1"==d?7:8;255<e?e=255:0>e&&(e=
0);"cw"==c?Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.MOTOR,1,d,e]):"ccw"==c?Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.MOTOR,2,d,e]):"stop"==c&&Entry.Roborobo_SchoolKit.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.MOTOR,0,d,e]);return b.callReturn()}},schoolkit_set_servo_value:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"schoolkit_get_out_port_number"},{type:"number",params:["0"]},null],type:"schoolkit_set_servo_value"},paramsKeyMap:{PIN:0,VALUE:1},"class":"schoolkit_set",isNotFor:["roborobo_schoolkit"],func:function(c,b){c=b.getNumberValue("PIN",b);var d=b.getNumberValue("VALUE");0>d?d=0:180<d&&(d=180);Entry.Roborobo_Roduino.setSendData([Entry.Roborobo_SchoolKit.INSTRUCTION.SERVO,c,d]);return b.callReturn()}},codestar_color_single:{color:"#00979D",skeleton:"basic",statements:[],
template:"%1 LED %2 %3",params:[{type:"Dropdown",options:[[Lang.Hw.leftEye,7],[Lang.Hw.rightEye,8]]},{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]]},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[7,"on",null],type:"codestar_color_single"},paramsKeyMap:{PORT:0,ONOFF:1},class:"codestar_output_sensor",isNotFor:["codestar"],func:function(c,b){c=b.getField("PORT");var d=b.getField("ONOFF");Entry.hw.setDigitalPortValue(c,"on"==
d?255:0);return b.callReturn()}},codestar_3color:{color:"#00979D",skeleton:"basic",statements:[],template:"3\uc0c9 LED %1 \ubc1d\uae30 %2 %3",params:[{type:"Dropdown",options:[["\ube68\uac04\uc0c9",9],["\ucd08\ub85d\uc0c9",10],["\ud30c\ub780\uc0c9",11]]},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[9,{type:"number",params:[120]},null],type:"codestar_3color"},paramsKeyMap:{PORT:0,VALUE:1},class:"codestar_output_sensor",isNotFor:["codestar"],
func:function(c,b){c=b.getField("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255);Entry.hw.setDigitalPortValue(c,d);return b.callReturn()}},codestar_vibration:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc9c4\ub3d9\ubaa8\ud130 %1 %2",params:[{type:"Dropdown",options:[[Lang.Blocks.ARDUINO_on,"on"],[Lang.Blocks.ARDUINO_off,"off"]]},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["on",null],type:"codestar_vibration"},
paramsKeyMap:{ONOFF:0},class:"codestar_output_sensor",isNotFor:["codestar"],func:function(c,b){c=b.getField("ONOFF");Entry.hw.setDigitalPortValue(13,"on"==c?255:0);return b.callReturn()}},codestar_buzzer:{color:"#00979D",skeleton:"basic",statements:[],template:"\ubd80\uc800 \ud1a4%1 %2",params:[{type:"Dropdown",options:[["G3",1],["A3",2],["B3",3],["C4",4],["D4",5],["E4",6],["F4",7],["G4",8],["A4",9],["B4",10],["C5",11],["D5",12],["E5",13],["F5",14]]},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[4,null],type:"codestar_buzzer"},paramsKeyMap:{TONE:0},class:"codestar_output_sensor",isNotFor:["codestar"],func:function(c,b){c=b.getField("TONE");Entry.hw.setDigitalPortValue(15,c);return b.callReturn()}},codestar_buzzer_stop:{color:"#00979D",skeleton:"basic",statements:[],template:"\ubd80\uc800 \uc911\uc9c0 %1",params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"codestar_buzzer_stop"},paramsKeyMap:{},class:"codestar_output_sensor",
isNotFor:["codestar"],func:function(c,b){Entry.hw.setDigitalPortValue(15,24);return b.callReturn()}},codestar_servo:{color:"#00979D",skeleton:"basic",statements:[],template:"\uc11c\ubc84\ubaa8\ud130 %1 \ubaa8\ud130\uac12 %2 %3",params:[{type:"Dropdown",options:[["D3","D3"],["D5","D5"],["D6","D6"],["D9","D9"],["D10","D10"],["D11","D11"]]},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["D3",{type:"number",params:[90]},null],type:"codestar_servo"},
paramsKeyMap:{PORT:0,VALUE:1},class:"codestar_motor",isNotFor:["codestar"],func:function(c,b){c=b.getNumberValue("VALUE");var d=Entry.hw.sendQueue;d.outport=b.getField("PORT");d.value=0;if(!isNaN(c)){var e=c;0>c&&(e=0);255<c&&(e=255);d.value=e}return b.callReturn()}},codestar_drive:{color:"#00979D",skeleton:"basic",statements:[],template:"\ubc29\ud5a5 %1 \uc18d\ub3c4 %2 %3",params:[{type:"Dropdown",options:[["\uc55e\uc73c\ub85c","0"],["\ub4a4\ub85c","1"],["\uc67c\ucabd","2"],["\uc624\ub978\ucabd",
"3"]]},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["0",{type:"number",params:[100]},null],type:"codestar_drive"},paramsKeyMap:{DIRECTION:0,VALUE:1},class:"codestar_motor",isNotFor:["codestar"],func:function(c,b){c=b.getNumberValue("VALUE");var d=Number(b.getField("DIRECTION"));c=Math.round(c);c=Math.max(c,0);c=Math.min(c,255);c=Math.round(c/30);Entry.hw.setDigitalPortValue(14,0+(d<<5)+c);return b.callReturn()}},codestar_wheel:{color:"#00979D",
skeleton:"basic",statements:[],template:"\ubc29\ud5a5 %1 \ubc14\ud034\uc18d\ub3c4 %2 %3",params:[{type:"Dropdown",options:[["\uc67c\ucabd","0"],["\uc624\ub978\ucabd","1"]]},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:["0",{type:"number",params:[100]},null],type:"codestar_wheel"},paramsKeyMap:{DIRECTION:0,VALUE:1},class:"codestar_motor",isNotFor:["codestar"],func:function(c,b){c=b.getNumberValue("VALUE");var d=Number(b.getField("DIRECTION"));
c=Math.round(c);c=Math.max(c,-255);c=Math.min(c,255);0>c&&(d=2+d,c*=-1);c=Math.round(c/30);Entry.hw.setDigitalPortValue(14,128+(d<<5)+c);return b.callReturn()}},codestar_light:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"\ubc1d\uae30\uc13c\uc11c",params:[],events:{},def:{params:[],type:"codestar_light"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.getAnalogPortValue("6")}},codestar_button:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"\ubc84\ud2bc",params:[],events:{},def:{params:[],type:"codestar_button"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.getDigitalPortValue("12")}},codestar_ir:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"IR %1",params:[{type:"Dropdown",options:[["A0","0"],["A1","1"],["A4","4"],["A5","5"]]}],events:{},def:{params:["0"],type:"codestar_ir"},
paramsKeyMap:{PORT:0},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){c=b.getField("PORT");return Entry.hw.getAnalogPortValue(c)}},codestar_sonar:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"\ucd08\uc74c\ud30c",params:[],events:{},def:{params:[],type:"codestar_sonar"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.portData.sonar}},codestar_variable_R:{color:"#00979D",fontColor:"#fff",
skeleton:"basic_string_field",statements:[],template:"\uac00\ubcc0\uc800\ud56d %1",params:[{type:"Dropdown",options:[["A0","0"],["A1","1"],["A4","4"],["A5","5"]]}],events:{},def:{params:["1"],type:"codestar_variable_R"},paramsKeyMap:{PORT:0},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){c=b.getField("PORT");return Entry.hw.getAnalogPortValue(c)}},codestar_mic:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"\ub9c8\uc774\ud06c",params:[],
events:{},def:{params:[],type:"codestar_mic"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.getAnalogPortValue("2")}},codestar_temperature:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"\uc628\ub3c4",params:[],events:{},def:{params:[],type:"codestar_temperature"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.portData.temperature}},codestar_gyroscope:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"3\ucd95 \uc790\uc774\ub85c %1 \ucd95 %2",params:[{type:"Dropdown",options:[["x","x"],["y","y"],["z","z"]]},{type:"Indicator",size:11}],events:{},def:{params:["x",null],type:"codestar_gyroscope"},paramsKeyMap:{AXIS:0},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.getAnalogPortValue("gyro_"+axis)}},codestar_geomagnetic:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],
template:"3\ucd95 \uc9c0\uc790\uae30 %1 \ucd95 %2",params:[{type:"Dropdown",options:[["x","x"],["y","y"],["z","z"]]},{type:"Indicator",size:11}],events:{},def:{params:["x",null],type:"codestar_geomagnetic"},paramsKeyMap:{AXIS:0},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){c=b.getField("AXIS");return Entry.hw.getAnalogPortValue("geo_"+c)}},codestar_irR:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"IR \ub9ac\ubaa8\ucf58",params:[],
events:{},def:{params:[],type:"codestar_irR"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.getDigitalPortValue("4")}},codestar_tilt:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],template:"\ud2f8\ud2b8",params:[],events:{},def:{params:[],type:"codestar_tilt"},paramsKeyMap:{},class:"codestar_input_sensor",isNotFor:["codestar"],func:function(c,b){return Entry.hw.getDigitalPortValue("6")}},smartBoard_get_named_sensor_value:{color:"#00979D",
fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["SEN1","2"],["SEN2","3"],["SEN3","4"],["SEN4","5"]],value:"2",fontSize:11}],events:{},def:{params:[null],type:"smartBoard_get_named_sensor_value"},paramsKeyMap:{PORT:0},"class":"smartBoard_sensor",isNotFor:["smartBoard"],func:function(c,b){return Entry.hw.getAnalogPortValue(b.getField("PORT",b))}},smartBoard_convert_scale:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Block",
accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[{type:"smartBoard_get_named_sensor_value"},{type:"number",params:["0"]},{type:"number",params:["1023"]},{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"smartBoard_convert_scale"},paramsKeyMap:{VALUE1:0,VALUE2:1,VALUE3:2,VALUE4:3,VALUE5:4},"class":"smartBoard_sensor",isNotFor:["smartBoard"],func:function(c,b){var d=b.getNumberValue("VALUE1",
b),e=b.getNumberValue("VALUE2",b),f=b.getNumberValue("VALUE3",b);c=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);if(e>f)var g=e,e=f,f=g;c>b&&(g=c,c=b,b=g);d=(b-c)/(f-e)*(d-e);d+=c;d=Math.min(b,d);d=Math.max(c,d);return Math.round(d)},syntax:{js:[],py:["smartBoard.convert_scale(%1, %2, %3, %4, %5)"]}},smartBoard_is_button_pressed:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[["\ube68\uac04","12"],["\ub178\ub780","13"],
["\ucd08\ub85d","14"],["\ud30c\ub791","15"]],value:"12",fontSize:11}],events:{},def:{params:[null],type:"smartBoard_is_button_pressed"},paramsKeyMap:{PORT:0},"class":"smartBoard_button",isNotFor:["smartBoard"],func:function(c,b){return Entry.hw.getDigitalPortValue(b.getNumberField("PORT",b))}},smartBoard_set_dc_motor_direction:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["MT1","4"],["MT2","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[["\uc815","0"],["\uc5ed",
"255"]],value:"0",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"smartBoard_set_dc_motor_direction"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"dc_motor",isNotFor:["smartBoard"],func:function(c,b){Entry.hw.setDigitalPortValue(b.getField("PORT"),b.getNumberField("OPERATOR"));return b.callReturn()}},smartBoard_set_dc_motor_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["MT1","5"],["MT2","6"]],
value:"5",fontSize:11},{type:"Dropdown",options:[["\uc815\uc9c0 \uc2dc\ud0a4\uae30","0"],["\ub9e4\uc6b0 \ub290\ub9b0 \uc18d\ub3c4\ub85c \ub3cc\ub9ac\uae30","160"],["\ub290\ub9b0 \uc18d\ub3c4\ub85c \ub3cc\ub9ac\uae30","185"],["\ubcf4\ud1b5 \uc18d\ub3c4\ub85c \ub3cc\ub9ac\uae30","210"],["\ube60\ub978 \uc18d\ub3c4\ub85c \ub3cc\ub9ac\uae30","235"],["\ub9e4\uc6b0 \ube60\ub978 \uc18d\ub3c4\ub85c \ub3cc\ub9ac\uae30","255"]],value:"210",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],
events:{},def:{params:[null,null,null],type:"smartBoard_set_dc_motor_speed"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"dc_motor",isNotFor:["smartBoard"],func:function(c,b){Entry.hw.setDigitalPortValue(b.getField("PORT"),b.getNumberField("OPERATOR"));return b.callReturn()}},smartBoard_set_dc_motor_pwm:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["MT1","5"],["MT2","6"]],value:"5",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,{type:"arduino_text",params:["255"]},null],type:"smartBoard_set_dc_motor_pwm"},paramsKeyMap:{PORT:0,VALUE:1},"class":"dc_motor",isNotFor:["smartBoard"],func:function(c,b){c=b.getField("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255);Entry.hw.setDigitalPortValue(c,d);return b.callReturn()}},smartBoard_set_servo_speed:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["SM3","9"],["SM2","10"],
["SM1","11"]],value:"9",fontSize:11},{type:"Dropdown",options:[["\ub290\ub9b0 \uc18d\ub3c4\ub85c","187"],["\ubcf4\ud1b5 \uc18d\ub3c4\ub85c","193"],["\ube60\ub978 \uc18d\ub3c4\ub85c","243"]],value:"193",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"smartBoard_set_servo_speed"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"smartBoard_servo_motor",isNotFor:["smartBoard"],func:function(c,b){Entry.hw.setDigitalPortValue(b.getField("PORT"),
b.getNumberField("OPERATOR"));if(b.isStart){if(1==b.timeFlag)return b;delete b.timeFlag;delete b.isStart;return b.callReturn()}b.isStart=!0;b.timeFlag=1;setTimeout(function(){b.timeFlag=0},250);return b}},smartBoard_set_servo_angle:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["SM3","9"],["SM2","10"],["SM1","11"]],value:"9",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"arduino_text",
params:["180"]},null],type:"smartBoard_set_servo_angle"},paramsKeyMap:{PORT:0,VALUE:1},"class":"smartBoard_servo_motor",isNotFor:["smartBoard"],func:function(c,b){c=b.getField("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,1),d=Math.min(d,180);Entry.hw.setDigitalPortValue(c,d);return b.callReturn()}},smartBoard_set_number_eight_pin:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["GS1","3"],["GS2","2"],["RELAY","8"]],value:"8",fontSize:11},{type:"Dropdown",
options:[["\ub044\uae30","0"],["\ucf1c\uae30","255"]],value:"0",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"smartBoard_set_number_eight_pin"},paramsKeyMap:{PORT:0,OPERATOR:1},"class":"ext",isNotFor:["smartBoard"],func:function(c,b){Entry.hw.setDigitalPortValue(b.getField("PORT"),b.getNumberField("OPERATOR"));return b.callReturn()}},smartBoard_set_gs1_pwm:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"arduino_text",params:["255"]}],type:"smartBoard_set_gs1_pwm"},paramsKeyMap:{VALUE:0},"class":"ext",isNotFor:["smartBoard"],func:function(c,b){c=b.getNumberValue("VALUE");c=Math.round(c);c=Math.max(c,0);c=Math.min(c,255);Entry.hw.setDigitalPortValue(3,c);return b.callReturn()}},robotori_digitalInput:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotori_D2_Input,
"D2"],[Lang.Blocks.robotori_D3_Input,"D3"]],value:"D2",fontSize:11,arrowColor:EntryStatic.ARROW_COLOR_HW}],events:{},def:{params:[null],type:"robotori_digitalInput"},paramsKeyMap:{DEVICE:0},"class":"robotori_sensor",isNotFor:["robotori"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},robotori_analogInput:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotori_A0_Input,"A0"],[Lang.Blocks.robotori_A1_Input,"A1"],
[Lang.Blocks.robotori_A2_Input,"A2"],[Lang.Blocks.robotori_A3_Input,"A3"],[Lang.Blocks.robotori_A4_Input,"A4"],[Lang.Blocks.robotori_A5_Input,"A5"]],value:"A0",fontSize:11}],events:{},def:{params:[null],type:"robotori_analogInput"},paramsKeyMap:{DEVICE:0},"class":"robotori_sensor",isNotFor:["robotori"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},robotori_digitalOutput:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotori_D10_Output,
"D10"],[Lang.Blocks.robotori_D11_Output,"D11"],[Lang.Blocks.robotori_D12_Output,"D12"],[Lang.Blocks.robotori_D13_Output,"D13"]],value:"D10",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.robotori_On,"ON"],[Lang.Blocks.robotori_Off,"OFF"]],value:"ON",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"robotori_digitalOutput"},paramsKeyMap:{DEVICE:0,VALUE:1},"class":"robotori_sensor",isNotFor:["robotori"],func:function(c,b){c=Entry.hw.sendQueue;
var d=b.getStringField("DEVICE",b),e=b.getStringField("VALUE",b);c.D10="D10"==d&&"ON"==e?1:0;c.D11="D11"==d&&"ON"==e?1:0;c.D12="D12"==d&&"ON"==e?1:0;c.D13="D13"==d&&"ON"==e?1:0;return b.callReturn()}},robotori_analogOutput:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotori_analog5,"AOUT5"],[Lang.Blocks.robotori_analog6,"AOUT6"],[Lang.Blocks.robotori_analog9,"AOUT9"]],value:"AOUT5",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,{type:"text",params:["255"]},null],type:"robotori_analogOutput"},paramsKeyMap:{DEVICE:0,VALUE:1},"class":"robotori_sensor",isNotFor:["robotori"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getNumberValue("VALUE",b);"AOUT5"==d?c.AOUT5=e:"AOUT6"==d?c.AOUT6=e:"AOUT9"==d&&(c.AOUT9=e);return b.callReturn()}},robotori_servo:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["90"]},null],type:"robotori_servo"},paramsKeyMap:{SERVO:0},"class":"robotori_motor",isNotFor:["robotori"],func:function(c,b){Entry.hw.sendQueue.SERVO=b.getNumberValue("SERVO");return b.callReturn()}},robotori_dc_direction:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.robotori_DC_rightmotor,"RIGHT_MOTOR"],[Lang.Blocks.robotori_DC_leftmotor,"LEFT_MOTOR"]],value:"RIGHT_MOTOR",fontSize:11},{type:"Dropdown",
options:[[Lang.Blocks.robotori_DC_STOP,"STOP"],[Lang.Blocks.robotori_DC_CW,"CW"],[Lang.Blocks.robotori_DC_CCW,"CCW"]],value:"STOP",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"robotori_dc_direction"},paramsKeyMap:{DEVICE:0,VALUE:1},"class":"robotori_motor",isNotFor:["robotori"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getStringField("DEVICE",b),e=b.getStringField("VALUE",b);"RIGHT_MOTOR"==d&&("STOP"==e?c.RIGHT_MOTOR=
255:"CW"==e?c.RIGHT_MOTOR=0:"CCW"==e&&(c.RIGHT_MOTOR=180));"LEFT_MOTOR"==d&&("STOP"==e?c.LEFT_MOTOR=255:"CW"==e?c.LEFT_MOTOR=0:"CCW"==e&&(c.LEFT_MOTOR=180));return b.callReturn()}},dadublock_get_analog_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["A0","0"],["A1","1"],["A2","2"],["A3","3"]],value:"0",fontSize:11}],events:{},def:{params:[null],type:"dadublock_get_analog_value"},paramsKeyMap:{PORT:0},"class":"dadublockget",isNotFor:["dadublock"],
func:function(c,b){c=b.getField("PORT",b);return(b=Entry.hw.portData.ANALOG)?b[c]||0:0}},dadublock_get_analog_value_map:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["A0","0"],["A1","1"],["A2","2"],["A3","3"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"}],events:{},def:{params:[null,{type:"number",params:["0"]},{type:"number",params:["1023"]},
{type:"number",params:["0"]},{type:"number",params:["100"]}],type:"dadublock_get_analog_value_map"},paramsKeyMap:{PORT:0,VALUE2:1,VALUE3:2,VALUE4:3,VALUE5:4},"class":"dadublockget",isNotFor:["dadublock"],func:function(c,b){var d=b.getField("PORT",b),e=Entry.hw.portData.ANALOG;c=b.getNumberValue("VALUE2",b);var f=b.getNumberValue("VALUE3",b),g=b.getNumberValue("VALUE4",b);b=b.getNumberValue("VALUE5",b);d=e[d]||0;c>f&&(e=c,c=f,f=e);g>b&&(e=g,g=b,b=e);d=Math.min(b,(b-g)/(f-c)*(d-c)+g);return d=Math.max(g,
d)}},dadublock_get_ultrasonic_value:{color:"#00979D",fontColor:"#fff",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["7","7"],["8","8"],["14","14"],["15","15"],["16","16"],["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"2",fontSize:11},{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["7","7"],["8","8"],["14","14"],["15","15"],["16","16"],["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"3",fontSize:11}],events:{},def:{params:["2",
"3"],type:"dadublock_get_ultrasonic_value"},paramsKeyMap:{PORT1:0,PORT2:1},"class":"dadublockget",isNotFor:["dadublock"],func:function(c,b){c=b.getField("PORT1",b);b=b.getField("PORT2",b);Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET={});delete Entry.hw.sendQueue.SET[c];delete Entry.hw.sendQueue.SET[b];Entry.hw.sendQueue.GET||(Entry.hw.sendQueue.GET={});Entry.hw.sendQueue.GET[Entry.DaduBlock.sensorTypes.ULTRASONIC]={port:[c,b],time:(new Date).getTime()};return Entry.hw.portData.ULTRASONIC||0}},
dadublock_get_digital:{color:"#00979D",fontColor:"#fff",skeleton:"basic_boolean_field",params:[{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["7","7"],["8","8"],["14","14"],["15","15"],["16","16"],["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"2",fontSize:11}],events:{},def:{params:[null],type:"dadublock_get_digital"},paramsKeyMap:{PORT:0},"class":"dadublockget",isNotFor:["dadublock"],func:function(c,b){c=b.getField("PORT",b);b=Entry.hw.portData.DIGITAL;Entry.hw.sendQueue.GET||(Entry.hw.sendQueue.GET=
{});Entry.hw.sendQueue.GET[Entry.DaduBlock.sensorTypes.DIGITAL]={port:c,time:(new Date).getTime()};return b?b[c]||0:0}},dadublock_toggle_led:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["7","7"],["8","8"],["14","14"],["15","15"],["16","16"],["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"2",fontSize:11},{type:"Dropdown",options:[["\ucf1c\uae30","on"],["\ub044\uae30","off"]],value:"on",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,null,null],type:"dadublock_toggle_led"},paramsKeyMap:{PORT:0,VALUE:1},"class":"dadublockset",isNotFor:["dadublock"],func:function(c,b){c=b.getField("PORT");var d=b.getField("VALUE");Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET={});Entry.hw.sendQueue.SET[c]={type:Entry.DaduBlock.sensorTypes.DIGITAL,data:"on"==d?255:0,time:(new Date).getTime()};return b.callReturn()}},dadublock_digital_pwm:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",
options:[["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"5",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["255"]},null],type:"dadublock_digital_pwm"},paramsKeyMap:{PORT:0,VALUE:1},"class":"dadublockset",isNotFor:["dadublock"],func:function(c,b){c=b.getField("PORT");var d=b.getNumberValue("VALUE"),d=Math.round(d),d=Math.max(d,0),d=Math.min(d,255);Entry.hw.sendQueue.SET||(Entry.hw.sendQueue.SET=
{});Entry.hw.sendQueue.SET[c]={type:Entry.DaduBlock.sensorTypes.PWM,data:d,time:(new Date).getTime()};return b.callReturn()},syntax:{js:[],py:["Arduino.analogWrite(%1, %2)"]}},dadublock_set_servo:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["7","7"],["8","8"],["14","14"],["15","15"],["16","16"],["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"2",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[null,null],type:"dadublock_set_servo"},paramsKeyMap:{PORT:0,VALUE:1},"class":"dadublockset",isNotFor:["dadublock"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT",b),e=b.getNumberValue("VALUE",b),e=Math.min(180,e),e=Math.max(0,e);c.SET||(c.SET={});c.SET[d]={type:Entry.DaduBlock.sensorTypes.SERVO_PIN,data:e,time:(new Date).getTime()};return b.callReturn()},syntax:{js:[],py:["Arduino.servomotorWrite(%1, %2)"]}},dadublock_set_tone:{color:"#00979D",skeleton:"basic",
statements:[],params:[{type:"Dropdown",options:[["2","2"],["3","3"],["4","4"],["7","7"],["8","8"],["14","14"],["15","15"],["16","16"],["~5","5"],["~6","6"],["~9","9"],["~10","10"]],value:"2",fontSize:11},{type:"Dropdown",options:[["\ubb34\uc74c","0"],["\ub3c4","1"],["\ub3c4#(\ub808\u266d)","2"],["\ub808","3"],["\ub808#(\ubbf8\u266d)","4"],["\ubbf8","5"],["\ud30c","6"],["\ud30c#(\uc194\u266d)","7"],["\uc194","8"],["\uc194#(\ub77c\u266d)","9"],["\ub77c","10"],["\ub77c#(\uc2dc\u266d)","11"],["\uc2dc",
"12"]],value:"1",fontSize:11},{type:"Dropdown",options:[["1","0"],["2","1"],["3","2"],["4","3"],["5","4"],["6","5"]],value:"3",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null,{type:"text",params:["1"]},null],type:"dadublock_set_tone"},paramsKeyMap:{PORT:0,NOTE:1,OCTAVE:2,DURATION:3},"class":"dadublockset",isNotFor:["dadublock"],func:function(c,b){c=Entry.hw.sendQueue;var d=b.getField("PORT",b);if(b.isStart){if(1==
b.timeFlag)return b;delete b.timeFlag;delete b.isStart;c.SET[d]={type:Entry.DaduBlock.sensorTypes.TONE,data:0,time:(new Date).getTime()};Entry.engine.isContinue=!1;return b.callReturn()}var e=b.getNumberField("NOTE",b),f=b.getNumberValue("DURATION",b);0>f&&(f=0);if(0===e||0===f)return c.SET[d]={type:Entry.DaduBlock.sensorTypes.TONE,data:0,time:(new Date).getTime()},b.callReturn();var g=b.getNumberField("OCTAVE",b),e=Entry.DaduBlock.toneMap[e][g],f=1E3*f;b.isStart=!0;b.timeFlag=1;c.SET||(c.SET={});
c.SET[d]={type:Entry.DaduBlock.sensorTypes.TONE,data:{value:e,duration:f},time:(new Date).getTime()};setTimeout(function(){b.timeFlag=0},f+32);return b}},hidden:{color:"#7C7C7C",skeleton:"basic",template:"         %1       %2",statements:[],params:[{type:"TextInput",value:"?",clearBG:!0,color:"white"},{type:"Indicator",color:"#6B6B6B",size:12}],events:{},def:{params:[null],type:"hidden"},paramsKeyMap:{VALUE:0},"class":"etc",isNotFor:[],func:function(c,b){}},check_object_property:{color:"#7C7C7C",
skeleton:"basic",template:"%1 \uac00 %2 %3 %4 %5 %6",statements:[],params:[{type:"DropdownDynamic",value:null,menuName:"sprites",fontSize:11},{type:"Dropdown",options:[["\uc5b8\uc820\uac00",0],["\uc9c0\uae08",1]],value:"0",fontSize:11},{type:"Dropdown",options:[["x","x"],["y","y"],["\ud06c\uae30","size"],["\ubc29\ud5a5","rotation"],["\uc774\ub3d9 \ubc29\ud5a5","direction"],["\ud14d\uc2a4\ud2b8","text"]],value:"x",fontSize:11},{type:"Dropdown",options:[["=","EQUAL"],[">","GREATER"],["<","LESS"],["\u2265",
"GREATER_OR_EQUAL"],["\u2264","LESS_OR_EQUAL"]],value:"EQUAL",fontSize:11,noArrow:!0},{type:"Block",accept:"string"},{type:"Indicator",color:"#6B6B6B",size:12}],events:{},def:{params:[null],type:"check_object_property"},paramsKeyMap:{VALUE:0},"class":"checker",isNotFor:["checker"],func:function(c,b){var d=Entry.container.getObject(this.block.params[0]);c=this.block.params[1];var e=this.block.params[2];b=this.getParam(4);var e=e[0].toUpperCase()+e.substr(1),d=d.entity["get"+e].call(d.entity),f;switch(this.block.params[3]){case "EQUAL":f=
d==b;break;case "GREATER":f=Number(d)>Number(b);break;case "LESS":f=Number(d)<Number(b);break;case "GREATER_OR_EQUAL":f=Number(d)>=Number(b);break;case "LESS_OR_EQUAL":f=Number(d)<=Number(b)}if(!f){if(0==c)return Entry.STATIC.BREAK;this.die()}}},check_lecture_goal:{color:"#7C7C7C",skeleton:"basic",template:"\ubaa9\ud45c %1 %2 %3",statements:[],params:[{type:"TextInput",value:0},{type:"Dropdown",options:[["\ub2ec\uc131",1],["\uc2e4\ud328",0]],fontSize:11},{type:"Indicator",color:"#6B6B6B",size:12}],
events:{dataAdd:[function(c){Entry.registerAchievement(c)}]},def:{params:[0,1],type:"check_lecture_goal"},paramsKeyMap:{VALUE:0},"class":"checker",isNotFor:["checker"],func:function(c,b){Entry.achieve(this.block.params[1],this.block.params[0]+"");this.die()}},check_block_execution:{color:"#7C7C7C",skeleton:"basic_loop",template:"%1 \uc5d0\uc11c \uc544\ub798 \ube14\ub85d\uc774 %2 %3 \ubc88 \uc2e4\ud589\ub418\uc5c8\ub294\uac00 %4",statements:[{accept:"basic"}],params:[{type:"DropdownDynamic",value:null,
menuName:"sprites",fontSize:11},{type:"Dropdown",options:[["\ube44\uc2b7\ud558\uac8c",0],["\ub611\uac19\uc774",1]],value:"16",fontSize:11},{type:"TextInput",value:1},{type:"Indicator",color:"#6B6B6B",size:12}],events:{},def:{params:[null,0],type:"check_block_execution"},paramsKeyMap:{VALUE:0},"class":"checker",isNotFor:["checker"],func:function(c,b){if(this.listener){if(0===this.remainCheck){this.listener.destroy();return}return Entry.STATIC.BREAK}c=Entry.container.getObject(this.block.params[0]).script;
var d=this.block.params[1],e=this.block.statements[0].getBlocks(),f=null;this.remainCheck=Number(this.block.params[2]);var g=0;this.listener=c.watchEvent.attach(this,function(b){b=b.concat();for(var c,h=!0;b.length&&g<e.length;)c=b.shift(),h&&c===f||(0===d&&e[g].type===c.type?g++:1===d&&e[g].isSameParamWith(c)?g++:g=0,h=!1);f=c;g===e.length&&(--this.remainCheck,g=0)});return Entry.STATIC.BREAK}},check_variable_by_name:{color:"#7C7C7C",skeleton:"basic_string_field",template:"%1 \uc774\ub984\uc758 \ubcc0\uc218",
statements:[],params:[{type:"TextInput",value:"?"}],events:{},def:{params:["\ubcc0\uc218"],type:"check_variable_by_name"},paramsKeyMap:{VALUE:0},"class":"checker",isNotFor:["checker"],func:function(c,b){if(c=Entry.variableContainer.getVariableByName(this.block.params[0]+""))return c.getValue()}},wildcard_string:{color:"#7C7C7C",skeleton:"basic_string_field",template:"    *    ",fontColor:"#fff",statements:[],params:[],events:{},def:{params:[],type:"wildcard_string"},paramsKeyMap:{VALUE:0},"class":"checker",
isNotFor:["checker"],func:function(c,b){}},wildcard_boolean:{color:"#7C7C7C",skeleton:"basic_boolean_field",template:"    *    ",fontColor:"#fff",statements:[],params:[],events:{},def:{params:[],type:"wildcard_boolean"},paramsKeyMap:{},"class":"checker",isNotFor:["checker"],func:function(c,b){}},hidden_string:{color:"#7C7C7C",skeleton:"basic_string_field",template:"    %1    ",fontColor:"#fff",statements:[],params:[{type:"TextInput",value:"?",clearBG:!0,color:"white"}],events:{},def:{params:[],type:"hidden_string"},
paramsKeyMap:{VALUE:0},"class":"etc",isNotFor:[],func:function(c,b){}},hidden_boolean:{color:"#7C7C7C",skeleton:"basic_boolean_field",template:"    %1    ",fontColor:"#fff",statements:[],params:[{type:"TextInput",value:"?",clearBG:!0,color:"white"}],events:{},def:{params:[],type:"hidden_boolean"},paramsKeyMap:{},"class":"etc",isNotFor:[],func:function(c,b){}},byrobot_dronefighter_controller_controller_value_button:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",
options:[[Lang.Blocks.byrobot_dronefighter_controller_button_button,"button_button"],[Lang.Blocks.byrobot_dronefighter_controller_button_event,"button_event"]],value:"button_button",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_controller_controller_value_button"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_controller_monitor",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},byrobot_dronefighter_controller_controller_value_joystick:{color:"#00979D",
skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_x,"joystick_left_x"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_y,"joystick_left_y"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_direction,"joystick_left_direction"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_event,"joystick_left_event"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_command,"joystick_left_command"],
[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_x,"joystick_right_x"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_y,"joystick_right_y"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_direction,"joystick_right_direction"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_event,"joystick_right_event"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_command,"joystick_right_command"]],value:"joystick_left_x",fontSize:11}],events:{},def:{params:[null],
type:"byrobot_dronefighter_controller_controller_value_joystick"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_controller_monitor",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},byrobot_dronefighter_controller_controller_if_button_press:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_button_front_left,"1"],[Lang.Blocks.byrobot_dronefighter_controller_button_front_right,
"2"],[Lang.Blocks.byrobot_dronefighter_controller_button_front_left_right,"3"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up_left,"4"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up_right,"8"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up,"16"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_left,"32"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_right,"64"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_down,"128"],
[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_left,"256"],[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_right,"512"],[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_left_right,"768"]],value:"1",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_controller_controller_if_button_press"},paramsKeyMap:{BUTTON:0},"class":"byrobot_dronefighter_controller_boolean_input",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=Entry.hw.portData;
return c.button_button==b.getField("BUTTON")&&2==c.button_event?!0:!1}},byrobot_dronefighter_controller_controller_if_joystick_direction:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_left,"joystick_left_direction"],[Lang.Blocks.byrobot_dronefighter_common_right,"joystick_right_direction"]],value:"joystick_left_direction",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left_up,
"17"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_up,"18"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right_up,"20"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left,"33"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_center,"34"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right,"36"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left_down,"65"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_down,
"66"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right_down,"68"]],value:"34",fontSize:11}],events:{},def:{params:[null,null],type:"byrobot_dronefighter_controller_controller_if_joystick_direction"},paramsKeyMap:{DEVICE:0,DIRECTION:1},"class":"byrobot_dronefighter_controller_boolean_input",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=Entry.hw.portData;var d=b.getField("DEVICE");return c[d]==b.getField("DIRECTION")?!0:!1}},byrobot_dronefighte_controller_controller_light_manual_single_off:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_controller_controller_light_manual_single_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_controller_controller_light",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){return Entry.byrobot_dronefighter_controller.setLightManual(b,17,255,0)}},byrobot_dronefighter_controller_controller_light_manual_single:{color:"#00979D",skeleton:"basic",
statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_all,"255"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_1,"128"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_2,"64"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_3,"32"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_4,"16"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_5,"8"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_6,"4"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_blue,
"2"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_red,"1"]],value:"128",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_on,"220"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_off,"0"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b25,"75"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b50,"125"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b75,"200"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b100,"255"]],
value:"220",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_controller_controller_light_manual_single"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_controller_controller_light",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(b.getField("FLAGS"));var d=parseInt(b.getField("BRIGHTNESS"));return Entry.byrobot_dronefighter_controller.setLightManual(b,17,c,d)}},byrobot_dronefighter_controller_controller_light_manual_single_input:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0b11111111"]},{type:"text",params:["255"]},null],type:"byrobot_dronefighter_controller_controller_light_manual_single_input"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_controller_controller_light",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=b.getNumberValue("FLAGS");
var d=b.getNumberValue("BRIGHTNESS");return Entry.byrobot_dronefighter_controller.setLightManual(b,17,c,d)}},byrobot_dronefighter_controller_controller_buzzer_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_controller_controller_buzzer_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){return Entry.byrobot_dronefighter_controller.setBuzzerStop(b)}},
byrobot_dronefighter_controller_controller_buzzer_scale:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,"11"]],value:"0",fontSize:11},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_controller_controller_buzzer_scale"},paramsKeyMap:{OCTAVE:0,SCALE:1},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE"));return-1==d?Entry.byrobot_dronefighter_controller.setBuzzerMute(b,6E4,!1,!0):Entry.byrobot_dronefighter_controller.setBuzzerScale(b,
c,d,6E4,!1,!0)}},byrobot_dronefighter_controller_controller_buzzer_scale_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],
[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,
"11"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_buzzer_scale_delay"},paramsKeyMap:{OCTAVE:0,SCALE:1,TIME:2},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE")),e=parseInt(1E3*b.getNumberValue("TIME"));
return-1==d?Entry.byrobot_dronefighter_controller.setBuzzerMute(b,e,!0,!0):Entry.byrobot_dronefighter_controller.setBuzzerScale(b,c,d,e,!0,!0)}},byrobot_dronefighter_controller_controller_buzzer_scale_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,
"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,
"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,"11"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_buzzer_scale_reserve"},paramsKeyMap:{OCTAVE:0,SCALE:1,TIME:2},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],
func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE")),e=parseInt(1E3*b.getNumberValue("TIME"));return-1==d?Entry.byrobot_dronefighter_controller.setBuzzerMute(b,e,!1,!1):Entry.byrobot_dronefighter_controller.setBuzzerScale(b,c,d,e,!1,!1)}},byrobot_dronefighter_controller_controller_buzzer_hz:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",
params:["1000"]},null],type:"byrobot_dronefighter_controller_controller_buzzer_hz"},paramsKeyMap:{HZ:0},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));return Entry.byrobot_dronefighter_controller.setBuzzerHz(b,c,6E4,!1,!0)}},byrobot_dronefighter_controller_controller_buzzer_hz_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_buzzer_hz_delay"},paramsKeyMap:{HZ:0,TIME:1},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));var d=parseInt(1E3*b.getNumberValue("TIME"));return Entry.byrobot_dronefighter_controller.setBuzzerHz(b,c,d,!0,
!0)}},byrobot_dronefighter_controller_controller_buzzer_hz_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_buzzer_hz_reserve"},paramsKeyMap:{HZ:0,TIME:1},"class":"byrobot_dronefighter_controller_buzzer",isNotFor:["byrobot_dronefighter_controller"],
func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));var d=parseInt(1E3*b.getNumberValue("TIME"));return Entry.byrobot_dronefighter_controller.setBuzzerHz(b,c,d,!1,!1)}},byrobot_dronefighter_controller_controller_vibrator_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_controller_controller_vibrator_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_controller_vibrator",
isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){return Entry.byrobot_dronefighter_controller.setVibratorStop(b)}},byrobot_dronefighter_controller_controller_vibrator_on_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_vibrator_on_delay"},paramsKeyMap:{TIMEON:0},"class":"byrobot_dronefighter_controller_vibrator",
isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));return Entry.byrobot_dronefighter_controller.setVibrator(b,c,0,c,!0,!0)}},byrobot_dronefighter_controller_controller_vibrator_on_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_vibrator_on_reserve"},
paramsKeyMap:{TIMEON:0},"class":"byrobot_dronefighter_controller_vibrator",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));return Entry.byrobot_dronefighter_controller.setVibrator(b,c,0,c,!1,!1)}},byrobot_dronefighter_controller_controller_vibrator_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["0.02"]},{type:"text",params:["0.2"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_vibrator_delay"},paramsKeyMap:{TIMEON:0,TIMEOFF:1,TIMERUN:2},"class":"byrobot_dronefighter_controller_vibrator",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));var d=parseInt(1E3*b.getNumberValue("TIMEOFF")),e=parseInt(1E3*b.getNumberValue("TIMERUN"));return Entry.byrobot_dronefighter_controller.setVibrator(b,
c,d,e,!0,!0)}},byrobot_dronefighter_controller_controller_vibrator_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0.02"]},{type:"text",params:["0.2"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_controller_controller_vibrator_reserve"},paramsKeyMap:{TIMEON:0,TIMEOFF:1,
TIMERUN:2},"class":"byrobot_dronefighter_controller_vibrator",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));var d=parseInt(1E3*b.getNumberValue("TIMEOFF")),e=parseInt(1E3*b.getNumberValue("TIMERUN"));return Entry.byrobot_dronefighter_controller.setVibrator(b,c,d,e,!1,!1)}},byrobot_dronefighter_controller_controller_userinterface_preset:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_userinterface_preset_clear,
"1"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_preset_dronefighter2017,"3"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_preset_education,"4"]],value:"4",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"byrobot_dronefighter_controller_controller_userinterface_preset"},paramsKeyMap:{PRESET:0},"class":"byrobot_dronefighter_controller_userinterface",isNotFor:["byrobot_dronefighter_controller"],func:function(c,
b){c=parseInt(b.getField("PRESET"));return Entry.byrobot_dronefighter_controller.sendCommand(b,17,128,c)}},byrobot_dronefighter_controller_controller_userinterface:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_frontleft_down,"1"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_frontright_down,"2"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_midturnleft_down,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_midturnright_down,"4"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_midup_down,"5"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_midleft_down,"6"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_midright_down,"7"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_button_middown_down,"8"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_left_up_in,
"9"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_left_left_in,"10"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_left_right_in,"11"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_left_down_in,"12"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_right_up_in,"13"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_right_left_in,
"14"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_right_right_in,"15"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_command_setup_joystick_right_down_in,"16"]],value:"1",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_joystickcalibration_reset,"1"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_team_red,"2"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_team_blue,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_vehicle_flight,"4"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_vehicle_flightnoguard,"5"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_vehicle_drive,"6"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_coordinate_local,"7"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_coordinate_world,"8"],
[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_control_mode1,"9"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_control_mode2,"10"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_control_mode3,"11"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_control_mode4,"12"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_gyrobias_reset,"13"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_usb_cdc,
"14"],[Lang.Blocks.byrobot_dronefighter_controller_userinterface_function_change_mode_usb_hid,"15"]],value:"1",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_controller_controller_userinterface"},paramsKeyMap:{COMMAND:0,FUNCTION:1},"class":"byrobot_dronefighter_controller_userinterface",isNotFor:["byrobot_dronefighter_controller"],func:function(c,b){c=parseInt(b.getField("COMMAND"));var d=parseInt(b.getField("FUNCTION"));
return Entry.byrobot_dronefighter_controller.setUserInterface(b,c,d)}},byrobot_dronefighter_drive_drone_value_attitude:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_attitude_roll,"attitude_roll"],[Lang.Blocks.byrobot_dronefighter_drone_attitude_pitch,"attitude_pitch"],[Lang.Blocks.byrobot_dronefighter_drone_attitude_yaw,"attitude_yaw"]],value:"attitude_roll",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_drone_value_attitude"},
paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_drive_monitor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},byrobot_dronefighter_drive_drone_value_etc:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_state_mode_vehicle,"state_modeVehicle"],[Lang.Blocks.byrobot_dronefighter_drone_state_mode_drive,"state_modeDrive"],[Lang.Blocks.byrobot_dronefighter_drone_state_battery,
"state_battery"],[Lang.Blocks.byrobot_dronefighter_drone_irmessage,"irmessage_irdata"]],value:"irmessage_irdata",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_drone_value_etc"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_drive_monitor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},byrobot_dronefighter_drive_controller_value_button:{color:"#00979D",skeleton:"basic_string_field",statements:[],
params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_button_button,"button_button"],[Lang.Blocks.byrobot_dronefighter_controller_button_event,"button_event"]],value:"button_button",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_controller_value_button"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_drive_monitor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},byrobot_dronefighter_drive_controller_value_joystick:{color:"#00979D",
skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_x,"joystick_left_x"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_y,"joystick_left_y"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_direction,"joystick_left_direction"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_event,"joystick_left_event"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_command,"joystick_left_command"],
[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_x,"joystick_right_x"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_y,"joystick_right_y"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_direction,"joystick_right_direction"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_event,"joystick_right_event"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_command,"joystick_right_command"]],value:"joystick_left_x",fontSize:11}],events:{},def:{params:[null],
type:"byrobot_dronefighter_drive_controller_value_joystick"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_drive_monitor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=Entry.hw.portData;b=b.getField("DEVICE");return c[b]}},byrobot_dronefighter_drive_controller_if_button_press:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_button_front_left,"1"],[Lang.Blocks.byrobot_dronefighter_controller_button_front_right,
"2"],[Lang.Blocks.byrobot_dronefighter_controller_button_front_left_right,"3"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up_left,"4"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up_right,"8"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up,"16"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_left,"32"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_right,"64"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_down,"128"],
[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_left,"256"],[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_right,"512"],[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_left_right,"768"]],value:"1",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_controller_if_button_press"},paramsKeyMap:{BUTTON:0},"class":"byrobot_dronefighter_drive_boolean_input",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=Entry.hw.portData;return c.button_button==
b.getField("BUTTON")&&2==c.button_event?!0:!1},syntax:{js:[],py:[]}},byrobot_dronefighter_drive_controller_if_joystick_direction:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_left,"joystick_left_direction"],[Lang.Blocks.byrobot_dronefighter_common_right,"joystick_right_direction"]],value:"joystick_left_direction",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left_up,
"17"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_up,"18"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right_up,"20"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left,"33"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_center,"34"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right,"36"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left_down,"65"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_down,
"66"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right_down,"68"]],value:"34",fontSize:11}],events:{},def:{params:[null,null],type:"byrobot_dronefighter_drive_controller_if_joystick_direction"},paramsKeyMap:{DEVICE:0,DIRECTION:1},"class":"byrobot_dronefighter_drive_boolean_input",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=Entry.hw.portData;var d=b.getField("DEVICE");return c[d]==b.getField("DIRECTION")?!0:!1}},byrobot_dronefighter_drive_drone_control_car_stop:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_drone_control_car_stop"},paramsKeyMap:{},"class":"byrobot_dronefighter_drive_control_drive",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){return Entry.byrobot_dronefighter_drive.sendStop(b)}},byrobot_dronefighter_drive_drone_control_double_one:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_control_double_wheel,
"control_wheel"],[Lang.Blocks.byrobot_dronefighter_drone_control_double_accel_forward,"control_accel"]],value:"control_accel",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["0"]},null],type:"byrobot_dronefighter_drive_drone_control_double_one"},paramsKeyMap:{CONTROLTARGET:0,VALUE:1},"class":"byrobot_dronefighter_drive_control_drive",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=
b.getField("CONTROLTARGET");var d=parseInt(b.getNumberValue("VALUE",b));return Entry.byrobot_dronefighter_drive.sendControlDoubleSingle(b,c,d,0,!1)}},byrobot_dronefighter_drive_drone_control_double_one_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_control_double_wheel,"control_wheel"],[Lang.Blocks.byrobot_dronefighter_drone_control_double_accel_forward,"control_accel"]],value:"control_accel",fontSize:11},{type:"Block",
accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["100"]},{type:"number",params:["1"]},null],type:"byrobot_dronefighter_drive_drone_control_double_one_delay"},paramsKeyMap:{CONTROLTARGET:0,VALUE:1,TIME:2},"class":"byrobot_dronefighter_drive_control_drive",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=b.getField("CONTROLTARGET");var d=parseInt(b.getNumberValue("VALUE",b)),e=
parseInt(1E3*b.getNumberValue("TIME",b));return Entry.byrobot_dronefighter_drive.sendControlDoubleSingle(b,c,d,e,!0)}},byrobot_dronefighter_drive_drone_control_double:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"number",params:["0"]},{type:"number",params:["0"]},null],type:"byrobot_dronefighter_drive_drone_control_double"},paramsKeyMap:{WHEEL:0,
ACCEL:1},"class":"byrobot_dronefighter_drive_control_drive",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getNumberValue("WHEEL",b));var d=parseInt(b.getNumberValue("ACCEL",b));return Entry.byrobot_dronefighter_drive.sendControlDouble(b,c,d,0,!1)}},byrobot_dronefighter_drive_drone_motor_stop:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_drone_motor_stop"},
paramsKeyMap:{},"class":"byrobot_dronefighter_drive_motor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){return Entry.byrobot_dronefighter_drive.sendStop(b)}},byrobot_dronefighter_drive_drone_motorsingle:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["1","0"],["2","1"],["3","2"],["4","3"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["1000"]},
null],type:"byrobot_dronefighter_drive_drone_motorsingle"},paramsKeyMap:{MOTORINDEX:0,MOTORSPEED:1},"class":"byrobot_dronefighter_drive_motor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getField("MOTORINDEX"));var d=parseInt(b.getNumberValue("MOTORSPEED",b));return Entry.byrobot_dronefighter_drive.setMotorSingle(b,c,1,d)}},byrobot_dronefighter_drive_drone_motorsingle_input:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",
accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},{type:"text",params:["1000"]},null],type:"byrobot_dronefighter_drive_drone_motorsingle_input"},paramsKeyMap:{MOTORINDEX:0,MOTORSPEED:1},"class":"byrobot_dronefighter_drive_motor",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getNumberValue("MOTORINDEX",b))-1;var d=parseInt(b.getNumberValue("MOTORSPEED",b));return Entry.byrobot_dronefighter_drive.setMotorSingle(b,
c,1,d)}},byrobot_dronefighter_drive_drone_irmessage:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["100"]},null],type:"byrobot_dronefighter_drive_drone_irmessage"},paramsKeyMap:{IRMESSAGE:0},"class":"byrobot_dronefighter_drive_irmessage",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=b.getNumberValue("IRMESSAGE",b);return Entry.byrobot_dronefighter_drive.sendIrMessage(b,
c)}},byrobot_dronefighter_drive_controller_light_manual_single_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_controller_light_manual_single_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_drive_controller_light",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){return Entry.byrobot_dronefighter_drive.setLightManual(b,17,255,0)}},byrobot_dronefighter_drive_controller_light_manual_single:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_all,"255"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_1,"128"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_2,"64"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_3,"32"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_4,"16"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_5,"8"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_6,"4"],
[Lang.Blocks.byrobot_dronefighter_common_light_manual_blue,"2"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_red,"1"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_on,"220"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_off,"0"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b25,"75"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b50,"125"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b75,"200"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b100,
"255"]],value:"220",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_drive_controller_light_manual_single"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_drive_controller_light",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getField("FLAGS"));var d=parseInt(b.getField("BRIGHTNESS"));return Entry.byrobot_dronefighter_drive.setLightManual(b,17,c,d)}},byrobot_dronefighter_drive_controller_light_manual_single_input:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0b11111111"]},{type:"text",params:["255"]},null],type:"byrobot_dronefighter_drive_controller_light_manual_single_input"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_drive_controller_light",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=b.getNumberValue("FLAGS");
var d=b.getNumberValue("BRIGHTNESS");return Entry.byrobot_dronefighter_drive.setLightManual(b,17,c,d)}},byrobot_dronefighter_drive_drone_light_manual_single_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_drone_light_manual_single_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_drive_drone_light",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){return Entry.byrobot_dronefighter_drive.setLightManual(b,
16,255,0)}},byrobot_dronefighter_drive_drone_light_manual_single:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_all,"255"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_1,"128"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_2,"64"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_3,"32"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_4,"16"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_blue,
"8"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_red,"4"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_on,"220"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_off,"0"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b25,"75"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b50,"125"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b75,"200"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b100,"255"]],
value:"220",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_drive_drone_light_manual_single"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_drive_drone_light",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getField("FLAGS"));var d=parseInt(b.getField("BRIGHTNESS"));return Entry.byrobot_dronefighter_drive.setLightManual(b,16,c,d)}},byrobot_dronefighter_drive_drone_light_manual_single_input:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0b11111111"]},{type:"text",params:["255"]},null],type:"byrobot_dronefighter_drive_drone_light_manual_single_input"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_drive_drone_light",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=b.getNumberValue("FLAGS");var d=
b.getNumberValue("BRIGHTNESS");return Entry.byrobot_dronefighter_drive.setLightManual(b,16,c,d)}},byrobot_dronefighter_drive_controller_buzzer_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_controller_buzzer_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_drive_buzzer",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){return Entry.byrobot_dronefighter_drive.setBuzzerStop(b)}},
byrobot_dronefighter_drive_controller_buzzer_scale:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,"11"]],value:"0",fontSize:11},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_drive_controller_buzzer_scale"},paramsKeyMap:{OCTAVE:0,SCALE:1},"class":"byrobot_dronefighter_drive_buzzer",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE"));return-1==d?Entry.byrobot_dronefighter_drive.setBuzzerMute(b,6E4,!1,!0):Entry.byrobot_dronefighter_drive.setBuzzerScale(b,c,d,6E4,!1,!0)}},
byrobot_dronefighter_drive_controller_buzzer_scale_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,"11"]],value:"0",fontSize:11},
{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_buzzer_scale_delay"},paramsKeyMap:{OCTAVE:0,SCALE:1,TIME:2},"class":"byrobot_dronefighter_drive_buzzer",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE")),e=parseInt(1E3*b.getNumberValue("TIME"));return-1==d?Entry.byrobot_dronefighter_drive.setBuzzerMute(b,
e,!0,!0):Entry.byrobot_dronefighter_drive.setBuzzerScale(b,c,d,e,!0,!0)}},byrobot_dronefighter_drive_controller_buzzer_scale_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,
"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,
"11"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_buzzer_scale_reserve"},paramsKeyMap:{OCTAVE:0,SCALE:1,TIME:2},"class":"byrobot_dronefighter_drive_buzzer",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE")),e=parseInt(1E3*b.getNumberValue("TIME"));
return-1==d?Entry.byrobot_dronefighter_drive.setBuzzerMute(b,e,!1,!1):Entry.byrobot_dronefighter_drive.setBuzzerScale(b,c,d,e,!1,!1)}},byrobot_dronefighter_drive_controller_buzzer_hz:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},null],type:"byrobot_dronefighter_drive_controller_buzzer_hz"},paramsKeyMap:{HZ:0},"class":"byrobot_dronefighter_drive_buzzer",
isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));return Entry.byrobot_dronefighter_drive.setBuzzerHz(b,c,6E4,!1,!0)}},byrobot_dronefighter_drive_controller_buzzer_hz_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_buzzer_hz_delay"},
paramsKeyMap:{HZ:0,TIME:1},"class":"byrobot_dronefighter_drive_buzzer",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));var d=parseInt(1E3*b.getNumberValue("TIME"));return Entry.byrobot_dronefighter_drive.setBuzzerHz(b,c,d,!0,!0)}},byrobot_dronefighter_drive_controller_buzzer_hz_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["1000"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_buzzer_hz_reserve"},paramsKeyMap:{HZ:0,TIME:1},"class":"byrobot_dronefighter_drive_buzzer",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));var d=parseInt(1E3*b.getNumberValue("TIME"));return Entry.byrobot_dronefighter_drive.setBuzzerHz(b,c,d,!1,!1)}},byrobot_dronefighter_drive_controller_vibrator_off:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_drive_controller_vibrator_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_drive_vibrator",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){return Entry.byrobot_dronefighter_drive.setVibratorStop(b)}},byrobot_dronefighter_drive_controller_vibrator_on_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_vibrator_on_delay"},paramsKeyMap:{TIMEON:0},"class":"byrobot_dronefighter_drive_vibrator",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));return Entry.byrobot_dronefighter_drive.setVibrator(b,c,0,c,!0,!0)}},byrobot_dronefighter_drive_controller_vibrator_on_reserve:{color:"#00979D",skeleton:"basic",
statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_vibrator_on_reserve"},paramsKeyMap:{TIMEON:0},"class":"byrobot_dronefighter_drive_vibrator",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));return Entry.byrobot_dronefighter_drive.setVibrator(b,c,0,c,!1,!1)}},byrobot_dronefighter_drive_controller_vibrator_delay:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0.02"]},{type:"text",params:["0.2"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_vibrator_delay"},paramsKeyMap:{TIMEON:0,TIMEOFF:1,TIMERUN:2},"class":"byrobot_dronefighter_drive_vibrator",isNotFor:["byrobot_dronefighter_drive"],func:function(c,
b){c=parseInt(1E3*b.getNumberValue("TIMEON"));var d=parseInt(1E3*b.getNumberValue("TIMEOFF")),e=parseInt(1E3*b.getNumberValue("TIMERUN"));return Entry.byrobot_dronefighter_drive.setVibrator(b,c,d,e,!0,!0)}},byrobot_dronefighter_drive_controller_vibrator_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",
params:["0.02"]},{type:"text",params:["0.2"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_drive_controller_vibrator_reserve"},paramsKeyMap:{TIMEON:0,TIMEOFF:1,TIMERUN:2},"class":"byrobot_dronefighter_drive_vibrator",isNotFor:["byrobot_dronefighter_drive"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));var d=parseInt(1E3*b.getNumberValue("TIMEOFF")),e=parseInt(1E3*b.getNumberValue("TIMERUN"));return Entry.byrobot_dronefighter_drive.setVibrator(b,c,d,e,!1,!1)}},byrobot_dronefighter_flight_drone_value_attitude:{color:"#00979D",
skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_attitude_roll,"attitude_roll"],[Lang.Blocks.byrobot_dronefighter_drone_attitude_pitch,"attitude_pitch"],[Lang.Blocks.byrobot_dronefighter_drone_attitude_yaw,"attitude_yaw"]],value:"attitude_roll",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_value_attitude"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_flight_monitor",isNotFor:["byrobot_dronefighter_flight"],
func:function(c,b){return Entry.hw.portData[b.getField("DEVICE")]}},byrobot_dronefighter_flight_drone_value_etc:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_state_mode_vehicle,"state_modeVehicle"],[Lang.Blocks.byrobot_dronefighter_drone_state_mode_flight,"state_modeFlight"],[Lang.Blocks.byrobot_dronefighter_drone_state_mode_coordinate,"state_coordinate"],[Lang.Blocks.byrobot_dronefighter_drone_state_battery,
"state_battery"],[Lang.Blocks.byrobot_dronefighter_drone_irmessage,"irmessage_irdata"]],value:"irmessage_irdata",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_value_etc"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_flight_monitor",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.hw.portData[b.getField("DEVICE")]}},byrobot_dronefighter_flight_controller_value_button:{color:"#00979D",skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",
options:[[Lang.Blocks.byrobot_dronefighter_controller_button_button,"button_button"],[Lang.Blocks.byrobot_dronefighter_controller_button_event,"button_event"]],value:"button_button",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_controller_value_button"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_flight_monitor",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.hw.portData[b.getField("DEVICE")]}},byrobot_dronefighter_flight_controller_value_joystick:{color:"#00979D",
skeleton:"basic_string_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_x,"joystick_left_x"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_y,"joystick_left_y"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_direction,"joystick_left_direction"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_event,"joystick_left_event"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_left_command,"joystick_left_command"],
[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_x,"joystick_right_x"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_y,"joystick_right_y"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_direction,"joystick_right_direction"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_event,"joystick_right_event"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_right_command,"joystick_right_command"]],value:"joystick_left_x",fontSize:11}],events:{},def:{params:[null],
type:"byrobot_dronefighter_flight_controller_value_joystick"},paramsKeyMap:{DEVICE:0},"class":"byrobot_dronefighter_flight_monitor",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.hw.portData[b.getField("DEVICE")]}},byrobot_dronefighter_flight_controller_if_button_press:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_button_front_left,"1"],[Lang.Blocks.byrobot_dronefighter_controller_button_front_right,
"2"],[Lang.Blocks.byrobot_dronefighter_controller_button_front_left_right,"3"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up_left,"4"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up_right,"8"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_up,"16"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_left,"32"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_right,"64"],[Lang.Blocks.byrobot_dronefighter_controller_button_center_down,"128"],
[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_left,"256"],[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_right,"512"],[Lang.Blocks.byrobot_dronefighter_controller_button_bottom_left_right,"768"]],value:"1",fontSize:11}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_controller_if_button_press"},paramsKeyMap:{BUTTON:0},"class":"byrobot_dronefighter_flight_boolean_input",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=Entry.hw.portData;return c.button_button==
b.getField("BUTTON")&&2==c.button_event?!0:!1},syntax:{js:[],py:[]}},byrobot_dronefighter_flight_controller_if_joystick_direction:{color:"#00979D",skeleton:"basic_boolean_field",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_left,"joystick_left_direction"],[Lang.Blocks.byrobot_dronefighter_common_right,"joystick_right_direction"]],value:"joystick_left_direction",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left_up,
"17"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_up,"18"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right_up,"20"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left,"33"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_center,"34"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right,"36"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_left_down,"65"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_down,
"66"],[Lang.Blocks.byrobot_dronefighter_controller_joystick_direction_right_down,"68"]],value:"34",fontSize:11}],events:{},def:{params:[null,null],type:"byrobot_dronefighter_flight_controller_if_joystick_direction"},paramsKeyMap:{DEVICE:0,DIRECTION:1},"class":"byrobot_dronefighter_flight_boolean_input",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=Entry.hw.portData;var d=b.getField("DEVICE");return c[d]==b.getField("DIRECTION")?!0:!1}},byrobot_dronefighter_flight_controller_light_manual_single_off:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_controller_light_manual_single_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_controller_light",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.setLightManual(b,17,255,0)}},byrobot_dronefighter_flight_controller_light_manual_single:{color:"#00979D",skeleton:"basic",statements:[],
params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_all,"255"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_1,"128"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_2,"64"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_3,"32"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_4,"16"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_5,"8"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_6,"4"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_blue,
"2"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_red,"1"]],value:"128",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_on,"220"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_off,"0"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b25,"75"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b50,"125"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b75,"200"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b100,"255"]],
value:"220",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_flight_controller_light_manual_single"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_flight_controller_light",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getField("FLAGS"));var d=parseInt(b.getField("BRIGHTNESS"));return Entry.byrobot_dronefighter_flight.setLightManual(b,17,c,d)}},byrobot_dronefighter_flight_controller_light_manual_single_input:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0b11111111"]},{type:"text",params:["255"]},null],type:"byrobot_dronefighter_flight_controller_light_manual_single_input"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_flight_controller_light",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=b.getNumberValue("FLAGS");
var d=b.getNumberValue("BRIGHTNESS");return Entry.byrobot_dronefighter_flight.setLightManual(b,17,c,d)}},byrobot_dronefighter_flight_drone_light_manual_single_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_light_manual_single_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_drone_light",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.setLightManual(b,
16,255,0)}},byrobot_dronefighter_flight_drone_light_manual_single:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_all,"255"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_1,"128"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_2,"64"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_3,"32"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_4,"16"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_blue,
"8"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_red,"4"]],value:"128",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_common_light_manual_on,"220"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_off,"0"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b25,"75"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b50,"125"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b75,"200"],[Lang.Blocks.byrobot_dronefighter_common_light_manual_b100,"255"]],
value:"220",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_flight_drone_light_manual_single"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_flight_drone_light",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getField("FLAGS"));var d=parseInt(b.getField("BRIGHTNESS"));return Entry.byrobot_dronefighter_flight.setLightManual(b,16,c,d)}},byrobot_dronefighter_flight_drone_light_manual_single_input:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0b11111111"]},{type:"text",params:["255"]},null],type:"byrobot_dronefighter_flight_drone_light_manual_single_input"},paramsKeyMap:{FLAGS:0,BRIGHTNESS:1},"class":"byrobot_dronefighter_flight_drone_light",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=b.getNumberValue("FLAGS");var d=
b.getNumberValue("BRIGHTNESS");return Entry.byrobot_dronefighter_flight.setLightManual(b,16,c,d)}},byrobot_dronefighter_flight_controller_buzzer_off:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_controller_buzzer_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_buzzer",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.setBuzzerStop(b)}},
byrobot_dronefighter_flight_controller_buzzer_scale:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,"11"]],value:"0",fontSize:11},
{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,null],type:"byrobot_dronefighter_flight_controller_buzzer_scale"},paramsKeyMap:{OCTAVE:0,SCALE:1},"class":"byrobot_dronefighter_flight_buzzer",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE"));return-1==d?Entry.byrobot_dronefighter_flight.setBuzzerMute(b,6E4,!1,!0):Entry.byrobot_dronefighter_flight.setBuzzerScale(b,c,d,6E4,!1,
!0)}},byrobot_dronefighter_flight_controller_buzzer_scale_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,
"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,"11"]],value:"0",fontSize:11},
{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_buzzer_scale_delay"},paramsKeyMap:{OCTAVE:0,SCALE:1,TIME:2},"class":"byrobot_dronefighter_flight_buzzer",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE")),e=parseInt(1E3*b.getNumberValue("TIME"));return-1==d?Entry.byrobot_dronefighter_flight.setBuzzerMute(b,
e,!0,!0):Entry.byrobot_dronefighter_flight.setBuzzerScale(b,c,d,e,!0,!0)}},byrobot_dronefighter_flight_controller_buzzer_scale_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["4","3"],["5","4"],["6","5"],["7","6"],["8","7"]],value:"4",fontSize:11},{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_controller_buzzer_mute,"-1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_c,"0"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_cs,"1"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_d,
"2"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_ds,"3"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_e,"4"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_f,"5"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_fs,"6"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_g,"7"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_gs,"8"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_a,"9"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_as,"10"],[Lang.Blocks.byrobot_dronefighter_controller_buzzer_b,
"11"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null,{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_buzzer_scale_reserve"},paramsKeyMap:{OCTAVE:0,SCALE:1,TIME:2},"class":"byrobot_dronefighter_flight_buzzer",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getField("OCTAVE"));var d=parseInt(b.getField("SCALE")),e=parseInt(1E3*b.getNumberValue("TIME"));
return-1==d?Entry.byrobot_dronefighter_flight.setBuzzerMute(b,e,!1,!1):Entry.byrobot_dronefighter_flight.setBuzzerScale(b,c,d,e,!1,!1)}},byrobot_dronefighter_flight_controller_buzzer_hz:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},null],type:"byrobot_dronefighter_flight_controller_buzzer_hz"},paramsKeyMap:{HZ:0},"class":"byrobot_dronefighter_flight_buzzer",
isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));return Entry.byrobot_dronefighter_flight.setBuzzerHz(b,c,6E4,!1,!0)}},byrobot_dronefighter_flight_controller_buzzer_hz_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1000"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_buzzer_hz_delay"},
paramsKeyMap:{HZ:0,TIME:1},"class":"byrobot_dronefighter_flight_buzzer",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));var d=parseInt(1E3*b.getNumberValue("TIME"));return Entry.byrobot_dronefighter_flight.setBuzzerHz(b,c,d,!0,!0)}},byrobot_dronefighter_flight_controller_buzzer_hz_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",
size:12}],events:{},def:{params:[{type:"text",params:["1000"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_buzzer_hz_reserve"},paramsKeyMap:{HZ:0,TIME:1},"class":"byrobot_dronefighter_flight_buzzer",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getNumberValue("HZ",b));var d=parseInt(1E3*b.getNumberValue("TIME"));return Entry.byrobot_dronefighter_flight.setBuzzerHz(b,c,d,!1,!1)}},byrobot_dronefighter_flight_controller_vibrator_off:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_controller_vibrator_off"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_vibrator",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.setVibratorStop(b)}},byrobot_dronefighter_flight_controller_vibrator_on_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",
accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_vibrator_on_delay"},paramsKeyMap:{TIMEON:0},"class":"byrobot_dronefighter_flight_vibrator",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));return Entry.byrobot_dronefighter_flight.setVibrator(b,c,0,c,!0,!0)}},byrobot_dronefighter_flight_controller_vibrator_on_reserve:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_vibrator_on_reserve"},paramsKeyMap:{TIMEON:0},"class":"byrobot_dronefighter_flight_vibrator",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));return Entry.byrobot_dronefighter_flight.setVibrator(b,c,0,c,!1,!1)}},byrobot_dronefighter_flight_controller_vibrator_delay:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["0.02"]},{type:"text",params:["0.2"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_vibrator_delay"},paramsKeyMap:{TIMEON:0,TIMEOFF:1,TIMERUN:2},"class":"byrobot_dronefighter_flight_vibrator",isNotFor:["byrobot_dronefighter_flight"],
func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));var d=parseInt(1E3*b.getNumberValue("TIMEOFF")),e=parseInt(1E3*b.getNumberValue("TIMERUN"));return Entry.byrobot_dronefighter_flight.setVibrator(b,c,d,e,!0,!0)}},byrobot_dronefighter_flight_controller_vibrator_reserve:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",
params:["0.02"]},{type:"text",params:["0.2"]},{type:"text",params:["1"]},null],type:"byrobot_dronefighter_flight_controller_vibrator_reserve"},paramsKeyMap:{TIMEON:0,TIMEOFF:1,TIMERUN:2},"class":"byrobot_dronefighter_flight_vibrator",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(1E3*b.getNumberValue("TIMEON"));var d=parseInt(1E3*b.getNumberValue("TIMEOFF")),e=parseInt(1E3*b.getNumberValue("TIMERUN"));return Entry.byrobot_dronefighter_flight.setVibrator(b,c,d,e,!1,!1)}},byrobot_dronefighter_flight_drone_irmessage:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["100"]},null],type:"byrobot_dronefighter_flight_drone_irmessage"},paramsKeyMap:{IRMESSAGE:0},"class":"byrobot_dronefighter_flight_irmessage",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=b.getNumberValue("IRMESSAGE",b);return Entry.byrobot_dronefighter_flight.sendIrMessage(b,c)}},byrobot_dronefighter_flight_drone_motor_stop:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_motor_stop"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_motor",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.sendStop(b)}},byrobot_dronefighter_flight_drone_motorsingle:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[["1","0"],["2","1"],
["3","2"],["4","3"]],value:"0",fontSize:11},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"text",params:["1000"]},null],type:"byrobot_dronefighter_flight_drone_motorsingle"},paramsKeyMap:{MOTORINDEX:0,MOTORSPEED:1},"class":"byrobot_dronefighter_flight_motor",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getField("MOTORINDEX"));var d=parseInt(b.getNumberValue("MOTORSPEED",b));return Entry.byrobot_dronefighter_flight.setMotorSingle(b,
c,1,d)}},byrobot_dronefighter_flight_drone_motorsingle_input:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"text",params:["1"]},{type:"text",params:["1000"]},null],type:"byrobot_dronefighter_flight_drone_motorsingle_input"},paramsKeyMap:{MOTORINDEX:0,MOTORSPEED:1},"class":"byrobot_dronefighter_flight_motor",isNotFor:["byrobot_dronefighter_flight"],
func:function(c,b){c=parseInt(b.getNumberValue("MOTORINDEX",b))-1;var d=parseInt(b.getNumberValue("MOTORSPEED",b));return Entry.byrobot_dronefighter_flight.setMotorSingle(b,c,1,d)}},byrobot_dronefighter_flight_drone_command_mode_vehicle_drone:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_command_mode_vehicle_drone"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_control_flight",
isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.setModeVehicle(b,16)}},byrobot_dronefighter_flight_drone_control_drone_takeoff:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_control_drone_takeoff"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,
b){return Entry.byrobot_dronefighter_flight.setEventFlight(b,17,200)}},byrobot_dronefighter_flight_drone_control_drone_landing:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_control_drone_landing"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.setEventFlight(b,
18,200)}},byrobot_dronefighter_flight_drone_control_drone_stop:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_control_drone_stop"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.sendStop(b)}},byrobot_dronefighter_flight_drone_control_coordinate:{color:"#00979D",
skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_coordinate_world,"1"],[Lang.Blocks.byrobot_dronefighter_drone_coordinate_local,"2"]],value:"1",fontSize:11},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,null],type:"byrobot_dronefighter_flight_drone_control_coordinate"},paramsKeyMap:{COORDINATE:0},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,
b){c=b.getField("COORDINATE");return Entry.byrobot_dronefighter_flight.sendCommand(b,16,32,c)}},byrobot_dronefighter_flight_drone_control_drone_reset_heading:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null],type:"byrobot_dronefighter_flight_drone_control_drone_reset_heading"},paramsKeyMap:{},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){return Entry.byrobot_dronefighter_flight.sendCommand(b,
16,34,160)}},byrobot_dronefighter_flight_drone_control_quad_one:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_control_quad_roll,"control_roll"],[Lang.Blocks.byrobot_dronefighter_drone_control_quad_pitch,"control_pitch"],[Lang.Blocks.byrobot_dronefighter_drone_control_quad_yaw,"control_yaw"],[Lang.Blocks.byrobot_dronefighter_drone_control_quad_throttle,"control_throttle"]],value:"control_throttle",fontSize:11},{type:"Block",
accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["0"]},null],type:"byrobot_dronefighter_flight_drone_control_quad_one"},paramsKeyMap:{CONTROLTARGET:0,VALUE:1},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=b.getField("CONTROLTARGET");var d=parseInt(b.getNumberValue("VALUE",b));return Entry.byrobot_dronefighter_flight.sendControlQuadSingle(b,c,d,0,!1)}},
byrobot_dronefighter_flight_drone_control_quad_one_delay:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Dropdown",options:[[Lang.Blocks.byrobot_dronefighter_drone_control_quad_roll,"control_roll"],[Lang.Blocks.byrobot_dronefighter_drone_control_quad_pitch,"control_pitch"],[Lang.Blocks.byrobot_dronefighter_drone_control_quad_yaw,"control_yaw"],[Lang.Blocks.byrobot_dronefighter_drone_control_quad_throttle,"control_throttle"]],value:"control_throttle",fontSize:11},{type:"Block",accept:"string"},
{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[null,{type:"number",params:["100"]},{type:"number",params:["1"]},null],type:"byrobot_dronefighter_flight_drone_control_quad_one_delay"},paramsKeyMap:{CONTROLTARGET:0,VALUE:1,TIME:2},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=b.getField("CONTROLTARGET");var d=parseInt(b.getNumberValue("VALUE",b)),e=parseInt(1E3*b.getNumberValue("TIME",
b));return Entry.byrobot_dronefighter_flight.sendControlQuadSingle(b,c,d,e,!0)}},byrobot_dronefighter_flight_drone_control_quad:{color:"#00979D",skeleton:"basic",statements:[],params:[{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Block",accept:"string"},{type:"Indicator",img:"block_icon/hardware_03.png",size:12}],events:{},def:{params:[{type:"number",params:["0"]},{type:"number",params:["0"]},{type:"number",params:["0"]},{type:"number",params:["0"]},
null],type:"byrobot_dronefighter_flight_drone_control_quad"},paramsKeyMap:{ROLL:0,PITCH:1,YAW:2,THROTTLE:3},"class":"byrobot_dronefighter_flight_control_flight",isNotFor:["byrobot_dronefighter_flight"],func:function(c,b){c=parseInt(b.getNumberValue("ROLL",b));var d=parseInt(b.getNumberValue("PITCH",b)),e=parseInt(b.getNumberValue("YAW",b)),f=parseInt(b.getNumberValue("THROTTLE",b));return Entry.byrobot_dronefighter_flight.sendControlQuad(b,c,d,e,f,0,!1)}},boolean_shell:{color:"#AEB8FF",skeleton:"basic_boolean_field",
template:"%1",isPrimitive:!0,params:[{type:"Text",text:"A",color:"#3D3D3D"}],func:function(c,b){}}};(function(){for(var c in Entry.block){var b=Entry.block[c];if(b.parent){var d=function(){};d.prototype=Entry.block[b.parent];var d=new d,e;for(e in b)d[e]=b[e];Entry.block[c]=d}}})();"object"==typeof exports&&(exports.block=Entry.block);Entry.BlockMenu=function(c,b,d,e,f){Entry.Model(this,!1);this.reDraw=Entry.Utils.debounce(this.reDraw,100);this._dAlign=Entry.Utils.debounce(this.align,100);this._dAlign=this.align;this._setDynamic=Entry.Utils.debounce(this._setDynamic,150);this._dSelectMenu=Entry.Utils.debounce(this.selectMenu,0);this._align=b||"CENTER";this.setAlign(this._align);this._scroll=void 0!==e?e:!1;this._bannedClass=[];this._categories=[];this.suffix="blockMenu";this._isSelectingMenu=!1;this._dynamicThreads=[];this._setDynamicTimer=
null;this._renderedCategories={};this.categoryRendered=!1;this.readOnly=void 0===f?!0:f;c="string"===typeof c?$("#"+c):$(c);if("DIV"!==c.prop("tagName"))return console.error("Dom is not div element");this.view=c;this.visible=!0;this._svgId="blockMenu"+(new Date).getTime();this._clearCategory();this._categoryData=d;this._generateView(d);this._splitters=[];this.setWidth();this.svg=Entry.SVG(this._svgId);Entry.Utils.addFilters(this.svg,this.suffix);this.pattern=Entry.Utils.addBlockPattern(this.svg,this.suffix).pattern;
this.svgGroup=this.svg.elem("g");this.svgThreadGroup=this.svgGroup.elem("g");this.svgThreadGroup.board=this;this.svgBlockGroup=this.svgGroup.elem("g");this.svgBlockGroup.board=this;this.changeEvent=new Entry.Event(this);this.categoryDoneEvent=new Entry.Event(this);this.observe(this,"_handleDragBlock",["dragBlock"]);this.changeCode(new Entry.Code([]));d&&this._generateCategoryCodes();this._scroll&&(this._scroller=new Entry.BlockMenuScroller(this),this._addControl(c));Entry.documentMousedown&&Entry.documentMousedown.attach(this,
this.setSelectedBlock);this.code&&Entry.keyPressed&&Entry.keyPressed.attach(this,this._captureKeyEvent);Entry.windowResized&&(c=_.debounce(this.updateOffset,200),Entry.windowResized.attach(this,c));Entry.addEventListener("setBlockMenuDynamic",function(){this._setDynamicTimer=this._setDynamic.apply(this,arguments)}.bind(this));Entry.addEventListener("cancelBlockMenuDynamic",this._cancelDynamic.bind(this))};
(function(c){c.schema={code:null,dragBlock:null,closeBlock:null,selectedBlockView:null};c._generateView=function(b){var c=this.view,e=this;b&&this._generateCategoryView(b);this.blockMenuContainer=Entry.Dom("div",{"class":"blockMenuContainer",parent:c});this.svgDom=Entry.Dom($('<svg id="'+this._svgId+'" class="blockMenu" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'),{parent:this.blockMenuContainer});this.svgDom.mouseenter(function(b){e._scroller&&e._scroller.setOpacity(1);b=e.workspace.selectedBlockView;
if(!(!Entry.playground||Entry.playground.resizing||b&&b.dragMode===Entry.DRAG_MODE_DRAG)){Entry.playground.focusBlockMenu=!0;var c=e.svgGroup.getBBox();b=e.hasCategory()?64:0;c=c.width+c.x+b;c>Entry.interfaceState.menuWidth&&(this.widthBackup=Entry.interfaceState.menuWidth-b,$(this).stop().animate({width:c-b},200))}});this.svgDom.mouseleave(function(b){Entry.playground&&!Entry.playground.resizing&&(e._scroller&&e._scroller.setOpacity(0),(b=this.widthBackup)&&$(this).stop().animate({width:b},200),
delete this.widthBackup,delete Entry.playground.focusBlockMenu)});$(window).scroll(function(){e.updateOffset()})};c.changeCode=function(b,c){b instanceof Array&&(b=new Entry.Code(b));if(!(b instanceof Entry.Code))return console.error("You must inject code instance");this.codeListener&&this.code.changeEvent.detach(this.codeListener);var d=this;this.set({code:b});this.codeListener=this.code.changeEvent.attach(this,function(){d.changeEvent.notify()});b.createView(this);c?this.align():this._dAlign()};
c.bindCodeView=function(b){this.svgBlockGroup.remove();this.svgThreadGroup.remove();this.svgBlockGroup=b.svgBlockGroup;this.svgThreadGroup=b.svgThreadGroup;this.svgGroup.appendChild(this.svgThreadGroup);this.svgGroup.appendChild(this.svgBlockGroup);this._scroller&&this.svgGroup.appendChild(this._scroller.svgGroup)};c.align=function(){var b=this.code;if(this._isOn()&&b){this._clearSplitters();var c=10,e="LEFT"==this._align?10:this.svgDom.width()/2,f,b=this._getSortedBlocks(),g=b[0];b[1].forEach(function(b){b=
b.view;b.set({display:!1});b.detach()});var h=!this._renderedCategories[this.lastSelector];g.forEach(function(b){var d=b.view;d.attach();d.set({display:!0});h&&d.reDraw();b=Entry.block[b.type].class;f&&f!==b&&(this._createSplitter(c),c+=15);f=b;b=e-d.offsetX;"CENTER"==this._align&&(b-=d.width/2);c-=d.offsetY;d._moveTo(b,c,!1);c+=d.height+15}.bind(this));this.updateSplitters();if(this.workspace)switch(this.workspace.getMode()){case Entry.Workspace.MODE_BOARD:case Entry.Workspace.MODE_OVERLAYBOARD:this.renderBlock(b);
break;case Entry.Workspace.MODE_VIMBOARD:this.renderText(b);break;default:this.renderBlock(b)}"func"!==this.lastSelector&&(this._renderedCategories[this.lastSelector]=!0);this.changeEvent.notify()}};c.cloneToGlobal=function(b){var c=this.dragBlock;if(!this._boardBlockView&&null!==c){var e=Entry.GlobalSvg,f=this.workspace,g=f.getMode(),h=Entry.Workspace,k=this._svgWidth,l=f.selectedBoard,m=c.mouseDownCoordinate,q=f=0;m&&(f=b.pageX-m.x,q=b.pageY-m.y);!l||g!==h.MODE_BOARD&&g!==h.MODE_OVERLAYBOARD?e.setView(c,
g)&&(e.adjust(f,q),e.addControl(b)):l.code&&(h=c.block,c=h.getThread(),h&&c&&(l=this.offset().top-l.offset().top-$(window).scrollTop(),c=c.toJSON(!0),c[0].x=c[0].x-k+(f||0),c[0].y=c[0].y+l+(q||0),k=this._boardBlockView=Entry.do("addThreadFromBlockMenu",c).value.getFirstBlock().view,k.onMouseDown.call(k,b),k.dragInstance.set({isNew:!0}),e.setView(k,g)))}};c.terminateDrag=function(){if(this._boardBlockView){var b=this._boardBlockView;if(b){this.workspace.getBoard();this._boardBlockView=null;var c=Entry.GlobalSvg.left,
e=Entry.GlobalSvg.width/2,b=b.getBoard().offset().left;return c<b-e}}};c.getCode=function(b){return this.code};c.setSelectedBlock=function(b){var c=this.selectedBlockView;c&&c.removeSelected();b instanceof Entry.BlockView?b.addSelected():b=null;this.set({selectedBlockView:b})};c.hide=function(){this.view.addClass("entryRemove")};c.show=function(){this.view.removeClass("entryRemove")};c.renderText=function(b){if(this._isOn()){b=b||this._getSortedBlocks();var c=Entry.BlockView.RENDER_MODE_TEXT;b[0].forEach(function(b){c!==
b.view.renderMode&&(b=b.getThread(),b.view?b.view.renderText():b.createView(this,Entry.BlockView.RENDER_MODE_TEXT))}.bind(this));return b}};c.renderBlock=function(b){if(this._isOn()){b=b||this._getSortedBlocks();var c=Entry.BlockView.RENDER_MODE_BLOCK;b[0].forEach(function(b){c!==b.view.renderMode&&(b=b.getThread(),b.view?b.view.renderBlock():b.createView(this,Entry.BlockView.RENDER_MODE_BLOCK))}.bind(this));return b}};c._createSplitter=function(b){b=this.svgBlockGroup.elem("line",{x1:20,y1:b,x2:this._svgWidth-
20,y2:b,stroke:"#b5b5b5"});this._splitters.push(b)};c.updateSplitters=function(b){b=void 0===b?0:b;var c=this._svgWidth-20,e;this._splitters.forEach(function(d){e=parseFloat(d.getAttribute("y1"))+b;d.attr({x2:c,y1:e,y2:e})})};c._clearSplitters=function(){for(var b=this._splitters,c=b.length-1;0<=c;c--)b[c].remove(),b.pop()};c.setWidth=function(){this._svgWidth=this.blockMenuContainer.width();this.updateSplitters()};c.setMenu=function(){this.hasCategory()&&(this._categoryData.forEach(function(b){var c=
b.category;b=b.blocks;if("func"===c){var e=this.code.getThreadsByCategory("func").map(function(b){return b.getFirstBlock().type});b=e.length?e:b}for(var e=b.length,f=0;f<b.length;f++)this.checkBanClass(Entry.block[b[f]])&&e--;c=this._categoryElems[c];0===e?c.addClass("entryRemove"):c.removeClass("entryRemove")}.bind(this)),this.selectMenu(0,!0))};c.getCategoryCodes=function(b){};c._convertSelector=function(b){if(!Entry.Utils.isNumber(b))return b;b=Number(b);for(var c=this._categories,e=this._categoryElems,
f=0;f<c.length;f++){var g=c[f];if(!e[g].hasClass("entryRemove")&&0===b--)return g}};c.selectMenu=function(b,c,e){if(this._isOn()&&this._categoryData){var d=this._selectedCategoryView,g=this._convertSelector(b);if(void 0===b||g){g&&(this.lastSelector=g);this._isSelectingMenu=!0;switch(g){case "variable":Entry.playground.checkVariables();break;case "arduino":this._generateHwCode(),this.align()}b=this._categoryElems[g];var h=!1,k=this.workspace.board,l=k.view;d&&d.removeClass("entrySelectedCategory");
c=c||!this.hasCategory();b!=d||c?!d&&this.hasCategory()?(this.visible||(h=!0,l.addClass("foldOut"),Entry.playground.showTabs()),l.removeClass("folding"),this.visible=!0):g||(this._selectedCategoryView=null):(l.addClass("folding"),this._selectedCategoryView=null,b&&b.removeClass("entrySelectedCategory"),Entry.playground.hideTabs(),h=!0,this.visible=!1);h&&Entry.bindAnimationCallbackOnce(l,function(){k.scroller.resizeScrollBar.call(k.scroller);l.removeClass("foldOut");Entry.windowResized.notify()});
this._isSelectingMenu=!1;this.visible&&(this._selectedCategoryView=b)&&b.addClass("entrySelectedCategory");!0!==e&&this._dAlign()}else this._dAlign()}};c._generateCategoryCodes=function(b){b||(this.categoryRendered=!1,this.view.addClass("init"),b=Object.keys(this._categoryElems));if(b.length){var c=b.shift();"arduino"!==c?this._generateCategoryCode(c):this._generateHwCode(!0);b.length?this._generateCodesTimer=setTimeout(function(){this._generateCategoryCodes(b)}.bind(this),0):(this._generateCodesTimer=
null,this.view.removeClass("init"),this.align(),this.categoryRendered=!0,this.categoryDoneEvent.notify())}};c._generateCategoryCode=function(b){if(this._categoryData){var c=this.code,e=[],f=this._categoryData.filter(function(c){return c.category==b})[0];if(f){f.blocks.forEach(function(c){var d=Entry.block[c];d.category=f.category;if(d&&d.def)if(d.defs)for(d.defs.forEach(function(c){c.category=b}),c=0;c<d.defs.length;c++)e.push([d.defs[c]]);else d.def.category=b,e.push([d.def]);else e.push([{type:c,
category:b}])});this._categories.push(b);var g;if("func"==b){var h=this.code.getThreadsByCategory("func");h.length&&(g=this.code.getThreadIndex(h[0]))}e.forEach(function(b){b&&b[0]&&(b[0].x=-99999,c.createThread(b,g),void 0!==g&&g++,delete b[0].x)})}}};c.banClass=function(b,c){0>this._bannedClass.indexOf(b)&&(this._bannedClass.push(b),!0!==c&&this._dAlign())};c.unbanClass=function(b,c){b=this._bannedClass.indexOf(b);-1<b&&(this._bannedClass.splice(b,1),!0!==c&&this._dAlign())};c.checkBanClass=function(b){if(b){b=
b.isNotFor;if(!b||0===b.length)return!1;for(var c,e=this._bannedClass,f=0;f<b.length;f++)if((c=b[f])&&-1===e.indexOf(c))return!1;return!0}};c.checkCategory=function(b){if(this.hasCategory()&&b){if(!this.lastSelector||this._selectDynamic)return!0;var c="category_"+this.lastSelector;b=b.isFor;if(this.lastSelector&&b&&0>b.indexOf(c))return!0}};c._addControl=function(b){var c=this;b.on("wheel",function(){c._mouseWheel.apply(c,arguments)});c._scroller&&$(this.svg).bind("mousedown touchstart",function(b){c.onMouseDown.apply(c,
arguments)})};c.removeControl=function(b){this.svgDom.off(b)};c.onMouseDown=function(b){function c(b){b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();b=Entry.Utils.convertMouseEvent(b);var c=f.dragInstance;f._scroller.scroll(-b.pageY+c.offsetY);c.set({offsetY:b.pageY})}function e(b){$(document).unbind(".blockMenu");delete f.dragInstance}b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();var f=this;if(0===b.button||b.originalEvent&&b.originalEvent.touches){b=
Entry.Utils.convertMouseEvent(b);Entry.documentMousedown&&Entry.documentMousedown.notify(b);var g=$(document);g.bind("mousemove.blockMenu",c);g.bind("mouseup.blockMenu",e);g.bind("touchmove.blockMenu",c);g.bind("touchend.blockMenu",e);this.dragInstance=new Entry.DragInstance({startY:b.pageY,offsetY:b.pageY})}};c._mouseWheel=function(b){b=b.originalEvent;b.preventDefault();var c=Entry.disposeEvent;c&&c.notify(b);this._scroller.scroll(-b.wheelDeltaY||b.deltaY/3)};c.dominate=function(b){this.svgBlockGroup.appendChild(b.view.svgGroup)};
c.reDraw=function(){if(this._isOn()){var b=this.lastSelector;this._selectDynamic&&(b=void 0);this.selectMenu(b,!0);this._getSortedBlocks().shift().forEach(function(b){b.view.reDraw()})}};c._handleDragBlock=function(){this._boardBlockView=null;this._scroller&&this._scroller.setOpacity(0)};c._captureKeyEvent=function(b){var c=b.keyCode;b.ctrlKey&&"workspace"==Entry.type&&48<c&&58>c&&(b.preventDefault(),setTimeout(function(){this._cancelDynamic(!0);this._dSelectMenu(c-49,!0)}.bind(this),200))};c.enablePattern=
function(){this.pattern.removeAttribute("style")};c.disablePattern=function(){this.pattern.attr({style:"display: none"})};c._clearCategory=function(){this._generateCodesTimer&&(clearTimeout(this._generateCodesTimer),this._generateCodesTimer=null);this._selectedCategoryView=null;this._categories=[];var b=this._categoryElems,c;for(c in b)b[c].remove();this._categoryElems={};this.code&&this.code.constructor==Entry.Code&&this.code.clear();this._categoryCol&&this._categoryCol.remove();this._categoryData=
null};c.clearCategory=c._clearCategory;c.setCategoryData=function(b){this._clearCategory();this._categoryData=b;this._generateCategoryView(b);this._generateCategoryCodes();this.setMenu();Entry.resizeElement()};c.setNoCategoryData=function(b){this._clearCategory();Entry.resizeElement();this.changeCode(b,!0);this.categoryDoneEvent.notify()};c._generateCategoryView=function(b){if(b){this._categoryCol&&this._categoryCol.remove&&this._categoryCol.remove();this._categoryCol=Entry.Dom("ul",{class:"entryCategoryListWorkspace"});
this.view.prepend(this._categoryCol);for(var c=0;c<b.length;c++)this._generateCategoryElement(b[c].category)}};c._generateCategoryElement=function(b){var c=this;(function(b,d){b.text(Lang.Blocks[d.toUpperCase()]);c._categoryElems[d]=b;b.bindOnClick(function(b){c._cancelDynamic(!0,function(){c.selectMenu(d,void 0,!0);c.align()})})})(Entry.Dom("li",{id:"entryCategory"+b,class:"entryCategoryElementWorkspace entryRemove",parent:this._categoryCol}),b)};c.updateOffset=function(){this._offset=this.svgDom.offset()};
c.offset=function(){(!this._offset||0===this._offset.top&&0===this._offset.left)&&this.updateOffset();return this._offset};c._generateHwCode=function(b){if(this._categoryData){var c=this.code,e=c.getThreadsByCategory("arduino");e.forEach(function(b){b.destroy()});for(var e=this._categoryData,f,g=e.length-1;0<=g;g--)if("arduino"===e[g].category){f=e[g].blocks;break}if(f){e=[];for(g=0;g<f.length;g++){var h=f[g],k=Entry.block[h];if(!this.checkBanClass(k))if(k&&k.def)if(k.defs)for(k.defs.forEach(function(b){b.category=
"arduino"}),g=0;g<k.defs.length;g++)e.push([k.defs[g]]);else k.def.category="arduino",e.push([k.def]);else e.push([{type:h,category:"arduino"}])}e.forEach(function(d){b&&(d[0].x=-99999);c.createThread(d);delete d[0].x})}}};c.setAlign=function(b){this._align=b||"CENTER"};c._isNotVisible=function(b){return this.checkCategory(b)||this.checkBanClass(b)};c._getSortedBlocks=function(){var b=[],c=[],e=this.code.getThreads();if(this._selectDynamic){for(var b=Array(this._dynamicThreads.length),f=0;f<e.length;f++){var g=
e[f].getFirstBlock();if(g){var h=g.type,h=this._dynamicThreads.indexOf(h);-1<h?b[h]=g:c.push(g)}}b=b.filter(function(b){return b instanceof Entry.Block})}else for(f=0;f<e.length;f++)if(g=e[f].getFirstBlock())h=g.type,this._isNotVisible(Entry.block[h])?c.push(g):b.push(g);return[b,c]};c._setDynamic=function(b){this._isOn()&&(this._selectDynamic=!0,this._dynamicThreads=b,this.selectMenu(void 0,!0))};c._cancelDynamic=function(b,c){this._setDynamicTimer&&(clearTimeout(this._setDynamicTimer),this._setDynamicTimer=
null);this._selectDynamic=!1;this._dynamicThreads=[];!0!==b&&this.selectMenu(this.lastSelector,!0);c&&c()};c._isOn=function(){return"none"!==this.view.css("display")};c.deleteRendered=function(b){delete this._renderedCategories[b]};c.hasCategory=function(){return!!this._categoryData};c.getDom=function(b){if(1<=b.length){if("category"===b[0])return this._categoryElems[b[1]];b=b[0][0].type;var c=this.getSvgDomByType(b);this.align();this.scrollToType(b);return c}};c.getSvgDomByType=function(b){for(var c=
this.code.getThreads(),e=0;e<c.length;e++){var f=c[e].getFirstBlock();if(f.type===b)return f.view.svgGroup}};c.scrollToType=function(b){if(b){var c=this.code.getBlockList(!1,b)[0].view;this.getSvgDomByType(b).getBoundingClientRect().bottom>$(window).height()-10&&this._scroller.scrollByPx(c.y-20)}}})(Entry.BlockMenu.prototype);Entry.BlockMenuScroller=function(c){var b=this;this.board=c;this.board.changeEvent.attach(this,this._reset);this.svgGroup=null;this.vRatio=this.vY=this.vWidth=this.hX=0;this._visible=!0;this._opacity=-1;this.mouseHandler=function(){b.onMouseDown.apply(b,arguments)};this.createScrollBar();this.setOpacity(0);this._addControl();this._domHeight=0;this._dResizeScrollBar=Entry.Utils.debounce(this.resizeScrollBar,50);Entry.windowResized&&Entry.windowResized.attach(this,this._dResizeScrollBar)};
Entry.BlockMenuScroller.RADIUS=7;
(function(c){c.createScrollBar=function(){this.svgGroup=this.board.svgGroup.elem("g",{class:"boardScrollbar"});this.vScrollbar=this.svgGroup.elem("rect",{rx:4,ry:4})};c.resizeScrollBar=function(){this._updateRatio();var b=this.board.blockMenuContainer,c=b.height();if(c!==this._domHeight)return this._domHeight=c,this.board.align();this._visible&&0!==this.vRatio&&this.vScrollbar.attr({width:9,height:b.height()/this.vRatio,x:b.width()-9})};c.updateScrollBar=function(b){this.vY+=b;this.vScrollbar.attr({y:this.vY})};
c.scroll=function(b){this.isVisible()&&(b=this._adjustValue(b)-this.vY,0!==b&&(this.board.code.moveBy(0,-b*this.vRatio),this.updateScrollBar(b)))};c.scrollByPx=function(b){this.vRatio||this._updateRatio();this.scroll(b/this.vRatio)};c._adjustValue=function(b){var c=this.board.svgDom.height(),c=c-c/this.vRatio;b=this.vY+b;b=Math.max(0,b);return b=Math.min(c,b)};c.setVisible=function(b){b!=this.isVisible()&&(this._visible=b,this.svgGroup.attr({display:!0===b?"block":"none"}))};c.setOpacity=function(b){this._opacity!=
b&&(this.vScrollbar.attr({opacity:b}),this._opacity=b)};c.isVisible=function(){return this._visible};c._updateRatio=function(){var b=this.board,c=b.svgBlockGroup.getBBox(),b=b.blockMenuContainer.height();this.vRatio=c=(c.height+20)/b;1>=c?this.setVisible(!1):this.setVisible(!0)};c._reset=function(){this.vY=0;this.vScrollbar.attr({y:this.vY});this._dResizeScrollBar()};c.onMouseDown=function(b){function c(b){b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();b=b.originalEvent&&
b.originalEvent.touches?b.originalEvent.touches[0]:b;var c=f.dragInstance;f.scroll(b.pageY-c.offsetY);c.set({offsetY:b.pageY})}function e(b){$(document).unbind(".scroll");delete f.dragInstance}var f=this;b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();if(0===b.button||b.originalEvent&&b.originalEvent.touches){Entry.documentMousedown&&Entry.documentMousedown.notify(b);var g;g=b.originalEvent&&b.originalEvent.touches?b.originalEvent.touches[0]:b;var h=$(document);h.bind("mousemove.scroll",
c);h.bind("mouseup.scroll",e);h.bind("touchmove.scroll",c);h.bind("touchend.scroll",e);f.dragInstance=new Entry.DragInstance({startY:g.pageY,offsetY:g.pageY})}b.stopPropagation()};c._addControl=function(){$(this.vScrollbar).bind("mousedown touchstart",this.mouseHandler)}})(Entry.BlockMenuScroller.prototype);Entry.BlockView=function(c,b,d){var e=this;Entry.Model(this,!1);this.block=c;this._lazyUpdatePos=Entry.Utils.debounce(c._updatePos.bind(c),200);this.mouseUpEvent=new Entry.Event(this);this.dAlignContent=Entry.Utils.debounce(this.alignContent,30);this._board=b;this._observers=[];this.set(c);this.svgGroup=b.svgBlockGroup.elem("g");this.svgGroup.blockView=this;this._schema=Entry.skinContainer.getSkin(c);if(void 0===this._schema)this.block.destroy(!1,!1);else{if(void 0===d){var f=this.getBoard().workspace;
this.renderMode=f&&f.getBlockViewRenderMode?f.getBlockViewRenderMode():Entry.BlockView.RENDER_MODE_BLOCK}else this.renderMode=Entry.BlockView.RENDER_MODE_BLOCK;this._schema.deletable&&this.block.setDeletable(this._schema.deletable);this._schema.copyable&&this.block.setCopyable(this._schema.copyable);!1!==this._schema.display&&!1!==c.display||this.set({display:!1});f=this._skeleton=Entry.skeleton[this._schema.skeleton];this._contents=[];this._statements=[];this._extensions=[];this.magnet={};this._paramMap=
{};f.magnets&&f.magnets(this).next&&(this.svgGroup.nextMagnet=this.block,this._nextGroup=this.svgGroup.elem("g",{class:"entryBlockNextGroup"}),this._observers.push(this.observe(this,"_updateMagnet",["contentHeight"])));this.isInBlockMenu=this.getBoard()instanceof Entry.BlockMenu;this.mouseHandler=function(){var b=e.block.events;b&&b.mousedown&&b.mousedown.forEach(function(b){b(e)});e.onMouseDown.apply(e,arguments)};this._startRender(c,d);this._observers.push(this.block.observe(this,"_setMovable",
["movable"]));this._observers.push(this.block.observe(this,"_setReadOnly",["movable"]));this._observers.push(this.block.observe(this,"_setCopyable",["copyable"]));this._observers.push(this.block.observe(this,"_updateColor",["deletable"],!1));this._observers.push(this.observe(this,"_updateBG",["magneting"],!1));this._observers.push(this.observe(this,"_updateOpacity",["visible"],!1));this._observers.push(this.observe(this,"_updateDisplay",["display"]));this._observers.push(this.observe(this,"_updateShadow",
["shadow"]));this._observers.push(this.observe(this,"_updateMagnet",["offsetY"]));this._observers.push(b.code.observe(this,"_setBoard",["board"],!1));this.dragMode=Entry.DRAG_MODE_NONE;Entry.Utils.disableContextmenu(this.svgGroup.node);b=c.events.viewAdd;"workspace"==Entry.type&&b&&!this.isInBlockMenu&&b.forEach(function(b){Entry.Utils.isFunction(b)&&b(c)})}};Entry.BlockView.PARAM_SPACE=5;Entry.BlockView.DRAG_RADIUS=5;Entry.BlockView.pngMap={};Entry.BlockView.RENDER_MODE_BLOCK=1;
Entry.BlockView.RENDER_MODE_TEXT=2;
(function(c){c.schema={id:0,type:Entry.STATIC.BLOCK_RENDER_MODEL,x:0,y:0,offsetX:0,offsetY:0,width:0,height:0,contentWidth:0,contentHeight:0,magneting:!1,visible:!0,animating:!1,shadow:!0,display:!0};c._startRender=function(b,c){var d=this;b=this._skeleton;var f={class:"block"};!1===this.display&&(f.display="none");this.svgGroup.attr(f);this._schema.css&&this.svgGroup.attr({style:this._schema.css});(f=b.classes)&&0!==f.length&&f.forEach(function(b){d.svgGroup.addClass(b)});f=b.path(this);this.pathGroup=
this.svgGroup.elem("g");this._updateMagnet();this._path=this.pathGroup.elem("path");Entry.isMobile()||($(this._path).mouseenter(function(b){d._mouseEnable&&d._changeFill(!0)}),$(this._path).mouseleave(function(b){d._mouseEnable&&d._changeFill(!1)}));var g=this._schema.color;this.block.deletable===Entry.Block.DELETABLE_FALSE_LIGHTEN&&(g=Entry.Utils.colorLighten(g));this._fillColor=g;f={d:f,fill:g,class:"blockPath"};if(this.magnet.next||this._skeleton.nextShadow)g=this.getBoard().suffix,this.pathGroup.attr({filter:"url(#entryBlockShadowFilter_"+
g+")"});else if(this.magnet.string||this.magnet.boolean)f.stroke=b.outerLine;b.outerLine&&(f["stroke-width"]="0.6");this._path.attr(f);this._moveTo(this.x,this.y,!1);this._startContentRender(c);this._startExtension(c);!0!==this._board.disableMouseEvent&&this._addControl();(c=this.guideSvgGroup)&&this.svgGroup.insertBefore(c,this.svgGroup.firstChild);this.bindPrev()};c._startContentRender=function(b){b=void 0===b?this.renderMode:b;this.contentSvgGroup&&this.contentSvgGroup.remove();this.statementSvgGroup&&
this.statementSvgGroup.remove();this.contentSvgGroup=this.svgGroup.elem("g",{class:"contentsGroup"});this._contents=[];var c=this._schema;c.statements&&c.statements.length&&(this.statementSvgGroup=this.svgGroup.elem("g",{class:"statementGroup"}));var e=/(%\d)/mi,f=this._getTemplate(b),g=this._getSchemaParams(b);b===Entry.BlockView.RENDER_MODE_TEXT&&/(if)+(.|\n)+(else)+/gmi.test(f)&&!e.test(f)&&this.isInBlockMenu&&(f=f.replace("else","%"+g.length+" else"));for(var h=f.split(e),f=0;f<h.length;f++){var k=
h[f];" "===k[0]&&(k=k.substring(1));" "===k[k.length-1]&&(k=k.substring(0,k.length-1));if(0!==k.length)if(e.test(k)){var l=Number(k.split("%")[1])-1,k=g[l],k=new Entry["Field"+k.type](k,this,l,b||this.renderMode,f);this._contents.push(k);this._paramMap[l]=k}else this._contents.push(new Entry.FieldText({text:k},this))}b=c.statements||[];for(f=0;f<b.length;f++)this._statements.push(new Entry.FieldStatement(b[f],this,f));this.alignContent(!1)};c._startExtension=function(b){this._extensions=this.block.extensions.map(function(c){return new Entry["Ext"+
c.type](c,this,b)}.bind(this))};c._updateSchema=function(){this._startContentRender()};c.changeType=function(b){this._schema=Entry.block[b||this.type];this._updateSchema()};c.alignContent=function(b){!0!==b&&(b=!1);for(var c=0,e=0,f=0,g=0,h=0,k=0,l=0;l<this._contents.length;l++){var m=this._contents[l];m instanceof Entry.FieldLineBreak?(this._alignStatement(b,g),m.align(g),g++,e=m.box.y,c=8):(m.align(c,e,b),l===this._contents.length-1||m instanceof Entry.FieldText&&0===m._text.length||(c+=Entry.BlockView.PARAM_SPACE));
m=m.box;0!==g?k=Math.max(1E6*Math.round(m.height),k):f=Math.max(m.height,f);c+=m.width;h=Math.max(h,c);this.set({contentWidth:h,contentHeight:f})}this.set({contentHeight:f+k});this._statements.length!=g&&this._alignStatement(b,g);b=this.getContentPos();this.contentSvgGroup.attr("transform","translate("+b.x+","+b.y+")");this.contentPos=b;this._render();this._updateMagnet();(b=this.getBoard().workspace)&&(this.isFieldEditing()||b.widgetUpdateEveryTime)&&b.widgetUpdateEvent.notify()};c.isFieldEditing=
function(){for(var b=this._contents,c=0;c<b.length;c++){var e=b[c];if(e&&e.isEditing())return!0}return!1};c._alignStatement=function(b,c){var d=this._skeleton.statementPos?this._skeleton.statementPos(this):[],f=this._statements[c];f&&(c=d[c])&&f.align(c.x,c.y,b)};c._render=function(){this._renderPath();this.set(this._skeleton.box(this))};c._renderPath=function(){var b=this._skeleton.path(this);this._path.attr({d:b});this.set({animating:!1});this._setBackgroundPath()};c._setPosition=function(b){this.svgGroup.attr("transform",
"translate("+this.x+","+this.y+")")};c._toLocalCoordinate=function(b){this._moveTo(0,0,!1);b.appendChild(this.svgGroup)};c._toGlobalCoordinate=function(b,c){b=this.getAbsoluteCoordinate(b);this._moveTo(b.x,b.y,!1,c);this.getBoard().svgBlockGroup.appendChild(this.svgGroup)};c._moveTo=function(b,c,e,f){var d=this.x,h=this.y;this.display||(c=b=-99999);d===b&&h===c||this.set({x:b,y:c});!0!==f&&this._lazyUpdatePos();this.visible&&this.display&&this._setPosition(e)};c._moveBy=function(b,c,e,f){return this._moveTo(this.x+
b,this.y+c,e,f)};c._addControl=function(){var b=this;this._mouseEnable=!0;$(this.svgGroup).bind("mousedown.blockViewMousedown touchstart.blockViewMousedown",b.mouseHandler);var c=b.block.events;c&&c.dblclick&&$(this.svgGroup).dblclick(function(){b._board.readOnly||c.dblclick.forEach(function(c){c&&c(b)})})};c.removeControl=function(){this._mouseEnable=!1;$(this.svgGroup).unbind(".blockViewMousedown")};c.onMouseDown=function(b){function d(b){b.stopPropagation();var d=h.workspace.getMode(),e;d===Entry.Workspace.MODE_VIMBOARD&&
c.vimBoardEvent(b,"dragOver");e=b.originalEvent&&b.originalEvent.touches?b.originalEvent.touches[0]:b;var k=g.mouseDownCoordinate,k=Math.sqrt(Math.pow(e.pageX-k.x,2)+Math.pow(e.pageY-k.y,2));if(g.dragMode==Entry.DRAG_MODE_DRAG||k>Entry.BlockView.DRAG_RADIUS)f&&(clearTimeout(f),f=null),g.movable&&(g.isInBlockMenu?h.cloneToGlobal(b):(b=!1,g.dragMode!=Entry.DRAG_MODE_DRAG&&(g._toGlobalCoordinate(void 0,!0),g.dragMode=Entry.DRAG_MODE_DRAG,g.block.getThread().changeEvent.notify(),Entry.GlobalSvg.setView(g,
d),b=!0),this.animating&&this.set({animating:!1}),0===g.dragInstance.height&&g.dragInstance.set({height:-1+g.height}),d=g.dragInstance,g._moveBy(e.pageX-d.offsetX,e.pageY-d.offsetY,!1,!0),d.set({offsetX:e.pageX,offsetY:e.pageY}),Entry.GlobalSvg.position(),g.originPos||(g.originPos={x:g.x,y:g.y}),b&&h.generateCodeMagnetMap(),g._updateCloseBlock()))}function e(b){f&&(clearTimeout(f),f=null);$(document).unbind(".block");g.terminateDrag(b);h&&h.set({dragBlock:null});g._changeFill(!1);Entry.GlobalSvg.remove();
g.mouseUpEvent.notify();delete this.mouseDownCoordinate;delete g.dragInstance}b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();var f=null,g=this;this._changeFill(!1);var h=this.getBoard();Entry.documentMousedown&&Entry.documentMousedown.notify(b);if(!this.readOnly&&!h.viewOnly){h.setSelectedBlock(this);this.dominate();if((0===b.button||b.originalEvent&&b.originalEvent.touches)&&!this._board.readOnly){var k=b.type,l;l=b.originalEvent&&b.originalEvent.touches?b.originalEvent.touches[0]:
b;this.mouseDownCoordinate={x:l.pageX,y:l.pageY};var m=$(document);m.bind("mousemove.block touchmove.block",d);m.bind("mouseup.block touchend.block",e);this.dragInstance=new Entry.DragInstance({startX:l.pageX,startY:l.pageY,offsetX:l.pageX,offsetY:l.pageY,height:0,mode:!0});h.set({dragBlock:this});this.addDragging();this.dragMode=Entry.DRAG_MODE_MOUSEDOWN;"touchstart"===k&&(f=setTimeout(function(){f&&(f=null,e(),g._rightClick(b))},1E3))}else Entry.Utils.isRightButton(b)&&this._rightClick(b);h.workspace.getMode()===
Entry.Workspace.MODE_VIMBOARD&&b&&(vimBoard=$(".entryVimBoard>.CodeMirror")[0],document.getElementsByClassName("CodeMirror")[0].dispatchEvent(Entry.Utils.createMouseEvent("dragStart",event)))}};c.vimBoardEvent=function(b,c,e){b&&(b=Entry.Utils.createMouseEvent(c,b),e&&(b.block=e),$(".entryVimBoard>.CodeMirror")[0].dispatchEvent(b))};c.terminateDrag=function(b){var c=Entry.GlobalSvg,e=this.getBoard(),f=this.dragMode,g=this.block,h=e.workspace.getMode();this.removeDragging();this.set({visible:!0});
this.dragMode=Entry.DRAG_MODE_NONE;var k=c.terminateDrag(this);if(h===Entry.Workspace.MODE_VIMBOARD)e instanceof Entry.BlockMenu?(e.terminateDrag(),k===c.DONE&&this.vimBoardEvent(b,"dragEnd",g)):e.clear();else if(b=this.dragInstance&&this.dragInstance.isNew,f===Entry.DRAG_MODE_DRAG){var h=!1,l=this.block.getPrevBlock(this.block),m=this._board.workspace.trashcan.isOver?"ForDestroy":"";switch(k){case c.DONE:c=e.magnetedBlockView;c instanceof Entry.BlockView&&(c=c.block);l&&!c?Entry.do("separateBlock"+
m,g):l||c||b?(m=b?"FromBlockMenu":"",c?("next"===c.view.magneting?(k=g.getLastBlock(),this.dragMode=f,e.separate(g),this.dragMode=Entry.DRAG_MODE_NONE,Entry.do("insertBlock"+m,c,k).isPass(b),Entry.ConnectionRipple.setView(c.view).dispose()):(c.getThread&&(f=c.getThread(),(h=c.type)&&f instanceof Entry.FieldBlock&&!Entry.block[h].isPrimitive&&(m+="FollowSeparate")),Entry.do("insertBlock"+m,g,c).isPass(b),h=!0),createjs.Sound.play("entryMagneting")):Entry.do("moveBlock"+m,g).isPass(b)):g.getThread().view.isGlobal()?
Entry.do("moveBlock"+m,g):Entry.do("separateBlock"+m,g);break;case c.RETURN:g=this.block;b?Entry.do("destroyBlockBelow",this.block).isPass(!0):l?(this.set({animating:!1}),createjs.Sound.play("entryMagneting"),this.bindPrev(l),g.insert(l)):(f=g.getThread().view.getParent(),f instanceof Entry.Board?(f=this.originPos,this._moveTo(f.x,f.y,!1)):(createjs.Sound.play("entryMagneting"),Entry.do("insertBlock",g,f)));break;case c.REMOVE:createjs.Sound.play("entryDelete"),Entry.do("destroyBlockBelow",this.block).isPass(b)}e.setMagnetedBlock(null);
h&&Entry.ConnectionRipple.setView(g.view).dispose()}else k===c.REMOVE&&b&&f===Entry.DRAG_MODE_MOUSEDOWN&&Entry.do("destroyBlockBelow",this.block).isPass(!0);this.destroyShadow();delete this.originPos;this.dominate()};c._updateCloseBlock=function(){var b=this.getBoard(),c;if(this._skeleton.magnets){for(var e in this.magnet)if(c="next"===e?this.getBoard().getNearestMagnet(this.x,this.y+this.getBelowHeight(),e):this.getBoard().getNearestMagnet(this.x,this.y,e))return b.setMagnetedBlock(c.view,e);b.setMagnetedBlock(null)}};
c.dominate=function(){this.block.getThread().view.dominate()};c.getSvgRoot=function(){for(var b=this.getBoard().svgBlockGroup,c=this.svgGroup;c.parentNode!==b;)c=c.parentNode;return c};c.getBoard=function(){return this._board};c._setBoard=function(){this._board=this._board.code.board};c.destroy=function(b){this.block.set({view:null});$(this.svgGroup).unbind(".blockViewMousedown");this._destroyObservers();var c=this.svgGroup;b?$(c).fadeOut(100,function(){c.remove()}):c.remove();this._contents.forEach(function(b){b.destroy()});
this._statements.forEach(function(b){b.destroy()});var e=this.block;b=e.events.viewDestroy;"workspace"==Entry.type&&b&&!this.isInBlockMenu&&b.forEach(function(b){Entry.Utils.isFunction(b)&&b(e)})};c.getShadow=function(){this._shadow||(this._shadow=Entry.SVG.createElement(this.svgGroup.cloneNode(!0),{opacity:.5}),this.getBoard().svgGroup.appendChild(this._shadow));return this._shadow};c.destroyShadow=function(){this._shadow&&(this._shadow.remove(),delete this._shadow)};c._updateMagnet=function(){if(this._skeleton.magnets){var b=
this._skeleton.magnets(this);b.next&&this._nextGroup.attr("transform","translate("+b.next.x+","+b.next.y+")");this.magnet=b;this.block.getThread().changeEvent.notify()}};c._updateBG=function(){if(this._board.dragBlock&&this._board.dragBlock.dragInstance){var b=this.svgGroup;if(this.magnet.next||this.magnet.previous){if(b=this.magneting){var c=this._board.dragBlock.getShadow(),e=this.getAbsoluteCoordinate(),f;if("previous"===b)f=this.magnet.next,f="translate("+(e.x+f.x)+","+(e.y+f.y)+")";else if("next"===
b){f=this.magnet.previous;var g=this._board.dragBlock.getBelowHeight();f="translate("+(e.x+f.x)+","+(e.y+f.y-g)+")"}$(c).attr({transform:f,display:"block"});this._clonedShadow=c;this.background&&(this.background.remove(),this.nextBackground.remove(),delete this.background,delete this.nextBackground);"previous"===b&&(b=this._board.dragBlock.getBelowHeight()+this.offsetY,this.originalHeight=this.offsetY,this.set({offsetY:b}))}else this._clonedShadow&&(this._clonedShadow.attr({display:"none"}),delete this._clonedShadow),
b=this.originalHeight,void 0!==b&&(this.background&&(this.background.remove(),this.nextBackground.remove(),delete this.background,delete this.nextBackground),this.set({offsetY:b}),delete this.originalHeight);(b=this.block.thread.changeEvent)&&b.notify()}else this.magneting?(b.attr({filter:"url(#entryBlockHighlightFilter_"+this.getBoard().suffix+")"}),b.addClass("outputHighlight")):(b.removeClass("outputHighlight"),b.removeAttr("filter"))}};c.addDragging=function(){this.svgGroup.addClass("dragging")};
c.removeDragging=function(){this.svgGroup.removeClass("dragging")};c.addSelected=function(){this.svgGroup.addClass("selected")};c.removeSelected=function(){this.svgGroup.removeClass("selected")};c.getSkeleton=function(){return this._skeleton};c.getContentPos=function(){return this._skeleton.contentPos(this)};c.renderText=function(){this.renderMode=Entry.BlockView.RENDER_MODE_TEXT;this._startContentRender(Entry.BlockView.RENDER_MODE_TEXT)};c.renderBlock=function(){this.renderMode=Entry.BlockView.RENDER_MODE_BLOCK;
this._startContentRender(Entry.BlockView.RENDER_MODE_BLOCK)};c._updateOpacity=function(){this.svgGroup.attr({opacity:!1===this.visible?0:1});this.visible&&this._setPosition()};c._updateShadow=function(){this.shadow&&Entry.Utils.colorDarken(this._schema.color,.7)};c._setMovable=function(){this.movable=null!==this.block.isMovable()?this.block.isMovable():void 0!==this._skeleton.movable?this._skeleton.movable:!0};c._setReadOnly=function(){this.readOnly=null!==this.block.isReadOnly()?this.block.isReadOnly():
void 0!==this._skeleton.readOnly?this._skeleton.readOnly:!1};c._setCopyable=function(){this.copyable=null!==this.block.isCopyable()?this.block.isCopyable():void 0!==this._skeleton.copyable?this._skeleton.copyable:!0};c.bumpAway=function(b,c){var d=this;b=b||15;if(c){var f=this.x,g=this.y;window.setTimeout(function(){f===d.x&&g===d.y&&d._moveBy(b,b,!1)},c)}else d._moveBy(b,b,!1)};c.bindPrev=function(b,c){if(b){this._toLocalCoordinate(b.view._nextGroup);var d=b.getNextBlock();if(d&&d&&d!==this.block){var f=
this.block.getLastBlock();c?d.view._toLocalCoordinate(b.view._nextGroup):f.view.magnet.next?d.view._toLocalCoordinate(f.view._nextGroup):(d.view._toGlobalCoordinate(),d.separate(),d.view.bumpAway(null,100))}}else if(b=this.block.getPrevBlock())this._toLocalCoordinate(b.view._nextGroup),(d=this.block.getNextBlock())&&d.view&&d.view._toLocalCoordinate(this._nextGroup)};c.getAbsoluteCoordinate=function(b){b=void 0!==b?b:this.dragMode;if(b===Entry.DRAG_MODE_DRAG)return{x:this.x,y:this.y};b=this.block.getThread().view.requestAbsoluteCoordinate(this);
b.x+=this.x;b.y+=this.y;return b};c.getBelowHeight=function(){return this.block.getThread().view.requestPartHeight(this)};c._updateDisplay=function(){this.svgGroup.attr({display:!1===this.display?"none":"block"});this.display&&this._setPosition()};c._updateColor=function(){var b=this._schema.color;this.block.deletable===Entry.Block.DELETABLE_FALSE_LIGHTEN&&(b=Entry.Utils.colorLighten(b));this._fillColor=b;this._path.attr({fill:b});this._updateContents()};c._updateContents=function(){this._contents.forEach(function(b){b.renderStart(void 0,
void 0,this.renderMode)}.bind(this));this.alignContent(!1)};c._destroyObservers=function(){for(var b=this._observers;b.length;)b.pop().destroy()};c._changeFill=function(b){var c=this.getBoard();if(!c.dragBlock){var e=this._fillColor,f=this._path,c=this.getBoard();b?(e="url(#blockHoverPattern_"+this.getBoard().suffix+")",c.enablePattern()):c.disablePattern();f.attr({fill:e})}};c.addActivated=function(){this.svgGroup.addClass("activated")};c.removeActivated=function(){this.svgGroup.removeClass("activated")};
c.reDraw=function(){if(this.visible&&this.display){var b=this.block;this._updateContents();for(var c=b.statements||[],b=0;b<c.length;b++)c[b].view.reDraw();c=this._extensions||[];for(b=0;b<c.length;b++){var e=c[b];e.updatePos&&e.updatePos()}}};c.getParam=function(b){return this._paramMap[b]};c.getDataUrl=function(b,c){function d(){h=h.replace("(svgGroup)",(new XMLSerializer).serializeToString(l)).replace("%W",k.width*m).replace("%H",k.height*m).replace("(defs)",(new XMLSerializer).serializeToString(n[0])).replace(/>\s+/g,
">").replace(/\s+</g,"<");var b="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(h)));h=null;c?(g.resolve({src:b,width:k.width,height:k.height}),l=null):f(b,k.width,k.height,1.5).then(function(b){l=null;g.resolve({src:b,width:k.width,height:k.height})},function(b){g.reject("error occured")});b=null}function f(b,c,d,e){var f=$.Deferred();e||(e=1);void 0!==Entry.BlockView.pngMap[b]&&f.resolve(Entry.BlockView.pngMap[b]);c*=e;d*=e;c=Math.ceil(c);d=Math.ceil(d);var g=document.createElement("img");
g.crossOrigin="Anonymous";var h=document.createElement("canvas");h.width=c;h.height=d;var k=h.getContext("2d");g.onload=function(){k.drawImage(g,0,0,c,d);var e=h.toDataURL("image/png");/\.png$/.test(b)&&(Entry.BlockView.pngMap[b]=e);f.resolve(e)};g.onerror=function(){f.reject("error occured")};g.src=b;return f.promise()}var g=$.Deferred(),h='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 %W %H">(svgGroup)(defs)</svg>',k=this.svgGroup.getBoundingClientRect(),l=b?this.svgGroup:this.svgGroup.cloneNode(!0);
b=this._skeleton.box(this);var m=c?1:1.5,q=function(){var b=window.platform;return b&&"windows"===b.name.toLowerCase()&&"7"===b.version[0]?!0:!1}()?.9:.95;-1<this.type.indexOf("func_")&&(q*=.99);l.setAttribute("transform","scale(%SCALE) translate(%X,%Y)".replace("%X",-b.offsetX).replace("%Y",-b.offsetY).replace("%SCALE",m));var n=this.getBoard().svgDom.find("defs"),t=l.getElementsByTagName("image");b=l.getElementsByTagName("text");for(var v=["\u2265","\u2264"],y="\u2265\u2264-><=+-x/".split(""),x=
0;x<b.length;x++)(function(b){b.setAttribute("font-family","'nanumBarunRegular', 'NanumGothic', '\ub098\ub214\uace0\ub515','NanumGothicWeb', '\ub9d1\uc740 \uace0\ub515', 'Malgun Gothic', Dotum");var c=parseInt(b.getAttribute("font-size")),d=$(b).text();-1<v.indexOf(d)&&b.setAttribute("font-weight","500");if("q"==d){var e=parseInt(b.getAttribute("y"));b.setAttribute("y",e-1)}-1<y.indexOf(d)?b.setAttribute("font-size",c+"px"):b.setAttribute("font-size",c*q+"px");b.setAttribute("alignment-baseline",
"baseline")})(b[x]);var r=0;if(0===t.length)d();else for(x=0;x<t.length;x++)(function(b){var c=b.getAttribute("href");f(c,b.getAttribute("width"),b.getAttribute("height")).then(function(c){b.setAttribute("href",c);if(++r==t.length)return d()})})(t[x]);return g.promise()};c.downloadAsImage=function(b){this.getDataUrl().then(function(c){var d=document.createElement("a");d.href=c.src;c="\uc5d4\ud2b8\ub9ac \ube14\ub85d";b&&(c+=b);d.download=c+".png";d.click()})};c._rightClick=function(b){var c=Entry.disposeEvent;
c&&c.notify(b);var e=this,f=e.block;if(!this.isInBlockMenu){var c=[],g=this._board.readOnly,h={text:Lang.Blocks.Duplication_option,enable:this.copyable&&!g,callback:function(){Entry.do("cloneBlock",f.copy())}},k={text:Lang.Blocks.CONTEXT_COPY_option,enable:this.copyable&&!g,callback:function(){e.block.copyToClipboard()}},g={text:Lang.Blocks.Delete_Blocks,enable:f.isDeletable()&&!g,callback:function(){Entry.do("destroyBlock",e.block)}},l={text:Lang.Menus.save_as_image,callback:function(){e.downloadAsImage()}};
c.push(h);c.push(k);c.push(g);Entry.Utils.isChrome()&&"workspace"==Entry.type&&!Entry.isMobile()&&c.push(l);b.originalEvent&&b.originalEvent.touches&&(b=b.originalEvent.touches[0]);Entry.ContextMenu.show(c,null,{x:b.clientX,y:b.clientY})}};c.clone=function(){return this.svgGroup.cloneNode(!0)};c._setBackgroundPath=function(){this._backgroundPath&&$(this._backgroundPath).remove();var b=this._path.cloneNode(!0);b.setAttribute("class","blockBackgroundPath");b.setAttribute("fill",this._fillColor);this._backgroundPath=
b;this.pathGroup.insertBefore(b,this._path)};c._getTemplate=function(b){var c=this._schema,c=c.template?c.template:Lang.template[this.block.type],e,f=this.getBoard();if(b===Entry.BlockView.RENDER_MODE_TEXT){var g,h=f.workspace;h&&h.vimBoard?g=h.vimBoard.getBlockSyntax(this):f.getBlockSyntax&&(g=f.getBlockSyntax(this,b));g&&(e="string"===typeof g?g:g.template)}return e||c};c._getSchemaParams=function(b){var c=this._schema.params;b===Entry.BlockView.RENDER_MODE_TEXT&&(b=this.getBoard().workspace)&&
b.vimBoard&&(b=b.vimBoard.getBlockSyntax(this))&&b.textParams&&(c=b.textParams);return c};c.detach=function(){this.svgGroup.remove()};c.attach=function(b){(b||this._board.svgBlockGroup).appendChild(this.svgGroup)};c.getMagnet=function(b){var c=b.shift()||"next",e=b.shift();void 0===e&&(e=20);return{getBoundingClientRect:function(){var b=this.getAbsoluteCoordinate(),d=this._board.relativeOffset,h=this.magnet[c];return{top:b.y+d.top+h.y-e,left:b.x+d.left+h.x-e,width:2*e,height:2*e}}.bind(this)}}})(Entry.BlockView.prototype);Entry.Field=function(){};
(function(c){c.TEXT_LIMIT_LENGTH=20;c.destroy=function(){this.svgGroup&&$(this.svgGroup).unbind("mouseup touchend");this.destroyOption()};c.command=function(b){this._blockView.isInBlockMenu||void 0===this._startValue||!b&&this._startValue===this.getValue()||(Entry.do("setFieldValue",this.pointer(),this._nextValue||this.getValue()),delete this._nextValue);delete this._startValue};c.destroyOption=function(b,c){this.documentDownEvent&&(Entry.documentMousedown.detach(this.documentDownEvent),delete this.documentDownEvent);
this.disposeEvent&&(Entry.disposeEvent.detach(this.disposeEvent),delete this.documentDownEvent);if(this.optionGroup){var d=this.optionGroup.blur;d&&Entry.Utils.isFunction(d)&&this.optionGroup.blur();this.optionGroup.remove();delete this.optionGroup}this._isEditing=!1;!0!==b&&this.command(c)};c._attachDisposeEvent=function(b){var c=this;b=b||function(b){c.destroyOption(b)};c.disposeEvent=Entry.disposeEvent.attach(c,b)};c.align=function(b,c,e){var d=this.svgGroup;this._position&&(this._position.x&&
(b=this._position.x),this._position.y&&(c=this._position.y));var g="translate("+b+","+c+")";void 0===e||e?d.animate({transform:g},300,mina.easeinout):d.attr({transform:g});this.box.set({x:b,y:c})};c.getAbsolutePosFromBoard=function(){var b=this._block.view,c=b.getContentPos(),b=b.getAbsoluteCoordinate();return{x:b.x+this.box.x+c.x,y:b.y+this.box.y+c.y}};c.getAbsolutePosFromDocument=function(){var b=this._block.view,c=b.getContentPos(),e=b.getAbsoluteCoordinate(),b=b.getBoard().svgDom.offset();return{x:e.x+
this.box.x+c.x+b.left,y:e.y+this.box.y+c.y+b.top-$(window).scrollTop()}};c.getRelativePos=function(){var b=this._block.view.getContentPos(),c=this.box;return{x:c.x+b.x,y:c.y+b.y}};c.truncate=function(){var b=String(this._convert(this.getValue())),c=this.TEXT_LIMIT_LENGTH,e=b.substring(0,c);b.length>c&&(e+="...");return e};c.appendSvgOptionGroup=function(){return this._block.view.getBoard().svgGroup.elem("g")};c.getValue=function(){var b=this._block.params[this._index];if(this._contents&&this._contents.reference&&
this._contents.reference.length){var c=this._contents.reference.concat();"%"===c[0][0]&&(b=this._block.params[parseInt(c.shift().substr(1))-1]);return b?b.getDataByPointer(c):b}return b};c.setValue=function(b,c){if(this.value!=b){this.value=b;if(this._contents&&this._contents.reference&&this._contents.reference.length){var d=this._contents.reference.concat(),f=d.pop(),g=this._block.params[this._index];d.length&&"%"===d[0][0]&&(g=this._block.params[parseInt(d.shift().substr(1))-1]);d.length&&(g=g.getDataByPointer(d));
g.params[f]=b}else this._block.params[this._index]=b;c&&this._blockView.reDraw()}};c._isEditable=function(){if(Entry.ContextMenu.visible||this._blockView.getBoard().readOnly||this._block.view.dragMode==Entry.DRAG_MODE_DRAG)return!1;var b=this._block.view,c=b.getBoard();if(!0===c.disableMouseEvent)return!1;var e=c.workspace.selectedBlockView;if(!e||c!=e.getBoard())return!1;c=b.getSvgRoot();return c==e.svgGroup||$(c).has($(b.svgGroup))};c._selectBlockView=function(){var b=this._block.view;b.getBoard().setSelectedBlock(b)};
c._bindRenderOptions=function(){var b=this;$(this.svgGroup).bind("mouseup touchend",function(c){b._isEditable()&&(b.destroyOption(),b._startValue=b.getValue(),b.renderOptions(),b._isEditing=!0)})};c.pointer=function(b){b=b||[];b.unshift(this._index);b.unshift(Entry.PARAM);return this._block.pointer(b)};c.getFontSize=function(b){return b=b||this._blockView.getSkeleton().fontSize||12};c.getContentHeight=function(){return Entry.isMobile()?22:16};c._getRenderMode=function(){var b=this._blockView.renderMode;
return void 0!==b?b:Entry.BlockView.RENDER_MODE_BLOCK};c._convert=function(b,c){c=void 0!==c?c:this.getValue();var d=/&value/gm;return d.test(c)?c.replace(d,""):this._contents.converter?this._contents.converter(b,c):b};c._updateOptions=function(){var b=Entry.block[this._blockView.type];if(b){var b=b.syntax,c;for(c in b){var e=b[c];e&&0!==e.length&&(e=e[0].textParams)&&(e[this._index].options=this._contents.options)}}};c._shouldReturnValue=function(b){var c=this._block.getCode().object;return"?"===
b||!c||c.constructor!==Entry.EntryObject};c.isEditing=function(b){return!!this._isEditing};c.getDom=function(b){return b.length&&"option"===b.shift()?this.optionGroup:this.svgGroup};c.optionDomCreated=function(){this._blockView.getBoard().workspace.widgetUpdateEvent.notify()};c.fixNextValue=function(b){this._nextValue=b}})(Entry.Field.prototype);Entry.FieldBlock=function(c,b,d,e,f){Entry.Model(this,!1);this._blockView=b;this._block=b.block;this._oldPrimitiveValue=this._valueBlock=null;this.box=new Entry.BoxModel;this.changeEvent=new Entry.Event(this);this._index=d;this.contentIndex=f;this._content=c;this.acceptType=c.accept;this._restoreCurrent=c.restore;this.view=this;this.svgGroup=null;this._position=c.position;this.box.observe(b,"dAlignContent",["width","height"]);this.observe(this,"_updateBG",["magneting"],!1);this.renderStart(b.getBoard(),
e)};Entry.Utils.inherit(Entry.Field,Entry.FieldBlock);
(function(c){c.schema={magneting:!1};c.renderStart=function(b,c,e){this.svgGroup||(this.svgGroup=this._blockView.contentSvgGroup.elem("g"));this.renderMode=void 0!==c?c:this._blockView.renderMode;this.view=this;this._nextGroup=this.svgGroup;this.box.set({x:0,y:0,width:0,height:20});if(c=this.getValue())c.constructor!==Entry.Block&&(c=new Entry.Block(c,this._block.thread)),c.view||(c.setThread(this),c.createView(b,this.renderMode),c.getThread().view.setParent(this));this.updateValueBlock(c);this._valueBlock.view._startContentRender(this.renderMode);
this._blockView.getBoard().constructor!==Entry.Board&&this._valueBlock.view.removeControl()};c.align=function(b,c,e){var d=this.svgGroup;this._position&&(this._position.x&&(b=this._position.x),this._position.y&&(c=this._position.y));var g=this._valueBlock;g&&g&&g.view&&(c=-.5*g.view.height);g="translate("+b+","+c+")";void 0===e||e?d.animate({transform:g},300,mina.easeinout):d.attr({transform:g});this.box.set({x:b,y:c})};c.calcWH=function(){var b=this._valueBlock;b&&b&&b.view?(b=b.view,this.box.set({width:b.width,
height:b.height})):this.box.set({width:15,height:20})};c.calcHeight=c.calcWH;c.destroy=function(){this._valueBlock&&this._valueBlock.destroyView()};c.inspectBlock=function(){var b=null;if(this._originBlock)b=this._originBlock.type,delete this._originBlock;else switch(this.acceptType.toLowerCase()){case "boolean":b="True";break;case "string":b="text";break;case "param":b="function_field_label"}return this._createBlockByType(b)};c._setValueBlock=function(b){this._restoreCurrent&&(this._originBlock=
this._valueBlock);b||(b=this.inspectBlock());this._valueBlock=b;this.setValue(b);b.setThread(this);b.getThread().view.setParent(this);return this._valueBlock};c.getValueBlock=function(){return this._valueBlock};c.updateValueBlock=function(b){b instanceof Entry.Block||(b=void 0);b&&b===this._valueBlock?this.calcWH():(this._destroyObservers(),b=this._setValueBlock(b).view,b.bindPrev(this),this._blockView.alignContent(),this._posObserver=b.observe(this,"updateValueBlock",["x","y"],!1),this._sizeObserver=
b.observe(this,"calcWH",["width","height"]),b=this._blockView.getBoard(),b.constructor===Entry.Board&&b.generateCodeMagnetMap())};c._destroyObservers=function(){this._sizeObserver&&this._sizeObserver.destroy();this._posObserver&&this._posObserver.destroy()};c.getPrevBlock=function(b){return this._valueBlock===b?this:null};c.getNextBlock=function(){return null};c.requestAbsoluteCoordinate=function(b){b=this._blockView;var c=b.contentPos;b=b.getAbsoluteCoordinate();b.x+=this.box.x+c.x;b.y+=this.box.y+
c.y;return b};c.dominate=function(){this._blockView.dominate()};c.isGlobal=function(){return!1};c.separate=function(b){this.getCode().createThread([b]);this.calcWH();this.changeEvent.notify()};c.getCode=function(){return this._block.thread.getCode()};c.cut=function(b){return this._valueBlock===b?[b]:null};c.replace=function(b){"string"===typeof b&&(b=this._createBlockByType(b));var c=this._valueBlock;Entry.block[c.type].isPrimitive?(c.doNotSplice=!0,this._oldPrimitiveValue=c.getParam(0),c.destroy()):
"param"===this.acceptType?(this._destroyObservers(),c.view._toGlobalCoordinate(),b.getTerminateOutputBlock().view._contents[1].replace(c)):(this._destroyObservers(),c.view._toGlobalCoordinate(),Entry.do("separateBlockByCommand",c).isPass(!0),c.view.bumpAway(30,150));this.updateValueBlock(b);b.view._toLocalCoordinate(this.svgGroup);this.calcWH();this.changeEvent.notify()};c.setParent=function(b){this._parent=b};c.getParent=function(){return this._parent};c._createBlockByType=function(b){this._block.getThread();
var c=this._blockView.getBoard(),e;c.workspace&&(e=c.workspace.selectedBlockView,e=!(!e||!e.dragInstance));b=new Entry.Block({type:b,params:[e?void 0:this._oldPrimitiveValue]},this);b.createView(c,this.renderMode);delete this._oldPrimitiveValue;return b};c.spliceBlock=function(){this.updateValueBlock()};c._updateBG=function(){this.magneting?this._bg=this.svgGroup.elem("path",{d:"m 8,12 l -4,0 -2,-2 0,-3 3,0 1,-1 0,-12 -1,-1 -3,0 0,-3 2,-2 l 4,0 z",fill:"#fff",stroke:"#fff","fill-opacity":.7,transform:"translate(0,12)"}):
this._bg&&(this._bg.remove(),delete this._bg)};c.getThread=function(){return this};c.pointer=function(b){b=b||[];b.unshift(this._index);b.unshift(Entry.PARAM);return this._block.pointer(b)}})(Entry.FieldBlock.prototype);Entry.Scroller=function(c,b,d){this._horizontal=void 0===b?!0:b;this._vertical=void 0===d?!0:d;this.board=c;this.svgGroup=null;this.vRatio=this.vY=this.vWidth=this.hRatio=this.hX=this.hWidth=0;this._visible=!0;this._opacity=-1;this.createScrollBar();this.setOpacity(0);this._bindEvent();this._scrollCommand=_.debounce(Entry.do,200)};Entry.Scroller.RADIUS=7;
(function(c){c.createScrollBar=function(){var b=Entry.Scroller.RADIUS,c=this;this.svgGroup=this.board.svg.elem("g").attr({class:"boardScrollbar"});this._horizontal&&(this.hScrollbar=this.svgGroup.elem("rect",{height:2*b,rx:b,ry:b}),this.hScrollbar.mousedown=function(b){function d(b){b.stopPropagation();b.preventDefault();b.originalEvent.touches&&(b=b.originalEvent.touches[0]);var d=c.dragInstance;c.scroll((b.pageX-d.offsetX)/c.hRatio,0);d.set({offsetX:b.pageX,offsetY:b.pageY})}function e(b){$(document).unbind(".scroll");
delete c.dragInstance}if(0===b.button||b instanceof Touch){Entry.documentMousedown&&Entry.documentMousedown.notify(b);var h=$(document);h.bind("mousemove.scroll",d);h.bind("mouseup.scroll",e);h.bind("touchmove.scroll",d);h.bind("touchend.scroll",e);c.dragInstance=new Entry.DragInstance({startX:b.pageX,startY:b.pageY,offsetX:b.pageX,offsetY:b.pageY})}b.stopPropagation()});this._vertical&&(this.vScrollbar=this.svgGroup.elem("rect",{width:2*b,rx:b,ry:b}),this.vScrollbar.mousedown=function(b){function d(b){b.stopPropagation();
b.preventDefault();b.originalEvent.touches&&(b=b.originalEvent.touches[0]);var d=c.dragInstance;c.scroll(0,(b.pageY-d.offsetY)/c.vRatio);d.set({offsetX:b.pageX,offsetY:b.pageY})}function e(b){$(document).unbind(".scroll");delete c.dragInstance}if(0===b.button||b instanceof Touch){Entry.documentMousedown&&Entry.documentMousedown.notify(b);var h=$(document);h.bind("mousemove.scroll",d);h.bind("mouseup.scroll",e);h.bind("touchmove.scroll",d);h.bind("touchend.scroll",e);c.dragInstance=new Entry.DragInstance({startX:b.pageX,
startY:b.pageY,offsetX:b.pageX,offsetY:b.pageY})}b.stopPropagation()})};c.updateScrollBar=function(b,c){this._horizontal&&(this.hX+=b*this.hRatio,this.hScrollbar.attr({x:this.hX}));this._vertical&&(this.vY+=c*this.vRatio,this.vScrollbar.attr({y:this.vY}))};c.scroll=function(b,c,e){if(this.board.code){var d=this.board.svgBlockGroup.getBoundingClientRect(),g=this.board.svgDom,h=d.left-this.board.offset().left,k=d.top-this.board.offset().top,l=d.height;b=Math.max(-d.width+Entry.BOARD_PADDING-h,b);c=
Math.max(-l+Entry.BOARD_PADDING-k,c);c=Math.min(g.height()-Entry.BOARD_PADDING-k,c);this._scroll(b,c);!0!==e&&(this._diffs||(this._diffs=[0,0]),this._diffs[0]+=b,this._diffs[1]+=c,this._scrollCommand("scrollBoard",this._diffs[0],this._diffs[1],!0))}};c._scroll=function(b,c){this.board.code.moveBy(b,c);this.updateScrollBar(b,c)};c.setVisible=function(b){b!=this.isVisible()&&(this._visible=b,this.svgGroup.attr({display:!0===b?"block":"none"}))};c.isVisible=function(){return this._visible};c.setOpacity=
function(b){this._opacity!=b&&(this.hScrollbar.attr({opacity:b}),this.vScrollbar.attr({opacity:b}),this._opacity=b)};c.resizeScrollBar=function(){if(this._visible){var b=this.board,c=b.svgBlockGroup.getBoundingClientRect(),e=b.svgDom,f=e.width(),e=e.height(),g=c.left-b.offset().left,b=c.top-b.offset().top,h=c.width,c=c.height;if(this._horizontal){var k=-h+Entry.BOARD_PADDING,l=f-Entry.BOARD_PADDING,h=(f+2*Entry.Scroller.RADIUS)*h/(l-k+h);Entry.Utils.isNumber(h)||(h=0);this.hX=(g-k)/(l-k)*(f-h-2*Entry.Scroller.RADIUS);
this.hScrollbar.attr({width:h,x:this.hX,y:e-2*Entry.Scroller.RADIUS});this.hRatio=(f-h-2*Entry.Scroller.RADIUS)/(l-k)}this._vertical&&(g=-c+Entry.BOARD_PADDING,h=e-Entry.BOARD_PADDING,c=(e+2*Entry.Scroller.RADIUS)*c/(h-g+c),this.vY=(b-g)/(h-g)*(e-c-2*Entry.Scroller.RADIUS),this.vScrollbar.attr({height:c,y:this.vY,x:f-2*Entry.Scroller.RADIUS}),this.vRatio=(e-c-2*Entry.Scroller.RADIUS)/(h-g))}};c._bindEvent=function(){var b=_.debounce(this.resizeScrollBar,200);this.board.changeEvent.attach(this,b);
Entry.windowResized&&Entry.windowResized.attach(this,b)}})(Entry.Scroller.prototype);Entry.Board=function(c){Entry.Model(this,!1);this.readOnly=void 0===c.readOnly?!1:c.readOnly;this.changeEvent=new Entry.Event(this);this.createView(c);this.updateOffset();this.scroller=new Entry.Scroller(this,!0,!0);this._magnetMap={};Entry.ANIMATION_DURATION=200;Entry.BOARD_PADDING=100;this._initContextOptions();Entry.Utils.disableContextmenu(this.svgDom);this._addControl();this._bindEvent()};Entry.Board.OPTION_PASTE=0;Entry.Board.OPTION_ALIGN=1;Entry.Board.OPTION_CLEAR=2;
Entry.Board.OPTION_DOWNLOAD=3;Entry.Board.DRAG_RADIUS=5;
(function(c){c.schema={code:null,dragBlock:null,magnetedBlockView:null,selectedBlockView:null};c.createView=function(b){var c=b.dom,c="string"===typeof c?$("#"+c):$(c);if("DIV"!==c.prop("tagName"))return console.error("Dom is not div element");this.view=c;this._svgId="play"+(new Date).getTime();this.workspace=b.workspace;this._activatedBlockView=null;this.wrapper=Entry.Dom("div",{parent:c,class:"entryBoardWrapper"});this.svgDom=Entry.Dom($('<svg id="'+this._svgId+'" class="entryBoard" width="100%" height="100%"version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'),
{parent:this.wrapper});this.visible=!0;var e=this;this.svg=Entry.SVG(this._svgId);$(window).scroll(function(){e.updateOffset()});this.svgGroup=this.svg.elem("g");this.svgThreadGroup=this.svgGroup.elem("g");this.svgThreadGroup.board=this;this.svgBlockGroup=this.svgGroup.elem("g");this.svgBlockGroup.board=this;b.isOverlay?(this.wrapper.addClass("entryOverlayBoard"),this.generateButtons(),this.suffix="overlayBoard"):this.suffix="board";Entry.Utils.addFilters(this.svg,this.suffix);this.pattern=Entry.Utils.addBlockPattern(this.svg,
this.suffix).pattern};c.changeCode=function(b,c,e){this.code&&this.codeListener&&this.code.changeEvent.detach(this.codeListener);this.set({code:b});var d=this;b&&!c&&(this.codeListener=this.code.changeEvent.attach(this,function(){d.changeEvent.notify()}),this.svgBlockGroup.remove(),this.svgThreadGroup.remove(),b.createView(this),b.isAllThreadsInOrigin()&&this.alignThreads(),e&&e());this.scroller.resizeScrollBar()};c.bindCodeView=function(b){this.svgBlockGroup.remove();this.svgThreadGroup.remove();
this.svgBlockGroup=b.svgBlockGroup;this.svgThreadGroup=b.svgThreadGroup;this.svgGroup.appendChild(this.svgThreadGroup);this.svgGroup.appendChild(this.svgBlockGroup)};c.setMagnetedBlock=function(b,c){this.magnetedBlockView!==b&&(this.magnetedBlockView&&this.magnetedBlockView.set({magneting:!1}),this.set({magnetedBlockView:b}),b&&(b.set({magneting:c}),b.dominate()))};c.getCode=function(){return this.code};c.findById=function(b){return this.code.findById(b)};c._addControl=function(){var b=this.svgDom,
c=this;b.mousedown(function(){c.onMouseDown.apply(c,arguments)});b.bind("touchstart",function(){c.onMouseDown.apply(c,arguments)});b.on("wheel",function(){c.mouseWheel.apply(c,arguments)});var e=c.scroller;e&&(b.mouseenter(function(b){e.setOpacity(1)}),b.mouseleave(function(b){e.setOpacity(0)}))};c.removeControl=function(b){this.svgDom.off(b)};c.onMouseDown=function(b){function c(b){b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();b=Entry.Utils.convertMouseEvent(b);var c=
f.mouseDownCoordinate;Math.sqrt(Math.pow(b.pageX-c.x,2)+Math.pow(b.pageY-c.y,2))<Entry.Board.DRAG_RADIUS||(g&&(clearTimeout(g),g=null),c=f.dragInstance,f.scroller.scroll(b.pageX-c.offsetX,b.pageY-c.offsetY),c.set({offsetX:b.pageX,offsetY:b.pageY}))}function e(b){g&&(clearTimeout(g),g=null);$(document).unbind(".entryBoard");delete f.mouseDownCoordinate;delete f.dragInstance}if(this.workspace.getMode()!=Entry.Workspace.MODE_VIMBOARD){b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault();
var f=this,g=null;if(0===b.button||b.originalEvent&&b.originalEvent.touches){var h=b.type,k=Entry.Utils.convertMouseEvent(b);Entry.documentMousedown&&Entry.documentMousedown.notify(k);var l=$(document);this.mouseDownCoordinate={x:k.pageX,y:k.pageY};l.bind("mousemove.entryBoard",c);l.bind("mouseup.entryBoard",e);l.bind("touchmove.entryBoard",c);l.bind("touchend.entryBoard",e);this.dragInstance=new Entry.DragInstance({startX:k.pageX,startY:k.pageY,offsetX:k.pageX,offsetY:k.pageY});"touchstart"===h&&
(g=setTimeout(function(){g&&(g=null,e(),f._rightClick(b))},1E3))}else Entry.Utils.isRightButton(b)&&this._rightClick(b)}};c.mouseWheel=function(b){b=b.originalEvent;b.preventDefault();var c=Entry.disposeEvent;c&&c.notify(b);this.scroller.scroll(b.wheelDeltaX||-b.deltaX,b.wheelDeltaY||-b.deltaY)};c.setSelectedBlock=function(b){var c=this.selectedBlockView;c&&c.removeSelected();b instanceof Entry.BlockView?b.addSelected():b=null;this.set({selectedBlockView:b})};c.hide=function(){this.wrapper.addClass("entryRemove");
this.visible=!1};c.show=function(){this.wrapper.removeClass("entryRemove");this.visible=!0};c.alignThreads=function(b){for(var c=this.svgDom.height(),e=this.code.getThreads(),f=15,g=0,c=c-30,h=50,k=0;k<e.length;k++){var l=e[k],m=l.getFirstBlock();if(m&&(b&&l.view.reDraw(),l=m.view,l.movable)){var m=l.svgGroup.getBBox(),q=f+15;q>c&&(h=h+g+10,g=0,f=15);g=Math.max(g,m.width);q=f+15;l._moveTo(h-m.x,q,!1);f=f+m.height+15}}this.scroller.resizeScrollBar()};c.clear=function(){this.svgBlockGroup.remove();
this.svgThreadGroup.remove()};c.updateOffset=function(){this._offset=this.svg.getBoundingClientRect();var b=$(window),c=b.scrollTop(),b=b.scrollLeft(),e=this._offset;this.relativeOffset={top:e.top-c,left:e.left-b};this.btnWrapper&&this.btnWrapper.attr({transform:"translate("+(e.width/2-65)+","+(e.height-200)+")"})};c.generateButtons=function(){var b=this,c=this.svgGroup.elem("g");this.btnWrapper=c;var e=c.elem("text",{x:27,y:33,class:"entryFunctionButtonText"});e.textContent=Lang.Buttons.save;var f=
c.elem("text",{x:102.5,y:33,class:"entryFunctionButtonText"});f.textContent=Lang.Buttons.cancel;var g=c.elem("circle",{cx:27.5,cy:27.5,r:27.5,class:"entryFunctionButton"}),c=c.elem("circle",{cx:102.5,cy:27.5,r:27.5,class:"entryFunctionButton"});$(g).bind("mousedown touchstart",function(){b.save()});$(e).bind("mousedown touchstart",function(){b.save()});$(c).bind("mousedown touchstart",function(){b.cancelEdit()});$(f).bind("mousedown touchstart",function(){b.cancelEdit()})};c.cancelEdit=function(){this.workspace.setMode(Entry.Workspace.MODE_BOARD,
"cancelEdit")};c.save=function(){var b={};b.boardType=Entry.Workspace.MODE_BOARD;this.workspace.setMode(b,"save")};c.generateCodeMagnetMap=function(){var b=this.code,c=this.dragBlock;if(b&&c){this._magnetMap={};for(var e in c.magnet)if("next"!==e||void 0!==c.block.getLastBlock().view.magnet.next){var f=this._getCodeBlocks(b,e);f.sort(function(b,c){return b.point-c.point});f.unshift({point:-Number.MAX_VALUE,blocks:[]});for(var g=1;g<f.length;g++){var h=f[g],k=h,l=h.startBlock;if(l){for(var m=h.endPoint,
q=g;m>k.point&&(k.blocks.push(l),q++,k=f[q],k););delete h.startBlock}h.endPoint=Number.MAX_VALUE;f[g-1].endPoint=h.point}this._magnetMap[e]=f}}};c._getCodeBlocks=function(b,c){b=b.getThreads();var d=[],f;switch(c){case "previous":f=this._getNextMagnets;break;case "next":f=this._getPreviousMagnets;break;case "string":case "boolean":f=this._getFieldMagnets;break;case "param":f=this._getOutputMagnets;break;default:return[]}for(var g=0;g<b.length;g++)var h=b[g],d=d.concat(f.call(this,h,h.view.zIndex,
null,c));return d};c._getNextMagnets=function(b,c,e,f){var d=b.getBlocks(),h=[],k=[];e||(e={x:0,y:0});var l=e.x;e=e.y;for(var m=0;m<d.length;m++){var q=d[m],n=q.view;n.zIndex=c;if(n.dragInstance)break;e+=n.y;l+=n.x;b=e+1;n.magnet.next&&(b+=n.height,k.push({point:e,endPoint:b,startBlock:q,blocks:[]}),k.push({point:b,blocks:[]}),n.absX=l);q.statements&&(c+=.01);for(var t=0;t<q.statements.length;t++){b=q.statements[t];var v=q.view._statements[t];v.zIndex=c;v.absX=l+v.x;k.push({point:v.y+e-30,endPoint:v.y+
e,startBlock:v,blocks:[]});k.push({point:v.y+e+v.height,blocks:[]});c+=.01;h=h.concat(this._getNextMagnets(b,c,{x:v.x+l,y:v.y+e},f))}n.magnet.next&&(e+=n.magnet.next.y,l+=n.magnet.next.x)}return h.concat(k)};c._getPreviousMagnets=function(b,c,e,f){var d=b.getBlocks();b=[];e||(e={x:0,y:0});f=e.x;e=e.y;var d=d[0],h=d.view;h.zIndex=c;if(h.dragInstance)return[];e+=h.y-15;f+=h.x;return h.magnet.previous?(c=e+1+h.height,b.push({point:e,endPoint:c,startBlock:d,blocks:[]}),b.push({point:c,blocks:[]}),h.absX=
f,b):[]};c._getFieldMagnets=function(b,c,e,f){var d=b.getBlocks(),h=[],k=[];e||(e={x:0,y:0});var l=e.x;e=e.y;for(var m=0;m<d.length;m++){var q=d[m],n=q.view;if(n.dragInstance)break;n.zIndex=c;e+=n.y;l+=n.x;k=k.concat(this._getFieldBlockMetaData(n,l,e,c,f));q.statements&&(c+=.01);for(var t=0;t<q.statements.length;t++){b=q.statements[t];var v=q.view._statements[t],h=h.concat(this._getFieldMagnets(b,c,{x:v.x+l,y:v.y+e},f))}n.magnet.next&&(e+=n.magnet.next.y,l+=n.magnet.next.x)}return h.concat(k)};c._getFieldBlockMetaData=
function(b,c,e,f,g){var d=b._contents,k=[];e+=b.contentPos.y;for(var l=0;l<d.length;l++){var m=d[l];if(m instanceof Entry.FieldBlock){var q=m._valueBlock;if(!q.view.dragInstance&&(m.acceptType===g||"boolean"===m.acceptType)){var n=c+m.box.x,t=e+m.box.y+b.contentHeight%1E3*-.5,v=e+m.box.y+m.box.height;m.acceptType===g&&(k.push({point:t,endPoint:v,startBlock:q,blocks:[]}),k.push({point:v,blocks:[]}));m=q.view;m.absX=n;m.zIndex=f;k=k.concat(this._getFieldBlockMetaData(m,n+m.contentPos.x,t+m.contentPos.y,
f+.01,g))}}}return k};c._getOutputMagnets=function(b,c,e,f){var d=b.getBlocks(),h=[],k=[];e||(e={x:0,y:0});var l=e.x;e=e.y;for(var m=0;m<d.length;m++){var q=d[m],n=q.view;if(n.dragInstance)break;n.zIndex=c;e+=n.y;l+=n.x;k=k.concat(this._getOutputMetaData(n,l,e,c,f));q.statements&&(c+=.01);for(var t=0;t<q.statements.length;t++){b=q.statements[t];var v=q.view._statements[t],h=h.concat(this._getOutputMagnets(b,c,{x:v.x+l,y:v.y+e},f))}n.magnet.next&&(e+=n.magnet.next.y,l+=n.magnet.next.x)}return h.concat(k)};
c._getOutputMetaData=function(b,c,e,f,g){var d=b._contents,k=[];c+=b.contentPos.x;e+=b.contentPos.y;for(b=0;b<d.length;b++){var l=d[b],m=c+l.box.x,q=e-24,n=e;l instanceof Entry.FieldBlock?(l.acceptType===g&&(k.push({point:q,endPoint:n,startBlock:l,blocks:[]}),k.push({point:n,blocks:[]}),l.absX=m,l.zIndex=f,l.width=20),(q=l._valueBlock)&&(k=k.concat(this._getOutputMetaData(q.view,m,e+l.box.y,f+.01,g)))):l instanceof Entry.FieldOutput&&l.acceptType===g&&(k.push({point:q,endPoint:n,startBlock:l,blocks:[]}),
k.push({point:n,blocks:[]}),l.absX=m,l.zIndex=f,l.width=20,(q=l._valueBlock)&&(q.view.dragInstance||(k=k.concat(this._getOutputMetaData(q.view,c+l.box.x,e+l.box.y,f+.01,g)))))}return k};c.getNearestMagnet=function(b,c,e){var d=this._magnetMap[e];if(d&&0!==d.length){var g=0,h=d.length-1,k,l=null,m="previous"===e?c-15:c;for(c=-1<["previous","next"].indexOf(e)?20:0;g<=h;)if(k=(g+h)/2|0,e=d[k],m<e.point)h=k-1;else if(m>e.endPoint)g=k+1;else{d=e.blocks;for(g=0;g<d.length;g++)if(h=d[g].view,h.absX-c<b&&
b<h.absX+h.width&&(h=e.blocks[g],!l||l.view.zIndex<h.view.zIndex))l=e.blocks[g];return l}return null}};c.dominate=function(b){b&&(b=b.getFirstBlock())&&(this.svgBlockGroup.appendChild(b.view.svgGroup),this.code.dominate(b.thread))};c.enablePattern=function(){this.pattern.removeAttribute("style")};c.disablePattern=function(){this.pattern.attr({style:"display: none"})};c._removeActivated=function(){this._activatedBlockView&&(this._activatedBlockView.removeActivated(),this._activatedBlockView=null)};
c.activateBlock=function(b){b=b.view;var c=b.getAbsoluteCoordinate(),e=this.svgDom,f=c.x,c=c.y,f=e.width()/2-f,e=e.height()/2-c-100;this.scroller.scroll(f,e);b.addActivated();this._activatedBlockView=b};c.reDraw=function(){this.code&&this.code.view&&this.code.view.reDraw()};c.separate=function(b,c,e){"string"===typeof b&&(b=this.findById(b));b.view&&b.view._toGlobalCoordinate();var d=b.getPrevBlock();b.separate(c,e);d&&d.getNextBlock()&&d.getNextBlock().view.bindPrev()};c.insert=function(b,c,e){"string"===
typeof b&&(b=this.findById(b));3===c.length?(this.separate(b,e,c[2]),b.moveTo(c[0],c[1])):(this.separate(b,e),c=c instanceof Array?this.code.getByPointer(c):c,c instanceof Entry.Block?("basic"===b.getBlockType()&&b.view.bindPrev(c),b.doInsert(c)):c instanceof Entry.FieldStatement?(b.view.bindPrev(c),c.insertTopBlock(b)):c instanceof Entry.Thread?(c=c.view.getParent(),b.view.bindPrev(c),c.insertTopBlock(b)):b.doInsert(c))};c.adjustThreadsPosition=function(){var b=this.code;b&&b.view&&(b=b.getThreads())&&
0!==b.length&&(b=b.sort(function(b,c){return b.getFirstBlock().view.x-c.getFirstBlock().view.x}),b=b[0].getFirstBlock())&&(b=b.view,b=b.getAbsoluteCoordinate(),this.scroller.scroll(50-b.x,30-b.y,!0))};c._initContextOptions=function(){var b=this;this._contextOptions=[{activated:!0,option:{text:Lang.Blocks.Paste_blocks,enable:!!Entry.clipboard&&!this.readOnly,callback:function(){Entry.do("addThread",Entry.clipboard).value.getFirstBlock().copyToClipboard()}}},{activated:!0,option:{text:Lang.Blocks.tidy_up_block,
enable:!this.readOnly,callback:function(){b.alignThreads()}}},{activated:!0,option:{text:Lang.Blocks.Clear_all_blocks,enable:!this.readOnly,callback:function(){Entry.do("destroyThreads")}}},{activated:"workspace"===Entry.type&&Entry.Utils.isChrome()&&!Entry.isMobile(),option:{text:Lang.Menus.save_as_image_all,enable:!this.readOnly,callback:function(){var c=b.code.getThreads(),e=[];c.forEach(function(b,d){if(b=b.getFirstBlock())console.log("threads.length=",c.length),1<c.length&&Entry.isOffline?b.view.getDataUrl().then(function(b){e.push(b);
e.length==c.length&&Entry.dispatchEvent("saveBlockImages",{images:e})}):b.view.downloadAsImage(++d)})}}}]};c.activateContextOption=function(b){this._contextOptions[b].activated=!0};c.deActivateContextOption=function(b){this._contextOptions[b].activated=!1};c._bindEvent=function(){Entry.documentMousedown&&(Entry.documentMousedown.attach(this,this.setSelectedBlock),Entry.documentMousedown.attach(this,this._removeActivated));Entry.windowResized&&Entry.windowResized.attach(this,_.debounce(this.updateOffset,
200))};c.offset=function(){(!this._offset||0===this._offset.top&&0===this._offset.left)&&this.updateOffset();return this._offset};c._rightClick=function(b){var c=Entry.disposeEvent;c&&c.notify(b);if(this.visible){var c=[],e=this._contextOptions;e[Entry.Board.OPTION_PASTE].option.enable=!!Entry.clipboard;e[Entry.Board.OPTION_DOWNLOAD].option.enable=0!==this.code.getThreads().length;for(var f=0;f<this._contextOptions.length;f++)e[f].activated&&c.push(e[f].option);b=Entry.Utils.convertMouseEvent(b);
Entry.ContextMenu.show(c,null,{x:b.clientX,y:b.clientY})}};c.getDom=function(b){var c=b.shift();if("trashcan"===c)return this.workspace.trashcan.svgGroup;if("coord"===c)return{getBoundingClientRect:function(){var c=this.relativeOffset;return{top:b[1]+c.top-20,left:b[0]+c.left-20,width:40,height:40}}.bind(this)};if(c instanceof Array)return c=this.code.getByPointer(c),c.getDom?c.getDom(b):c.svgGroup};c.findBlock=function(b){return"string"===typeof b?this.findById(b):b&&b.id?this.findById(b.id):b instanceof
Array?this.code.getByPointer(b):b};c.scrollToPointer=function(b,c){b=this.code.getByPointer(b);var d;b instanceof Entry.Block?(d=b.view.getAbsoluteCoordinate(),b.view.dominate()):b.getAbsolutePosFromBoard&&(d=b.getAbsolutePosFromBoard());c=b=0;d.x>this._offset.width-200?b=this._offset.width-200-d.x:100>d.x&&(b=100-d.x);d.y>this._offset.height-200?c=this._offset.height-200-d.y:100>d.y&&(c=100-d.y);this.scroller.scroll(b,c);this._offset}})(Entry.Board.prototype);Entry.Code=function(c,b){Entry.Model(this,!1);b&&(this.object=b);this._data=new Entry.Collection;this._eventMap={};this._blockMap={};this.executors=[];this.watchEvent=new Entry.Event(this);this.executeEndEvent=new Entry.Event(this);this.changeEvent=new Entry.Event(this);this.changeEvent.attach(this,this._handleChange);this._maxZIndex=0;this.load(c)};Entry.STATEMENT=0;Entry.PARAM=-1;
(function(c){c.schema={view:null,board:null};c.load=function(b){if(!Entry.engine||!Entry.engine.isState("run")){b instanceof Array||(b=JSON.parse(b));this.clear();for(var c=0;c<b.length;c++)this._data.push(new Entry.Thread(b[c],this));return this}};c.clear=function(b){b=void 0===b?!1:b;for(var c=this._data.length-1;0<=c;c--)this._data[c].destroy(!1,b);this.clearExecutors()};c.createView=function(b){null===this.view?this.set({view:new Entry.CodeView(this,b),board:b}):(this.set({board:b}),b.bindCodeView(this.view))};
c.destroyView=function(){this.view&&(this.view.destroy(),this.set({view:null}))};c.recreateView=function(){this.view&&(this.destroyView(),this.set({view:new Entry.CodeView(this,this.board),board:this.board}))};c.registerEvent=function(b,c){this._eventMap[c]||(this._eventMap[c]=[]);this._eventMap[c].push(b)};c.unregisterEvent=function(b,c){(c=this._eventMap[c])&&0!==c.length&&(b=c.indexOf(b),0>b||c.splice(b,1))};c.raiseEvent=function(b,c,e){b=this._eventMap[b];var d=[];if(void 0!==b){for(var g=0;g<
b.length;g++){var h=b[g],k=h.pointer();0===k[3]&&4===k.length&&(void 0===e||-1<h.params.indexOf(e))&&(h=new Entry.Executor(b[g],c),this.executors.push(h),d.push(h))}return d}};c.getEventMap=function(b){return this._eventMap[b]};c.map=function(b){this._data.map(b)};c.tick=function(){for(var b=this.executors,c=[],e=0;e<b.length;e++){var f=b[e];f.isEnd()?(b.splice(e--,1),0===b.length&&this.executeEndEvent.notify()):c=c.concat(f.execute())}this.watchEvent.notify(c)};c.removeExecutor=function(b){b=this.executors.indexOf(b);
-1<b&&this.executors.splice(b,1)};c.clearExecutors=function(){this.executors.forEach(function(b){b.end()});this.executors=[]};c.clearExecutorsByEntity=function(b){for(var c=this.executors,e=0;e<c.length;e++){var f=c[e];f.entity===b&&f.end()}};c.addExecutor=function(b){this.executors.push(b)};c.createThread=function(b,c){if(!(b instanceof Array))return console.error("blocks must be array");b=new Entry.Thread(b,this);void 0===c||null===c?this._data.push(b):this._data.insert(b,c);this.changeEvent.notify();
return b};c.getThreadIndex=function(b){return this._data.indexOf(b)};c.getThreadCount=function(){return this._data.length};c.cloneThread=function(b,c){b=b.clone(this,c);this._data.push(b);return b};c.destroyThread=function(b,c){c=this._data;b=c.indexOf(b);0>b||c.splice(b,1)};c.doDestroyThread=function(b,c){c=this._data;b=c.indexOf(b);0>b||c.splice(b,1)};c.getThread=function(b){return this._data[b]};c.getThreads=function(){return this._data.map(function(b){return b})};c.getThreadsByCategory=function(b){for(var c=
[],e=0;e<this._data.length;e++){var f=this._data[e],g=f.getFirstBlock();g&&g.category===b&&c.push(f)}return c};c.toJSON=function(b,c){for(var d=this.getThreads(),f=[],g=0,h=d.length;g<h;g++)f.push(d[g].toJSON(!1,void 0,b,c));return f};c.countBlock=function(){for(var b=this.getThreads(),c=0,e=0;e<b.length;e++)c+=b[e].countBlock();return c};c.moveBy=function(b,c){for(var d=this.getThreads(),f=0,g=d.length;f<g;f++){var h=d[f].getFirstBlock();h&&h.view&&h.view.display&&h.view._moveBy(b,c,!1)}b=this.board;
b instanceof Entry.BlockMenu&&b.updateSplitters(c)};c.stringify=function(b){return JSON.stringify(this.toJSON(b))};c.dominate=function(b){b.view.setZIndex(this._maxZIndex++)};c.indexOf=function(b){return this._data.indexOf(b)};c._handleChange=function(){Entry.creationChangedEvent&&this.view&&this.view.board.constructor!==Entry.BlockMenu&&Entry.creationChangedEvent.notify()};c.hasBlockType=function(b){for(var c=this.getThreads(),e=0;e<c.length;e++)if(c[e].hasBlockType(b))return!0;return!1};c.findById=
function(b){return this._blockMap[b]};c.registerBlock=function(b){this._blockMap[b.id]=b};c.unregisterBlock=function(b){delete this._blockMap[b.id]};c.getByPointer=function(b){b=b.concat();b.splice(0,2);for(var c=this._data[b.shift()].getBlock(b.shift());b.length;){c instanceof Entry.Block||(c=c.getValueBlock());var e=b.shift(),f=b.shift();if(-1<e){c=c.statements[e];if(void 0===f)break;c=c.getBlock(f)}else-1===e&&(c=c.view.getParam(f))}return c};c.getTargetByPointer=function(b){b=b.concat();b.splice(0,
2);var c=this._data[b.shift()],e;if(1===b.length)e=c.getBlock(b.shift()-1);else for(e=c.getBlock(b.shift());b.length;){e instanceof Entry.Block||(e=e.getValueBlock());var f=b.shift(),c=b.shift();-1<f?(e=e.statements[f],e=b.length?0>c?e:e.getBlock(c):0===c?e.view.getParent():void 0===c?e:e.getBlock(c-1)):-1===f&&(e=e.view.getParam(c))}return e};c.getBlockList=function(b,c){for(var d=this.getThreads(),f=[],g=0;g<d.length;g++)f=f.concat(d[g].getBlockList(b,c));return f};c.removeBlocksByType=function(b){this.getBlockList(!1,
b).forEach(function(b){b.doDestroy()})};c.isAllThreadsInOrigin=function(){for(var b=this.getThreads(),c=b.length-1;0<=c;c--)if(!b[c].isInOrigin())return!1;return!0};c.destroy=function(){this.clear();this.destroyView()}})(Entry.Code.prototype);Entry.CodeView=function(c,b){Entry.Model(this,!1);this.code=c;this.set({board:b});this.svgThreadGroup=b.svgGroup.elem("g");this.svgThreadGroup.attr({class:"svgThreadGroup"});this.svgThreadGroup.board=b;this.svgBlockGroup=b.svgGroup.elem("g");this.svgBlockGroup.attr({class:"svgBlockGroup"});this.svgBlockGroup.board=b;b.bindCodeView(this);this.code._data.getAll().forEach(function(c){c.createView(b)});c.observe(this,"_setBoard",["board"])};
(function(c){c.schema={board:null,scrollX:0,scrollY:0};c._setBoard=function(){this.set({board:this.code.board})};c.reDraw=function(){this.code.map(function(b){b.view?b.view.reDraw():b.createView(this.board)}.bind(this))};c.destroy=function(){this.code.map(function(b){b.destroyView()})}})(Entry.CodeView.prototype);Entry.ConnectionRipple={};
(function(c){c.createDom=function(b){this.svgDom||(this._ripple=b.getBoard().svgGroup.elem("circle",{cx:0,cy:0,r:0,stroke:"#888","stroke-width":10}))};c.setView=function(b){this._ripple||this.createDom(b);var c=this._ripple,e=b.getBoard().svgGroup;c.remove();b=b.getAbsoluteCoordinate();c.attr({cx:b.x,cy:b.y});e.appendChild(c);c._startTime=new Date;return this};c.dispose=function(){var b=this,c=this._ripple,e=(new Date-c._startTime)/150;1<e?c.remove():(c.attr({r:25*e,opacity:1-e}),window.setTimeout(function(){b.dispose()},
10))}})(Entry.ConnectionRipple);Entry.Executor=function(c,b){this.scope=new Entry.Scope(c,this);this.entity=b;this._callStack=[];this.register={}};
(function(c){c.execute=function(){if(!this.isEnd()){for(var b=[];;){var c=null;b.push(this.scope.block);try{var e=this.scope.block.getSchema();e&&(c=e.func.call(this.scope,this.entity,this.scope))}catch(g){if("AsyncError"===g.name)c=Entry.STATIC.BREAK;else{var f=!1;"\ub7f0\ud0c0\uc784 \uc5d0\ub7ec"!=g.message&&(f=!0);Entry.Utils.stopProjectWithToast(this.scope,"\ub7f0\ud0c0\uc784 \uc5d0\ub7ec",f,g)}}if(this.isEnd())break;if(void 0===c||null===c||c===Entry.STATIC.PASS){if(this.scope=new Entry.Scope(this.scope.block.getNextBlock(),
this),null===this.scope.block)if(this._callStack.length){if(c=this.scope,this.scope=this._callStack.pop(),this.scope.isLooped!==c.isLooped)break}else break}else if(c!==Entry.STATIC.CONTINUE&&(c===Entry.STATIC.BREAK||this.scope===c))break}return b}};c.stepInto=function(b){b instanceof Entry.Thread||console.error("Must step in to thread");b=b.getFirstBlock();if(!b)return Entry.STATIC.BREAK;this._callStack.push(this.scope);this.scope=new Entry.Scope(b,this);return Entry.STATIC.CONTINUE};c.break=function(){this._callStack.length&&
(this.scope=this._callStack.pop());return Entry.STATIC.PASS};c.breakLoop=function(){this._callStack.length&&(this.scope=this._callStack.pop());for(;this._callStack.length&&"repeat"!==Entry.block[this.scope.block.type].class;)this.scope=this._callStack.pop();return Entry.STATIC.PASS};c.end=function(){this.scope.block=null};c.isEnd=function(){return null===this.scope.block}})(Entry.Executor.prototype);Entry.Scope=function(c,b){this.type=(this.block=c)?c.type:null;this.executor=b;this.entity=b.entity};
(function(c){c.callReturn=function(){};c.getParam=function(b){b=this.block.params[b];var c=new Entry.Scope(b,this.executor);return Entry.block[b.type].func.call(c,this.entity,c)};c.getParams=function(){var b=this;return this.block.params.map(function(c){if(c instanceof Entry.Block){var d=new Entry.Scope(c,b.executor);return Entry.block[c.type].func.call(d,b.entity,d)}return c})};c.getValue=function(b,c){b=this.block.params[this._getParamIndex(b,c)];c=new Entry.Scope(b,this.executor);return Entry.block[b.type].func.call(c,
this.entity,c)};c.getStringValue=function(b,c){return String(this.getValue(b,c))};c.getNumberValue=function(b,c){return Number(this.getValue(b))};c.getBooleanValue=function(b,c){return Number(this.getValue(b,c))?!0:!1};c.getField=function(b,c){return this.block.params[this._getParamIndex(b)]};c.getStringField=function(b,c){return String(this.getField(b))};c.getNumberField=function(b){return Number(this.getField(b))};c.getStatement=function(b,c){return this.executor.stepInto(this.block.statements[this._getStatementIndex(b,
c)])};c._getParamIndex=function(b){this._schema||(this._schema=Entry.block[this.type]);return this._schema.paramsKeyMap[b]};c._getStatementIndex=function(b){this._schema||(this._schema=Entry.block[this.type]);return this._schema.statementsKeyMap[b]};c.die=function(){this.block=null;return Entry.STATIC.BREAK}})(Entry.Scope.prototype);Entry.BlockExtension=function(c,b){};(function(c){})(Entry.BlockExtension.prototype);Entry.ExtGuide=function(c,b,d){this.blockView=b;this.block=b.block;this.model=c.model?c.model:[];this.render()};
(function(c){c.render=function(){if(this.model){var b=this.blockView.getBoard();this.svgGroup=this.blockView.svgGroup.elem("g",{class:"extension guideGroup"});this.blockView.guideSvgGroup=this.svgGroup;$(this.svgGroup).bind("mousedown touchstart",function(b){b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault()});var c=this.block.getCode();this.model[0].x=-99999;this.model[0].y=-99999;c=c.createThread(this.model);!c.view&&c.createView(b);b=c.getFirstBlock().view.clone();b.removeAttribute("transform");
this.svgGroup.appendChild(b);this.updatePos();this.block.getThread().view.setHasGuide(!0);c.destroy(!1)}};c.updatePos=function(){this.svgGroup.attr("transform",this._getTransform())};c._getTransform=function(){return"translate(0,%y)".replace("%y",this.blockView.magnet.next.y)}})(Entry.ExtGuide.prototype);Entry.ExtSideTag=function(c,b,d){this.blockView=b;this.color=c.color?c.color:"#EBC576";this.text=c.text?c.text:"";this.height=c.height?Number(c.height):31*Number(c.count);this.render();this.updatePos()};
(function(c){c.render=function(){this.svgGroup=this.blockView.svgGroup.elem("g");$(this.svgGroup).bind("mousedown touchstart",function(b){b.stopPropagation&&b.stopPropagation();b.preventDefault&&b.preventDefault()});this.path=this.svgGroup.elem("path").attr({d:"m0,2 h-9 v"+(this.height-4)+" h9",stroke:this.color,fill:"transparent","stroke-width":"3"});this.textElement=this.svgGroup.elem("text").attr({style:"white-space: pre;","font-size":"10px","font-family":"nanumBarunRegular","class":"dragNone",
fill:"#000000"});this.tspans=this.text.split("\n").map(function(b){var c=this.textElement.elem("tspan").attr({dy:"1.2em",x:"0","class":"extension sideTagTspan"});c.textContent=b;return c}.bind(this))};c.updatePos=function(){this.positionX=8*-(this.blockView.block.pointer().length-2);this.svgGroup.attr("transform","translate("+this.positionX+",0)");this.textElement.attr({y:this.height/2-12*(this.tspans.length-1)-2});var b=this.textElement.getBoundingClientRect();this.tspans.map(function(c){c.attr({x:-b.width-
14})})}})(Entry.ExtSideTag.prototype);Entry.FieldAngle=function(c,b,d){this._block=b.block;this._blockView=b;this.box=new Entry.BoxModel;this.svgGroup=null;this.position=c.position;this._contents=c;this._index=d;c=this.getValue();this.setValue(this.modValue(void 0!==c?c:90));this._CONTENT_HEIGHT=this.getContentHeight();this.renderStart()};Entry.Utils.inherit(Entry.Field,Entry.FieldAngle);
(function(c){c.renderStart=function(b,c){this.svgGroup&&$(this.svgGroup).remove();this.svgGroup=this._blockView.contentSvgGroup.elem("g",{class:"entry-input-field"});this.textElement=this.svgGroup.elem("text",{x:4,y:4,"font-size":"11px"});this._setTextValue();b=this.getTextWidth();c=this._CONTENT_HEIGHT;this._header=this.svgGroup.elem("rect",{x:0,y:(this.position&&this.position.y?this.position.y:0)-c/2,rx:3,ry:3,width:b,height:c,fill:"#fff","fill-opacity":.4});this.svgGroup.appendChild(this.textElement);
this._bindRenderOptions();this.box.set({x:0,y:0,width:b,height:c})};c.renderOptions=function(){var b=this;this._attachDisposeEvent(function(c){!0!==c&&b.applyValue();b.destroyOption(c)});this.optionGroup=Entry.Dom("input",{class:"entry-widget-input-field",parent:$("body")});this.optionGroup.val(this.value);this.optionGroup.on("mousedown touchstart",function(b){b.stopPropagation()});this.optionGroup.on("keyup",function(c){var d=c.keyCode||c.which;b.applyValue(c);-1<[13,27].indexOf(d)&&b.destroyOption(void 0,
!0)});var c=this.getAbsolutePosFromDocument();c.y-=this.box.height/2;this.optionGroup.css({height:this._CONTENT_HEIGHT,left:c.x,top:c.y,width:b.box.width});this.svgOptionGroup=this.appendSvgOptionGroup();this.svgOptionGroup.elem("circle",{x:0,y:0,r:49,class:"entry-field-angle-circle"});$(this.svgOptionGroup).on("mousedown touchstart",function(c){c.stopPropagation();b._updateByCoord(c)});this._dividerGroup=this.svgOptionGroup.elem("g");for(c=0;360>c;c+=15)this._dividerGroup.elem("line",{x1:49,y1:0,
x2:49-(0===c%45?10:5),y2:0,transform:"rotate("+c+", 0, 0)",class:"entry-angle-divider"});c=this.getAbsolutePosFromBoard();c.x+=this.box.width/2;c.y=c.y+this.box.height/2+49+1;this.svgOptionGroup.attr({class:"entry-field-angle",transform:"translate("+c.x+","+c.y+")"});$(this.svgOptionGroup).bind("mousemove touchmove",this._updateByCoord.bind(this));$(this.svgOptionGroup).bind("mouseup touchend",this.destroyOption.bind(this));this.updateGraph();this.optionGroup.focus();this.optionGroup.select()};c._updateByCoord=
function(b){b.originalEvent&&b.originalEvent.touches&&(b=b.originalEvent.touches[0]);b=[b.clientX,b.clientY];var c=this.getAbsolutePosFromDocument();this.optionGroup.val(this.modValue(function(b,c){var d=c[0]-b[0];b=c[1]-b[1]-49-1;c=Math.atan(-b/d);c=Entry.toDegrees(c);c=90-c;0>d?c+=180:0<b&&(c+=360);return 15*Math.round(c/15)}([c.x+this.box.width/2,c.y+this.box.height/2+1],b)));this.applyValue()};c.updateGraph=function(){this._fillPath&&this._fillPath.remove();var b=Entry.toRadian(this.getValue()),
c=49*Math.sin(b),e=-49*Math.cos(b),b=b>Math.PI?1:0;this._fillPath=this.svgOptionGroup.elem("path",{d:"M 0,0 v -49 A 49,49 0 %LARGE 1 %X,%Y z".replace("%X",c).replace("%Y",e).replace("%LARGE",b),class:"entry-angle-fill-area"});this.svgOptionGroup.appendChild(this._dividerGroup);this._indicator&&this._indicator.remove();this._indicator=this.svgOptionGroup.elem("line",{x1:0,y1:0,x2:c,y2:e});this._indicator.attr({class:"entry-angle-indicator"})};c.applyValue=function(){var b=this.optionGroup.val();Entry.Utils.isNumber(b)&&
""!==b&&(b=this.modValue(b),this.setValue(b),this.updateGraph(),this.textElement.textContent=this.getValue(),this.optionGroup&&this.optionGroup.val(b),this.resize())};c.resize=function(){var b=this.getTextWidth();this._header.attr({width:b});this.optionGroup&&this.optionGroup.css({width:b});this.box.set({width:b});this._block.view.dAlignContent()};c.getTextWidth=function(){return this.textElement?this.textElement.getBoundingClientRect().width+8:8};c.getText=function(){var b=this.getValue(),c=/&value/gm;
return c.test(b)?b.replace(c,""):b+"\u00b0"};c.modValue=function(b){return/&value/gm.test(b)?b:b%360};c.destroyOption=function(b,c){this.disposeEvent&&(Entry.disposeEvent.detach(this.disposeEvent),delete this.documentDownEvent);this.optionGroup&&(this.optionGroup.remove(),delete this.optionGroup);this.svgOptionGroup&&(this.svgOptionGroup.remove(),delete this.svgOptionGroup);this._setTextValue();!0!==b&&this.command(c)};c._setTextValue=function(){var b=this._convert(this.getText(),this.getValue());
this.textElement.textContent=b}})(Entry.FieldAngle.prototype);Entry.FieldColor=function(c,b,d){this._block=b.block;this._blockView=b;this.box=new Entry.BoxModel;this.svgGroup=null;this._contents=c;this._index=d;this._position=c.position;this._fontSize=c.fontSize||b.getSkeleton().fontSize||12;this._color=c.color||this._block.getSchema().fontColor||b.getSkeleton().color||"black";this.key=c.key;this.setValue(this.getValue()||"#FF0000");this._CONTENT_HEIGHT=this.getContentHeight();this._CONTENT_WIDTH=this.getContentWidth();this.renderStart(b)};
Entry.Utils.inherit(Entry.Field,Entry.FieldColor);
(function(c){c.renderStart=function(){this.svgGroup&&$(this.svgGroup).remove();this.svgGroup=this._blockView.contentSvgGroup.elem("g",{class:"entry-field-color"});if(this._blockView.renderMode===Entry.BlockView.RENDER_MODE_TEXT){var b=this.svgGroup.elem("rect",{x:0,rx:3,ry:3,fill:"#fff","fill-opacity":.4});this.textElement=this.svgGroup.elem("text").attr({style:"white-space: pre;","font-size":this._fontSize+"px","font-family":"nanumBarunRegular","class":"dragNone",fill:this._color});this.textElement.textContent=
this._convert(this.getValue(),this.getValue());var c=this.textElement.getBoundingClientRect(),e=c.width+12,f=c.height;b.attr({y:-f/2,width:e,height:f});this.textElement.attr({x:6,y:.25*c.height})}else{var f=this._CONTENT_HEIGHT,e=this._CONTENT_WIDTH,b=this._position,g,h;b?(g=b.x||0,h=b.y||0):(g=0,h=-f/2);this._header=this.svgGroup.elem("rect",{x:g,y:h,width:e,height:f,fill:this.getValue()})}this._bindRenderOptions();this.box.set({x:g,y:h,width:e,height:f})};c.renderOptions=function(){var b=this;this._attachDisposeEvent();
var c=Entry.FieldColor.getWidgetColorList();this.optionGroup=Entry.Dom("table",{class:"entry-widget-color-table",parent:$("body")});for(var e=0;e<c.length;e++)for(var f=Entry.Dom("tr",{class:"entry-widget-color-row",parent:this.optionGroup}),g=0;g<c[e].length;g++){var h=Entry.Dom("td",{class:"entry-widget-color-cell",parent:f}),k=c[e][g];h.css({"background-color":k});h.attr({"data-color-value":k});(function(c,d){c.mousedown(function(b){b.stopPropagation()});c.mouseup(function(c){b.applyValue(d);b.destroyOption();
b._selectBlockView()})})(h,k)}c=this.getAbsolutePosFromDocument();c.y+=this.box.height/2+1;this.optionGroup.css({left:c.x,top:c.y})};c.applyValue=function(b){this.value!=b&&(this.setValue(b),this._header?this._header.attr({fill:b}):this.textElement&&(this.textElement.textContent=this._convert(this.getValue(),this.getValue())))};c.getContentWidth=function(){return Entry.isMobile()?20:14.5}})(Entry.FieldColor.prototype);
Entry.FieldColor.getWidgetColorList=function(){return["#FFFFFF #CCCCCC #C0C0C0 #999999 #666666 #333333 #000000".split(" "),"#FFCCCC #FF6666 #FF0000 #CC0000 #990000 #660000 #330000".split(" "),"#FFCC99 #FF9966 #FF9900 #FF6600 #CC6600 #993300 #663300".split(" "),"#FFFF99 #FFFF66 #FFCC66 #FFCC33 #CC9933 #996633 #663333".split(" "),"#FFFFCC #FFFF33 #FFFF00 #FFCC00 #999900 #666600 #333300".split(" "),"#99FF99 #66FF99 #33FF33 #33CC00 #009900 #006600 #003300".split(" "),"#99FFFF #33FFFF #66CCCC #00CCCC #339999 #336666 #003333".split(" "),
"#CCFFFF #66FFFF #33CCFF #3366FF #3333FF #000099 #000066".split(" "),"#CCCCFF #9999FF #6666CC #6633FF #6609CC #333399 #330099".split(" "),"#FFCCFF #FF99FF #CC66CC #CC33CC #993399 #663366 #330033".split(" ")]};Entry.FieldDropdown=function(c,b,d){this._block=b.block;this._blockView=b;this.box=new Entry.BoxModel;this.svgGroup=null;this._contents=c;this._noArrow=c.noArrow;this._arrowColor=c.arrowColor;this._index=d;this.setValue(this.getValue());this._CONTENT_HEIGHT=this.getContentHeight(c.dropdownHeight);this._FONT_SIZE=this.getFontSize(c.fontSize);this._ROUND=c.roundValue||3;this.renderStart()};Entry.Utils.inherit(Entry.Field,Entry.FieldDropdown);
(function(c){c.renderStart=function(){this.svgGroup&&$(this.svgGroup).remove();this instanceof Entry.FieldDropdownDynamic&&this._updateValue();var b=this._blockView,c=Entry.isMobile(),e=c?33:20,c=c?24:10;this.svgGroup=b.contentSvgGroup.elem("g",{class:"entry-field-dropdown"});this.textElement=this.svgGroup.elem("text",{x:5});this._setTextValue();b=this.textElement.getBBox();this.textElement.attr({style:"white-space: pre;","font-size":+this._FONT_SIZE+"px",y:.23*b.height});e=this.textElement.getBoundingClientRect().width+
e;this._noArrow&&(e-=c);c=this._CONTENT_HEIGHT;this._header=this.svgGroup.elem("rect",{width:e,height:c,y:-c/2,rx:this._ROUND,ry:this._ROUND,fill:"#fff","fill-opacity":.4});this.svgGroup.appendChild(this.textElement);this._noArrow||(b=this.getArrow(),this._arrow=this.svgGroup.elem("polygon",{points:b.points,fill:b.color,stroke:b.color,transform:"translate("+(e-b.width-5)+","+-b.height/2+")"}));this._bindRenderOptions();this.box.set({x:0,y:0,width:e,height:c})};c.resize=function(){var b=Entry.isMobile(),
c=b?33:20,b=b?24:10,c=this.textElement.getBoundingClientRect().width+c;this._noArrow?c-=b:(b=this.getArrow(),this._arrow.attr({transform:"translate("+(c-b.width-5)+","+-b.height/2+")"}));this._header.attr({width:c});this.box.set({width:c});this._block.view.dAlignContent()};c.renderOptions=function(){var b=this;this._attachDisposeEvent();this.optionGroup=Entry.Dom("ul",{class:"entry-widget-dropdown",parent:$("body")});this.optionGroup.bind("mousedown touchstart",function(b){b.stopPropagation()});for(var c=
this._contents.options,e=0,f=c.length;e<f;e++){var g=c[e],h=g[0]=this._convert(g[0],g[1]),g=g[1],k=Entry.Dom("li",{class:"rect",parent:this.optionGroup}),l=Entry.Dom("span",{class:"left",parent:k});Entry.Dom("span",{class:"right",parent:k}).text(h);this.getValue()==g&&l.text("\u2713");(function(c,d){c.bind("mousedown touchstart",function(b){b.stopPropagation()});c.bind("mouseup touchend",function(c){c.stopPropagation();b.applyValue(d);b.destroyOption(void 0,!0);b._selectBlockView()})})(k,g)}this._position();
this.optionDomCreated()};c._position=function(){var b=this.getAbsolutePosFromDocument();b.y+=this.box.height/2;var c=$(document).height(),e=this.optionGroup.height(),f=this.optionGroup.width()+30;if(c<b.y+e+30){var c=this._blockView.getBoard().svgDom.height(),g=this.getAbsolutePosFromBoard();this._blockView.y<c/2?(b.x+=this.box.width/2-f/2,c-=g.y+30,this.optionGroup.height(c)):(b.x+=this.box.width+1,c-=c-g.y,c-30<e&&this.optionGroup.height(c-c%30),b.y-=this.optionGroup.height())}else b.x+=this.box.width/
2-f/2;this.optionGroup.addClass("rendered");this.optionGroup.css({left:b.x,top:b.y,width:f});this.optionGroup.find(".right").width(f-20)};c.applyValue=function(b){this.value!=b&&this.setValue(b);this._setTextValue();this.resize()};c.getTextByValue=function(b){var c=/&value/gm;if(c.test(b))return b.replace(c,"");if(!b&&"number"!==typeof b||"null"===b)return Lang.Blocks.no_target;for(var c=this._contents.options,e=0,f=c.length;e<f;e++){var g=c[e];if(g[1]==b)return g[0]}return this._shouldReturnValue(b)?
b:Lang.Blocks.no_target};c.getContentHeight=function(b){return b=b||this._blockView.getSkeleton().dropdownHeight||(Entry.isMobile()?22:16)};c.getArrow=function(){var b=Entry.isMobile();return{color:this._arrowColor||this._blockView._schema.color,points:b?"0,0 19,0 9.5,13":"0,0 6.4,0 3.2,4.2",height:b?13:4.2,width:b?19:6.4}};c._setTextValue=function(){var b=this.getTextByValue(this.getValue());this.textElement.textContent=this._convert(b,this.getValue())};c.getTextValue=function(){return this.textElement.textContent}})(Entry.FieldDropdown.prototype);Entry.FieldDropdownDynamic=function(c,b,d){this._block=b.block;this._blockView=b;this.box=new Entry.BoxModel;this.svgGroup=null;this._contents=c;this._index=d;this._arrowColor=c.arrowColor;d=this._contents.menuName;Entry.Utils.isFunction(d)?this._menuGenerator=d:this._menuName=d;this._CONTENT_HEIGHT=this.getContentHeight(c.dropdownHeight);this._FONT_SIZE=this.getFontSize(c.fontSize);this._ROUND=c.roundValue||3;this.renderStart(b);b&&b.getBoard()&&b.getBoard().workspace&&b.getBoard().workspace.changeEvent&&
b.getBoard().workspace.changeEvent.attach(this,this._updateValue)};Entry.Utils.inherit(Entry.FieldDropdown,Entry.FieldDropdownDynamic);
(function(c){c.constructor=Entry.FieldDropDownDynamic;c._updateValue=function(){var b=this._block.getCode().object,c=[];Entry.container&&(c=this._menuName?Entry.container.getDropdownList(this._menuName,b):this._menuGenerator());this._contents.options=c;b=this.getValue();if(this._blockView.isInBlockMenu||!b||"null"==b)b=0!==c.length?c[0][1]:null;this._updateOptions();this.setValue(b)};c.renderOptions=function(){var b=this;this._attachDisposeEvent();this.optionGroup=Entry.Dom("ul",{class:"entry-widget-dropdown",
parent:$("body")});this.optionGroup.bind("mousedown touchstart",function(b){b.stopPropagation()});var c;c=this._menuName?Entry.container.getDropdownList(this._contents.menuName):this._menuGenerator();this._contents.options=c;for(var e=0;e<c.length;e++){var f=c[e],g=f[0]=this._convert(f[0],f[1]),f=f[1],h=Entry.Dom("li",{class:"rect",parent:this.optionGroup}),k=Entry.Dom("span",{class:"left",parent:h});Entry.Dom("span",{class:"right",parent:h}).text(g);this.getValue()==f&&k.text("\u2713");(function(c,
d){c.mousedown(function(b){b.stopPropagation()});c.mouseup(function(c){c.stopPropagation();b.applyValue(d);b.destroyOption(void 0,!0);b._selectBlockView()})})(h,f)}this._position();this.optionDomCreated()}})(Entry.FieldDropdownDynamic.prototype);Entry.FieldImage=function(c,b,d){this._block=b.block;this._blockView=b;this._content=c;this.box=new Entry.BoxModel;this._size=c.size;this._highlightColor=c.highlightColor?c.highlightColor:"#F59900";this._position=c.position;this._imgElement=this._path=this.svgGroup=null;this._index=d;this.setValue(null);this.renderStart()};Entry.Utils.inherit(Entry.Field,Entry.FieldImage);
(function(c){c.renderStart=function(){this.svgGroup&&this.svgGroup.remove();this._imgUrl=this._block.deletable===Entry.Block.DELETABLE_FALSE_LIGHTEN?this._content.img.replace(".png","_un.png"):this._content.img;this.svgGroup=this._blockView.contentSvgGroup.elem("g");this._imgElement=this.svgGroup.elem("image",{href:this._imgUrl,x:0,y:-.5*this._size,width:this._size,height:this._size});this.box.set({x:this._size,y:0,width:this._size,height:this._size})}})(Entry.FieldImage.prototype);Entry.FieldIndicator=function(c,b,d){this._block=b.block;this._blockView=b;this.box=new Entry.BoxModel;this._size=c.size;c.img?this._imgUrl=this._block.deletable===Entry.Block.DELETABLE_FALSE_LIGHTEN?c.img.replace(".png","_un.png"):c.img:c.color&&(this._color=c.color);this._boxMultiplier=c.boxMultiplier||2;this._highlightColor=c.highlightColor?c.highlightColor:"#F59900";this._position=c.position;this._index=d;this._imgElement=this._path=this.svgGroup=null;this.setValue(null);this.renderStart()};
Entry.Utils.inherit(Entry.Field,Entry.FieldIndicator);
(function(c){c.renderStart=function(){this.svgGroup&&this.svgGroup.remove();this.svgGroup=this._blockView.contentSvgGroup.elem("g");this._imgUrl&&(this._imgElement=this.svgGroup.elem("image",{href:Entry.mediaFilePath+this._imgUrl,x:this._position?-1*this._size:0,y:-1*this._size,width:2*this._size,height:2*this._size}));var b="m %s,-%s a %s,%s 0 1,1 -0.1,0 z".replace(/%s/gi,this._size);this._path=this.svgGroup.elem("path",{d:b,x:this._position?-1*this._size:0,y:-1*this._size,stroke:"none",fill:this._color?
this._color:"none"});this.box.set({width:this._size*this._boxMultiplier+(this._position?-this._size:0),height:this._size*this._boxMultiplier})};c.enableHighlight=function(){var b=this._path.getTotalLength(),c=this._path;this._path.attr({stroke:this._highlightColor,strokeWidth:2,"stroke-linecap":"round","stroke-dasharray":b+" "+b,"stroke-dashoffset":b});setInterval(function(){c.attr({"stroke-dashoffset":b}).animate({"stroke-dashoffset":0},300)},1400,mina.easeout);setTimeout(function(){setInterval(function(){c.animate({"stroke-dashoffset":-b},
300)},1400,mina.easeout)},500)}})(Entry.FieldIndicator.prototype);Entry.Keyboard={};Entry.FieldKeyboard=function(c,b,d){this._block=b.block;this._blockView=b;this.box=new Entry.BoxModel;this.svgGroup=null;this.position=c.position;this._contents=c;this._index=d;this.setValue(String(this.getValue()));this._CONTENT_HEIGHT=this.getContentHeight();this._optionVisible=!1;this.renderStart(b)};Entry.Utils.inherit(Entry.Field,Entry.FieldKeyboard);
(function(c){c.renderStart=function(){this.svgGroup&&$(this.svgGroup).remove();this.svgGroup=this._blockView.contentSvgGroup.elem("g",{class:"entry-input-field"});this.textElement=this.svgGroup.elem("text").attr({x:5,y:4,"font-size":"11px"});this._setTextValue();var b=this.getTextWidth()+1,c=this._CONTENT_HEIGHT;this._header=this.svgGroup.elem("rect",{x:0,y:(this.position&&this.position.y?this.position.y:0)-c/2,width:b,height:c,rx:3,ry:3,fill:"#fff","fill-opacity":.4});this.svgGroup.appendChild(this.textElement);
this._bindRenderOptions();this.box.set({x:0,y:0,width:b,height:c})};c.renderOptions=function(){Entry.keyPressed&&(this.keyPressed=Entry.keyPressed.attach(this,this._keyboardControl));var b=this;this._optionVisible=!0;this._attachDisposeEvent();var c=this.getAbsolutePosFromDocument();c.x-=this.box.width/2;c.y+=this.box.height/2+1;this.optionGroup=Entry.Dom("img",{class:"entry-widget-keyboard-input",parent:$("body")});this.optionGroup.on("load",function(){b.optionDomCreated()});this.optionGroup[0].src=
Entry.mediaFilePath+"/media/keyboard_workspace.png";this.optionGroup.on("mousedown",function(b){b.stopPropagation()});this.optionGroup.css({left:c.x,top:c.y})};c.destroyOption=function(b){this.disposeEvent&&(Entry.disposeEvent.detach(this.disposeEvent),delete this.disposeEvent);this.optionGroup&&(this.optionGroup.remove(),delete this.optionGroup);this._optionVisible=!1;this.command(b);this.keyPressed&&(Entry.keyPressed.detach(this.keyPressed),delete this.keyPressed)};c._keyboardControl=function(b){b.stopPropagation();
if(this._optionVisible){b=b.keyCode;var c=Entry.getKeyCodeMap()[b];void 0!==c&&this.applyValue(c,b,!0)}};c.applyValue=function(b,c,e){this.setValue(String(c));this.destroyOption(e);this._setTextValue();this.resize()};c.resize=function(){var b=this.getTextWidth()+1;this._header.attr({width:b});this.box.set({width:b});this._blockView.dAlignContent()};c.getTextWidth=function(){return this.textElement.getComputedTextLength()+10};c.destroy=function(){this.destroyOption();Entry.keyPressed&&this.keyPressed&&
Entry.keyPressed.detach(this.keyPressed)};c._setTextValue=function(){var b=Entry.getKeyCodeMap()[this.getValue()],b=this._convert(b,this.getValue());this.textElement.textContent=void 0===b?Lang.Blocks.no_target:b}})(Entry.FieldKeyboard.prototype);Entry.FieldLineBreak=function(c,b,d){this._block=b.block;this._blockView=b;this._index=d;this.box=new Entry.BoxModel;this.setValue(null);this.renderStart()};Entry.Utils.inherit(Entry.Field,Entry.FieldLineBreak);(function(c){c.renderStart=function(){};c.align=function(b){var c=this._blockView;0!==c._statements.length&&this.box.set({y:(c._statements[b].height||20)+Math.max(c.contentHeight%1E3,30)})}})(Entry.FieldLineBreak.prototype);Entry.FieldOutput=function(c,b,d,e,f){Entry.Model(this,!1);this._blockView=b;this._block=b.block;this._valueBlock=null;this.box=new Entry.BoxModel;this.changeEvent=new Entry.Event(this);this._index=d;this.contentIndex=f;this._content=c;this.acceptType=c.accept;this.view=this;this.svgGroup=null;this._position=c.position;this.box.observe(b,"dAlignContent",["width","height"]);this.observe(this,"_updateBG",["magneting"],!1);this.renderStart(b.getBoard(),e)};Entry.Utils.inherit(Entry.Field,Entry.FieldOutput);
(function(c){c.schema={magneting:!1};c.renderStart=function(b,c){this.svgGroup||(this.svgGroup=this._blockView.contentSvgGroup.elem("g"));this.view=this;this._nextGroup=this.svgGroup;this.box.set({x:0,y:0,width:0,height:20});var d=this.getValue();d&&!d.view&&(d.setThread(this),d.createView(b,c));this._updateValueBlock(d);this._valueBlock&&this._valueBlock.view._startContentRender(this.renderMode);this._blockView.getBoard().constructor==Entry.BlockMenu&&this._valueBlock&&this._valueBlock.view.removeControl()};
c.align=function(b,c,e){var d=this.svgGroup;this._position&&(this._position.x&&(b=this._position.x),this._position.y&&(c=this._position.y));var g=this._valueBlock;g&&(c=-.5*g.view.height);g="translate("+b+","+c+")";void 0===e||e?d.animate({transform:g},300,mina.easeinout):d.attr({transform:g});this.box.set({x:b,y:c})};c.calcWH=function(){var b=this._valueBlock;b&&b.view?(b=b.view,this.box.set({width:b.width,height:b.height})):this.box.set({width:0,height:20})};c.calcHeight=c.calcWH;c.destroy=function(){this._valueBlock&&
this._valueBlock.destroyView()};c._inspectBlock=function(){};c._setValueBlock=function(b){if(b!=this._valueBlock||!this._valueBlock)return this._valueBlock=b,this.setValue(b),b&&b.setThread(this),this._valueBlock};c.spliceBlock=function(){this._updateValueBlock()};c._updateValueBlock=function(b){b instanceof Entry.Block||(b=void 0);b&&b===this._valueBlock?this.calcWH():(this._sizeObserver&&this._sizeObserver.destroy(),this._posObserver&&this._posObserver.destroy(),(b=this._setValueBlock(b))?(b=b.view,
b.bindPrev(),this._posObserver=b.observe(this,"_updateValueBlock",["x","y"],!1),this._sizeObserver=b.observe(this,"calcWH",["width","height"])):this.calcWH(),this._blockView.dAlignContent())};c.getPrevBlock=function(b){return this._valueBlock===b?this:null};c.getNextBlock=function(){return null};c.requestAbsoluteCoordinate=function(b){b=this._blockView;var c=b.contentPos;b=b.getAbsoluteCoordinate();b.x+=this.box.x+c.x;b.y+=this.box.y+c.y;return b};c.dominate=function(){this._blockView.dominate()};
c.isGlobal=function(){return!1};c.separate=function(b){this.getCode().createThread([b]);this.changeEvent.notify()};c.getCode=function(){return this._block.thread.getCode()};c.cut=function(b){return this._valueBlock===b?(delete this._valueBlock,[b]):null};c._updateBG=function(){this.magneting?this._bg=this.svgGroup.elem("path",{d:"m -4,-12 h 3 l 2,2 0,3 3,0 1,1 0,12 -1,1 -3,0 0,3 -2,2 h -3 ",fill:"#fff",stroke:"#fff","fill-opacity":.7,transform:"translate(0,"+(this._valueBlock?12:0)+")"}):this._bg&&
(this._bg.remove(),delete this._bg)};c.replace=function(b){var c=this._valueBlock;c&&(c.view._toGlobalCoordinate(),b.getTerminateOutputBlock().view._contents[1].replace(c));this._updateValueBlock(b);b.view._toLocalCoordinate(this.svgGroup);this.calcWH()};c.setParent=function(b){this._parent=b};c.getParent=function(){return this._parent};c.getThread=function(){return this};c.getValueBlock=function(){return this._valueBlock};c.pointer=function(b){b=b||[];b.unshift(this._index);b.unshift(Entry.PARAM);
return this._block.pointer(b)}})(Entry.FieldOutput.prototype);Entry.FieldStatement=function(c,b,d){Entry.Model(this,!1);this._blockView=b;this.block=b.block;this.view=this;this._index=d;this.acceptType=c.accept;this._thread=this.statementSvgGroup=this.svgGroup=null;this._position=c.position;this._events=[];this.observe(b,"alignContent",["height"],!1);this.observe(this,"_updateBG",["magneting"],!1);this.renderStart(b.getBoard())};
(function(c){c.schema={x:0,y:0,width:100,height:20,magneting:!1};c.magnet={next:{x:0,y:0}};c.renderStart=function(b){this.svgGroup=this._blockView.statementSvgGroup.elem("g");this._nextGroup=this.statementSvgGroup=this.svgGroup.elem("g");this._initThread(b);this._board=b};c._initThread=function(b){var c=this.getValue();this._thread=c;c.createView(b);c.view.setParent(this);if(b=c.getFirstBlock())b.view._toLocalCoordinate(this.statementSvgGroup),this.firstBlock=b;b=c.changeEvent.attach(this,this.calcHeight);
var e=c.changeEvent.attach(this,this.checkTopBlock);this._events.push([c.changeEvent,b]);this._events.push([c.changeEvent,e]);this.calcHeight()};c.align=function(b,c,e){e=void 0===e?!0:e;var d=this.svgGroup;this._position&&(this._position.x&&(b=this._position.x),this._position.y&&(c=this._position.y));var g="translate("+b+","+c+")";this.set({x:b,y:c});e?d.animate({transform:g},300,mina.easeinout):d.attr({transform:g})};c.calcHeight=function(){var b=this._thread.view.requestPartHeight(null);this.set({height:b})};
c.getValue=function(){return this.block.statements[this._index]};c.requestAbsoluteCoordinate=function(){var b=this._blockView.getAbsoluteCoordinate();b.x+=this.x;b.y+=this.y;return b};c.dominate=function(){this._blockView.dominate()};c.destroy=function(){for(;this._events.length;){var b=this._events.pop();b[0].detach(b[1])}};c._updateBG=function(){if(this._board.dragBlock&&this._board.dragBlock.dragInstance){if(this.magneting){var b=this._board.dragBlock.getShadow(),c=this.requestAbsoluteCoordinate(),
c="translate("+c.x+","+c.y+")";$(b).attr({transform:c,display:"block"});this._clonedShadow=b;this.background&&(this.background.remove(),this.nextBackground.remove(),delete this.background,delete this.nextBackground);b=this._board.dragBlock.getBelowHeight();this.statementSvgGroup.attr({transform:"translate(0,"+b+")"});this.set({height:this.height+b})}else this._clonedShadow&&(this._clonedShadow.attr({display:"none"}),delete this._clonedShadow),b=this.originalHeight,void 0!==b&&(this.background&&(this.background.remove(),
this.nextBackground.remove(),delete this.background,delete this.nextBackground),delete this.originalHeight),this.statementSvgGroup.attr({transform:"translate(0,0)"}),this.calcHeight();(b=this.block.thread.changeEvent)&&b.notify()}};c.insertTopBlock=function(b){this._posObserver&&this._posObserver.destroy();var c=this.firstBlock;(this.firstBlock=b)&&b.doInsert(this._thread);return c};c.getNextBlock=function(){return this.firstBlock};c.checkTopBlock=function(){var b=this._thread.getFirstBlock();b&&
this.firstBlock!==b?(this.firstBlock=b,b.view.bindPrev(this),b._updatePos()):b||(this.firstBlock=null)};c.pointer=function(b){b=b||[];b.unshift(this._index);return this.block.pointer(b)}})(Entry.FieldStatement.prototype);Entry.FieldText=function(c,b,d){this._block=b.block;this._blockView=b;this._index=d;this.box=new Entry.BoxModel;this._fontSize=c.fontSize||b.getSkeleton().fontSize||12;this._color=c.color||this._block.getSchema().fontColor||b.getSkeleton().color||"white";this._align=c.align||"left";this._text=this.getValue()||c.text;this.setValue(null);this.textElement=null;this.renderStart(b)};Entry.Utils.inherit(Entry.Field,Entry.FieldText);
(function(c){c.renderStart=function(){this.svgGroup&&$(this.svgGroup).remove();this.svgGroup=this._blockView.contentSvgGroup.elem("g");this._text=this._text.replace(/(\r\n|\n|\r)/gm," ");this.textElement=this.svgGroup.elem("text").attr({style:"white-space: pre;","font-size":this._fontSize+"px","font-family":"nanumBarunRegular","class":"dragNone",fill:this._color});this.textElement.textContent=this._text;var b=0,c=this.textElement.getBoundingClientRect();"center"==this._align&&(b=-c.width/2);this.textElement.attr({x:b,
y:.25*c.height});this.box.set({x:0,y:0,width:c.width,height:c.height})}})(Entry.FieldText.prototype);Entry.FieldTextInput=function(c,b,d){this._blockView=b;this._block=b.block;this.box=new Entry.BoxModel;this.svgGroup=null;this.position=c.position;this._contents=c;this._isClearBG=c.clearBG||!1;this._index=d;this.value=this.getValue()||"";this._CONTENT_HEIGHT=this.getContentHeight();this.renderStart()};Entry.Utils.inherit(Entry.Field,Entry.FieldTextInput);
(function(c){c.renderStart=function(){this.svgGroup&&$(this.svgGroup).remove();this.svgGroup=this._blockView.contentSvgGroup.elem("g");this.svgGroup.attr({class:"entry-input-field"});this.textElement=this.svgGroup.elem("text",{x:3,y:4,fill:this._contents.color||"black","font-size":"12px"});this._setTextValue();var b=this.getTextWidth(),c=this._CONTENT_HEIGHT;this._header=this.svgGroup.elem("rect",{width:b,height:c,y:(this.position&&this.position.y?this.position.y:0)-c/2,rx:3,ry:3,fill:"#fff","fill-opacity":this._isClearBG?
0:.4});this._isClearBG&&$(this._header).css({stroke:"none"});this.svgGroup.appendChild(this.textElement);this._bindRenderOptions();this.box.set({x:0,y:0,width:b,height:c})};c.renderOptions=function(){var b=this;this._attachDisposeEvent(function(c){!0!==c&&b.applyValue();b.destroyOption(c)});this.optionGroup=Entry.Dom("input",{class:"entry-widget-input-field",parent:$("body")});this.optionGroup.val(this.getValue());this.optionGroup.on("mousedown",function(b){b.stopPropagation()});this.optionGroup.on("keyup",
function(c){var d=c.keyCode||c.which;b.applyValue(c);-1<[13,27].indexOf(d)&&b.destroyOption(void 0,!0)});var c=this.getAbsolutePosFromDocument();c.y-=this.box.height/2;this.optionGroup.css({height:this._CONTENT_HEIGHT,left:c.x,top:c.y,width:b.box.width});this.optionGroup.focus();c=this.optionGroup[0];c.setSelectionRange(0,c.value.length,"backward");this.optionDomCreated()};c.applyValue=function(b){b=this.optionGroup.val();this.setValue(b);this._setTextValue();this.resize()};c.resize=function(){var b=
this.getTextWidth();this._header.attr({width:b});this.optionGroup.css({width:b});this.box.set({width:b});this._blockView.dAlignContent()};c.getTextWidth=function(){return this.textElement.getBoundingClientRect().width+6+2};c._setTextValue=function(){this.textElement.textContent=this._convert(this.getValue(),this.getValue())}})(Entry.FieldTextInput.prototype);Entry.GlobalSvg={};
(function(c){c.DONE=0;c._inited=!1;c.REMOVE=1;c.RETURN=2;c.createDom=function(){if(!this.inited){$("#globalSvgSurface").remove();$("#globalSvg").remove();var b=$("body");this._container=Entry.Dom("div",{classes:["globalSvgSurface","entryRemove"],id:"globalSvgSurface",parent:b});this.svgDom=Entry.Dom($('<svg id="globalSvg" width="10" height="10"version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'),{parent:this._container});this.svg=Entry.SVG("globalSvg");this.top=this.left=0;this._inited=!0}};
c.setView=function(b,c){if(b!=this._view&&!b.block.isReadOnly()&&b.movable)return this._view=b,this._mode=c,c!==Entry.Workspace.MODE_VIMBOARD&&b.set({visible:!1}),this.draw(),this.show(),this.align(),this.position(),!0};c.draw=function(){var b=this._view;this._svg&&this.remove();var c=this._mode==Entry.Workspace.MODE_VIMBOARD,e=b.svgGroup.getBBox();this.svgDom.attr({width:Math.round(e.width+4)+"px",height:Math.round(e.height+4)+"px"});this.svgGroup=Entry.SVG.createElement(b.svgGroup.cloneNode(!0),
{opacity:1});this.svg.appendChild(this.svgGroup);c&&(b=$(this.svgGroup),b.find("g").css({filter:"none"}),b.find("path, rect, polygon").velocity({opacity:0},{duration:500}),b.find("text").velocity({fill:"#000000"},{duration:530}))};c.remove=function(){this.svgGroup&&(this.svgGroup.remove(),delete this.svgGroup,delete this._view,delete this._offsetX,delete this._offsetY,delete this._startX,delete this._startY,this.hide())};c.align=function(){var b=this._view.getSkeleton().box(this._view).offsetX||0,
c=this._view.getSkeleton().box(this._view).offsetY||0,b=-1*b+1,c=-1*c+1;this._offsetX=b;this._offsetY=c;this.svgGroup.attr({transform:"translate("+b+","+c+")"})};c.show=function(){this._container.removeClass("entryRemove")};c.hide=function(){this._container.addClass("entryRemove")};c.position=function(){var b=this._view;if(b){var c=b.getAbsoluteCoordinate(),b=b.getBoard().offset();this.left=c.x+b.left-this._offsetX;this.top=c.y+b.top-this._offsetY;this._applyDomPos(this.left,this.top)}};c.adjust=
function(b,c){b=this.left+(b||0);c=this.top+(c||0);if(b!==this.left||c!==this.top)this.left=b,this.top=c,this._applyDomPos(this.left,this.top)};c._applyDomPos=function(b,c){this.svgDom.css({transform:"translate3d("+b+"px,"+c+"px, 0px)"})};c.terminateDrag=function(b){var c=Entry.mouseCoordinate,e=b.getBoard(),f=e.workspace.blockMenu,g=f.offset().left,h=f.offset().top,k=f.visible?f.svgDom.width():0;return c.y>e.offset().top-20&&c.x>g+k?this.DONE:c.y>h&&c.x>g&&f.visible?b.block.isDeletable()?this.REMOVE:
this.RETURN:this.RETURN};c.addControl=function(b){this.onMouseDown.apply(this,arguments)};c.onMouseDown=function(b){function c(b){var c=b.pageX;b=b.pageY;var d=f.left+(c-f._startX),e=f.top+(b-f._startY);f._applyDomPos(d,e);f._startX=c;f._startY=b;f.left=d;f.top=e}function e(b){$(document).unbind(".block")}this._startY=b.pageY;var f=this;b.stopPropagation();b.preventDefault();var g=$(document);g.bind("mousemove.block",c);g.bind("mouseup.block",e);g.bind("touchmove.block",c);g.bind("touchend.block",
e);this._startX=b.pageX;this._startY=b.pageY}})(Entry.GlobalSvg);Entry.Mutator=function(){};(function(c){c.mutate=function(b,c,e){b=Entry.block[b];void 0===b.changeEvent&&(b.changeEvent=new Entry.Event);void 0===b.paramsBackupEvent&&(b.paramsBackupEvent=new Entry.Event);void 0===b.destroyParamsBackupEvent&&(b.destroyParamsBackupEvent=new Entry.Event);b.template=c.template;b.params=c.params;b.changeEvent.notify(1,e)}})(Entry.Mutator);(function(c){})(Entry.Mutator.prototype);Entry.RenderView=function(c,b,d,e){this._align=b||"CENTER";c="string"===typeof c?$("#"+c):$(c);if("DIV"!==c.prop("tagName"))return console.error("Dom is not div element");this.view=c;this.viewOnly=!0;this.suffix="renderView";this._scale=void 0===d?1:d;this._parserType=e;this.disableMouseEvent=this.visible=!0;this._svgId="renderView_"+(new Date).getTime();this._generateView();this.offset=this.svgDom.offset();this._minBlockOffsetX=0;this._setSize();this.svg=Entry.SVG(this._svgId,this.svgDom[0]);Entry.Utils.addFilters(this.svg,
this.suffix);this.svg&&(this.svgGroup=this.svg.elem("g"),this.svgThreadGroup=this.svgGroup.elem("g"),this.svgThreadGroup.board=this,this.svgBlockGroup=this.svgGroup.elem("g"),this.svgBlockGroup.board=this)};
(function(c){c.schema={code:null,dragBlock:null,closeBlock:null,selectedBlockView:null};c._generateView=function(){this.renderViewContainer=Entry.Dom("div",{"class":"renderViewContainer",parent:this.view});this.svgDom=Entry.Dom($('<svg id="'+this._svgId+'" class="renderView" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>'),{parent:this.renderViewContainer})};c.changeCode=function(b,c){if(!(b instanceof Entry.Code))return console.error("You must inject code instance");this.code=b;this.svg||
(this.svg=Entry.SVG(this._svgId,this.svgDom[0]),this.svgGroup=this.svg.elem("g"),this.svgThreadGroup=this.svgGroup.elem("g"),this.svgThreadGroup.board=this,this.svgBlockGroup=this.svgGroup.elem("g"),this.svgBlockGroup.board=this);b.createView(this);this.align();this.resize(c)};c.align=function(){var b=this.code.getThreads();if(b&&0!==b.length){for(var c=0,e=this._getHorizontalPadding(),f=0,g=b.length;f<g;f++){var h=b[f].getFirstBlock().view,k=h.svgGroup.getBBox().height,l=0,m=$(h.svgGroup).find(".extension");
if(m)for(var q=0;q<m.length;q++)var n=parseFloat(m[q].getAttribute("x")),l=Math.min(l,n);this._minBlockOffsetX=Math.min(this._minBlockOffsetX,h.offsetX);h._moveTo(e-l-h.offsetX,c-h.offsetY,!1);c+=k+15}this._setSize()}};c.hide=function(){this.view.addClass("entryRemove")};c.show=function(){this.view.removeClass("entryRemove")};c._setSize=function(){this.svgDom&&(this._svgWidth=this.svgDom.width(),this.offset=this.svgDom.offset());this.svgGroup&&(this._bBox=this.svgGroup.getBBox())};c.bindCodeView=
function(b){this.svgBlockGroup.remove();this.svgThreadGroup.remove();this.svgBlockGroup=b.svgBlockGroup;this.svgThreadGroup=b.svgThreadGroup;this.svgGroup.appendChild(this.svgThreadGroup);this.svgGroup.appendChild(this.svgBlockGroup)};c.resize=function(b){function c(){this._setSize();var b=Math.round(this._bBox.width),c=Math.round(this._bBox.height);0!==b&&0!==c&&($(this.svg).css({width:b+this._getHorizontalPadding()-this._minBlockOffsetX,height:c+5}),setTimeout(function(){var d=this.svgGroup.getBBox();
Math.round(d.width)===b&&Math.round(d.height)===c||this.resize()}.bind(this),1E3))}this.svg&&this._bBox&&(b?c.call(this):setTimeout(function(){c.call(this)}.bind(this),0))};c.setDomSize=function(b){this.svgBlockGroup&&this.svgBlockGroup.attr("transform","scale(1)");this.code.view.reDraw();this.align();this.resize(b);1!==this._scale&&window.setTimeout(function(){this.svgBlockGroup.attr("transform","scale(%scale)".replace("%scale",this._scale));this.align();this.resize()}.bind(this),0)};c._getHorizontalPadding=
function(){var b={LEFT:20,LEFT_MOST:0}[this._align];return void 0!==b?b:this.svgDom.width()/2};c.getBlockSyntax=function(b,c){var d=null;2===c&&(this._parser||(this._parser=new Entry.Parser(null,null)),this._parser.setParser(1,this._parserType),this._parser._execParser&&(d=this._parser._execParser.searchSyntax(b)));return d};c.setParserType=function(b){this._parserType=b}})(Entry.RenderView.prototype);Entry.skinContainer={_skins:{}};
(function(c){c.skinSchema={type:"",condition:[]};c.loadSkins=function(b){b.map(this.addSkin.bind(this))};c.addSkin=function(b){var c=function(){};c.prototype=Entry.block[b.type];var c=new c,e;for(e in b)c[e]=b[e];this._skins[b.type]||(this._skins[b.type]=[]);this._skins[b.type].push(c)};c.getSkin=function(b){if(this._skins[b.type])for(var c=this._skins[b.type],e=0;e<c.length;e++){var f=c[e];if(!f.conditions||!f.conditions.length)return f;for(var g=0;g<f.conditions.length;g++){var h=f.conditions[g];
if(b.getDataByPointer(h.pointer)!==h.value)break;if(g===f.conditions.length-1)return f}}return Entry.block[b.type]}})(Entry.skinContainer);Entry.ThreadView=function(c,b){Entry.Model(this,!1);this.thread=c;this.svgGroup=b.svgThreadGroup.elem("g");this.parent=this.board=b;this._hasGuide=!1};
(function(c){c.schema={height:0,zIndex:0};c.destroy=function(){this.svgGroup.remove()};c.setParent=function(b){this.parent=b};c.getParent=function(){return this.parent};c.renderText=function(){for(var b=this.thread.getBlocks(),c=0;c<b.length;c++)b[c].view.renderText()};c.renderBlock=function(){for(var b=this.thread.getBlocks(),c=0;c<b.length;c++)b[c].view.renderBlock()};c.requestAbsoluteCoordinate=function(b){var c=this.thread.getBlocks(),e=c.shift(),f={x:0,y:0};for(this.parent instanceof Entry.Board||
this.parent instanceof Entry.BlockMenu||(f=this.parent.requestAbsoluteCoordinate());e&&e.view!==b&&e.view;)e=e.view,f.x+=e.x+e.magnet.next.x,f.y+=e.y+e.magnet.next.y,e=c.shift();return f};c.requestPartHeight=function(b,c){c=this.thread.getBlocks();for(var d=c.pop(),f=b?b.magnet.next?b.magnet.next.y:b.height:0;d&&d.view!==b&&d.view;)d=d.view,f=d.magnet.next?f+d.magnet.next.y:f+d.height,d.dragMode===Entry.DRAG_MODE_DRAG&&(f=0),d=c.pop();return f};c.getMagnet=function(b){return{getBoundingClientRect:function(){var b=
this.parent.requestAbsoluteCoordinate(),c=this.board.relativeOffset;return{top:b.y+c.top-20,left:b.x+c.left-20,width:40,height:40}}.bind(this)}};c.dominate=function(){!this._hasGuide&&this.parent.dominate(this.thread)};c.isGlobal=function(){return this.parent instanceof Entry.Board};c.reDraw=function(){for(var b=this.thread._data,c=b.length-1;0<=c;c--){var e=b[c];e.view?e.view.reDraw():e.createView(this.thread._code.view.board)}};c.setZIndex=function(b){this.set({zIndex:b})};c.setHasGuide=function(b){this._hasGuide=
b}})(Entry.ThreadView.prototype);Entry.Vim=function(c,b){c="string"===typeof c?$("#"+c):$(c);if("DIV"!==c.prop("tagName"))return console.error("Dom is not div element");this._parentView=c;this.createDom(c);this._parser=new Entry.Parser(null,null,this.codeMirror);Entry.addEventListener("hwChanged",function(b){Entry.hw.hwModule?(b=Entry.hw.hwModule.name,b=b[0].toUpperCase()+b.slice(1),"ArduinoExt"==b&&(b="Arduino"),Entry.Vim.PYTHON_IMPORT_HW="\nimport "+b+"\n",Entry.Vim.INEDITABLE_LINE_PY=4):(Entry.Vim.PYTHON_IMPORT_HW="",Entry.Vim.INEDITABLE_LINE_PY=
3)})};Entry.Vim.MAZE_MODE=1;Entry.Vim.WORKSPACE_MODE=2;Entry.Vim.TEXT_TYPE_JS=0;Entry.Vim.TEXT_TYPE_PY=1;Entry.Vim.PARSER_TYPE_JS_TO_BLOCK=0;Entry.Vim.PARSER_TYPE_PY_TO_BLOCK=1;Entry.Vim.PARSER_TYPE_BLOCK_TO_JS=2;Entry.Vim.PARSER_TYPE_BLOCK_TO_PY=3;Entry.Vim.INEDITABLE_LINE_PY=3;Entry.Vim.PYTHON_IMPORT_ENTRY="import Entry";Entry.Vim.PYTHON_IMPORT_HW="";
(function(c){c.createDom=function(b){function c(b){var c=b.block;if(c){var d=f.codeMirror,e=f.getCodeToText(c,Entry.Parser.PARSE_BLOCK);d.display.dragFunctions.leave(b);d.display.scroller.dispatchEvent(Entry.Utils.createMouseEvent("mousedown",b));var e=e.split("\n"),g=e.length-1,h=f.doc.getCursor().line;e.forEach(function(b,c){c!=g&&(b+="\n");d.replaceSelection(b)});c.statements&&c.statements.length&&(h++,d.setCursor(h),d.getLine(h)&&(d.replaceSelection("\n"),d.setCursor(h)),CodeMirror.commands.indentAuto(d));
d.display.scroller.dispatchEvent(Entry.Utils.createMouseEvent("mouseup",b))}}function e(b){f.codeMirror.display.dragFunctions.over(b)}var f;this.view=Entry.Dom("div",{parent:b,class:"entryVimBoard"});this.codeMirror=CodeMirror(this.view[0],{lineNumbers:!0,value:"",mode:{name:"javascript",globalVars:!0},theme:"default",indentUnit:4,indentWithTabs:!0,styleActiveLine:!0,extraKeys:{"Ctrl-Space":"autocomplete",Tab:function(b){var c=Array(b.getOption("indentUnit")+1).join(" ");b.replaceSelection(c)}},lint:!0,
viewportMargin:10});var g=Entry.Utils.debounce(function(){Entry.isTextMode&&this.codeMirror.showHint({completeSingle:!1,globalScope:this._getAssistScope()})}.bind(this),250);this.codeMirror.on("keydown",function(b,c){Entry&&Entry.keyPressed&&Entry.keyPressed.notify(c,!0);1===c.key.length&&g()}.bind(this));var h=Entry.Utils.debounce(function(){var b=this.codeMirror.display&&this.codeMirror.display.input?this.codeMirror.display.input:void 0;b&&b.composing&&(b.poll(),b.composing.range.clear(),b.composing=
null)}.bind(this),250);this.codeMirror.on("keyup",function(b,c){h();"Backspace"===c.key&&g()}.bind(this));this.doc=this.codeMirror.getDoc();f=this;b=this.view[0];b.removeEventListener("dragEnd",c);b.removeEventListener("dragOver",e);b.addEventListener("dragEnd",c);b.addEventListener("dragOver",e)};c.hide=function(){this.view.addClass("entryRemove");this.view.remove()};c.show=function(){this.view.removeClass("entryRemove");this._parentView.append(this.view)};c.clearText=function(){this.codeMirror.setValue("")};
c.textToCode=function(b){b===Entry.Vim.TEXT_TYPE_JS?(this._parserType=Entry.Vim.PARSER_TYPE_JS_TO_BLOCK,this._parser.setParser(this._mode,this._parserType,this.codeMirror)):b===Entry.Vim.TEXT_TYPE_PY&&(this._parserType=Entry.Vim.PARSER_TYPE_PY_TO_BLOCK,this._parser.setParser(this._mode,this._parserType,this.codeMirror));b=this.codeMirror.getValue();return this._parser.parse(b)};c.codeToText=function(b,c){c&&(this._mode=c.runType);var d=c.textType;this._oldParserType=c.textType;d===Entry.Vim.TEXT_TYPE_JS?
(this._parserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_JS,this._oldParserType!=this._parserType&&this._parser.setParser(this._mode,this._parserType,this.codeMirror),this._oldParserType=this._parserType):d===Entry.Vim.TEXT_TYPE_PY&&(this._parserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_PY,this._oldParserType!=this._parserType&&this._parser.setParser(this._mode,this._parserType,this.codeMirror),this._oldParserType=this._parserType);Entry.playground&&(this._currentObject=Entry.playground.object);this._parser._hasDeclaration=
!1;d==Entry.Vim.TEXT_TYPE_PY?this._currentObject?(c="# "+this._currentObject.name+" \uc624\ube0c\uc81d\ud2b8\uc758 \ud30c\uc774\uc120 \ucf54\ub4dc",b=this._parser.parse(b,Entry.Parser.PARSE_GENERAL),d===Entry.Vim.TEXT_TYPE_PY&&(b=c.concat("\n\n").concat(Entry.Vim.PYTHON_IMPORT_ENTRY).concat(Entry.Vim.PYTHON_IMPORT_HW).concat("\n\n").concat(b)),this.codeMirror.setValue(b),d==Entry.Vim.TEXT_TYPE_PY&&this.codeMirror.getDoc().markText({line:0,ch:0},{line:Entry.Vim.INEDITABLE_LINE_PY,ch:0},{readOnly:!0,
inclusiveLeft:!0}),d=this.codeMirror.getDoc(),d.setCursor({line:d.lastLine()-1})):this.clearText():d==Entry.Vim.TEXT_TYPE_JS&&(b=this._parser.parse(b,Entry.Parser.PARSE_GENERAL),this.codeMirror.setValue(b),d=this.codeMirror.getDoc(),d.setCursor({line:d.lastLine()-1}));Entry.isTextMode&&(this._parser._onRunError=!1)};c.getCodeToText=function(b,c){var d=this.workspace.oldTextType;d===Entry.Vim.TEXT_TYPE_JS?(this._parserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_JS,this._parser.setParser(this._mode,this._parserType,
this.codeMirror)):d===Entry.Vim.TEXT_TYPE_PY&&(this._parserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_PY,this._parser.setParser(this._mode,this._parserType,this.codeMirror));return c?this._parser.parse(b,c):this._parser.parse(b,Entry.Parser.PARSE_SYNTAX)};c.setParserAvailableCode=function(b,c){this._parser.setAvailableCode(b,c)};c.getBlockSyntax=function(b){var c=null,e=this.workspace.oldTextType;e===Entry.Vim.TEXT_TYPE_JS?(this._parserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_JS,this._parser.setParser(this._mode,
this._parserType,this.codeMirror)):e===Entry.Vim.TEXT_TYPE_PY&&(this._parserType=Entry.Vim.PARSER_TYPE_BLOCK_TO_PY,this._parser.setParser(this._mode,this._parserType,this.codeMirror));this._parser._execParser&&(c=this._parser._execParser.searchSyntax(b));return c};c._getAssistScope=function(){var b=this._parser._execParser;if(b&&b.getAssistScope)return b.getAssistScope()}})(Entry.Vim.prototype);Entry.Xml={};Entry.Xml.isTypeOf=function(c,b){return b.getAttribute("type")==c};Entry.Xml.getNextBlock=function(c){c=c.childNodes;for(var b=0;b<c.length;b++)if("NEXT"==c[b].tagName.toUpperCase())return c[b].children[0];return null};Entry.Xml.getStatementBlock=function(c,b){var d=b.getElementsByTagName("statement");if(!d.length)return b;for(var e in d)if(d[e].getAttribute("name")==c)return d[e].children[0];return null};
Entry.Xml.getParentLoop=function(c){for(;;){if(!c)return null;if((c=c.parentNode)&&"STATEMENT"==c.tagName.toUpperCase())return c.parentNode;if(c)c=c.parentNode;else return null}};Entry.Xml.getParentIterateLoop=function(c){for(;;){if(!c)return null;if((c=c.parentNode)&&c.getAttribute("type")&&"REPEAT"==c.getAttribute("type").toUpperCase().substr(0,6))return c;if(!c)return null}};Entry.Xml.getParentBlock=function(c){return(c=c.parentNode)?c.parentNode:null};
Entry.Xml.callReturn=function(c){var b=Entry.Xml.getNextBlock(c);return b?b:Entry.Xml.getParentLoop(c)};Entry.Xml.isRootBlock=function(c){};Entry.Xml.getValue=function(c,b){b=b.childNodes;if(!b.length)return null;for(var d in b)if("VALUE"==b[d].tagName.toUpperCase()&&b[d].getAttribute("name")==c)return b[d].children[0];return null};
Entry.Xml.getNumberValue=function(c,b,d){d=d.childNodes;if(!d.length)return null;for(var e in d)if(d[e].tagName&&"VALUE"==d[e].tagName.toUpperCase()&&d[e].getAttribute("name")==b)return Number(Entry.Xml.operate(c,d[e].children[0]));return null};Entry.Xml.getField=function(c,b){b=b.childNodes;if(!b.length)return null;for(var d in b)if(b[d].tagName&&"FIELD"==b[d].tagName.toUpperCase()&&b[d].getAttribute("name")==c)return b[d].textContent};
Entry.Xml.getNumberField=function(c,b){b=b.childNodes;if(!b.length)return null;for(var d in b)if("FIELD"==b[d].tagName.toUpperCase()&&b[d].getAttribute("name")==c)return Number(b[d].textContent)};Entry.Xml.getBooleanValue=function(c,b,d){d=d.getElementsByTagName("value");if(!d.length)return null;for(var e in d)if(d[e].getAttribute("name")==b)return Entry.Xml.operate(c,d[e].children[0]);return null};Entry.Xml.operate=function(c,b){return Entry.block[b.getAttribute("type")](c,b)};
Entry.Xml.cloneBlock=function(c,b,d){var e=c.cloneNode();c.parentNode&&"xml"!=c.parentNode.tagName&&Entry.Xml.cloneBlock(c.parentNode,e,"parent");for(var f=0;f<c.childNodes.length;f++){var g=c.childNodes[f];g instanceof Text?e.textContent=g.textContent:"parent"==d?e.appendChild(b):e.appendChild(Entry.Xml.cloneBlock(g,e,"child"))}return e};Entry.Youtube=function(c){this.generateView(c)};p=Entry.Youtube.prototype;p.init=function(c){this.youtubeHash=c;this.generateView()};p.generateView=function(c){var b=Entry.createElement("div");b.addClass("entryContainerMovieWorkspace");b.addClass("entryRemove");this.movieContainer=b;b=Entry.createElement("iframe");b.setAttribute("id","youtubeIframe");b.setAttribute("allowfullscreen","");b.setAttribute("frameborder",0);b.setAttribute("src","https://www.youtube.com/embed/"+c);this.movieFrame=b;this.movieContainer.appendChild(b)};
p.getView=function(){return this.movieContainer};p.resize=function(){var c=document.getElementsByClassName("propertyContent")[0],b=document.getElementById("youtubeIframe"),c=c.offsetWidth;b.width=c+"px";b.height=9*c/16+"px"};
